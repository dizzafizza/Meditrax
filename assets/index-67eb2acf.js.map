{"version":3,"file":"index-67eb2acf.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../node_modules/@remix-run/router/dist/router.js","../../node_modules/react-router/dist/index.js","../../node_modules/react-router-dom/dist/index.js","../../node_modules/goober/dist/goober.modern.js","../../node_modules/react-hot-toast/dist/index.mjs","../../node_modules/lucide-react/dist/esm/defaultAttributes.js","../../node_modules/lucide-react/dist/esm/createLucideIcon.js","../../node_modules/lucide-react/dist/esm/icons/activity.js","../../node_modules/lucide-react/dist/esm/icons/alert-circle.js","../../node_modules/lucide-react/dist/esm/icons/alert-triangle.js","../../node_modules/lucide-react/dist/esm/icons/bar-chart-3.js","../../node_modules/lucide-react/dist/esm/icons/bell.js","../../node_modules/lucide-react/dist/esm/icons/brain.js","../../node_modules/lucide-react/dist/esm/icons/calendar.js","../../node_modules/lucide-react/dist/esm/icons/check-circle-2.js","../../node_modules/lucide-react/dist/esm/icons/check-circle.js","../../node_modules/lucide-react/dist/esm/icons/check.js","../../node_modules/lucide-react/dist/esm/icons/chevron-left.js","../../node_modules/lucide-react/dist/esm/icons/chevron-right.js","../../node_modules/lucide-react/dist/esm/icons/clock.js","../../node_modules/lucide-react/dist/esm/icons/coffee.js","../../node_modules/lucide-react/dist/esm/icons/database.js","../../node_modules/lucide-react/dist/esm/icons/download.js","../../node_modules/lucide-react/dist/esm/icons/file-text.js","../../node_modules/lucide-react/dist/esm/icons/filter.js","../../node_modules/lucide-react/dist/esm/icons/heart.js","../../node_modules/lucide-react/dist/esm/icons/home.js","../../node_modules/lucide-react/dist/esm/icons/lightbulb.js","../../node_modules/lucide-react/dist/esm/icons/loader.js","../../node_modules/lucide-react/dist/esm/icons/mail.js","../../node_modules/lucide-react/dist/esm/icons/map-pin.js","../../node_modules/lucide-react/dist/esm/icons/menu.js","../../node_modules/lucide-react/dist/esm/icons/message-square.js","../../node_modules/lucide-react/dist/esm/icons/minus.js","../../node_modules/lucide-react/dist/esm/icons/more-vertical.js","../../node_modules/lucide-react/dist/esm/icons/package.js","../../node_modules/lucide-react/dist/esm/icons/pen.js","../../node_modules/lucide-react/dist/esm/icons/phone.js","../../node_modules/lucide-react/dist/esm/icons/pill.js","../../node_modules/lucide-react/dist/esm/icons/play.js","../../node_modules/lucide-react/dist/esm/icons/plus.js","../../node_modules/lucide-react/dist/esm/icons/refresh-cw.js","../../node_modules/lucide-react/dist/esm/icons/save.js","../../node_modules/lucide-react/dist/esm/icons/search.js","../../node_modules/lucide-react/dist/esm/icons/settings.js","../../node_modules/lucide-react/dist/esm/icons/shield-alert.js","../../node_modules/lucide-react/dist/esm/icons/shield.js","../../node_modules/lucide-react/dist/esm/icons/shopping-cart.js","../../node_modules/lucide-react/dist/esm/icons/star.js","../../node_modules/lucide-react/dist/esm/icons/target.js","../../node_modules/lucide-react/dist/esm/icons/toggle-left.js","../../node_modules/lucide-react/dist/esm/icons/toggle-right.js","../../node_modules/lucide-react/dist/esm/icons/trash-2.js","../../node_modules/lucide-react/dist/esm/icons/trending-down.js","../../node_modules/lucide-react/dist/esm/icons/trending-up.js","../../node_modules/lucide-react/dist/esm/icons/upload.js","../../node_modules/lucide-react/dist/esm/icons/user.js","../../node_modules/lucide-react/dist/esm/icons/x-circle.js","../../node_modules/lucide-react/dist/esm/icons/x.js","../../node_modules/lucide-react/dist/esm/icons/zap.js","../../src/utils/helpers.ts","../../src/components/layout/Sidebar.tsx","../../node_modules/zustand/esm/vanilla.mjs","../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim.production.js","../../node_modules/use-sync-external-store/shim/index.js","../../node_modules/use-sync-external-store/cjs/use-sync-external-store-shim/with-selector.production.js","../../node_modules/use-sync-external-store/shim/with-selector.js","../../node_modules/zustand/esm/index.mjs","../../node_modules/zustand/esm/middleware.mjs","../../src/services/dependencePreventionService.ts","../../src/services/medicationDatabase.ts","../../src/store/index.ts","../../src/components/layout/Header.tsx","../../src/components/layout/Layout.tsx","../../src/components/ui/MultiplePillQuickLog.tsx","../../src/components/ui/QuickMedicationLog.tsx","../../src/components/ui/TodaysMedications.tsx","../../src/utils/fixKratomData.ts","../../src/components/ui/WithdrawalSymptomTracker.tsx","../../src/pages/Dashboard.tsx","../../node_modules/react-hook-form/dist/index.esm.mjs","../../src/components/modals/MedicationModal.tsx","../../src/components/modals/TaperingPlanModal.tsx","../../src/components/ui/ConfirmDialog.tsx","../../src/components/ui/MultiplePillSelector.tsx","../../src/components/modals/SideEffectReportModal.tsx","../../src/components/modals/WithdrawalTrackingModal.tsx","../../src/components/modals/DependencyPreventionModal.tsx","../../src/pages/Medications.tsx","../../src/services/enhancedInventoryService.ts","../../src/services/smartRefillService.ts","../../src/components/modals/InventoryConfigModal.tsx","../../src/components/ui/EnhancedInventoryDashboard.tsx","../../src/pages/Inventory.tsx","../../src/pages/Calendar.tsx","../../src/components/ui/ErrorBoundary.tsx","../../src/pages/Analytics.tsx","../../src/components/ui/ExportModal.tsx","../../src/components/ui/ImportModal.tsx","../../src/pages/Settings.tsx","../../src/components/modals/ReminderModal.tsx","../../src/services/smartAdherenceService.ts","../../src/pages/Reminders.tsx","../../src/pages/Reports.tsx","../../src/pages/HealthProfile.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","/**\n * @remix-run/router v1.23.0\n *\n * Copyright (c) Remix Software Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\n////////////////////////////////////////////////////////////////////////////////\n//#region Types and Constants\n////////////////////////////////////////////////////////////////////////////////\n/**\n * Actions represent the type of change to a location value.\n */\nvar Action;\n(function (Action) {\n  /**\n   * A POP indicates a change to an arbitrary index in the history stack, such\n   * as a back or forward navigation. It does not describe the direction of the\n   * navigation, only that the current index changed.\n   *\n   * Note: This is the default action for newly created history objects.\n   */\n  Action[\"Pop\"] = \"POP\";\n  /**\n   * A PUSH indicates a new entry being added to the history stack, such as when\n   * a link is clicked and a new page loads. When this happens, all subsequent\n   * entries in the stack are lost.\n   */\n  Action[\"Push\"] = \"PUSH\";\n  /**\n   * A REPLACE indicates the entry at the current index in the history stack\n   * being replaced by a new one.\n   */\n  Action[\"Replace\"] = \"REPLACE\";\n})(Action || (Action = {}));\nconst PopStateEventType = \"popstate\";\n/**\n * Memory history stores the current location in memory. It is designed for use\n * in stateful non-browser environments like tests and React Native.\n */\nfunction createMemoryHistory(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  let {\n    initialEntries = [\"/\"],\n    initialIndex,\n    v5Compat = false\n  } = options;\n  let entries; // Declare so we can access from createMemoryLocation\n  entries = initialEntries.map((entry, index) => createMemoryLocation(entry, typeof entry === \"string\" ? null : entry.state, index === 0 ? \"default\" : undefined));\n  let index = clampIndex(initialIndex == null ? entries.length - 1 : initialIndex);\n  let action = Action.Pop;\n  let listener = null;\n  function clampIndex(n) {\n    return Math.min(Math.max(n, 0), entries.length - 1);\n  }\n  function getCurrentLocation() {\n    return entries[index];\n  }\n  function createMemoryLocation(to, state, key) {\n    if (state === void 0) {\n      state = null;\n    }\n    let location = createLocation(entries ? getCurrentLocation().pathname : \"/\", to, state, key);\n    warning(location.pathname.charAt(0) === \"/\", \"relative pathnames are not supported in memory history: \" + JSON.stringify(to));\n    return location;\n  }\n  function createHref(to) {\n    return typeof to === \"string\" ? to : createPath(to);\n  }\n  let history = {\n    get index() {\n      return index;\n    },\n    get action() {\n      return action;\n    },\n    get location() {\n      return getCurrentLocation();\n    },\n    createHref,\n    createURL(to) {\n      return new URL(createHref(to), \"http://localhost\");\n    },\n    encodeLocation(to) {\n      let path = typeof to === \"string\" ? parsePath(to) : to;\n      return {\n        pathname: path.pathname || \"\",\n        search: path.search || \"\",\n        hash: path.hash || \"\"\n      };\n    },\n    push(to, state) {\n      action = Action.Push;\n      let nextLocation = createMemoryLocation(to, state);\n      index += 1;\n      entries.splice(index, entries.length, nextLocation);\n      if (v5Compat && listener) {\n        listener({\n          action,\n          location: nextLocation,\n          delta: 1\n        });\n      }\n    },\n    replace(to, state) {\n      action = Action.Replace;\n      let nextLocation = createMemoryLocation(to, state);\n      entries[index] = nextLocation;\n      if (v5Compat && listener) {\n        listener({\n          action,\n          location: nextLocation,\n          delta: 0\n        });\n      }\n    },\n    go(delta) {\n      action = Action.Pop;\n      let nextIndex = clampIndex(index + delta);\n      let nextLocation = entries[nextIndex];\n      index = nextIndex;\n      if (listener) {\n        listener({\n          action,\n          location: nextLocation,\n          delta\n        });\n      }\n    },\n    listen(fn) {\n      listener = fn;\n      return () => {\n        listener = null;\n      };\n    }\n  };\n  return history;\n}\n/**\n * Browser history stores the location in regular URLs. This is the standard for\n * most web apps, but it requires some configuration on the server to ensure you\n * serve the same app at multiple URLs.\n *\n * @see https://github.com/remix-run/history/tree/main/docs/api-reference.md#createbrowserhistory\n */\nfunction createBrowserHistory(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  function createBrowserLocation(window, globalHistory) {\n    let {\n      pathname,\n      search,\n      hash\n    } = window.location;\n    return createLocation(\"\", {\n      pathname,\n      search,\n      hash\n    },\n    // state defaults to `null` because `window.history.state` does\n    globalHistory.state && globalHistory.state.usr || null, globalHistory.state && globalHistory.state.key || \"default\");\n  }\n  function createBrowserHref(window, to) {\n    return typeof to === \"string\" ? to : createPath(to);\n  }\n  return getUrlBasedHistory(createBrowserLocation, createBrowserHref, null, options);\n}\n/**\n * Hash history stores the location in window.location.hash. This makes it ideal\n * for situations where you don't want to send the location to the server for\n * some reason, either because you do cannot configure it or the URL space is\n * reserved for something else.\n *\n * @see https://github.com/remix-run/history/tree/main/docs/api-reference.md#createhashhistory\n */\nfunction createHashHistory(options) {\n  if (options === void 0) {\n    options = {};\n  }\n  function createHashLocation(window, globalHistory) {\n    let {\n      pathname = \"/\",\n      search = \"\",\n      hash = \"\"\n    } = parsePath(window.location.hash.substr(1));\n    // Hash URL should always have a leading / just like window.location.pathname\n    // does, so if an app ends up at a route like /#something then we add a\n    // leading slash so all of our path-matching behaves the same as if it would\n    // in a browser router.  This is particularly important when there exists a\n    // root splat route (<Route path=\"*\">) since that matches internally against\n    // \"/*\" and we'd expect /#something to 404 in a hash router app.\n    if (!pathname.startsWith(\"/\") && !pathname.startsWith(\".\")) {\n      pathname = \"/\" + pathname;\n    }\n    return createLocation(\"\", {\n      pathname,\n      search,\n      hash\n    },\n    // state defaults to `null` because `window.history.state` does\n    globalHistory.state && globalHistory.state.usr || null, globalHistory.state && globalHistory.state.key || \"default\");\n  }\n  function createHashHref(window, to) {\n    let base = window.document.querySelector(\"base\");\n    let href = \"\";\n    if (base && base.getAttribute(\"href\")) {\n      let url = window.location.href;\n      let hashIndex = url.indexOf(\"#\");\n      href = hashIndex === -1 ? url : url.slice(0, hashIndex);\n    }\n    return href + \"#\" + (typeof to === \"string\" ? to : createPath(to));\n  }\n  function validateHashLocation(location, to) {\n    warning(location.pathname.charAt(0) === \"/\", \"relative pathnames are not supported in hash history.push(\" + JSON.stringify(to) + \")\");\n  }\n  return getUrlBasedHistory(createHashLocation, createHashHref, validateHashLocation, options);\n}\nfunction invariant(value, message) {\n  if (value === false || value === null || typeof value === \"undefined\") {\n    throw new Error(message);\n  }\n}\nfunction warning(cond, message) {\n  if (!cond) {\n    // eslint-disable-next-line no-console\n    if (typeof console !== \"undefined\") console.warn(message);\n    try {\n      // Welcome to debugging history!\n      //\n      // This error is thrown as a convenience, so you can more easily\n      // find the source for a warning that appears in the console by\n      // enabling \"pause on exceptions\" in your JavaScript debugger.\n      throw new Error(message);\n      // eslint-disable-next-line no-empty\n    } catch (e) {}\n  }\n}\nfunction createKey() {\n  return Math.random().toString(36).substr(2, 8);\n}\n/**\n * For browser-based histories, we combine the state and key into an object\n */\nfunction getHistoryState(location, index) {\n  return {\n    usr: location.state,\n    key: location.key,\n    idx: index\n  };\n}\n/**\n * Creates a Location object with a unique key from the given Path\n */\nfunction createLocation(current, to, state, key) {\n  if (state === void 0) {\n    state = null;\n  }\n  let location = _extends({\n    pathname: typeof current === \"string\" ? current : current.pathname,\n    search: \"\",\n    hash: \"\"\n  }, typeof to === \"string\" ? parsePath(to) : to, {\n    state,\n    // TODO: This could be cleaned up.  push/replace should probably just take\n    // full Locations now and avoid the need to run through this flow at all\n    // But that's a pretty big refactor to the current test suite so going to\n    // keep as is for the time being and just let any incoming keys take precedence\n    key: to && to.key || key || createKey()\n  });\n  return location;\n}\n/**\n * Creates a string URL path from the given pathname, search, and hash components.\n */\nfunction createPath(_ref) {\n  let {\n    pathname = \"/\",\n    search = \"\",\n    hash = \"\"\n  } = _ref;\n  if (search && search !== \"?\") pathname += search.charAt(0) === \"?\" ? search : \"?\" + search;\n  if (hash && hash !== \"#\") pathname += hash.charAt(0) === \"#\" ? hash : \"#\" + hash;\n  return pathname;\n}\n/**\n * Parses a string URL path into its separate pathname, search, and hash components.\n */\nfunction parsePath(path) {\n  let parsedPath = {};\n  if (path) {\n    let hashIndex = path.indexOf(\"#\");\n    if (hashIndex >= 0) {\n      parsedPath.hash = path.substr(hashIndex);\n      path = path.substr(0, hashIndex);\n    }\n    let searchIndex = path.indexOf(\"?\");\n    if (searchIndex >= 0) {\n      parsedPath.search = path.substr(searchIndex);\n      path = path.substr(0, searchIndex);\n    }\n    if (path) {\n      parsedPath.pathname = path;\n    }\n  }\n  return parsedPath;\n}\nfunction getUrlBasedHistory(getLocation, createHref, validateLocation, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  let {\n    window = document.defaultView,\n    v5Compat = false\n  } = options;\n  let globalHistory = window.history;\n  let action = Action.Pop;\n  let listener = null;\n  let index = getIndex();\n  // Index should only be null when we initialize. If not, it's because the\n  // user called history.pushState or history.replaceState directly, in which\n  // case we should log a warning as it will result in bugs.\n  if (index == null) {\n    index = 0;\n    globalHistory.replaceState(_extends({}, globalHistory.state, {\n      idx: index\n    }), \"\");\n  }\n  function getIndex() {\n    let state = globalHistory.state || {\n      idx: null\n    };\n    return state.idx;\n  }\n  function handlePop() {\n    action = Action.Pop;\n    let nextIndex = getIndex();\n    let delta = nextIndex == null ? null : nextIndex - index;\n    index = nextIndex;\n    if (listener) {\n      listener({\n        action,\n        location: history.location,\n        delta\n      });\n    }\n  }\n  function push(to, state) {\n    action = Action.Push;\n    let location = createLocation(history.location, to, state);\n    if (validateLocation) validateLocation(location, to);\n    index = getIndex() + 1;\n    let historyState = getHistoryState(location, index);\n    let url = history.createHref(location);\n    // try...catch because iOS limits us to 100 pushState calls :/\n    try {\n      globalHistory.pushState(historyState, \"\", url);\n    } catch (error) {\n      // If the exception is because `state` can't be serialized, let that throw\n      // outwards just like a replace call would so the dev knows the cause\n      // https://html.spec.whatwg.org/multipage/nav-history-apis.html#shared-history-push/replace-state-steps\n      // https://html.spec.whatwg.org/multipage/structured-data.html#structuredserializeinternal\n      if (error instanceof DOMException && error.name === \"DataCloneError\") {\n        throw error;\n      }\n      // They are going to lose state here, but there is no real\n      // way to warn them about it since the page will refresh...\n      window.location.assign(url);\n    }\n    if (v5Compat && listener) {\n      listener({\n        action,\n        location: history.location,\n        delta: 1\n      });\n    }\n  }\n  function replace(to, state) {\n    action = Action.Replace;\n    let location = createLocation(history.location, to, state);\n    if (validateLocation) validateLocation(location, to);\n    index = getIndex();\n    let historyState = getHistoryState(location, index);\n    let url = history.createHref(location);\n    globalHistory.replaceState(historyState, \"\", url);\n    if (v5Compat && listener) {\n      listener({\n        action,\n        location: history.location,\n        delta: 0\n      });\n    }\n  }\n  function createURL(to) {\n    // window.location.origin is \"null\" (the literal string value) in Firefox\n    // under certain conditions, notably when serving from a local HTML file\n    // See https://bugzilla.mozilla.org/show_bug.cgi?id=878297\n    let base = window.location.origin !== \"null\" ? window.location.origin : window.location.href;\n    let href = typeof to === \"string\" ? to : createPath(to);\n    // Treating this as a full URL will strip any trailing spaces so we need to\n    // pre-encode them since they might be part of a matching splat param from\n    // an ancestor route\n    href = href.replace(/ $/, \"%20\");\n    invariant(base, \"No window.location.(origin|href) available to create URL for href: \" + href);\n    return new URL(href, base);\n  }\n  let history = {\n    get action() {\n      return action;\n    },\n    get location() {\n      return getLocation(window, globalHistory);\n    },\n    listen(fn) {\n      if (listener) {\n        throw new Error(\"A history only accepts one active listener\");\n      }\n      window.addEventListener(PopStateEventType, handlePop);\n      listener = fn;\n      return () => {\n        window.removeEventListener(PopStateEventType, handlePop);\n        listener = null;\n      };\n    },\n    createHref(to) {\n      return createHref(window, to);\n    },\n    createURL,\n    encodeLocation(to) {\n      // Encode a Location the same way window.location would\n      let url = createURL(to);\n      return {\n        pathname: url.pathname,\n        search: url.search,\n        hash: url.hash\n      };\n    },\n    push,\n    replace,\n    go(n) {\n      return globalHistory.go(n);\n    }\n  };\n  return history;\n}\n//#endregion\n\nvar ResultType;\n(function (ResultType) {\n  ResultType[\"data\"] = \"data\";\n  ResultType[\"deferred\"] = \"deferred\";\n  ResultType[\"redirect\"] = \"redirect\";\n  ResultType[\"error\"] = \"error\";\n})(ResultType || (ResultType = {}));\nconst immutableRouteKeys = new Set([\"lazy\", \"caseSensitive\", \"path\", \"id\", \"index\", \"children\"]);\nfunction isIndexRoute(route) {\n  return route.index === true;\n}\n// Walk the route tree generating unique IDs where necessary, so we are working\n// solely with AgnosticDataRouteObject's within the Router\nfunction convertRoutesToDataRoutes(routes, mapRouteProperties, parentPath, manifest) {\n  if (parentPath === void 0) {\n    parentPath = [];\n  }\n  if (manifest === void 0) {\n    manifest = {};\n  }\n  return routes.map((route, index) => {\n    let treePath = [...parentPath, String(index)];\n    let id = typeof route.id === \"string\" ? route.id : treePath.join(\"-\");\n    invariant(route.index !== true || !route.children, \"Cannot specify children on an index route\");\n    invariant(!manifest[id], \"Found a route id collision on id \\\"\" + id + \"\\\".  Route \" + \"id's must be globally unique within Data Router usages\");\n    if (isIndexRoute(route)) {\n      let indexRoute = _extends({}, route, mapRouteProperties(route), {\n        id\n      });\n      manifest[id] = indexRoute;\n      return indexRoute;\n    } else {\n      let pathOrLayoutRoute = _extends({}, route, mapRouteProperties(route), {\n        id,\n        children: undefined\n      });\n      manifest[id] = pathOrLayoutRoute;\n      if (route.children) {\n        pathOrLayoutRoute.children = convertRoutesToDataRoutes(route.children, mapRouteProperties, treePath, manifest);\n      }\n      return pathOrLayoutRoute;\n    }\n  });\n}\n/**\n * Matches the given routes to a location and returns the match data.\n *\n * @see https://reactrouter.com/v6/utils/match-routes\n */\nfunction matchRoutes(routes, locationArg, basename) {\n  if (basename === void 0) {\n    basename = \"/\";\n  }\n  return matchRoutesImpl(routes, locationArg, basename, false);\n}\nfunction matchRoutesImpl(routes, locationArg, basename, allowPartial) {\n  let location = typeof locationArg === \"string\" ? parsePath(locationArg) : locationArg;\n  let pathname = stripBasename(location.pathname || \"/\", basename);\n  if (pathname == null) {\n    return null;\n  }\n  let branches = flattenRoutes(routes);\n  rankRouteBranches(branches);\n  let matches = null;\n  for (let i = 0; matches == null && i < branches.length; ++i) {\n    // Incoming pathnames are generally encoded from either window.location\n    // or from router.navigate, but we want to match against the unencoded\n    // paths in the route definitions.  Memory router locations won't be\n    // encoded here but there also shouldn't be anything to decode so this\n    // should be a safe operation.  This avoids needing matchRoutes to be\n    // history-aware.\n    let decoded = decodePath(pathname);\n    matches = matchRouteBranch(branches[i], decoded, allowPartial);\n  }\n  return matches;\n}\nfunction convertRouteMatchToUiMatch(match, loaderData) {\n  let {\n    route,\n    pathname,\n    params\n  } = match;\n  return {\n    id: route.id,\n    pathname,\n    params,\n    data: loaderData[route.id],\n    handle: route.handle\n  };\n}\nfunction flattenRoutes(routes, branches, parentsMeta, parentPath) {\n  if (branches === void 0) {\n    branches = [];\n  }\n  if (parentsMeta === void 0) {\n    parentsMeta = [];\n  }\n  if (parentPath === void 0) {\n    parentPath = \"\";\n  }\n  let flattenRoute = (route, index, relativePath) => {\n    let meta = {\n      relativePath: relativePath === undefined ? route.path || \"\" : relativePath,\n      caseSensitive: route.caseSensitive === true,\n      childrenIndex: index,\n      route\n    };\n    if (meta.relativePath.startsWith(\"/\")) {\n      invariant(meta.relativePath.startsWith(parentPath), \"Absolute route path \\\"\" + meta.relativePath + \"\\\" nested under path \" + (\"\\\"\" + parentPath + \"\\\" is not valid. An absolute child route path \") + \"must start with the combined path of all its parent routes.\");\n      meta.relativePath = meta.relativePath.slice(parentPath.length);\n    }\n    let path = joinPaths([parentPath, meta.relativePath]);\n    let routesMeta = parentsMeta.concat(meta);\n    // Add the children before adding this route to the array, so we traverse the\n    // route tree depth-first and child routes appear before their parents in\n    // the \"flattened\" version.\n    if (route.children && route.children.length > 0) {\n      invariant(\n      // Our types know better, but runtime JS may not!\n      // @ts-expect-error\n      route.index !== true, \"Index routes must not have child routes. Please remove \" + (\"all child routes from route path \\\"\" + path + \"\\\".\"));\n      flattenRoutes(route.children, branches, routesMeta, path);\n    }\n    // Routes without a path shouldn't ever match by themselves unless they are\n    // index routes, so don't add them to the list of possible branches.\n    if (route.path == null && !route.index) {\n      return;\n    }\n    branches.push({\n      path,\n      score: computeScore(path, route.index),\n      routesMeta\n    });\n  };\n  routes.forEach((route, index) => {\n    var _route$path;\n    // coarse-grain check for optional params\n    if (route.path === \"\" || !((_route$path = route.path) != null && _route$path.includes(\"?\"))) {\n      flattenRoute(route, index);\n    } else {\n      for (let exploded of explodeOptionalSegments(route.path)) {\n        flattenRoute(route, index, exploded);\n      }\n    }\n  });\n  return branches;\n}\n/**\n * Computes all combinations of optional path segments for a given path,\n * excluding combinations that are ambiguous and of lower priority.\n *\n * For example, `/one/:two?/three/:four?/:five?` explodes to:\n * - `/one/three`\n * - `/one/:two/three`\n * - `/one/three/:four`\n * - `/one/three/:five`\n * - `/one/:two/three/:four`\n * - `/one/:two/three/:five`\n * - `/one/three/:four/:five`\n * - `/one/:two/three/:four/:five`\n */\nfunction explodeOptionalSegments(path) {\n  let segments = path.split(\"/\");\n  if (segments.length === 0) return [];\n  let [first, ...rest] = segments;\n  // Optional path segments are denoted by a trailing `?`\n  let isOptional = first.endsWith(\"?\");\n  // Compute the corresponding required segment: `foo?` -> `foo`\n  let required = first.replace(/\\?$/, \"\");\n  if (rest.length === 0) {\n    // Intepret empty string as omitting an optional segment\n    // `[\"one\", \"\", \"three\"]` corresponds to omitting `:two` from `/one/:two?/three` -> `/one/three`\n    return isOptional ? [required, \"\"] : [required];\n  }\n  let restExploded = explodeOptionalSegments(rest.join(\"/\"));\n  let result = [];\n  // All child paths with the prefix.  Do this for all children before the\n  // optional version for all children, so we get consistent ordering where the\n  // parent optional aspect is preferred as required.  Otherwise, we can get\n  // child sections interspersed where deeper optional segments are higher than\n  // parent optional segments, where for example, /:two would explode _earlier_\n  // then /:one.  By always including the parent as required _for all children_\n  // first, we avoid this issue\n  result.push(...restExploded.map(subpath => subpath === \"\" ? required : [required, subpath].join(\"/\")));\n  // Then, if this is an optional value, add all child versions without\n  if (isOptional) {\n    result.push(...restExploded);\n  }\n  // for absolute paths, ensure `/` instead of empty segment\n  return result.map(exploded => path.startsWith(\"/\") && exploded === \"\" ? \"/\" : exploded);\n}\nfunction rankRouteBranches(branches) {\n  branches.sort((a, b) => a.score !== b.score ? b.score - a.score // Higher score first\n  : compareIndexes(a.routesMeta.map(meta => meta.childrenIndex), b.routesMeta.map(meta => meta.childrenIndex)));\n}\nconst paramRe = /^:[\\w-]+$/;\nconst dynamicSegmentValue = 3;\nconst indexRouteValue = 2;\nconst emptySegmentValue = 1;\nconst staticSegmentValue = 10;\nconst splatPenalty = -2;\nconst isSplat = s => s === \"*\";\nfunction computeScore(path, index) {\n  let segments = path.split(\"/\");\n  let initialScore = segments.length;\n  if (segments.some(isSplat)) {\n    initialScore += splatPenalty;\n  }\n  if (index) {\n    initialScore += indexRouteValue;\n  }\n  return segments.filter(s => !isSplat(s)).reduce((score, segment) => score + (paramRe.test(segment) ? dynamicSegmentValue : segment === \"\" ? emptySegmentValue : staticSegmentValue), initialScore);\n}\nfunction compareIndexes(a, b) {\n  let siblings = a.length === b.length && a.slice(0, -1).every((n, i) => n === b[i]);\n  return siblings ?\n  // If two routes are siblings, we should try to match the earlier sibling\n  // first. This allows people to have fine-grained control over the matching\n  // behavior by simply putting routes with identical paths in the order they\n  // want them tried.\n  a[a.length - 1] - b[b.length - 1] :\n  // Otherwise, it doesn't really make sense to rank non-siblings by index,\n  // so they sort equally.\n  0;\n}\nfunction matchRouteBranch(branch, pathname, allowPartial) {\n  if (allowPartial === void 0) {\n    allowPartial = false;\n  }\n  let {\n    routesMeta\n  } = branch;\n  let matchedParams = {};\n  let matchedPathname = \"/\";\n  let matches = [];\n  for (let i = 0; i < routesMeta.length; ++i) {\n    let meta = routesMeta[i];\n    let end = i === routesMeta.length - 1;\n    let remainingPathname = matchedPathname === \"/\" ? pathname : pathname.slice(matchedPathname.length) || \"/\";\n    let match = matchPath({\n      path: meta.relativePath,\n      caseSensitive: meta.caseSensitive,\n      end\n    }, remainingPathname);\n    let route = meta.route;\n    if (!match && end && allowPartial && !routesMeta[routesMeta.length - 1].route.index) {\n      match = matchPath({\n        path: meta.relativePath,\n        caseSensitive: meta.caseSensitive,\n        end: false\n      }, remainingPathname);\n    }\n    if (!match) {\n      return null;\n    }\n    Object.assign(matchedParams, match.params);\n    matches.push({\n      // TODO: Can this as be avoided?\n      params: matchedParams,\n      pathname: joinPaths([matchedPathname, match.pathname]),\n      pathnameBase: normalizePathname(joinPaths([matchedPathname, match.pathnameBase])),\n      route\n    });\n    if (match.pathnameBase !== \"/\") {\n      matchedPathname = joinPaths([matchedPathname, match.pathnameBase]);\n    }\n  }\n  return matches;\n}\n/**\n * Returns a path with params interpolated.\n *\n * @see https://reactrouter.com/v6/utils/generate-path\n */\nfunction generatePath(originalPath, params) {\n  if (params === void 0) {\n    params = {};\n  }\n  let path = originalPath;\n  if (path.endsWith(\"*\") && path !== \"*\" && !path.endsWith(\"/*\")) {\n    warning(false, \"Route path \\\"\" + path + \"\\\" will be treated as if it were \" + (\"\\\"\" + path.replace(/\\*$/, \"/*\") + \"\\\" because the `*` character must \") + \"always follow a `/` in the pattern. To get rid of this warning, \" + (\"please change the route path to \\\"\" + path.replace(/\\*$/, \"/*\") + \"\\\".\"));\n    path = path.replace(/\\*$/, \"/*\");\n  }\n  // ensure `/` is added at the beginning if the path is absolute\n  const prefix = path.startsWith(\"/\") ? \"/\" : \"\";\n  const stringify = p => p == null ? \"\" : typeof p === \"string\" ? p : String(p);\n  const segments = path.split(/\\/+/).map((segment, index, array) => {\n    const isLastSegment = index === array.length - 1;\n    // only apply the splat if it's the last segment\n    if (isLastSegment && segment === \"*\") {\n      const star = \"*\";\n      // Apply the splat\n      return stringify(params[star]);\n    }\n    const keyMatch = segment.match(/^:([\\w-]+)(\\??)$/);\n    if (keyMatch) {\n      const [, key, optional] = keyMatch;\n      let param = params[key];\n      invariant(optional === \"?\" || param != null, \"Missing \\\":\" + key + \"\\\" param\");\n      return stringify(param);\n    }\n    // Remove any optional markers from optional static segments\n    return segment.replace(/\\?$/g, \"\");\n  })\n  // Remove empty segments\n  .filter(segment => !!segment);\n  return prefix + segments.join(\"/\");\n}\n/**\n * Performs pattern matching on a URL pathname and returns information about\n * the match.\n *\n * @see https://reactrouter.com/v6/utils/match-path\n */\nfunction matchPath(pattern, pathname) {\n  if (typeof pattern === \"string\") {\n    pattern = {\n      path: pattern,\n      caseSensitive: false,\n      end: true\n    };\n  }\n  let [matcher, compiledParams] = compilePath(pattern.path, pattern.caseSensitive, pattern.end);\n  let match = pathname.match(matcher);\n  if (!match) return null;\n  let matchedPathname = match[0];\n  let pathnameBase = matchedPathname.replace(/(.)\\/+$/, \"$1\");\n  let captureGroups = match.slice(1);\n  let params = compiledParams.reduce((memo, _ref, index) => {\n    let {\n      paramName,\n      isOptional\n    } = _ref;\n    // We need to compute the pathnameBase here using the raw splat value\n    // instead of using params[\"*\"] later because it will be decoded then\n    if (paramName === \"*\") {\n      let splatValue = captureGroups[index] || \"\";\n      pathnameBase = matchedPathname.slice(0, matchedPathname.length - splatValue.length).replace(/(.)\\/+$/, \"$1\");\n    }\n    const value = captureGroups[index];\n    if (isOptional && !value) {\n      memo[paramName] = undefined;\n    } else {\n      memo[paramName] = (value || \"\").replace(/%2F/g, \"/\");\n    }\n    return memo;\n  }, {});\n  return {\n    params,\n    pathname: matchedPathname,\n    pathnameBase,\n    pattern\n  };\n}\nfunction compilePath(path, caseSensitive, end) {\n  if (caseSensitive === void 0) {\n    caseSensitive = false;\n  }\n  if (end === void 0) {\n    end = true;\n  }\n  warning(path === \"*\" || !path.endsWith(\"*\") || path.endsWith(\"/*\"), \"Route path \\\"\" + path + \"\\\" will be treated as if it were \" + (\"\\\"\" + path.replace(/\\*$/, \"/*\") + \"\\\" because the `*` character must \") + \"always follow a `/` in the pattern. To get rid of this warning, \" + (\"please change the route path to \\\"\" + path.replace(/\\*$/, \"/*\") + \"\\\".\"));\n  let params = [];\n  let regexpSource = \"^\" + path.replace(/\\/*\\*?$/, \"\") // Ignore trailing / and /*, we'll handle it below\n  .replace(/^\\/*/, \"/\") // Make sure it has a leading /\n  .replace(/[\\\\.*+^${}|()[\\]]/g, \"\\\\$&\") // Escape special regex chars\n  .replace(/\\/:([\\w-]+)(\\?)?/g, (_, paramName, isOptional) => {\n    params.push({\n      paramName,\n      isOptional: isOptional != null\n    });\n    return isOptional ? \"/?([^\\\\/]+)?\" : \"/([^\\\\/]+)\";\n  });\n  if (path.endsWith(\"*\")) {\n    params.push({\n      paramName: \"*\"\n    });\n    regexpSource += path === \"*\" || path === \"/*\" ? \"(.*)$\" // Already matched the initial /, just match the rest\n    : \"(?:\\\\/(.+)|\\\\/*)$\"; // Don't include the / in params[\"*\"]\n  } else if (end) {\n    // When matching to the end, ignore trailing slashes\n    regexpSource += \"\\\\/*$\";\n  } else if (path !== \"\" && path !== \"/\") {\n    // If our path is non-empty and contains anything beyond an initial slash,\n    // then we have _some_ form of path in our regex, so we should expect to\n    // match only if we find the end of this path segment.  Look for an optional\n    // non-captured trailing slash (to match a portion of the URL) or the end\n    // of the path (if we've matched to the end).  We used to do this with a\n    // word boundary but that gives false positives on routes like\n    // /user-preferences since `-` counts as a word boundary.\n    regexpSource += \"(?:(?=\\\\/|$))\";\n  } else ;\n  let matcher = new RegExp(regexpSource, caseSensitive ? undefined : \"i\");\n  return [matcher, params];\n}\nfunction decodePath(value) {\n  try {\n    return value.split(\"/\").map(v => decodeURIComponent(v).replace(/\\//g, \"%2F\")).join(\"/\");\n  } catch (error) {\n    warning(false, \"The URL path \\\"\" + value + \"\\\" could not be decoded because it is is a \" + \"malformed URL segment. This is probably due to a bad percent \" + (\"encoding (\" + error + \").\"));\n    return value;\n  }\n}\n/**\n * @private\n */\nfunction stripBasename(pathname, basename) {\n  if (basename === \"/\") return pathname;\n  if (!pathname.toLowerCase().startsWith(basename.toLowerCase())) {\n    return null;\n  }\n  // We want to leave trailing slash behavior in the user's control, so if they\n  // specify a basename with a trailing slash, we should support it\n  let startIndex = basename.endsWith(\"/\") ? basename.length - 1 : basename.length;\n  let nextChar = pathname.charAt(startIndex);\n  if (nextChar && nextChar !== \"/\") {\n    // pathname does not start with basename/\n    return null;\n  }\n  return pathname.slice(startIndex) || \"/\";\n}\n/**\n * Returns a resolved path object relative to the given pathname.\n *\n * @see https://reactrouter.com/v6/utils/resolve-path\n */\nfunction resolvePath(to, fromPathname) {\n  if (fromPathname === void 0) {\n    fromPathname = \"/\";\n  }\n  let {\n    pathname: toPathname,\n    search = \"\",\n    hash = \"\"\n  } = typeof to === \"string\" ? parsePath(to) : to;\n  let pathname = toPathname ? toPathname.startsWith(\"/\") ? toPathname : resolvePathname(toPathname, fromPathname) : fromPathname;\n  return {\n    pathname,\n    search: normalizeSearch(search),\n    hash: normalizeHash(hash)\n  };\n}\nfunction resolvePathname(relativePath, fromPathname) {\n  let segments = fromPathname.replace(/\\/+$/, \"\").split(\"/\");\n  let relativeSegments = relativePath.split(\"/\");\n  relativeSegments.forEach(segment => {\n    if (segment === \"..\") {\n      // Keep the root \"\" segment so the pathname starts at /\n      if (segments.length > 1) segments.pop();\n    } else if (segment !== \".\") {\n      segments.push(segment);\n    }\n  });\n  return segments.length > 1 ? segments.join(\"/\") : \"/\";\n}\nfunction getInvalidPathError(char, field, dest, path) {\n  return \"Cannot include a '\" + char + \"' character in a manually specified \" + (\"`to.\" + field + \"` field [\" + JSON.stringify(path) + \"].  Please separate it out to the \") + (\"`to.\" + dest + \"` field. Alternatively you may provide the full path as \") + \"a string in <Link to=\\\"...\\\"> and the router will parse it for you.\";\n}\n/**\n * @private\n *\n * When processing relative navigation we want to ignore ancestor routes that\n * do not contribute to the path, such that index/pathless layout routes don't\n * interfere.\n *\n * For example, when moving a route element into an index route and/or a\n * pathless layout route, relative link behavior contained within should stay\n * the same.  Both of the following examples should link back to the root:\n *\n *   <Route path=\"/\">\n *     <Route path=\"accounts\" element={<Link to=\"..\"}>\n *   </Route>\n *\n *   <Route path=\"/\">\n *     <Route path=\"accounts\">\n *       <Route element={<AccountsLayout />}>       // <-- Does not contribute\n *         <Route index element={<Link to=\"..\"} />  // <-- Does not contribute\n *       </Route\n *     </Route>\n *   </Route>\n */\nfunction getPathContributingMatches(matches) {\n  return matches.filter((match, index) => index === 0 || match.route.path && match.route.path.length > 0);\n}\n// Return the array of pathnames for the current route matches - used to\n// generate the routePathnames input for resolveTo()\nfunction getResolveToMatches(matches, v7_relativeSplatPath) {\n  let pathMatches = getPathContributingMatches(matches);\n  // When v7_relativeSplatPath is enabled, use the full pathname for the leaf\n  // match so we include splat values for \".\" links.  See:\n  // https://github.com/remix-run/react-router/issues/11052#issuecomment-1836589329\n  if (v7_relativeSplatPath) {\n    return pathMatches.map((match, idx) => idx === pathMatches.length - 1 ? match.pathname : match.pathnameBase);\n  }\n  return pathMatches.map(match => match.pathnameBase);\n}\n/**\n * @private\n */\nfunction resolveTo(toArg, routePathnames, locationPathname, isPathRelative) {\n  if (isPathRelative === void 0) {\n    isPathRelative = false;\n  }\n  let to;\n  if (typeof toArg === \"string\") {\n    to = parsePath(toArg);\n  } else {\n    to = _extends({}, toArg);\n    invariant(!to.pathname || !to.pathname.includes(\"?\"), getInvalidPathError(\"?\", \"pathname\", \"search\", to));\n    invariant(!to.pathname || !to.pathname.includes(\"#\"), getInvalidPathError(\"#\", \"pathname\", \"hash\", to));\n    invariant(!to.search || !to.search.includes(\"#\"), getInvalidPathError(\"#\", \"search\", \"hash\", to));\n  }\n  let isEmptyPath = toArg === \"\" || to.pathname === \"\";\n  let toPathname = isEmptyPath ? \"/\" : to.pathname;\n  let from;\n  // Routing is relative to the current pathname if explicitly requested.\n  //\n  // If a pathname is explicitly provided in `to`, it should be relative to the\n  // route context. This is explained in `Note on `<Link to>` values` in our\n  // migration guide from v5 as a means of disambiguation between `to` values\n  // that begin with `/` and those that do not. However, this is problematic for\n  // `to` values that do not provide a pathname. `to` can simply be a search or\n  // hash string, in which case we should assume that the navigation is relative\n  // to the current location's pathname and *not* the route pathname.\n  if (toPathname == null) {\n    from = locationPathname;\n  } else {\n    let routePathnameIndex = routePathnames.length - 1;\n    // With relative=\"route\" (the default), each leading .. segment means\n    // \"go up one route\" instead of \"go up one URL segment\".  This is a key\n    // difference from how <a href> works and a major reason we call this a\n    // \"to\" value instead of a \"href\".\n    if (!isPathRelative && toPathname.startsWith(\"..\")) {\n      let toSegments = toPathname.split(\"/\");\n      while (toSegments[0] === \"..\") {\n        toSegments.shift();\n        routePathnameIndex -= 1;\n      }\n      to.pathname = toSegments.join(\"/\");\n    }\n    from = routePathnameIndex >= 0 ? routePathnames[routePathnameIndex] : \"/\";\n  }\n  let path = resolvePath(to, from);\n  // Ensure the pathname has a trailing slash if the original \"to\" had one\n  let hasExplicitTrailingSlash = toPathname && toPathname !== \"/\" && toPathname.endsWith(\"/\");\n  // Or if this was a link to the current path which has a trailing slash\n  let hasCurrentTrailingSlash = (isEmptyPath || toPathname === \".\") && locationPathname.endsWith(\"/\");\n  if (!path.pathname.endsWith(\"/\") && (hasExplicitTrailingSlash || hasCurrentTrailingSlash)) {\n    path.pathname += \"/\";\n  }\n  return path;\n}\n/**\n * @private\n */\nfunction getToPathname(to) {\n  // Empty strings should be treated the same as / paths\n  return to === \"\" || to.pathname === \"\" ? \"/\" : typeof to === \"string\" ? parsePath(to).pathname : to.pathname;\n}\n/**\n * @private\n */\nconst joinPaths = paths => paths.join(\"/\").replace(/\\/\\/+/g, \"/\");\n/**\n * @private\n */\nconst normalizePathname = pathname => pathname.replace(/\\/+$/, \"\").replace(/^\\/*/, \"/\");\n/**\n * @private\n */\nconst normalizeSearch = search => !search || search === \"?\" ? \"\" : search.startsWith(\"?\") ? search : \"?\" + search;\n/**\n * @private\n */\nconst normalizeHash = hash => !hash || hash === \"#\" ? \"\" : hash.startsWith(\"#\") ? hash : \"#\" + hash;\n/**\n * This is a shortcut for creating `application/json` responses. Converts `data`\n * to JSON and sets the `Content-Type` header.\n *\n * @deprecated The `json` method is deprecated in favor of returning raw objects.\n * This method will be removed in v7.\n */\nconst json = function json(data, init) {\n  if (init === void 0) {\n    init = {};\n  }\n  let responseInit = typeof init === \"number\" ? {\n    status: init\n  } : init;\n  let headers = new Headers(responseInit.headers);\n  if (!headers.has(\"Content-Type\")) {\n    headers.set(\"Content-Type\", \"application/json; charset=utf-8\");\n  }\n  return new Response(JSON.stringify(data), _extends({}, responseInit, {\n    headers\n  }));\n};\nclass DataWithResponseInit {\n  constructor(data, init) {\n    this.type = \"DataWithResponseInit\";\n    this.data = data;\n    this.init = init || null;\n  }\n}\n/**\n * Create \"responses\" that contain `status`/`headers` without forcing\n * serialization into an actual `Response` - used by Remix single fetch\n */\nfunction data(data, init) {\n  return new DataWithResponseInit(data, typeof init === \"number\" ? {\n    status: init\n  } : init);\n}\nclass AbortedDeferredError extends Error {}\nclass DeferredData {\n  constructor(data, responseInit) {\n    this.pendingKeysSet = new Set();\n    this.subscribers = new Set();\n    this.deferredKeys = [];\n    invariant(data && typeof data === \"object\" && !Array.isArray(data), \"defer() only accepts plain objects\");\n    // Set up an AbortController + Promise we can race against to exit early\n    // cancellation\n    let reject;\n    this.abortPromise = new Promise((_, r) => reject = r);\n    this.controller = new AbortController();\n    let onAbort = () => reject(new AbortedDeferredError(\"Deferred data aborted\"));\n    this.unlistenAbortSignal = () => this.controller.signal.removeEventListener(\"abort\", onAbort);\n    this.controller.signal.addEventListener(\"abort\", onAbort);\n    this.data = Object.entries(data).reduce((acc, _ref2) => {\n      let [key, value] = _ref2;\n      return Object.assign(acc, {\n        [key]: this.trackPromise(key, value)\n      });\n    }, {});\n    if (this.done) {\n      // All incoming values were resolved\n      this.unlistenAbortSignal();\n    }\n    this.init = responseInit;\n  }\n  trackPromise(key, value) {\n    if (!(value instanceof Promise)) {\n      return value;\n    }\n    this.deferredKeys.push(key);\n    this.pendingKeysSet.add(key);\n    // We store a little wrapper promise that will be extended with\n    // _data/_error props upon resolve/reject\n    let promise = Promise.race([value, this.abortPromise]).then(data => this.onSettle(promise, key, undefined, data), error => this.onSettle(promise, key, error));\n    // Register rejection listeners to avoid uncaught promise rejections on\n    // errors or aborted deferred values\n    promise.catch(() => {});\n    Object.defineProperty(promise, \"_tracked\", {\n      get: () => true\n    });\n    return promise;\n  }\n  onSettle(promise, key, error, data) {\n    if (this.controller.signal.aborted && error instanceof AbortedDeferredError) {\n      this.unlistenAbortSignal();\n      Object.defineProperty(promise, \"_error\", {\n        get: () => error\n      });\n      return Promise.reject(error);\n    }\n    this.pendingKeysSet.delete(key);\n    if (this.done) {\n      // Nothing left to abort!\n      this.unlistenAbortSignal();\n    }\n    // If the promise was resolved/rejected with undefined, we'll throw an error as you\n    // should always resolve with a value or null\n    if (error === undefined && data === undefined) {\n      let undefinedError = new Error(\"Deferred data for key \\\"\" + key + \"\\\" resolved/rejected with `undefined`, \" + \"you must resolve/reject with a value or `null`.\");\n      Object.defineProperty(promise, \"_error\", {\n        get: () => undefinedError\n      });\n      this.emit(false, key);\n      return Promise.reject(undefinedError);\n    }\n    if (data === undefined) {\n      Object.defineProperty(promise, \"_error\", {\n        get: () => error\n      });\n      this.emit(false, key);\n      return Promise.reject(error);\n    }\n    Object.defineProperty(promise, \"_data\", {\n      get: () => data\n    });\n    this.emit(false, key);\n    return data;\n  }\n  emit(aborted, settledKey) {\n    this.subscribers.forEach(subscriber => subscriber(aborted, settledKey));\n  }\n  subscribe(fn) {\n    this.subscribers.add(fn);\n    return () => this.subscribers.delete(fn);\n  }\n  cancel() {\n    this.controller.abort();\n    this.pendingKeysSet.forEach((v, k) => this.pendingKeysSet.delete(k));\n    this.emit(true);\n  }\n  async resolveData(signal) {\n    let aborted = false;\n    if (!this.done) {\n      let onAbort = () => this.cancel();\n      signal.addEventListener(\"abort\", onAbort);\n      aborted = await new Promise(resolve => {\n        this.subscribe(aborted => {\n          signal.removeEventListener(\"abort\", onAbort);\n          if (aborted || this.done) {\n            resolve(aborted);\n          }\n        });\n      });\n    }\n    return aborted;\n  }\n  get done() {\n    return this.pendingKeysSet.size === 0;\n  }\n  get unwrappedData() {\n    invariant(this.data !== null && this.done, \"Can only unwrap data on initialized and settled deferreds\");\n    return Object.entries(this.data).reduce((acc, _ref3) => {\n      let [key, value] = _ref3;\n      return Object.assign(acc, {\n        [key]: unwrapTrackedPromise(value)\n      });\n    }, {});\n  }\n  get pendingKeys() {\n    return Array.from(this.pendingKeysSet);\n  }\n}\nfunction isTrackedPromise(value) {\n  return value instanceof Promise && value._tracked === true;\n}\nfunction unwrapTrackedPromise(value) {\n  if (!isTrackedPromise(value)) {\n    return value;\n  }\n  if (value._error) {\n    throw value._error;\n  }\n  return value._data;\n}\n/**\n * @deprecated The `defer` method is deprecated in favor of returning raw\n * objects. This method will be removed in v7.\n */\nconst defer = function defer(data, init) {\n  if (init === void 0) {\n    init = {};\n  }\n  let responseInit = typeof init === \"number\" ? {\n    status: init\n  } : init;\n  return new DeferredData(data, responseInit);\n};\n/**\n * A redirect response. Sets the status code and the `Location` header.\n * Defaults to \"302 Found\".\n */\nconst redirect = function redirect(url, init) {\n  if (init === void 0) {\n    init = 302;\n  }\n  let responseInit = init;\n  if (typeof responseInit === \"number\") {\n    responseInit = {\n      status: responseInit\n    };\n  } else if (typeof responseInit.status === \"undefined\") {\n    responseInit.status = 302;\n  }\n  let headers = new Headers(responseInit.headers);\n  headers.set(\"Location\", url);\n  return new Response(null, _extends({}, responseInit, {\n    headers\n  }));\n};\n/**\n * A redirect response that will force a document reload to the new location.\n * Sets the status code and the `Location` header.\n * Defaults to \"302 Found\".\n */\nconst redirectDocument = (url, init) => {\n  let response = redirect(url, init);\n  response.headers.set(\"X-Remix-Reload-Document\", \"true\");\n  return response;\n};\n/**\n * A redirect response that will perform a `history.replaceState` instead of a\n * `history.pushState` for client-side navigation redirects.\n * Sets the status code and the `Location` header.\n * Defaults to \"302 Found\".\n */\nconst replace = (url, init) => {\n  let response = redirect(url, init);\n  response.headers.set(\"X-Remix-Replace\", \"true\");\n  return response;\n};\n/**\n * @private\n * Utility class we use to hold auto-unwrapped 4xx/5xx Response bodies\n *\n * We don't export the class for public use since it's an implementation\n * detail, but we export the interface above so folks can build their own\n * abstractions around instances via isRouteErrorResponse()\n */\nclass ErrorResponseImpl {\n  constructor(status, statusText, data, internal) {\n    if (internal === void 0) {\n      internal = false;\n    }\n    this.status = status;\n    this.statusText = statusText || \"\";\n    this.internal = internal;\n    if (data instanceof Error) {\n      this.data = data.toString();\n      this.error = data;\n    } else {\n      this.data = data;\n    }\n  }\n}\n/**\n * Check if the given error is an ErrorResponse generated from a 4xx/5xx\n * Response thrown from an action/loader\n */\nfunction isRouteErrorResponse(error) {\n  return error != null && typeof error.status === \"number\" && typeof error.statusText === \"string\" && typeof error.internal === \"boolean\" && \"data\" in error;\n}\n\nconst validMutationMethodsArr = [\"post\", \"put\", \"patch\", \"delete\"];\nconst validMutationMethods = new Set(validMutationMethodsArr);\nconst validRequestMethodsArr = [\"get\", ...validMutationMethodsArr];\nconst validRequestMethods = new Set(validRequestMethodsArr);\nconst redirectStatusCodes = new Set([301, 302, 303, 307, 308]);\nconst redirectPreserveMethodStatusCodes = new Set([307, 308]);\nconst IDLE_NAVIGATION = {\n  state: \"idle\",\n  location: undefined,\n  formMethod: undefined,\n  formAction: undefined,\n  formEncType: undefined,\n  formData: undefined,\n  json: undefined,\n  text: undefined\n};\nconst IDLE_FETCHER = {\n  state: \"idle\",\n  data: undefined,\n  formMethod: undefined,\n  formAction: undefined,\n  formEncType: undefined,\n  formData: undefined,\n  json: undefined,\n  text: undefined\n};\nconst IDLE_BLOCKER = {\n  state: \"unblocked\",\n  proceed: undefined,\n  reset: undefined,\n  location: undefined\n};\nconst ABSOLUTE_URL_REGEX = /^(?:[a-z][a-z0-9+.-]*:|\\/\\/)/i;\nconst defaultMapRouteProperties = route => ({\n  hasErrorBoundary: Boolean(route.hasErrorBoundary)\n});\nconst TRANSITIONS_STORAGE_KEY = \"remix-router-transitions\";\n//#endregion\n////////////////////////////////////////////////////////////////////////////////\n//#region createRouter\n////////////////////////////////////////////////////////////////////////////////\n/**\n * Create a router and listen to history POP navigations\n */\nfunction createRouter(init) {\n  const routerWindow = init.window ? init.window : typeof window !== \"undefined\" ? window : undefined;\n  const isBrowser = typeof routerWindow !== \"undefined\" && typeof routerWindow.document !== \"undefined\" && typeof routerWindow.document.createElement !== \"undefined\";\n  const isServer = !isBrowser;\n  invariant(init.routes.length > 0, \"You must provide a non-empty routes array to createRouter\");\n  let mapRouteProperties;\n  if (init.mapRouteProperties) {\n    mapRouteProperties = init.mapRouteProperties;\n  } else if (init.detectErrorBoundary) {\n    // If they are still using the deprecated version, wrap it with the new API\n    let detectErrorBoundary = init.detectErrorBoundary;\n    mapRouteProperties = route => ({\n      hasErrorBoundary: detectErrorBoundary(route)\n    });\n  } else {\n    mapRouteProperties = defaultMapRouteProperties;\n  }\n  // Routes keyed by ID\n  let manifest = {};\n  // Routes in tree format for matching\n  let dataRoutes = convertRoutesToDataRoutes(init.routes, mapRouteProperties, undefined, manifest);\n  let inFlightDataRoutes;\n  let basename = init.basename || \"/\";\n  let dataStrategyImpl = init.dataStrategy || defaultDataStrategy;\n  let patchRoutesOnNavigationImpl = init.patchRoutesOnNavigation;\n  // Config driven behavior flags\n  let future = _extends({\n    v7_fetcherPersist: false,\n    v7_normalizeFormMethod: false,\n    v7_partialHydration: false,\n    v7_prependBasename: false,\n    v7_relativeSplatPath: false,\n    v7_skipActionErrorRevalidation: false\n  }, init.future);\n  // Cleanup function for history\n  let unlistenHistory = null;\n  // Externally-provided functions to call on all state changes\n  let subscribers = new Set();\n  // Externally-provided object to hold scroll restoration locations during routing\n  let savedScrollPositions = null;\n  // Externally-provided function to get scroll restoration keys\n  let getScrollRestorationKey = null;\n  // Externally-provided function to get current scroll position\n  let getScrollPosition = null;\n  // One-time flag to control the initial hydration scroll restoration.  Because\n  // we don't get the saved positions from <ScrollRestoration /> until _after_\n  // the initial render, we need to manually trigger a separate updateState to\n  // send along the restoreScrollPosition\n  // Set to true if we have `hydrationData` since we assume we were SSR'd and that\n  // SSR did the initial scroll restoration.\n  let initialScrollRestored = init.hydrationData != null;\n  let initialMatches = matchRoutes(dataRoutes, init.history.location, basename);\n  let initialMatchesIsFOW = false;\n  let initialErrors = null;\n  if (initialMatches == null && !patchRoutesOnNavigationImpl) {\n    // If we do not match a user-provided-route, fall back to the root\n    // to allow the error boundary to take over\n    let error = getInternalRouterError(404, {\n      pathname: init.history.location.pathname\n    });\n    let {\n      matches,\n      route\n    } = getShortCircuitMatches(dataRoutes);\n    initialMatches = matches;\n    initialErrors = {\n      [route.id]: error\n    };\n  }\n  // In SPA apps, if the user provided a patchRoutesOnNavigation implementation and\n  // our initial match is a splat route, clear them out so we run through lazy\n  // discovery on hydration in case there's a more accurate lazy route match.\n  // In SSR apps (with `hydrationData`), we expect that the server will send\n  // up the proper matched routes so we don't want to run lazy discovery on\n  // initial hydration and want to hydrate into the splat route.\n  if (initialMatches && !init.hydrationData) {\n    let fogOfWar = checkFogOfWar(initialMatches, dataRoutes, init.history.location.pathname);\n    if (fogOfWar.active) {\n      initialMatches = null;\n    }\n  }\n  let initialized;\n  if (!initialMatches) {\n    initialized = false;\n    initialMatches = [];\n    // If partial hydration and fog of war is enabled, we will be running\n    // `patchRoutesOnNavigation` during hydration so include any partial matches as\n    // the initial matches so we can properly render `HydrateFallback`'s\n    if (future.v7_partialHydration) {\n      let fogOfWar = checkFogOfWar(null, dataRoutes, init.history.location.pathname);\n      if (fogOfWar.active && fogOfWar.matches) {\n        initialMatchesIsFOW = true;\n        initialMatches = fogOfWar.matches;\n      }\n    }\n  } else if (initialMatches.some(m => m.route.lazy)) {\n    // All initialMatches need to be loaded before we're ready.  If we have lazy\n    // functions around still then we'll need to run them in initialize()\n    initialized = false;\n  } else if (!initialMatches.some(m => m.route.loader)) {\n    // If we've got no loaders to run, then we're good to go\n    initialized = true;\n  } else if (future.v7_partialHydration) {\n    // If partial hydration is enabled, we're initialized so long as we were\n    // provided with hydrationData for every route with a loader, and no loaders\n    // were marked for explicit hydration\n    let loaderData = init.hydrationData ? init.hydrationData.loaderData : null;\n    let errors = init.hydrationData ? init.hydrationData.errors : null;\n    // If errors exist, don't consider routes below the boundary\n    if (errors) {\n      let idx = initialMatches.findIndex(m => errors[m.route.id] !== undefined);\n      initialized = initialMatches.slice(0, idx + 1).every(m => !shouldLoadRouteOnHydration(m.route, loaderData, errors));\n    } else {\n      initialized = initialMatches.every(m => !shouldLoadRouteOnHydration(m.route, loaderData, errors));\n    }\n  } else {\n    // Without partial hydration - we're initialized if we were provided any\n    // hydrationData - which is expected to be complete\n    initialized = init.hydrationData != null;\n  }\n  let router;\n  let state = {\n    historyAction: init.history.action,\n    location: init.history.location,\n    matches: initialMatches,\n    initialized,\n    navigation: IDLE_NAVIGATION,\n    // Don't restore on initial updateState() if we were SSR'd\n    restoreScrollPosition: init.hydrationData != null ? false : null,\n    preventScrollReset: false,\n    revalidation: \"idle\",\n    loaderData: init.hydrationData && init.hydrationData.loaderData || {},\n    actionData: init.hydrationData && init.hydrationData.actionData || null,\n    errors: init.hydrationData && init.hydrationData.errors || initialErrors,\n    fetchers: new Map(),\n    blockers: new Map()\n  };\n  // -- Stateful internal variables to manage navigations --\n  // Current navigation in progress (to be committed in completeNavigation)\n  let pendingAction = Action.Pop;\n  // Should the current navigation prevent the scroll reset if scroll cannot\n  // be restored?\n  let pendingPreventScrollReset = false;\n  // AbortController for the active navigation\n  let pendingNavigationController;\n  // Should the current navigation enable document.startViewTransition?\n  let pendingViewTransitionEnabled = false;\n  // Store applied view transitions so we can apply them on POP\n  let appliedViewTransitions = new Map();\n  // Cleanup function for persisting applied transitions to sessionStorage\n  let removePageHideEventListener = null;\n  // We use this to avoid touching history in completeNavigation if a\n  // revalidation is entirely uninterrupted\n  let isUninterruptedRevalidation = false;\n  // Use this internal flag to force revalidation of all loaders:\n  //  - submissions (completed or interrupted)\n  //  - useRevalidator()\n  //  - X-Remix-Revalidate (from redirect)\n  let isRevalidationRequired = false;\n  // Use this internal array to capture routes that require revalidation due\n  // to a cancelled deferred on action submission\n  let cancelledDeferredRoutes = [];\n  // Use this internal array to capture fetcher loads that were cancelled by an\n  // action navigation and require revalidation\n  let cancelledFetcherLoads = new Set();\n  // AbortControllers for any in-flight fetchers\n  let fetchControllers = new Map();\n  // Track loads based on the order in which they started\n  let incrementingLoadId = 0;\n  // Track the outstanding pending navigation data load to be compared against\n  // the globally incrementing load when a fetcher load lands after a completed\n  // navigation\n  let pendingNavigationLoadId = -1;\n  // Fetchers that triggered data reloads as a result of their actions\n  let fetchReloadIds = new Map();\n  // Fetchers that triggered redirect navigations\n  let fetchRedirectIds = new Set();\n  // Most recent href/match for fetcher.load calls for fetchers\n  let fetchLoadMatches = new Map();\n  // Ref-count mounted fetchers so we know when it's ok to clean them up\n  let activeFetchers = new Map();\n  // Fetchers that have requested a delete when using v7_fetcherPersist,\n  // they'll be officially removed after they return to idle\n  let deletedFetchers = new Set();\n  // Store DeferredData instances for active route matches.  When a\n  // route loader returns defer() we stick one in here.  Then, when a nested\n  // promise resolves we update loaderData.  If a new navigation starts we\n  // cancel active deferreds for eliminated routes.\n  let activeDeferreds = new Map();\n  // Store blocker functions in a separate Map outside of router state since\n  // we don't need to update UI state if they change\n  let blockerFunctions = new Map();\n  // Flag to ignore the next history update, so we can revert the URL change on\n  // a POP navigation that was blocked by the user without touching router state\n  let unblockBlockerHistoryUpdate = undefined;\n  // Initialize the router, all side effects should be kicked off from here.\n  // Implemented as a Fluent API for ease of:\n  //   let router = createRouter(init).initialize();\n  function initialize() {\n    // If history informs us of a POP navigation, start the navigation but do not update\n    // state.  We'll update our own state once the navigation completes\n    unlistenHistory = init.history.listen(_ref => {\n      let {\n        action: historyAction,\n        location,\n        delta\n      } = _ref;\n      // Ignore this event if it was just us resetting the URL from a\n      // blocked POP navigation\n      if (unblockBlockerHistoryUpdate) {\n        unblockBlockerHistoryUpdate();\n        unblockBlockerHistoryUpdate = undefined;\n        return;\n      }\n      warning(blockerFunctions.size === 0 || delta != null, \"You are trying to use a blocker on a POP navigation to a location \" + \"that was not created by @remix-run/router. This will fail silently in \" + \"production. This can happen if you are navigating outside the router \" + \"via `window.history.pushState`/`window.location.hash` instead of using \" + \"router navigation APIs.  This can also happen if you are using \" + \"createHashRouter and the user manually changes the URL.\");\n      let blockerKey = shouldBlockNavigation({\n        currentLocation: state.location,\n        nextLocation: location,\n        historyAction\n      });\n      if (blockerKey && delta != null) {\n        // Restore the URL to match the current UI, but don't update router state\n        let nextHistoryUpdatePromise = new Promise(resolve => {\n          unblockBlockerHistoryUpdate = resolve;\n        });\n        init.history.go(delta * -1);\n        // Put the blocker into a blocked state\n        updateBlocker(blockerKey, {\n          state: \"blocked\",\n          location,\n          proceed() {\n            updateBlocker(blockerKey, {\n              state: \"proceeding\",\n              proceed: undefined,\n              reset: undefined,\n              location\n            });\n            // Re-do the same POP navigation we just blocked, after the url\n            // restoration is also complete.  See:\n            // https://github.com/remix-run/react-router/issues/11613\n            nextHistoryUpdatePromise.then(() => init.history.go(delta));\n          },\n          reset() {\n            let blockers = new Map(state.blockers);\n            blockers.set(blockerKey, IDLE_BLOCKER);\n            updateState({\n              blockers\n            });\n          }\n        });\n        return;\n      }\n      return startNavigation(historyAction, location);\n    });\n    if (isBrowser) {\n      // FIXME: This feels gross.  How can we cleanup the lines between\n      // scrollRestoration/appliedTransitions persistance?\n      restoreAppliedTransitions(routerWindow, appliedViewTransitions);\n      let _saveAppliedTransitions = () => persistAppliedTransitions(routerWindow, appliedViewTransitions);\n      routerWindow.addEventListener(\"pagehide\", _saveAppliedTransitions);\n      removePageHideEventListener = () => routerWindow.removeEventListener(\"pagehide\", _saveAppliedTransitions);\n    }\n    // Kick off initial data load if needed.  Use Pop to avoid modifying history\n    // Note we don't do any handling of lazy here.  For SPA's it'll get handled\n    // in the normal navigation flow.  For SSR it's expected that lazy modules are\n    // resolved prior to router creation since we can't go into a fallbackElement\n    // UI for SSR'd apps\n    if (!state.initialized) {\n      startNavigation(Action.Pop, state.location, {\n        initialHydration: true\n      });\n    }\n    return router;\n  }\n  // Clean up a router and it's side effects\n  function dispose() {\n    if (unlistenHistory) {\n      unlistenHistory();\n    }\n    if (removePageHideEventListener) {\n      removePageHideEventListener();\n    }\n    subscribers.clear();\n    pendingNavigationController && pendingNavigationController.abort();\n    state.fetchers.forEach((_, key) => deleteFetcher(key));\n    state.blockers.forEach((_, key) => deleteBlocker(key));\n  }\n  // Subscribe to state updates for the router\n  function subscribe(fn) {\n    subscribers.add(fn);\n    return () => subscribers.delete(fn);\n  }\n  // Update our state and notify the calling context of the change\n  function updateState(newState, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n    state = _extends({}, state, newState);\n    // Prep fetcher cleanup so we can tell the UI which fetcher data entries\n    // can be removed\n    let completedFetchers = [];\n    let deletedFetchersKeys = [];\n    if (future.v7_fetcherPersist) {\n      state.fetchers.forEach((fetcher, key) => {\n        if (fetcher.state === \"idle\") {\n          if (deletedFetchers.has(key)) {\n            // Unmounted from the UI and can be totally removed\n            deletedFetchersKeys.push(key);\n          } else {\n            // Returned to idle but still mounted in the UI, so semi-remains for\n            // revalidations and such\n            completedFetchers.push(key);\n          }\n        }\n      });\n    }\n    // Remove any lingering deleted fetchers that have already been removed\n    // from state.fetchers\n    deletedFetchers.forEach(key => {\n      if (!state.fetchers.has(key) && !fetchControllers.has(key)) {\n        deletedFetchersKeys.push(key);\n      }\n    });\n    // Iterate over a local copy so that if flushSync is used and we end up\n    // removing and adding a new subscriber due to the useCallback dependencies,\n    // we don't get ourselves into a loop calling the new subscriber immediately\n    [...subscribers].forEach(subscriber => subscriber(state, {\n      deletedFetchers: deletedFetchersKeys,\n      viewTransitionOpts: opts.viewTransitionOpts,\n      flushSync: opts.flushSync === true\n    }));\n    // Remove idle fetchers from state since we only care about in-flight fetchers.\n    if (future.v7_fetcherPersist) {\n      completedFetchers.forEach(key => state.fetchers.delete(key));\n      deletedFetchersKeys.forEach(key => deleteFetcher(key));\n    } else {\n      // We already called deleteFetcher() on these, can remove them from this\n      // Set now that we've handed the keys off to the data layer\n      deletedFetchersKeys.forEach(key => deletedFetchers.delete(key));\n    }\n  }\n  // Complete a navigation returning the state.navigation back to the IDLE_NAVIGATION\n  // and setting state.[historyAction/location/matches] to the new route.\n  // - Location is a required param\n  // - Navigation will always be set to IDLE_NAVIGATION\n  // - Can pass any other state in newState\n  function completeNavigation(location, newState, _temp) {\n    var _location$state, _location$state2;\n    let {\n      flushSync\n    } = _temp === void 0 ? {} : _temp;\n    // Deduce if we're in a loading/actionReload state:\n    // - We have committed actionData in the store\n    // - The current navigation was a mutation submission\n    // - We're past the submitting state and into the loading state\n    // - The location being loaded is not the result of a redirect\n    let isActionReload = state.actionData != null && state.navigation.formMethod != null && isMutationMethod(state.navigation.formMethod) && state.navigation.state === \"loading\" && ((_location$state = location.state) == null ? void 0 : _location$state._isRedirect) !== true;\n    let actionData;\n    if (newState.actionData) {\n      if (Object.keys(newState.actionData).length > 0) {\n        actionData = newState.actionData;\n      } else {\n        // Empty actionData -> clear prior actionData due to an action error\n        actionData = null;\n      }\n    } else if (isActionReload) {\n      // Keep the current data if we're wrapping up the action reload\n      actionData = state.actionData;\n    } else {\n      // Clear actionData on any other completed navigations\n      actionData = null;\n    }\n    // Always preserve any existing loaderData from re-used routes\n    let loaderData = newState.loaderData ? mergeLoaderData(state.loaderData, newState.loaderData, newState.matches || [], newState.errors) : state.loaderData;\n    // On a successful navigation we can assume we got through all blockers\n    // so we can start fresh\n    let blockers = state.blockers;\n    if (blockers.size > 0) {\n      blockers = new Map(blockers);\n      blockers.forEach((_, k) => blockers.set(k, IDLE_BLOCKER));\n    }\n    // Always respect the user flag.  Otherwise don't reset on mutation\n    // submission navigations unless they redirect\n    let preventScrollReset = pendingPreventScrollReset === true || state.navigation.formMethod != null && isMutationMethod(state.navigation.formMethod) && ((_location$state2 = location.state) == null ? void 0 : _location$state2._isRedirect) !== true;\n    // Commit any in-flight routes at the end of the HMR revalidation \"navigation\"\n    if (inFlightDataRoutes) {\n      dataRoutes = inFlightDataRoutes;\n      inFlightDataRoutes = undefined;\n    }\n    if (isUninterruptedRevalidation) ; else if (pendingAction === Action.Pop) ; else if (pendingAction === Action.Push) {\n      init.history.push(location, location.state);\n    } else if (pendingAction === Action.Replace) {\n      init.history.replace(location, location.state);\n    }\n    let viewTransitionOpts;\n    // On POP, enable transitions if they were enabled on the original navigation\n    if (pendingAction === Action.Pop) {\n      // Forward takes precedence so they behave like the original navigation\n      let priorPaths = appliedViewTransitions.get(state.location.pathname);\n      if (priorPaths && priorPaths.has(location.pathname)) {\n        viewTransitionOpts = {\n          currentLocation: state.location,\n          nextLocation: location\n        };\n      } else if (appliedViewTransitions.has(location.pathname)) {\n        // If we don't have a previous forward nav, assume we're popping back to\n        // the new location and enable if that location previously enabled\n        viewTransitionOpts = {\n          currentLocation: location,\n          nextLocation: state.location\n        };\n      }\n    } else if (pendingViewTransitionEnabled) {\n      // Store the applied transition on PUSH/REPLACE\n      let toPaths = appliedViewTransitions.get(state.location.pathname);\n      if (toPaths) {\n        toPaths.add(location.pathname);\n      } else {\n        toPaths = new Set([location.pathname]);\n        appliedViewTransitions.set(state.location.pathname, toPaths);\n      }\n      viewTransitionOpts = {\n        currentLocation: state.location,\n        nextLocation: location\n      };\n    }\n    updateState(_extends({}, newState, {\n      actionData,\n      loaderData,\n      historyAction: pendingAction,\n      location,\n      initialized: true,\n      navigation: IDLE_NAVIGATION,\n      revalidation: \"idle\",\n      restoreScrollPosition: getSavedScrollPosition(location, newState.matches || state.matches),\n      preventScrollReset,\n      blockers\n    }), {\n      viewTransitionOpts,\n      flushSync: flushSync === true\n    });\n    // Reset stateful navigation vars\n    pendingAction = Action.Pop;\n    pendingPreventScrollReset = false;\n    pendingViewTransitionEnabled = false;\n    isUninterruptedRevalidation = false;\n    isRevalidationRequired = false;\n    cancelledDeferredRoutes = [];\n  }\n  // Trigger a navigation event, which can either be a numerical POP or a PUSH\n  // replace with an optional submission\n  async function navigate(to, opts) {\n    if (typeof to === \"number\") {\n      init.history.go(to);\n      return;\n    }\n    let normalizedPath = normalizeTo(state.location, state.matches, basename, future.v7_prependBasename, to, future.v7_relativeSplatPath, opts == null ? void 0 : opts.fromRouteId, opts == null ? void 0 : opts.relative);\n    let {\n      path,\n      submission,\n      error\n    } = normalizeNavigateOptions(future.v7_normalizeFormMethod, false, normalizedPath, opts);\n    let currentLocation = state.location;\n    let nextLocation = createLocation(state.location, path, opts && opts.state);\n    // When using navigate as a PUSH/REPLACE we aren't reading an already-encoded\n    // URL from window.location, so we need to encode it here so the behavior\n    // remains the same as POP and non-data-router usages.  new URL() does all\n    // the same encoding we'd get from a history.pushState/window.location read\n    // without having to touch history\n    nextLocation = _extends({}, nextLocation, init.history.encodeLocation(nextLocation));\n    let userReplace = opts && opts.replace != null ? opts.replace : undefined;\n    let historyAction = Action.Push;\n    if (userReplace === true) {\n      historyAction = Action.Replace;\n    } else if (userReplace === false) ; else if (submission != null && isMutationMethod(submission.formMethod) && submission.formAction === state.location.pathname + state.location.search) {\n      // By default on submissions to the current location we REPLACE so that\n      // users don't have to double-click the back button to get to the prior\n      // location.  If the user redirects to a different location from the\n      // action/loader this will be ignored and the redirect will be a PUSH\n      historyAction = Action.Replace;\n    }\n    let preventScrollReset = opts && \"preventScrollReset\" in opts ? opts.preventScrollReset === true : undefined;\n    let flushSync = (opts && opts.flushSync) === true;\n    let blockerKey = shouldBlockNavigation({\n      currentLocation,\n      nextLocation,\n      historyAction\n    });\n    if (blockerKey) {\n      // Put the blocker into a blocked state\n      updateBlocker(blockerKey, {\n        state: \"blocked\",\n        location: nextLocation,\n        proceed() {\n          updateBlocker(blockerKey, {\n            state: \"proceeding\",\n            proceed: undefined,\n            reset: undefined,\n            location: nextLocation\n          });\n          // Send the same navigation through\n          navigate(to, opts);\n        },\n        reset() {\n          let blockers = new Map(state.blockers);\n          blockers.set(blockerKey, IDLE_BLOCKER);\n          updateState({\n            blockers\n          });\n        }\n      });\n      return;\n    }\n    return await startNavigation(historyAction, nextLocation, {\n      submission,\n      // Send through the formData serialization error if we have one so we can\n      // render at the right error boundary after we match routes\n      pendingError: error,\n      preventScrollReset,\n      replace: opts && opts.replace,\n      enableViewTransition: opts && opts.viewTransition,\n      flushSync\n    });\n  }\n  // Revalidate all current loaders.  If a navigation is in progress or if this\n  // is interrupted by a navigation, allow this to \"succeed\" by calling all\n  // loaders during the next loader round\n  function revalidate() {\n    interruptActiveLoads();\n    updateState({\n      revalidation: \"loading\"\n    });\n    // If we're currently submitting an action, we don't need to start a new\n    // navigation, we'll just let the follow up loader execution call all loaders\n    if (state.navigation.state === \"submitting\") {\n      return;\n    }\n    // If we're currently in an idle state, start a new navigation for the current\n    // action/location and mark it as uninterrupted, which will skip the history\n    // update in completeNavigation\n    if (state.navigation.state === \"idle\") {\n      startNavigation(state.historyAction, state.location, {\n        startUninterruptedRevalidation: true\n      });\n      return;\n    }\n    // Otherwise, if we're currently in a loading state, just start a new\n    // navigation to the navigation.location but do not trigger an uninterrupted\n    // revalidation so that history correctly updates once the navigation completes\n    startNavigation(pendingAction || state.historyAction, state.navigation.location, {\n      overrideNavigation: state.navigation,\n      // Proxy through any rending view transition\n      enableViewTransition: pendingViewTransitionEnabled === true\n    });\n  }\n  // Start a navigation to the given action/location.  Can optionally provide a\n  // overrideNavigation which will override the normalLoad in the case of a redirect\n  // navigation\n  async function startNavigation(historyAction, location, opts) {\n    // Abort any in-progress navigations and start a new one. Unset any ongoing\n    // uninterrupted revalidations unless told otherwise, since we want this\n    // new navigation to update history normally\n    pendingNavigationController && pendingNavigationController.abort();\n    pendingNavigationController = null;\n    pendingAction = historyAction;\n    isUninterruptedRevalidation = (opts && opts.startUninterruptedRevalidation) === true;\n    // Save the current scroll position every time we start a new navigation,\n    // and track whether we should reset scroll on completion\n    saveScrollPosition(state.location, state.matches);\n    pendingPreventScrollReset = (opts && opts.preventScrollReset) === true;\n    pendingViewTransitionEnabled = (opts && opts.enableViewTransition) === true;\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let loadingNavigation = opts && opts.overrideNavigation;\n    let matches = opts != null && opts.initialHydration && state.matches && state.matches.length > 0 && !initialMatchesIsFOW ?\n    // `matchRoutes()` has already been called if we're in here via `router.initialize()`\n    state.matches : matchRoutes(routesToUse, location, basename);\n    let flushSync = (opts && opts.flushSync) === true;\n    // Short circuit if it's only a hash change and not a revalidation or\n    // mutation submission.\n    //\n    // Ignore on initial page loads because since the initial hydration will always\n    // be \"same hash\".  For example, on /page#hash and submit a <Form method=\"post\">\n    // which will default to a navigation to /page\n    if (matches && state.initialized && !isRevalidationRequired && isHashChangeOnly(state.location, location) && !(opts && opts.submission && isMutationMethod(opts.submission.formMethod))) {\n      completeNavigation(location, {\n        matches\n      }, {\n        flushSync\n      });\n      return;\n    }\n    let fogOfWar = checkFogOfWar(matches, routesToUse, location.pathname);\n    if (fogOfWar.active && fogOfWar.matches) {\n      matches = fogOfWar.matches;\n    }\n    // Short circuit with a 404 on the root error boundary if we match nothing\n    if (!matches) {\n      let {\n        error,\n        notFoundMatches,\n        route\n      } = handleNavigational404(location.pathname);\n      completeNavigation(location, {\n        matches: notFoundMatches,\n        loaderData: {},\n        errors: {\n          [route.id]: error\n        }\n      }, {\n        flushSync\n      });\n      return;\n    }\n    // Create a controller/Request for this navigation\n    pendingNavigationController = new AbortController();\n    let request = createClientSideRequest(init.history, location, pendingNavigationController.signal, opts && opts.submission);\n    let pendingActionResult;\n    if (opts && opts.pendingError) {\n      // If we have a pendingError, it means the user attempted a GET submission\n      // with binary FormData so assign here and skip to handleLoaders.  That\n      // way we handle calling loaders above the boundary etc.  It's not really\n      // different from an actionError in that sense.\n      pendingActionResult = [findNearestBoundary(matches).route.id, {\n        type: ResultType.error,\n        error: opts.pendingError\n      }];\n    } else if (opts && opts.submission && isMutationMethod(opts.submission.formMethod)) {\n      // Call action if we received an action submission\n      let actionResult = await handleAction(request, location, opts.submission, matches, fogOfWar.active, {\n        replace: opts.replace,\n        flushSync\n      });\n      if (actionResult.shortCircuited) {\n        return;\n      }\n      // If we received a 404 from handleAction, it's because we couldn't lazily\n      // discover the destination route so we don't want to call loaders\n      if (actionResult.pendingActionResult) {\n        let [routeId, result] = actionResult.pendingActionResult;\n        if (isErrorResult(result) && isRouteErrorResponse(result.error) && result.error.status === 404) {\n          pendingNavigationController = null;\n          completeNavigation(location, {\n            matches: actionResult.matches,\n            loaderData: {},\n            errors: {\n              [routeId]: result.error\n            }\n          });\n          return;\n        }\n      }\n      matches = actionResult.matches || matches;\n      pendingActionResult = actionResult.pendingActionResult;\n      loadingNavigation = getLoadingNavigation(location, opts.submission);\n      flushSync = false;\n      // No need to do fog of war matching again on loader execution\n      fogOfWar.active = false;\n      // Create a GET request for the loaders\n      request = createClientSideRequest(init.history, request.url, request.signal);\n    }\n    // Call loaders\n    let {\n      shortCircuited,\n      matches: updatedMatches,\n      loaderData,\n      errors\n    } = await handleLoaders(request, location, matches, fogOfWar.active, loadingNavigation, opts && opts.submission, opts && opts.fetcherSubmission, opts && opts.replace, opts && opts.initialHydration === true, flushSync, pendingActionResult);\n    if (shortCircuited) {\n      return;\n    }\n    // Clean up now that the action/loaders have completed.  Don't clean up if\n    // we short circuited because pendingNavigationController will have already\n    // been assigned to a new controller for the next navigation\n    pendingNavigationController = null;\n    completeNavigation(location, _extends({\n      matches: updatedMatches || matches\n    }, getActionDataForCommit(pendingActionResult), {\n      loaderData,\n      errors\n    }));\n  }\n  // Call the action matched by the leaf route for this navigation and handle\n  // redirects/errors\n  async function handleAction(request, location, submission, matches, isFogOfWar, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n    interruptActiveLoads();\n    // Put us in a submitting state\n    let navigation = getSubmittingNavigation(location, submission);\n    updateState({\n      navigation\n    }, {\n      flushSync: opts.flushSync === true\n    });\n    if (isFogOfWar) {\n      let discoverResult = await discoverRoutes(matches, location.pathname, request.signal);\n      if (discoverResult.type === \"aborted\") {\n        return {\n          shortCircuited: true\n        };\n      } else if (discoverResult.type === \"error\") {\n        let boundaryId = findNearestBoundary(discoverResult.partialMatches).route.id;\n        return {\n          matches: discoverResult.partialMatches,\n          pendingActionResult: [boundaryId, {\n            type: ResultType.error,\n            error: discoverResult.error\n          }]\n        };\n      } else if (!discoverResult.matches) {\n        let {\n          notFoundMatches,\n          error,\n          route\n        } = handleNavigational404(location.pathname);\n        return {\n          matches: notFoundMatches,\n          pendingActionResult: [route.id, {\n            type: ResultType.error,\n            error\n          }]\n        };\n      } else {\n        matches = discoverResult.matches;\n      }\n    }\n    // Call our action and get the result\n    let result;\n    let actionMatch = getTargetMatch(matches, location);\n    if (!actionMatch.route.action && !actionMatch.route.lazy) {\n      result = {\n        type: ResultType.error,\n        error: getInternalRouterError(405, {\n          method: request.method,\n          pathname: location.pathname,\n          routeId: actionMatch.route.id\n        })\n      };\n    } else {\n      let results = await callDataStrategy(\"action\", state, request, [actionMatch], matches, null);\n      result = results[actionMatch.route.id];\n      if (request.signal.aborted) {\n        return {\n          shortCircuited: true\n        };\n      }\n    }\n    if (isRedirectResult(result)) {\n      let replace;\n      if (opts && opts.replace != null) {\n        replace = opts.replace;\n      } else {\n        // If the user didn't explicity indicate replace behavior, replace if\n        // we redirected to the exact same location we're currently at to avoid\n        // double back-buttons\n        let location = normalizeRedirectLocation(result.response.headers.get(\"Location\"), new URL(request.url), basename);\n        replace = location === state.location.pathname + state.location.search;\n      }\n      await startRedirectNavigation(request, result, true, {\n        submission,\n        replace\n      });\n      return {\n        shortCircuited: true\n      };\n    }\n    if (isDeferredResult(result)) {\n      throw getInternalRouterError(400, {\n        type: \"defer-action\"\n      });\n    }\n    if (isErrorResult(result)) {\n      // Store off the pending error - we use it to determine which loaders\n      // to call and will commit it when we complete the navigation\n      let boundaryMatch = findNearestBoundary(matches, actionMatch.route.id);\n      // By default, all submissions to the current location are REPLACE\n      // navigations, but if the action threw an error that'll be rendered in\n      // an errorElement, we fall back to PUSH so that the user can use the\n      // back button to get back to the pre-submission form location to try\n      // again\n      if ((opts && opts.replace) !== true) {\n        pendingAction = Action.Push;\n      }\n      return {\n        matches,\n        pendingActionResult: [boundaryMatch.route.id, result]\n      };\n    }\n    return {\n      matches,\n      pendingActionResult: [actionMatch.route.id, result]\n    };\n  }\n  // Call all applicable loaders for the given matches, handling redirects,\n  // errors, etc.\n  async function handleLoaders(request, location, matches, isFogOfWar, overrideNavigation, submission, fetcherSubmission, replace, initialHydration, flushSync, pendingActionResult) {\n    // Figure out the right navigation we want to use for data loading\n    let loadingNavigation = overrideNavigation || getLoadingNavigation(location, submission);\n    // If this was a redirect from an action we don't have a \"submission\" but\n    // we have it on the loading navigation so use that if available\n    let activeSubmission = submission || fetcherSubmission || getSubmissionFromNavigation(loadingNavigation);\n    // If this is an uninterrupted revalidation, we remain in our current idle\n    // state.  If not, we need to switch to our loading state and load data,\n    // preserving any new action data or existing action data (in the case of\n    // a revalidation interrupting an actionReload)\n    // If we have partialHydration enabled, then don't update the state for the\n    // initial data load since it's not a \"navigation\"\n    let shouldUpdateNavigationState = !isUninterruptedRevalidation && (!future.v7_partialHydration || !initialHydration);\n    // When fog of war is enabled, we enter our `loading` state earlier so we\n    // can discover new routes during the `loading` state.  We skip this if\n    // we've already run actions since we would have done our matching already.\n    // If the children() function threw then, we want to proceed with the\n    // partial matches it discovered.\n    if (isFogOfWar) {\n      if (shouldUpdateNavigationState) {\n        let actionData = getUpdatedActionData(pendingActionResult);\n        updateState(_extends({\n          navigation: loadingNavigation\n        }, actionData !== undefined ? {\n          actionData\n        } : {}), {\n          flushSync\n        });\n      }\n      let discoverResult = await discoverRoutes(matches, location.pathname, request.signal);\n      if (discoverResult.type === \"aborted\") {\n        return {\n          shortCircuited: true\n        };\n      } else if (discoverResult.type === \"error\") {\n        let boundaryId = findNearestBoundary(discoverResult.partialMatches).route.id;\n        return {\n          matches: discoverResult.partialMatches,\n          loaderData: {},\n          errors: {\n            [boundaryId]: discoverResult.error\n          }\n        };\n      } else if (!discoverResult.matches) {\n        let {\n          error,\n          notFoundMatches,\n          route\n        } = handleNavigational404(location.pathname);\n        return {\n          matches: notFoundMatches,\n          loaderData: {},\n          errors: {\n            [route.id]: error\n          }\n        };\n      } else {\n        matches = discoverResult.matches;\n      }\n    }\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let [matchesToLoad, revalidatingFetchers] = getMatchesToLoad(init.history, state, matches, activeSubmission, location, future.v7_partialHydration && initialHydration === true, future.v7_skipActionErrorRevalidation, isRevalidationRequired, cancelledDeferredRoutes, cancelledFetcherLoads, deletedFetchers, fetchLoadMatches, fetchRedirectIds, routesToUse, basename, pendingActionResult);\n    // Cancel pending deferreds for no-longer-matched routes or routes we're\n    // about to reload.  Note that if this is an action reload we would have\n    // already cancelled all pending deferreds so this would be a no-op\n    cancelActiveDeferreds(routeId => !(matches && matches.some(m => m.route.id === routeId)) || matchesToLoad && matchesToLoad.some(m => m.route.id === routeId));\n    pendingNavigationLoadId = ++incrementingLoadId;\n    // Short circuit if we have no loaders to run\n    if (matchesToLoad.length === 0 && revalidatingFetchers.length === 0) {\n      let updatedFetchers = markFetchRedirectsDone();\n      completeNavigation(location, _extends({\n        matches,\n        loaderData: {},\n        // Commit pending error if we're short circuiting\n        errors: pendingActionResult && isErrorResult(pendingActionResult[1]) ? {\n          [pendingActionResult[0]]: pendingActionResult[1].error\n        } : null\n      }, getActionDataForCommit(pendingActionResult), updatedFetchers ? {\n        fetchers: new Map(state.fetchers)\n      } : {}), {\n        flushSync\n      });\n      return {\n        shortCircuited: true\n      };\n    }\n    if (shouldUpdateNavigationState) {\n      let updates = {};\n      if (!isFogOfWar) {\n        // Only update navigation/actionNData if we didn't already do it above\n        updates.navigation = loadingNavigation;\n        let actionData = getUpdatedActionData(pendingActionResult);\n        if (actionData !== undefined) {\n          updates.actionData = actionData;\n        }\n      }\n      if (revalidatingFetchers.length > 0) {\n        updates.fetchers = getUpdatedRevalidatingFetchers(revalidatingFetchers);\n      }\n      updateState(updates, {\n        flushSync\n      });\n    }\n    revalidatingFetchers.forEach(rf => {\n      abortFetcher(rf.key);\n      if (rf.controller) {\n        // Fetchers use an independent AbortController so that aborting a fetcher\n        // (via deleteFetcher) does not abort the triggering navigation that\n        // triggered the revalidation\n        fetchControllers.set(rf.key, rf.controller);\n      }\n    });\n    // Proxy navigation abort through to revalidation fetchers\n    let abortPendingFetchRevalidations = () => revalidatingFetchers.forEach(f => abortFetcher(f.key));\n    if (pendingNavigationController) {\n      pendingNavigationController.signal.addEventListener(\"abort\", abortPendingFetchRevalidations);\n    }\n    let {\n      loaderResults,\n      fetcherResults\n    } = await callLoadersAndMaybeResolveData(state, matches, matchesToLoad, revalidatingFetchers, request);\n    if (request.signal.aborted) {\n      return {\n        shortCircuited: true\n      };\n    }\n    // Clean up _after_ loaders have completed.  Don't clean up if we short\n    // circuited because fetchControllers would have been aborted and\n    // reassigned to new controllers for the next navigation\n    if (pendingNavigationController) {\n      pendingNavigationController.signal.removeEventListener(\"abort\", abortPendingFetchRevalidations);\n    }\n    revalidatingFetchers.forEach(rf => fetchControllers.delete(rf.key));\n    // If any loaders returned a redirect Response, start a new REPLACE navigation\n    let redirect = findRedirect(loaderResults);\n    if (redirect) {\n      await startRedirectNavigation(request, redirect.result, true, {\n        replace\n      });\n      return {\n        shortCircuited: true\n      };\n    }\n    redirect = findRedirect(fetcherResults);\n    if (redirect) {\n      // If this redirect came from a fetcher make sure we mark it in\n      // fetchRedirectIds so it doesn't get revalidated on the next set of\n      // loader executions\n      fetchRedirectIds.add(redirect.key);\n      await startRedirectNavigation(request, redirect.result, true, {\n        replace\n      });\n      return {\n        shortCircuited: true\n      };\n    }\n    // Process and commit output from loaders\n    let {\n      loaderData,\n      errors\n    } = processLoaderData(state, matches, loaderResults, pendingActionResult, revalidatingFetchers, fetcherResults, activeDeferreds);\n    // Wire up subscribers to update loaderData as promises settle\n    activeDeferreds.forEach((deferredData, routeId) => {\n      deferredData.subscribe(aborted => {\n        // Note: No need to updateState here since the TrackedPromise on\n        // loaderData is stable across resolve/reject\n        // Remove this instance if we were aborted or if promises have settled\n        if (aborted || deferredData.done) {\n          activeDeferreds.delete(routeId);\n        }\n      });\n    });\n    // Preserve SSR errors during partial hydration\n    if (future.v7_partialHydration && initialHydration && state.errors) {\n      errors = _extends({}, state.errors, errors);\n    }\n    let updatedFetchers = markFetchRedirectsDone();\n    let didAbortFetchLoads = abortStaleFetchLoads(pendingNavigationLoadId);\n    let shouldUpdateFetchers = updatedFetchers || didAbortFetchLoads || revalidatingFetchers.length > 0;\n    return _extends({\n      matches,\n      loaderData,\n      errors\n    }, shouldUpdateFetchers ? {\n      fetchers: new Map(state.fetchers)\n    } : {});\n  }\n  function getUpdatedActionData(pendingActionResult) {\n    if (pendingActionResult && !isErrorResult(pendingActionResult[1])) {\n      // This is cast to `any` currently because `RouteData`uses any and it\n      // would be a breaking change to use any.\n      // TODO: v7 - change `RouteData` to use `unknown` instead of `any`\n      return {\n        [pendingActionResult[0]]: pendingActionResult[1].data\n      };\n    } else if (state.actionData) {\n      if (Object.keys(state.actionData).length === 0) {\n        return null;\n      } else {\n        return state.actionData;\n      }\n    }\n  }\n  function getUpdatedRevalidatingFetchers(revalidatingFetchers) {\n    revalidatingFetchers.forEach(rf => {\n      let fetcher = state.fetchers.get(rf.key);\n      let revalidatingFetcher = getLoadingFetcher(undefined, fetcher ? fetcher.data : undefined);\n      state.fetchers.set(rf.key, revalidatingFetcher);\n    });\n    return new Map(state.fetchers);\n  }\n  // Trigger a fetcher load/submit for the given fetcher key\n  function fetch(key, routeId, href, opts) {\n    if (isServer) {\n      throw new Error(\"router.fetch() was called during the server render, but it shouldn't be. \" + \"You are likely calling a useFetcher() method in the body of your component. \" + \"Try moving it to a useEffect or a callback.\");\n    }\n    abortFetcher(key);\n    let flushSync = (opts && opts.flushSync) === true;\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let normalizedPath = normalizeTo(state.location, state.matches, basename, future.v7_prependBasename, href, future.v7_relativeSplatPath, routeId, opts == null ? void 0 : opts.relative);\n    let matches = matchRoutes(routesToUse, normalizedPath, basename);\n    let fogOfWar = checkFogOfWar(matches, routesToUse, normalizedPath);\n    if (fogOfWar.active && fogOfWar.matches) {\n      matches = fogOfWar.matches;\n    }\n    if (!matches) {\n      setFetcherError(key, routeId, getInternalRouterError(404, {\n        pathname: normalizedPath\n      }), {\n        flushSync\n      });\n      return;\n    }\n    let {\n      path,\n      submission,\n      error\n    } = normalizeNavigateOptions(future.v7_normalizeFormMethod, true, normalizedPath, opts);\n    if (error) {\n      setFetcherError(key, routeId, error, {\n        flushSync\n      });\n      return;\n    }\n    let match = getTargetMatch(matches, path);\n    let preventScrollReset = (opts && opts.preventScrollReset) === true;\n    if (submission && isMutationMethod(submission.formMethod)) {\n      handleFetcherAction(key, routeId, path, match, matches, fogOfWar.active, flushSync, preventScrollReset, submission);\n      return;\n    }\n    // Store off the match so we can call it's shouldRevalidate on subsequent\n    // revalidations\n    fetchLoadMatches.set(key, {\n      routeId,\n      path\n    });\n    handleFetcherLoader(key, routeId, path, match, matches, fogOfWar.active, flushSync, preventScrollReset, submission);\n  }\n  // Call the action for the matched fetcher.submit(), and then handle redirects,\n  // errors, and revalidation\n  async function handleFetcherAction(key, routeId, path, match, requestMatches, isFogOfWar, flushSync, preventScrollReset, submission) {\n    interruptActiveLoads();\n    fetchLoadMatches.delete(key);\n    function detectAndHandle405Error(m) {\n      if (!m.route.action && !m.route.lazy) {\n        let error = getInternalRouterError(405, {\n          method: submission.formMethod,\n          pathname: path,\n          routeId: routeId\n        });\n        setFetcherError(key, routeId, error, {\n          flushSync\n        });\n        return true;\n      }\n      return false;\n    }\n    if (!isFogOfWar && detectAndHandle405Error(match)) {\n      return;\n    }\n    // Put this fetcher into it's submitting state\n    let existingFetcher = state.fetchers.get(key);\n    updateFetcherState(key, getSubmittingFetcher(submission, existingFetcher), {\n      flushSync\n    });\n    let abortController = new AbortController();\n    let fetchRequest = createClientSideRequest(init.history, path, abortController.signal, submission);\n    if (isFogOfWar) {\n      let discoverResult = await discoverRoutes(requestMatches, new URL(fetchRequest.url).pathname, fetchRequest.signal, key);\n      if (discoverResult.type === \"aborted\") {\n        return;\n      } else if (discoverResult.type === \"error\") {\n        setFetcherError(key, routeId, discoverResult.error, {\n          flushSync\n        });\n        return;\n      } else if (!discoverResult.matches) {\n        setFetcherError(key, routeId, getInternalRouterError(404, {\n          pathname: path\n        }), {\n          flushSync\n        });\n        return;\n      } else {\n        requestMatches = discoverResult.matches;\n        match = getTargetMatch(requestMatches, path);\n        if (detectAndHandle405Error(match)) {\n          return;\n        }\n      }\n    }\n    // Call the action for the fetcher\n    fetchControllers.set(key, abortController);\n    let originatingLoadId = incrementingLoadId;\n    let actionResults = await callDataStrategy(\"action\", state, fetchRequest, [match], requestMatches, key);\n    let actionResult = actionResults[match.route.id];\n    if (fetchRequest.signal.aborted) {\n      // We can delete this so long as we weren't aborted by our own fetcher\n      // re-submit which would have put _new_ controller is in fetchControllers\n      if (fetchControllers.get(key) === abortController) {\n        fetchControllers.delete(key);\n      }\n      return;\n    }\n    // When using v7_fetcherPersist, we don't want errors bubbling up to the UI\n    // or redirects processed for unmounted fetchers so we just revert them to\n    // idle\n    if (future.v7_fetcherPersist && deletedFetchers.has(key)) {\n      if (isRedirectResult(actionResult) || isErrorResult(actionResult)) {\n        updateFetcherState(key, getDoneFetcher(undefined));\n        return;\n      }\n      // Let SuccessResult's fall through for revalidation\n    } else {\n      if (isRedirectResult(actionResult)) {\n        fetchControllers.delete(key);\n        if (pendingNavigationLoadId > originatingLoadId) {\n          // A new navigation was kicked off after our action started, so that\n          // should take precedence over this redirect navigation.  We already\n          // set isRevalidationRequired so all loaders for the new route should\n          // fire unless opted out via shouldRevalidate\n          updateFetcherState(key, getDoneFetcher(undefined));\n          return;\n        } else {\n          fetchRedirectIds.add(key);\n          updateFetcherState(key, getLoadingFetcher(submission));\n          return startRedirectNavigation(fetchRequest, actionResult, false, {\n            fetcherSubmission: submission,\n            preventScrollReset\n          });\n        }\n      }\n      // Process any non-redirect errors thrown\n      if (isErrorResult(actionResult)) {\n        setFetcherError(key, routeId, actionResult.error);\n        return;\n      }\n    }\n    if (isDeferredResult(actionResult)) {\n      throw getInternalRouterError(400, {\n        type: \"defer-action\"\n      });\n    }\n    // Start the data load for current matches, or the next location if we're\n    // in the middle of a navigation\n    let nextLocation = state.navigation.location || state.location;\n    let revalidationRequest = createClientSideRequest(init.history, nextLocation, abortController.signal);\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let matches = state.navigation.state !== \"idle\" ? matchRoutes(routesToUse, state.navigation.location, basename) : state.matches;\n    invariant(matches, \"Didn't find any matches after fetcher action\");\n    let loadId = ++incrementingLoadId;\n    fetchReloadIds.set(key, loadId);\n    let loadFetcher = getLoadingFetcher(submission, actionResult.data);\n    state.fetchers.set(key, loadFetcher);\n    let [matchesToLoad, revalidatingFetchers] = getMatchesToLoad(init.history, state, matches, submission, nextLocation, false, future.v7_skipActionErrorRevalidation, isRevalidationRequired, cancelledDeferredRoutes, cancelledFetcherLoads, deletedFetchers, fetchLoadMatches, fetchRedirectIds, routesToUse, basename, [match.route.id, actionResult]);\n    // Put all revalidating fetchers into the loading state, except for the\n    // current fetcher which we want to keep in it's current loading state which\n    // contains it's action submission info + action data\n    revalidatingFetchers.filter(rf => rf.key !== key).forEach(rf => {\n      let staleKey = rf.key;\n      let existingFetcher = state.fetchers.get(staleKey);\n      let revalidatingFetcher = getLoadingFetcher(undefined, existingFetcher ? existingFetcher.data : undefined);\n      state.fetchers.set(staleKey, revalidatingFetcher);\n      abortFetcher(staleKey);\n      if (rf.controller) {\n        fetchControllers.set(staleKey, rf.controller);\n      }\n    });\n    updateState({\n      fetchers: new Map(state.fetchers)\n    });\n    let abortPendingFetchRevalidations = () => revalidatingFetchers.forEach(rf => abortFetcher(rf.key));\n    abortController.signal.addEventListener(\"abort\", abortPendingFetchRevalidations);\n    let {\n      loaderResults,\n      fetcherResults\n    } = await callLoadersAndMaybeResolveData(state, matches, matchesToLoad, revalidatingFetchers, revalidationRequest);\n    if (abortController.signal.aborted) {\n      return;\n    }\n    abortController.signal.removeEventListener(\"abort\", abortPendingFetchRevalidations);\n    fetchReloadIds.delete(key);\n    fetchControllers.delete(key);\n    revalidatingFetchers.forEach(r => fetchControllers.delete(r.key));\n    let redirect = findRedirect(loaderResults);\n    if (redirect) {\n      return startRedirectNavigation(revalidationRequest, redirect.result, false, {\n        preventScrollReset\n      });\n    }\n    redirect = findRedirect(fetcherResults);\n    if (redirect) {\n      // If this redirect came from a fetcher make sure we mark it in\n      // fetchRedirectIds so it doesn't get revalidated on the next set of\n      // loader executions\n      fetchRedirectIds.add(redirect.key);\n      return startRedirectNavigation(revalidationRequest, redirect.result, false, {\n        preventScrollReset\n      });\n    }\n    // Process and commit output from loaders\n    let {\n      loaderData,\n      errors\n    } = processLoaderData(state, matches, loaderResults, undefined, revalidatingFetchers, fetcherResults, activeDeferreds);\n    // Since we let revalidations complete even if the submitting fetcher was\n    // deleted, only put it back to idle if it hasn't been deleted\n    if (state.fetchers.has(key)) {\n      let doneFetcher = getDoneFetcher(actionResult.data);\n      state.fetchers.set(key, doneFetcher);\n    }\n    abortStaleFetchLoads(loadId);\n    // If we are currently in a navigation loading state and this fetcher is\n    // more recent than the navigation, we want the newer data so abort the\n    // navigation and complete it with the fetcher data\n    if (state.navigation.state === \"loading\" && loadId > pendingNavigationLoadId) {\n      invariant(pendingAction, \"Expected pending action\");\n      pendingNavigationController && pendingNavigationController.abort();\n      completeNavigation(state.navigation.location, {\n        matches,\n        loaderData,\n        errors,\n        fetchers: new Map(state.fetchers)\n      });\n    } else {\n      // otherwise just update with the fetcher data, preserving any existing\n      // loaderData for loaders that did not need to reload.  We have to\n      // manually merge here since we aren't going through completeNavigation\n      updateState({\n        errors,\n        loaderData: mergeLoaderData(state.loaderData, loaderData, matches, errors),\n        fetchers: new Map(state.fetchers)\n      });\n      isRevalidationRequired = false;\n    }\n  }\n  // Call the matched loader for fetcher.load(), handling redirects, errors, etc.\n  async function handleFetcherLoader(key, routeId, path, match, matches, isFogOfWar, flushSync, preventScrollReset, submission) {\n    let existingFetcher = state.fetchers.get(key);\n    updateFetcherState(key, getLoadingFetcher(submission, existingFetcher ? existingFetcher.data : undefined), {\n      flushSync\n    });\n    let abortController = new AbortController();\n    let fetchRequest = createClientSideRequest(init.history, path, abortController.signal);\n    if (isFogOfWar) {\n      let discoverResult = await discoverRoutes(matches, new URL(fetchRequest.url).pathname, fetchRequest.signal, key);\n      if (discoverResult.type === \"aborted\") {\n        return;\n      } else if (discoverResult.type === \"error\") {\n        setFetcherError(key, routeId, discoverResult.error, {\n          flushSync\n        });\n        return;\n      } else if (!discoverResult.matches) {\n        setFetcherError(key, routeId, getInternalRouterError(404, {\n          pathname: path\n        }), {\n          flushSync\n        });\n        return;\n      } else {\n        matches = discoverResult.matches;\n        match = getTargetMatch(matches, path);\n      }\n    }\n    // Call the loader for this fetcher route match\n    fetchControllers.set(key, abortController);\n    let originatingLoadId = incrementingLoadId;\n    let results = await callDataStrategy(\"loader\", state, fetchRequest, [match], matches, key);\n    let result = results[match.route.id];\n    // Deferred isn't supported for fetcher loads, await everything and treat it\n    // as a normal load.  resolveDeferredData will return undefined if this\n    // fetcher gets aborted, so we just leave result untouched and short circuit\n    // below if that happens\n    if (isDeferredResult(result)) {\n      result = (await resolveDeferredData(result, fetchRequest.signal, true)) || result;\n    }\n    // We can delete this so long as we weren't aborted by our our own fetcher\n    // re-load which would have put _new_ controller is in fetchControllers\n    if (fetchControllers.get(key) === abortController) {\n      fetchControllers.delete(key);\n    }\n    if (fetchRequest.signal.aborted) {\n      return;\n    }\n    // We don't want errors bubbling up or redirects followed for unmounted\n    // fetchers, so short circuit here if it was removed from the UI\n    if (deletedFetchers.has(key)) {\n      updateFetcherState(key, getDoneFetcher(undefined));\n      return;\n    }\n    // If the loader threw a redirect Response, start a new REPLACE navigation\n    if (isRedirectResult(result)) {\n      if (pendingNavigationLoadId > originatingLoadId) {\n        // A new navigation was kicked off after our loader started, so that\n        // should take precedence over this redirect navigation\n        updateFetcherState(key, getDoneFetcher(undefined));\n        return;\n      } else {\n        fetchRedirectIds.add(key);\n        await startRedirectNavigation(fetchRequest, result, false, {\n          preventScrollReset\n        });\n        return;\n      }\n    }\n    // Process any non-redirect errors thrown\n    if (isErrorResult(result)) {\n      setFetcherError(key, routeId, result.error);\n      return;\n    }\n    invariant(!isDeferredResult(result), \"Unhandled fetcher deferred data\");\n    // Put the fetcher back into an idle state\n    updateFetcherState(key, getDoneFetcher(result.data));\n  }\n  /**\n   * Utility function to handle redirects returned from an action or loader.\n   * Normally, a redirect \"replaces\" the navigation that triggered it.  So, for\n   * example:\n   *\n   *  - user is on /a\n   *  - user clicks a link to /b\n   *  - loader for /b redirects to /c\n   *\n   * In a non-JS app the browser would track the in-flight navigation to /b and\n   * then replace it with /c when it encountered the redirect response.  In\n   * the end it would only ever update the URL bar with /c.\n   *\n   * In client-side routing using pushState/replaceState, we aim to emulate\n   * this behavior and we also do not update history until the end of the\n   * navigation (including processed redirects).  This means that we never\n   * actually touch history until we've processed redirects, so we just use\n   * the history action from the original navigation (PUSH or REPLACE).\n   */\n  async function startRedirectNavigation(request, redirect, isNavigation, _temp2) {\n    let {\n      submission,\n      fetcherSubmission,\n      preventScrollReset,\n      replace\n    } = _temp2 === void 0 ? {} : _temp2;\n    if (redirect.response.headers.has(\"X-Remix-Revalidate\")) {\n      isRevalidationRequired = true;\n    }\n    let location = redirect.response.headers.get(\"Location\");\n    invariant(location, \"Expected a Location header on the redirect Response\");\n    location = normalizeRedirectLocation(location, new URL(request.url), basename);\n    let redirectLocation = createLocation(state.location, location, {\n      _isRedirect: true\n    });\n    if (isBrowser) {\n      let isDocumentReload = false;\n      if (redirect.response.headers.has(\"X-Remix-Reload-Document\")) {\n        // Hard reload if the response contained X-Remix-Reload-Document\n        isDocumentReload = true;\n      } else if (ABSOLUTE_URL_REGEX.test(location)) {\n        const url = init.history.createURL(location);\n        isDocumentReload =\n        // Hard reload if it's an absolute URL to a new origin\n        url.origin !== routerWindow.location.origin ||\n        // Hard reload if it's an absolute URL that does not match our basename\n        stripBasename(url.pathname, basename) == null;\n      }\n      if (isDocumentReload) {\n        if (replace) {\n          routerWindow.location.replace(location);\n        } else {\n          routerWindow.location.assign(location);\n        }\n        return;\n      }\n    }\n    // There's no need to abort on redirects, since we don't detect the\n    // redirect until the action/loaders have settled\n    pendingNavigationController = null;\n    let redirectHistoryAction = replace === true || redirect.response.headers.has(\"X-Remix-Replace\") ? Action.Replace : Action.Push;\n    // Use the incoming submission if provided, fallback on the active one in\n    // state.navigation\n    let {\n      formMethod,\n      formAction,\n      formEncType\n    } = state.navigation;\n    if (!submission && !fetcherSubmission && formMethod && formAction && formEncType) {\n      submission = getSubmissionFromNavigation(state.navigation);\n    }\n    // If this was a 307/308 submission we want to preserve the HTTP method and\n    // re-submit the GET/POST/PUT/PATCH/DELETE as a submission navigation to the\n    // redirected location\n    let activeSubmission = submission || fetcherSubmission;\n    if (redirectPreserveMethodStatusCodes.has(redirect.response.status) && activeSubmission && isMutationMethod(activeSubmission.formMethod)) {\n      await startNavigation(redirectHistoryAction, redirectLocation, {\n        submission: _extends({}, activeSubmission, {\n          formAction: location\n        }),\n        // Preserve these flags across redirects\n        preventScrollReset: preventScrollReset || pendingPreventScrollReset,\n        enableViewTransition: isNavigation ? pendingViewTransitionEnabled : undefined\n      });\n    } else {\n      // If we have a navigation submission, we will preserve it through the\n      // redirect navigation\n      let overrideNavigation = getLoadingNavigation(redirectLocation, submission);\n      await startNavigation(redirectHistoryAction, redirectLocation, {\n        overrideNavigation,\n        // Send fetcher submissions through for shouldRevalidate\n        fetcherSubmission,\n        // Preserve these flags across redirects\n        preventScrollReset: preventScrollReset || pendingPreventScrollReset,\n        enableViewTransition: isNavigation ? pendingViewTransitionEnabled : undefined\n      });\n    }\n  }\n  // Utility wrapper for calling dataStrategy client-side without having to\n  // pass around the manifest, mapRouteProperties, etc.\n  async function callDataStrategy(type, state, request, matchesToLoad, matches, fetcherKey) {\n    let results;\n    let dataResults = {};\n    try {\n      results = await callDataStrategyImpl(dataStrategyImpl, type, state, request, matchesToLoad, matches, fetcherKey, manifest, mapRouteProperties);\n    } catch (e) {\n      // If the outer dataStrategy method throws, just return the error for all\n      // matches - and it'll naturally bubble to the root\n      matchesToLoad.forEach(m => {\n        dataResults[m.route.id] = {\n          type: ResultType.error,\n          error: e\n        };\n      });\n      return dataResults;\n    }\n    for (let [routeId, result] of Object.entries(results)) {\n      if (isRedirectDataStrategyResultResult(result)) {\n        let response = result.result;\n        dataResults[routeId] = {\n          type: ResultType.redirect,\n          response: normalizeRelativeRoutingRedirectResponse(response, request, routeId, matches, basename, future.v7_relativeSplatPath)\n        };\n      } else {\n        dataResults[routeId] = await convertDataStrategyResultToDataResult(result);\n      }\n    }\n    return dataResults;\n  }\n  async function callLoadersAndMaybeResolveData(state, matches, matchesToLoad, fetchersToLoad, request) {\n    let currentMatches = state.matches;\n    // Kick off loaders and fetchers in parallel\n    let loaderResultsPromise = callDataStrategy(\"loader\", state, request, matchesToLoad, matches, null);\n    let fetcherResultsPromise = Promise.all(fetchersToLoad.map(async f => {\n      if (f.matches && f.match && f.controller) {\n        let results = await callDataStrategy(\"loader\", state, createClientSideRequest(init.history, f.path, f.controller.signal), [f.match], f.matches, f.key);\n        let result = results[f.match.route.id];\n        // Fetcher results are keyed by fetcher key from here on out, not routeId\n        return {\n          [f.key]: result\n        };\n      } else {\n        return Promise.resolve({\n          [f.key]: {\n            type: ResultType.error,\n            error: getInternalRouterError(404, {\n              pathname: f.path\n            })\n          }\n        });\n      }\n    }));\n    let loaderResults = await loaderResultsPromise;\n    let fetcherResults = (await fetcherResultsPromise).reduce((acc, r) => Object.assign(acc, r), {});\n    await Promise.all([resolveNavigationDeferredResults(matches, loaderResults, request.signal, currentMatches, state.loaderData), resolveFetcherDeferredResults(matches, fetcherResults, fetchersToLoad)]);\n    return {\n      loaderResults,\n      fetcherResults\n    };\n  }\n  function interruptActiveLoads() {\n    // Every interruption triggers a revalidation\n    isRevalidationRequired = true;\n    // Cancel pending route-level deferreds and mark cancelled routes for\n    // revalidation\n    cancelledDeferredRoutes.push(...cancelActiveDeferreds());\n    // Abort in-flight fetcher loads\n    fetchLoadMatches.forEach((_, key) => {\n      if (fetchControllers.has(key)) {\n        cancelledFetcherLoads.add(key);\n      }\n      abortFetcher(key);\n    });\n  }\n  function updateFetcherState(key, fetcher, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n    state.fetchers.set(key, fetcher);\n    updateState({\n      fetchers: new Map(state.fetchers)\n    }, {\n      flushSync: (opts && opts.flushSync) === true\n    });\n  }\n  function setFetcherError(key, routeId, error, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n    let boundaryMatch = findNearestBoundary(state.matches, routeId);\n    deleteFetcher(key);\n    updateState({\n      errors: {\n        [boundaryMatch.route.id]: error\n      },\n      fetchers: new Map(state.fetchers)\n    }, {\n      flushSync: (opts && opts.flushSync) === true\n    });\n  }\n  function getFetcher(key) {\n    activeFetchers.set(key, (activeFetchers.get(key) || 0) + 1);\n    // If this fetcher was previously marked for deletion, unmark it since we\n    // have a new instance\n    if (deletedFetchers.has(key)) {\n      deletedFetchers.delete(key);\n    }\n    return state.fetchers.get(key) || IDLE_FETCHER;\n  }\n  function deleteFetcher(key) {\n    let fetcher = state.fetchers.get(key);\n    // Don't abort the controller if this is a deletion of a fetcher.submit()\n    // in it's loading phase since - we don't want to abort the corresponding\n    // revalidation and want them to complete and land\n    if (fetchControllers.has(key) && !(fetcher && fetcher.state === \"loading\" && fetchReloadIds.has(key))) {\n      abortFetcher(key);\n    }\n    fetchLoadMatches.delete(key);\n    fetchReloadIds.delete(key);\n    fetchRedirectIds.delete(key);\n    // If we opted into the flag we can clear this now since we're calling\n    // deleteFetcher() at the end of updateState() and we've already handed the\n    // deleted fetcher keys off to the data layer.\n    // If not, we're eagerly calling deleteFetcher() and we need to keep this\n    // Set populated until the next updateState call, and we'll clear\n    // `deletedFetchers` then\n    if (future.v7_fetcherPersist) {\n      deletedFetchers.delete(key);\n    }\n    cancelledFetcherLoads.delete(key);\n    state.fetchers.delete(key);\n  }\n  function deleteFetcherAndUpdateState(key) {\n    let count = (activeFetchers.get(key) || 0) - 1;\n    if (count <= 0) {\n      activeFetchers.delete(key);\n      deletedFetchers.add(key);\n      if (!future.v7_fetcherPersist) {\n        deleteFetcher(key);\n      }\n    } else {\n      activeFetchers.set(key, count);\n    }\n    updateState({\n      fetchers: new Map(state.fetchers)\n    });\n  }\n  function abortFetcher(key) {\n    let controller = fetchControllers.get(key);\n    if (controller) {\n      controller.abort();\n      fetchControllers.delete(key);\n    }\n  }\n  function markFetchersDone(keys) {\n    for (let key of keys) {\n      let fetcher = getFetcher(key);\n      let doneFetcher = getDoneFetcher(fetcher.data);\n      state.fetchers.set(key, doneFetcher);\n    }\n  }\n  function markFetchRedirectsDone() {\n    let doneKeys = [];\n    let updatedFetchers = false;\n    for (let key of fetchRedirectIds) {\n      let fetcher = state.fetchers.get(key);\n      invariant(fetcher, \"Expected fetcher: \" + key);\n      if (fetcher.state === \"loading\") {\n        fetchRedirectIds.delete(key);\n        doneKeys.push(key);\n        updatedFetchers = true;\n      }\n    }\n    markFetchersDone(doneKeys);\n    return updatedFetchers;\n  }\n  function abortStaleFetchLoads(landedId) {\n    let yeetedKeys = [];\n    for (let [key, id] of fetchReloadIds) {\n      if (id < landedId) {\n        let fetcher = state.fetchers.get(key);\n        invariant(fetcher, \"Expected fetcher: \" + key);\n        if (fetcher.state === \"loading\") {\n          abortFetcher(key);\n          fetchReloadIds.delete(key);\n          yeetedKeys.push(key);\n        }\n      }\n    }\n    markFetchersDone(yeetedKeys);\n    return yeetedKeys.length > 0;\n  }\n  function getBlocker(key, fn) {\n    let blocker = state.blockers.get(key) || IDLE_BLOCKER;\n    if (blockerFunctions.get(key) !== fn) {\n      blockerFunctions.set(key, fn);\n    }\n    return blocker;\n  }\n  function deleteBlocker(key) {\n    state.blockers.delete(key);\n    blockerFunctions.delete(key);\n  }\n  // Utility function to update blockers, ensuring valid state transitions\n  function updateBlocker(key, newBlocker) {\n    let blocker = state.blockers.get(key) || IDLE_BLOCKER;\n    // Poor mans state machine :)\n    // https://mermaid.live/edit#pako:eNqVkc9OwzAMxl8l8nnjAYrEtDIOHEBIgwvKJTReGy3_lDpIqO27k6awMG0XcrLlnz87nwdonESogKXXBuE79rq75XZO3-yHds0RJVuv70YrPlUrCEe2HfrORS3rubqZfuhtpg5C9wk5tZ4VKcRUq88q9Z8RS0-48cE1iHJkL0ugbHuFLus9L6spZy8nX9MP2CNdomVaposqu3fGayT8T8-jJQwhepo_UtpgBQaDEUom04dZhAN1aJBDlUKJBxE1ceB2Smj0Mln-IBW5AFU2dwUiktt_2Qaq2dBfaKdEup85UV7Yd-dKjlnkabl2Pvr0DTkTreM\n    invariant(blocker.state === \"unblocked\" && newBlocker.state === \"blocked\" || blocker.state === \"blocked\" && newBlocker.state === \"blocked\" || blocker.state === \"blocked\" && newBlocker.state === \"proceeding\" || blocker.state === \"blocked\" && newBlocker.state === \"unblocked\" || blocker.state === \"proceeding\" && newBlocker.state === \"unblocked\", \"Invalid blocker state transition: \" + blocker.state + \" -> \" + newBlocker.state);\n    let blockers = new Map(state.blockers);\n    blockers.set(key, newBlocker);\n    updateState({\n      blockers\n    });\n  }\n  function shouldBlockNavigation(_ref2) {\n    let {\n      currentLocation,\n      nextLocation,\n      historyAction\n    } = _ref2;\n    if (blockerFunctions.size === 0) {\n      return;\n    }\n    // We ony support a single active blocker at the moment since we don't have\n    // any compelling use cases for multi-blocker yet\n    if (blockerFunctions.size > 1) {\n      warning(false, \"A router only supports one blocker at a time\");\n    }\n    let entries = Array.from(blockerFunctions.entries());\n    let [blockerKey, blockerFunction] = entries[entries.length - 1];\n    let blocker = state.blockers.get(blockerKey);\n    if (blocker && blocker.state === \"proceeding\") {\n      // If the blocker is currently proceeding, we don't need to re-check\n      // it and can let this navigation continue\n      return;\n    }\n    // At this point, we know we're unblocked/blocked so we need to check the\n    // user-provided blocker function\n    if (blockerFunction({\n      currentLocation,\n      nextLocation,\n      historyAction\n    })) {\n      return blockerKey;\n    }\n  }\n  function handleNavigational404(pathname) {\n    let error = getInternalRouterError(404, {\n      pathname\n    });\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    let {\n      matches,\n      route\n    } = getShortCircuitMatches(routesToUse);\n    // Cancel all pending deferred on 404s since we don't keep any routes\n    cancelActiveDeferreds();\n    return {\n      notFoundMatches: matches,\n      route,\n      error\n    };\n  }\n  function cancelActiveDeferreds(predicate) {\n    let cancelledRouteIds = [];\n    activeDeferreds.forEach((dfd, routeId) => {\n      if (!predicate || predicate(routeId)) {\n        // Cancel the deferred - but do not remove from activeDeferreds here -\n        // we rely on the subscribers to do that so our tests can assert proper\n        // cleanup via _internalActiveDeferreds\n        dfd.cancel();\n        cancelledRouteIds.push(routeId);\n        activeDeferreds.delete(routeId);\n      }\n    });\n    return cancelledRouteIds;\n  }\n  // Opt in to capturing and reporting scroll positions during navigations,\n  // used by the <ScrollRestoration> component\n  function enableScrollRestoration(positions, getPosition, getKey) {\n    savedScrollPositions = positions;\n    getScrollPosition = getPosition;\n    getScrollRestorationKey = getKey || null;\n    // Perform initial hydration scroll restoration, since we miss the boat on\n    // the initial updateState() because we've not yet rendered <ScrollRestoration/>\n    // and therefore have no savedScrollPositions available\n    if (!initialScrollRestored && state.navigation === IDLE_NAVIGATION) {\n      initialScrollRestored = true;\n      let y = getSavedScrollPosition(state.location, state.matches);\n      if (y != null) {\n        updateState({\n          restoreScrollPosition: y\n        });\n      }\n    }\n    return () => {\n      savedScrollPositions = null;\n      getScrollPosition = null;\n      getScrollRestorationKey = null;\n    };\n  }\n  function getScrollKey(location, matches) {\n    if (getScrollRestorationKey) {\n      let key = getScrollRestorationKey(location, matches.map(m => convertRouteMatchToUiMatch(m, state.loaderData)));\n      return key || location.key;\n    }\n    return location.key;\n  }\n  function saveScrollPosition(location, matches) {\n    if (savedScrollPositions && getScrollPosition) {\n      let key = getScrollKey(location, matches);\n      savedScrollPositions[key] = getScrollPosition();\n    }\n  }\n  function getSavedScrollPosition(location, matches) {\n    if (savedScrollPositions) {\n      let key = getScrollKey(location, matches);\n      let y = savedScrollPositions[key];\n      if (typeof y === \"number\") {\n        return y;\n      }\n    }\n    return null;\n  }\n  function checkFogOfWar(matches, routesToUse, pathname) {\n    if (patchRoutesOnNavigationImpl) {\n      if (!matches) {\n        let fogMatches = matchRoutesImpl(routesToUse, pathname, basename, true);\n        return {\n          active: true,\n          matches: fogMatches || []\n        };\n      } else {\n        if (Object.keys(matches[0].params).length > 0) {\n          // If we matched a dynamic param or a splat, it might only be because\n          // we haven't yet discovered other routes that would match with a\n          // higher score.  Call patchRoutesOnNavigation just to be sure\n          let partialMatches = matchRoutesImpl(routesToUse, pathname, basename, true);\n          return {\n            active: true,\n            matches: partialMatches\n          };\n        }\n      }\n    }\n    return {\n      active: false,\n      matches: null\n    };\n  }\n  async function discoverRoutes(matches, pathname, signal, fetcherKey) {\n    if (!patchRoutesOnNavigationImpl) {\n      return {\n        type: \"success\",\n        matches\n      };\n    }\n    let partialMatches = matches;\n    while (true) {\n      let isNonHMR = inFlightDataRoutes == null;\n      let routesToUse = inFlightDataRoutes || dataRoutes;\n      let localManifest = manifest;\n      try {\n        await patchRoutesOnNavigationImpl({\n          signal,\n          path: pathname,\n          matches: partialMatches,\n          fetcherKey,\n          patch: (routeId, children) => {\n            if (signal.aborted) return;\n            patchRoutesImpl(routeId, children, routesToUse, localManifest, mapRouteProperties);\n          }\n        });\n      } catch (e) {\n        return {\n          type: \"error\",\n          error: e,\n          partialMatches\n        };\n      } finally {\n        // If we are not in the middle of an HMR revalidation and we changed the\n        // routes, provide a new identity so when we `updateState` at the end of\n        // this navigation/fetch `router.routes` will be a new identity and\n        // trigger a re-run of memoized `router.routes` dependencies.\n        // HMR will already update the identity and reflow when it lands\n        // `inFlightDataRoutes` in `completeNavigation`\n        if (isNonHMR && !signal.aborted) {\n          dataRoutes = [...dataRoutes];\n        }\n      }\n      if (signal.aborted) {\n        return {\n          type: \"aborted\"\n        };\n      }\n      let newMatches = matchRoutes(routesToUse, pathname, basename);\n      if (newMatches) {\n        return {\n          type: \"success\",\n          matches: newMatches\n        };\n      }\n      let newPartialMatches = matchRoutesImpl(routesToUse, pathname, basename, true);\n      // Avoid loops if the second pass results in the same partial matches\n      if (!newPartialMatches || partialMatches.length === newPartialMatches.length && partialMatches.every((m, i) => m.route.id === newPartialMatches[i].route.id)) {\n        return {\n          type: \"success\",\n          matches: null\n        };\n      }\n      partialMatches = newPartialMatches;\n    }\n  }\n  function _internalSetRoutes(newRoutes) {\n    manifest = {};\n    inFlightDataRoutes = convertRoutesToDataRoutes(newRoutes, mapRouteProperties, undefined, manifest);\n  }\n  function patchRoutes(routeId, children) {\n    let isNonHMR = inFlightDataRoutes == null;\n    let routesToUse = inFlightDataRoutes || dataRoutes;\n    patchRoutesImpl(routeId, children, routesToUse, manifest, mapRouteProperties);\n    // If we are not in the middle of an HMR revalidation and we changed the\n    // routes, provide a new identity and trigger a reflow via `updateState`\n    // to re-run memoized `router.routes` dependencies.\n    // HMR will already update the identity and reflow when it lands\n    // `inFlightDataRoutes` in `completeNavigation`\n    if (isNonHMR) {\n      dataRoutes = [...dataRoutes];\n      updateState({});\n    }\n  }\n  router = {\n    get basename() {\n      return basename;\n    },\n    get future() {\n      return future;\n    },\n    get state() {\n      return state;\n    },\n    get routes() {\n      return dataRoutes;\n    },\n    get window() {\n      return routerWindow;\n    },\n    initialize,\n    subscribe,\n    enableScrollRestoration,\n    navigate,\n    fetch,\n    revalidate,\n    // Passthrough to history-aware createHref used by useHref so we get proper\n    // hash-aware URLs in DOM paths\n    createHref: to => init.history.createHref(to),\n    encodeLocation: to => init.history.encodeLocation(to),\n    getFetcher,\n    deleteFetcher: deleteFetcherAndUpdateState,\n    dispose,\n    getBlocker,\n    deleteBlocker,\n    patchRoutes,\n    _internalFetchControllers: fetchControllers,\n    _internalActiveDeferreds: activeDeferreds,\n    // TODO: Remove setRoutes, it's temporary to avoid dealing with\n    // updating the tree while validating the update algorithm.\n    _internalSetRoutes\n  };\n  return router;\n}\n//#endregion\n////////////////////////////////////////////////////////////////////////////////\n//#region createStaticHandler\n////////////////////////////////////////////////////////////////////////////////\nconst UNSAFE_DEFERRED_SYMBOL = Symbol(\"deferred\");\nfunction createStaticHandler(routes, opts) {\n  invariant(routes.length > 0, \"You must provide a non-empty routes array to createStaticHandler\");\n  let manifest = {};\n  let basename = (opts ? opts.basename : null) || \"/\";\n  let mapRouteProperties;\n  if (opts != null && opts.mapRouteProperties) {\n    mapRouteProperties = opts.mapRouteProperties;\n  } else if (opts != null && opts.detectErrorBoundary) {\n    // If they are still using the deprecated version, wrap it with the new API\n    let detectErrorBoundary = opts.detectErrorBoundary;\n    mapRouteProperties = route => ({\n      hasErrorBoundary: detectErrorBoundary(route)\n    });\n  } else {\n    mapRouteProperties = defaultMapRouteProperties;\n  }\n  // Config driven behavior flags\n  let future = _extends({\n    v7_relativeSplatPath: false,\n    v7_throwAbortReason: false\n  }, opts ? opts.future : null);\n  let dataRoutes = convertRoutesToDataRoutes(routes, mapRouteProperties, undefined, manifest);\n  /**\n   * The query() method is intended for document requests, in which we want to\n   * call an optional action and potentially multiple loaders for all nested\n   * routes.  It returns a StaticHandlerContext object, which is very similar\n   * to the router state (location, loaderData, actionData, errors, etc.) and\n   * also adds SSR-specific information such as the statusCode and headers\n   * from action/loaders Responses.\n   *\n   * It _should_ never throw and should report all errors through the\n   * returned context.errors object, properly associating errors to their error\n   * boundary.  Additionally, it tracks _deepestRenderedBoundaryId which can be\n   * used to emulate React error boundaries during SSr by performing a second\n   * pass only down to the boundaryId.\n   *\n   * The one exception where we do not return a StaticHandlerContext is when a\n   * redirect response is returned or thrown from any action/loader.  We\n   * propagate that out and return the raw Response so the HTTP server can\n   * return it directly.\n   *\n   * - `opts.requestContext` is an optional server context that will be passed\n   *   to actions/loaders in the `context` parameter\n   * - `opts.skipLoaderErrorBubbling` is an optional parameter that will prevent\n   *   the bubbling of errors which allows single-fetch-type implementations\n   *   where the client will handle the bubbling and we may need to return data\n   *   for the handling route\n   */\n  async function query(request, _temp3) {\n    let {\n      requestContext,\n      skipLoaderErrorBubbling,\n      dataStrategy\n    } = _temp3 === void 0 ? {} : _temp3;\n    let url = new URL(request.url);\n    let method = request.method;\n    let location = createLocation(\"\", createPath(url), null, \"default\");\n    let matches = matchRoutes(dataRoutes, location, basename);\n    // SSR supports HEAD requests while SPA doesn't\n    if (!isValidMethod(method) && method !== \"HEAD\") {\n      let error = getInternalRouterError(405, {\n        method\n      });\n      let {\n        matches: methodNotAllowedMatches,\n        route\n      } = getShortCircuitMatches(dataRoutes);\n      return {\n        basename,\n        location,\n        matches: methodNotAllowedMatches,\n        loaderData: {},\n        actionData: null,\n        errors: {\n          [route.id]: error\n        },\n        statusCode: error.status,\n        loaderHeaders: {},\n        actionHeaders: {},\n        activeDeferreds: null\n      };\n    } else if (!matches) {\n      let error = getInternalRouterError(404, {\n        pathname: location.pathname\n      });\n      let {\n        matches: notFoundMatches,\n        route\n      } = getShortCircuitMatches(dataRoutes);\n      return {\n        basename,\n        location,\n        matches: notFoundMatches,\n        loaderData: {},\n        actionData: null,\n        errors: {\n          [route.id]: error\n        },\n        statusCode: error.status,\n        loaderHeaders: {},\n        actionHeaders: {},\n        activeDeferreds: null\n      };\n    }\n    let result = await queryImpl(request, location, matches, requestContext, dataStrategy || null, skipLoaderErrorBubbling === true, null);\n    if (isResponse(result)) {\n      return result;\n    }\n    // When returning StaticHandlerContext, we patch back in the location here\n    // since we need it for React Context.  But this helps keep our submit and\n    // loadRouteData operating on a Request instead of a Location\n    return _extends({\n      location,\n      basename\n    }, result);\n  }\n  /**\n   * The queryRoute() method is intended for targeted route requests, either\n   * for fetch ?_data requests or resource route requests.  In this case, we\n   * are only ever calling a single action or loader, and we are returning the\n   * returned value directly.  In most cases, this will be a Response returned\n   * from the action/loader, but it may be a primitive or other value as well -\n   * and in such cases the calling context should handle that accordingly.\n   *\n   * We do respect the throw/return differentiation, so if an action/loader\n   * throws, then this method will throw the value.  This is important so we\n   * can do proper boundary identification in Remix where a thrown Response\n   * must go to the Catch Boundary but a returned Response is happy-path.\n   *\n   * One thing to note is that any Router-initiated Errors that make sense\n   * to associate with a status code will be thrown as an ErrorResponse\n   * instance which include the raw Error, such that the calling context can\n   * serialize the error as they see fit while including the proper response\n   * code.  Examples here are 404 and 405 errors that occur prior to reaching\n   * any user-defined loaders.\n   *\n   * - `opts.routeId` allows you to specify the specific route handler to call.\n   *   If not provided the handler will determine the proper route by matching\n   *   against `request.url`\n   * - `opts.requestContext` is an optional server context that will be passed\n   *    to actions/loaders in the `context` parameter\n   */\n  async function queryRoute(request, _temp4) {\n    let {\n      routeId,\n      requestContext,\n      dataStrategy\n    } = _temp4 === void 0 ? {} : _temp4;\n    let url = new URL(request.url);\n    let method = request.method;\n    let location = createLocation(\"\", createPath(url), null, \"default\");\n    let matches = matchRoutes(dataRoutes, location, basename);\n    // SSR supports HEAD requests while SPA doesn't\n    if (!isValidMethod(method) && method !== \"HEAD\" && method !== \"OPTIONS\") {\n      throw getInternalRouterError(405, {\n        method\n      });\n    } else if (!matches) {\n      throw getInternalRouterError(404, {\n        pathname: location.pathname\n      });\n    }\n    let match = routeId ? matches.find(m => m.route.id === routeId) : getTargetMatch(matches, location);\n    if (routeId && !match) {\n      throw getInternalRouterError(403, {\n        pathname: location.pathname,\n        routeId\n      });\n    } else if (!match) {\n      // This should never hit I don't think?\n      throw getInternalRouterError(404, {\n        pathname: location.pathname\n      });\n    }\n    let result = await queryImpl(request, location, matches, requestContext, dataStrategy || null, false, match);\n    if (isResponse(result)) {\n      return result;\n    }\n    let error = result.errors ? Object.values(result.errors)[0] : undefined;\n    if (error !== undefined) {\n      // If we got back result.errors, that means the loader/action threw\n      // _something_ that wasn't a Response, but it's not guaranteed/required\n      // to be an `instanceof Error` either, so we have to use throw here to\n      // preserve the \"error\" state outside of queryImpl.\n      throw error;\n    }\n    // Pick off the right state value to return\n    if (result.actionData) {\n      return Object.values(result.actionData)[0];\n    }\n    if (result.loaderData) {\n      var _result$activeDeferre;\n      let data = Object.values(result.loaderData)[0];\n      if ((_result$activeDeferre = result.activeDeferreds) != null && _result$activeDeferre[match.route.id]) {\n        data[UNSAFE_DEFERRED_SYMBOL] = result.activeDeferreds[match.route.id];\n      }\n      return data;\n    }\n    return undefined;\n  }\n  async function queryImpl(request, location, matches, requestContext, dataStrategy, skipLoaderErrorBubbling, routeMatch) {\n    invariant(request.signal, \"query()/queryRoute() requests must contain an AbortController signal\");\n    try {\n      if (isMutationMethod(request.method.toLowerCase())) {\n        let result = await submit(request, matches, routeMatch || getTargetMatch(matches, location), requestContext, dataStrategy, skipLoaderErrorBubbling, routeMatch != null);\n        return result;\n      }\n      let result = await loadRouteData(request, matches, requestContext, dataStrategy, skipLoaderErrorBubbling, routeMatch);\n      return isResponse(result) ? result : _extends({}, result, {\n        actionData: null,\n        actionHeaders: {}\n      });\n    } catch (e) {\n      // If the user threw/returned a Response in callLoaderOrAction for a\n      // `queryRoute` call, we throw the `DataStrategyResult` to bail out early\n      // and then return or throw the raw Response here accordingly\n      if (isDataStrategyResult(e) && isResponse(e.result)) {\n        if (e.type === ResultType.error) {\n          throw e.result;\n        }\n        return e.result;\n      }\n      // Redirects are always returned since they don't propagate to catch\n      // boundaries\n      if (isRedirectResponse(e)) {\n        return e;\n      }\n      throw e;\n    }\n  }\n  async function submit(request, matches, actionMatch, requestContext, dataStrategy, skipLoaderErrorBubbling, isRouteRequest) {\n    let result;\n    if (!actionMatch.route.action && !actionMatch.route.lazy) {\n      let error = getInternalRouterError(405, {\n        method: request.method,\n        pathname: new URL(request.url).pathname,\n        routeId: actionMatch.route.id\n      });\n      if (isRouteRequest) {\n        throw error;\n      }\n      result = {\n        type: ResultType.error,\n        error\n      };\n    } else {\n      let results = await callDataStrategy(\"action\", request, [actionMatch], matches, isRouteRequest, requestContext, dataStrategy);\n      result = results[actionMatch.route.id];\n      if (request.signal.aborted) {\n        throwStaticHandlerAbortedError(request, isRouteRequest, future);\n      }\n    }\n    if (isRedirectResult(result)) {\n      // Uhhhh - this should never happen, we should always throw these from\n      // callLoaderOrAction, but the type narrowing here keeps TS happy and we\n      // can get back on the \"throw all redirect responses\" train here should\n      // this ever happen :/\n      throw new Response(null, {\n        status: result.response.status,\n        headers: {\n          Location: result.response.headers.get(\"Location\")\n        }\n      });\n    }\n    if (isDeferredResult(result)) {\n      let error = getInternalRouterError(400, {\n        type: \"defer-action\"\n      });\n      if (isRouteRequest) {\n        throw error;\n      }\n      result = {\n        type: ResultType.error,\n        error\n      };\n    }\n    if (isRouteRequest) {\n      // Note: This should only be non-Response values if we get here, since\n      // isRouteRequest should throw any Response received in callLoaderOrAction\n      if (isErrorResult(result)) {\n        throw result.error;\n      }\n      return {\n        matches: [actionMatch],\n        loaderData: {},\n        actionData: {\n          [actionMatch.route.id]: result.data\n        },\n        errors: null,\n        // Note: statusCode + headers are unused here since queryRoute will\n        // return the raw Response or value\n        statusCode: 200,\n        loaderHeaders: {},\n        actionHeaders: {},\n        activeDeferreds: null\n      };\n    }\n    // Create a GET request for the loaders\n    let loaderRequest = new Request(request.url, {\n      headers: request.headers,\n      redirect: request.redirect,\n      signal: request.signal\n    });\n    if (isErrorResult(result)) {\n      // Store off the pending error - we use it to determine which loaders\n      // to call and will commit it when we complete the navigation\n      let boundaryMatch = skipLoaderErrorBubbling ? actionMatch : findNearestBoundary(matches, actionMatch.route.id);\n      let context = await loadRouteData(loaderRequest, matches, requestContext, dataStrategy, skipLoaderErrorBubbling, null, [boundaryMatch.route.id, result]);\n      // action status codes take precedence over loader status codes\n      return _extends({}, context, {\n        statusCode: isRouteErrorResponse(result.error) ? result.error.status : result.statusCode != null ? result.statusCode : 500,\n        actionData: null,\n        actionHeaders: _extends({}, result.headers ? {\n          [actionMatch.route.id]: result.headers\n        } : {})\n      });\n    }\n    let context = await loadRouteData(loaderRequest, matches, requestContext, dataStrategy, skipLoaderErrorBubbling, null);\n    return _extends({}, context, {\n      actionData: {\n        [actionMatch.route.id]: result.data\n      }\n    }, result.statusCode ? {\n      statusCode: result.statusCode\n    } : {}, {\n      actionHeaders: result.headers ? {\n        [actionMatch.route.id]: result.headers\n      } : {}\n    });\n  }\n  async function loadRouteData(request, matches, requestContext, dataStrategy, skipLoaderErrorBubbling, routeMatch, pendingActionResult) {\n    let isRouteRequest = routeMatch != null;\n    // Short circuit if we have no loaders to run (queryRoute())\n    if (isRouteRequest && !(routeMatch != null && routeMatch.route.loader) && !(routeMatch != null && routeMatch.route.lazy)) {\n      throw getInternalRouterError(400, {\n        method: request.method,\n        pathname: new URL(request.url).pathname,\n        routeId: routeMatch == null ? void 0 : routeMatch.route.id\n      });\n    }\n    let requestMatches = routeMatch ? [routeMatch] : pendingActionResult && isErrorResult(pendingActionResult[1]) ? getLoaderMatchesUntilBoundary(matches, pendingActionResult[0]) : matches;\n    let matchesToLoad = requestMatches.filter(m => m.route.loader || m.route.lazy);\n    // Short circuit if we have no loaders to run (query())\n    if (matchesToLoad.length === 0) {\n      return {\n        matches,\n        // Add a null for all matched routes for proper revalidation on the client\n        loaderData: matches.reduce((acc, m) => Object.assign(acc, {\n          [m.route.id]: null\n        }), {}),\n        errors: pendingActionResult && isErrorResult(pendingActionResult[1]) ? {\n          [pendingActionResult[0]]: pendingActionResult[1].error\n        } : null,\n        statusCode: 200,\n        loaderHeaders: {},\n        activeDeferreds: null\n      };\n    }\n    let results = await callDataStrategy(\"loader\", request, matchesToLoad, matches, isRouteRequest, requestContext, dataStrategy);\n    if (request.signal.aborted) {\n      throwStaticHandlerAbortedError(request, isRouteRequest, future);\n    }\n    // Process and commit output from loaders\n    let activeDeferreds = new Map();\n    let context = processRouteLoaderData(matches, results, pendingActionResult, activeDeferreds, skipLoaderErrorBubbling);\n    // Add a null for any non-loader matches for proper revalidation on the client\n    let executedLoaders = new Set(matchesToLoad.map(match => match.route.id));\n    matches.forEach(match => {\n      if (!executedLoaders.has(match.route.id)) {\n        context.loaderData[match.route.id] = null;\n      }\n    });\n    return _extends({}, context, {\n      matches,\n      activeDeferreds: activeDeferreds.size > 0 ? Object.fromEntries(activeDeferreds.entries()) : null\n    });\n  }\n  // Utility wrapper for calling dataStrategy server-side without having to\n  // pass around the manifest, mapRouteProperties, etc.\n  async function callDataStrategy(type, request, matchesToLoad, matches, isRouteRequest, requestContext, dataStrategy) {\n    let results = await callDataStrategyImpl(dataStrategy || defaultDataStrategy, type, null, request, matchesToLoad, matches, null, manifest, mapRouteProperties, requestContext);\n    let dataResults = {};\n    await Promise.all(matches.map(async match => {\n      if (!(match.route.id in results)) {\n        return;\n      }\n      let result = results[match.route.id];\n      if (isRedirectDataStrategyResultResult(result)) {\n        let response = result.result;\n        // Throw redirects and let the server handle them with an HTTP redirect\n        throw normalizeRelativeRoutingRedirectResponse(response, request, match.route.id, matches, basename, future.v7_relativeSplatPath);\n      }\n      if (isResponse(result.result) && isRouteRequest) {\n        // For SSR single-route requests, we want to hand Responses back\n        // directly without unwrapping\n        throw result;\n      }\n      dataResults[match.route.id] = await convertDataStrategyResultToDataResult(result);\n    }));\n    return dataResults;\n  }\n  return {\n    dataRoutes,\n    query,\n    queryRoute\n  };\n}\n//#endregion\n////////////////////////////////////////////////////////////////////////////////\n//#region Helpers\n////////////////////////////////////////////////////////////////////////////////\n/**\n * Given an existing StaticHandlerContext and an error thrown at render time,\n * provide an updated StaticHandlerContext suitable for a second SSR render\n */\nfunction getStaticContextFromError(routes, context, error) {\n  let newContext = _extends({}, context, {\n    statusCode: isRouteErrorResponse(error) ? error.status : 500,\n    errors: {\n      [context._deepestRenderedBoundaryId || routes[0].id]: error\n    }\n  });\n  return newContext;\n}\nfunction throwStaticHandlerAbortedError(request, isRouteRequest, future) {\n  if (future.v7_throwAbortReason && request.signal.reason !== undefined) {\n    throw request.signal.reason;\n  }\n  let method = isRouteRequest ? \"queryRoute\" : \"query\";\n  throw new Error(method + \"() call aborted: \" + request.method + \" \" + request.url);\n}\nfunction isSubmissionNavigation(opts) {\n  return opts != null && (\"formData\" in opts && opts.formData != null || \"body\" in opts && opts.body !== undefined);\n}\nfunction normalizeTo(location, matches, basename, prependBasename, to, v7_relativeSplatPath, fromRouteId, relative) {\n  let contextualMatches;\n  let activeRouteMatch;\n  if (fromRouteId) {\n    // Grab matches up to the calling route so our route-relative logic is\n    // relative to the correct source route\n    contextualMatches = [];\n    for (let match of matches) {\n      contextualMatches.push(match);\n      if (match.route.id === fromRouteId) {\n        activeRouteMatch = match;\n        break;\n      }\n    }\n  } else {\n    contextualMatches = matches;\n    activeRouteMatch = matches[matches.length - 1];\n  }\n  // Resolve the relative path\n  let path = resolveTo(to ? to : \".\", getResolveToMatches(contextualMatches, v7_relativeSplatPath), stripBasename(location.pathname, basename) || location.pathname, relative === \"path\");\n  // When `to` is not specified we inherit search/hash from the current\n  // location, unlike when to=\".\" and we just inherit the path.\n  // See https://github.com/remix-run/remix/issues/927\n  if (to == null) {\n    path.search = location.search;\n    path.hash = location.hash;\n  }\n  // Account for `?index` params when routing to the current location\n  if ((to == null || to === \"\" || to === \".\") && activeRouteMatch) {\n    let nakedIndex = hasNakedIndexQuery(path.search);\n    if (activeRouteMatch.route.index && !nakedIndex) {\n      // Add one when we're targeting an index route\n      path.search = path.search ? path.search.replace(/^\\?/, \"?index&\") : \"?index\";\n    } else if (!activeRouteMatch.route.index && nakedIndex) {\n      // Remove existing ones when we're not\n      let params = new URLSearchParams(path.search);\n      let indexValues = params.getAll(\"index\");\n      params.delete(\"index\");\n      indexValues.filter(v => v).forEach(v => params.append(\"index\", v));\n      let qs = params.toString();\n      path.search = qs ? \"?\" + qs : \"\";\n    }\n  }\n  // If we're operating within a basename, prepend it to the pathname.  If\n  // this is a root navigation, then just use the raw basename which allows\n  // the basename to have full control over the presence of a trailing slash\n  // on root actions\n  if (prependBasename && basename !== \"/\") {\n    path.pathname = path.pathname === \"/\" ? basename : joinPaths([basename, path.pathname]);\n  }\n  return createPath(path);\n}\n// Normalize navigation options by converting formMethod=GET formData objects to\n// URLSearchParams so they behave identically to links with query params\nfunction normalizeNavigateOptions(normalizeFormMethod, isFetcher, path, opts) {\n  // Return location verbatim on non-submission navigations\n  if (!opts || !isSubmissionNavigation(opts)) {\n    return {\n      path\n    };\n  }\n  if (opts.formMethod && !isValidMethod(opts.formMethod)) {\n    return {\n      path,\n      error: getInternalRouterError(405, {\n        method: opts.formMethod\n      })\n    };\n  }\n  let getInvalidBodyError = () => ({\n    path,\n    error: getInternalRouterError(400, {\n      type: \"invalid-body\"\n    })\n  });\n  // Create a Submission on non-GET navigations\n  let rawFormMethod = opts.formMethod || \"get\";\n  let formMethod = normalizeFormMethod ? rawFormMethod.toUpperCase() : rawFormMethod.toLowerCase();\n  let formAction = stripHashFromPath(path);\n  if (opts.body !== undefined) {\n    if (opts.formEncType === \"text/plain\") {\n      // text only support POST/PUT/PATCH/DELETE submissions\n      if (!isMutationMethod(formMethod)) {\n        return getInvalidBodyError();\n      }\n      let text = typeof opts.body === \"string\" ? opts.body : opts.body instanceof FormData || opts.body instanceof URLSearchParams ?\n      // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#plain-text-form-data\n      Array.from(opts.body.entries()).reduce((acc, _ref3) => {\n        let [name, value] = _ref3;\n        return \"\" + acc + name + \"=\" + value + \"\\n\";\n      }, \"\") : String(opts.body);\n      return {\n        path,\n        submission: {\n          formMethod,\n          formAction,\n          formEncType: opts.formEncType,\n          formData: undefined,\n          json: undefined,\n          text\n        }\n      };\n    } else if (opts.formEncType === \"application/json\") {\n      // json only supports POST/PUT/PATCH/DELETE submissions\n      if (!isMutationMethod(formMethod)) {\n        return getInvalidBodyError();\n      }\n      try {\n        let json = typeof opts.body === \"string\" ? JSON.parse(opts.body) : opts.body;\n        return {\n          path,\n          submission: {\n            formMethod,\n            formAction,\n            formEncType: opts.formEncType,\n            formData: undefined,\n            json,\n            text: undefined\n          }\n        };\n      } catch (e) {\n        return getInvalidBodyError();\n      }\n    }\n  }\n  invariant(typeof FormData === \"function\", \"FormData is not available in this environment\");\n  let searchParams;\n  let formData;\n  if (opts.formData) {\n    searchParams = convertFormDataToSearchParams(opts.formData);\n    formData = opts.formData;\n  } else if (opts.body instanceof FormData) {\n    searchParams = convertFormDataToSearchParams(opts.body);\n    formData = opts.body;\n  } else if (opts.body instanceof URLSearchParams) {\n    searchParams = opts.body;\n    formData = convertSearchParamsToFormData(searchParams);\n  } else if (opts.body == null) {\n    searchParams = new URLSearchParams();\n    formData = new FormData();\n  } else {\n    try {\n      searchParams = new URLSearchParams(opts.body);\n      formData = convertSearchParamsToFormData(searchParams);\n    } catch (e) {\n      return getInvalidBodyError();\n    }\n  }\n  let submission = {\n    formMethod,\n    formAction,\n    formEncType: opts && opts.formEncType || \"application/x-www-form-urlencoded\",\n    formData,\n    json: undefined,\n    text: undefined\n  };\n  if (isMutationMethod(submission.formMethod)) {\n    return {\n      path,\n      submission\n    };\n  }\n  // Flatten submission onto URLSearchParams for GET submissions\n  let parsedPath = parsePath(path);\n  // On GET navigation submissions we can drop the ?index param from the\n  // resulting location since all loaders will run.  But fetcher GET submissions\n  // only run a single loader so we need to preserve any incoming ?index params\n  if (isFetcher && parsedPath.search && hasNakedIndexQuery(parsedPath.search)) {\n    searchParams.append(\"index\", \"\");\n  }\n  parsedPath.search = \"?\" + searchParams;\n  return {\n    path: createPath(parsedPath),\n    submission\n  };\n}\n// Filter out all routes at/below any caught error as they aren't going to\n// render so we don't need to load them\nfunction getLoaderMatchesUntilBoundary(matches, boundaryId, includeBoundary) {\n  if (includeBoundary === void 0) {\n    includeBoundary = false;\n  }\n  let index = matches.findIndex(m => m.route.id === boundaryId);\n  if (index >= 0) {\n    return matches.slice(0, includeBoundary ? index + 1 : index);\n  }\n  return matches;\n}\nfunction getMatchesToLoad(history, state, matches, submission, location, initialHydration, skipActionErrorRevalidation, isRevalidationRequired, cancelledDeferredRoutes, cancelledFetcherLoads, deletedFetchers, fetchLoadMatches, fetchRedirectIds, routesToUse, basename, pendingActionResult) {\n  let actionResult = pendingActionResult ? isErrorResult(pendingActionResult[1]) ? pendingActionResult[1].error : pendingActionResult[1].data : undefined;\n  let currentUrl = history.createURL(state.location);\n  let nextUrl = history.createURL(location);\n  // Pick navigation matches that are net-new or qualify for revalidation\n  let boundaryMatches = matches;\n  if (initialHydration && state.errors) {\n    // On initial hydration, only consider matches up to _and including_ the boundary.\n    // This is inclusive to handle cases where a server loader ran successfully,\n    // a child server loader bubbled up to this route, but this route has\n    // `clientLoader.hydrate` so we want to still run the `clientLoader` so that\n    // we have a complete version of `loaderData`\n    boundaryMatches = getLoaderMatchesUntilBoundary(matches, Object.keys(state.errors)[0], true);\n  } else if (pendingActionResult && isErrorResult(pendingActionResult[1])) {\n    // If an action threw an error, we call loaders up to, but not including the\n    // boundary\n    boundaryMatches = getLoaderMatchesUntilBoundary(matches, pendingActionResult[0]);\n  }\n  // Don't revalidate loaders by default after action 4xx/5xx responses\n  // when the flag is enabled.  They can still opt-into revalidation via\n  // `shouldRevalidate` via `actionResult`\n  let actionStatus = pendingActionResult ? pendingActionResult[1].statusCode : undefined;\n  let shouldSkipRevalidation = skipActionErrorRevalidation && actionStatus && actionStatus >= 400;\n  let navigationMatches = boundaryMatches.filter((match, index) => {\n    let {\n      route\n    } = match;\n    if (route.lazy) {\n      // We haven't loaded this route yet so we don't know if it's got a loader!\n      return true;\n    }\n    if (route.loader == null) {\n      return false;\n    }\n    if (initialHydration) {\n      return shouldLoadRouteOnHydration(route, state.loaderData, state.errors);\n    }\n    // Always call the loader on new route instances and pending defer cancellations\n    if (isNewLoader(state.loaderData, state.matches[index], match) || cancelledDeferredRoutes.some(id => id === match.route.id)) {\n      return true;\n    }\n    // This is the default implementation for when we revalidate.  If the route\n    // provides it's own implementation, then we give them full control but\n    // provide this value so they can leverage it if needed after they check\n    // their own specific use cases\n    let currentRouteMatch = state.matches[index];\n    let nextRouteMatch = match;\n    return shouldRevalidateLoader(match, _extends({\n      currentUrl,\n      currentParams: currentRouteMatch.params,\n      nextUrl,\n      nextParams: nextRouteMatch.params\n    }, submission, {\n      actionResult,\n      actionStatus,\n      defaultShouldRevalidate: shouldSkipRevalidation ? false :\n      // Forced revalidation due to submission, useRevalidator, or X-Remix-Revalidate\n      isRevalidationRequired || currentUrl.pathname + currentUrl.search === nextUrl.pathname + nextUrl.search ||\n      // Search params affect all loaders\n      currentUrl.search !== nextUrl.search || isNewRouteInstance(currentRouteMatch, nextRouteMatch)\n    }));\n  });\n  // Pick fetcher.loads that need to be revalidated\n  let revalidatingFetchers = [];\n  fetchLoadMatches.forEach((f, key) => {\n    // Don't revalidate:\n    //  - on initial hydration (shouldn't be any fetchers then anyway)\n    //  - if fetcher won't be present in the subsequent render\n    //    - no longer matches the URL (v7_fetcherPersist=false)\n    //    - was unmounted but persisted due to v7_fetcherPersist=true\n    if (initialHydration || !matches.some(m => m.route.id === f.routeId) || deletedFetchers.has(key)) {\n      return;\n    }\n    let fetcherMatches = matchRoutes(routesToUse, f.path, basename);\n    // If the fetcher path no longer matches, push it in with null matches so\n    // we can trigger a 404 in callLoadersAndMaybeResolveData.  Note this is\n    // currently only a use-case for Remix HMR where the route tree can change\n    // at runtime and remove a route previously loaded via a fetcher\n    if (!fetcherMatches) {\n      revalidatingFetchers.push({\n        key,\n        routeId: f.routeId,\n        path: f.path,\n        matches: null,\n        match: null,\n        controller: null\n      });\n      return;\n    }\n    // Revalidating fetchers are decoupled from the route matches since they\n    // load from a static href.  They revalidate based on explicit revalidation\n    // (submission, useRevalidator, or X-Remix-Revalidate)\n    let fetcher = state.fetchers.get(key);\n    let fetcherMatch = getTargetMatch(fetcherMatches, f.path);\n    let shouldRevalidate = false;\n    if (fetchRedirectIds.has(key)) {\n      // Never trigger a revalidation of an actively redirecting fetcher\n      shouldRevalidate = false;\n    } else if (cancelledFetcherLoads.has(key)) {\n      // Always mark for revalidation if the fetcher was cancelled\n      cancelledFetcherLoads.delete(key);\n      shouldRevalidate = true;\n    } else if (fetcher && fetcher.state !== \"idle\" && fetcher.data === undefined) {\n      // If the fetcher hasn't ever completed loading yet, then this isn't a\n      // revalidation, it would just be a brand new load if an explicit\n      // revalidation is required\n      shouldRevalidate = isRevalidationRequired;\n    } else {\n      // Otherwise fall back on any user-defined shouldRevalidate, defaulting\n      // to explicit revalidations only\n      shouldRevalidate = shouldRevalidateLoader(fetcherMatch, _extends({\n        currentUrl,\n        currentParams: state.matches[state.matches.length - 1].params,\n        nextUrl,\n        nextParams: matches[matches.length - 1].params\n      }, submission, {\n        actionResult,\n        actionStatus,\n        defaultShouldRevalidate: shouldSkipRevalidation ? false : isRevalidationRequired\n      }));\n    }\n    if (shouldRevalidate) {\n      revalidatingFetchers.push({\n        key,\n        routeId: f.routeId,\n        path: f.path,\n        matches: fetcherMatches,\n        match: fetcherMatch,\n        controller: new AbortController()\n      });\n    }\n  });\n  return [navigationMatches, revalidatingFetchers];\n}\nfunction shouldLoadRouteOnHydration(route, loaderData, errors) {\n  // We dunno if we have a loader - gotta find out!\n  if (route.lazy) {\n    return true;\n  }\n  // No loader, nothing to initialize\n  if (!route.loader) {\n    return false;\n  }\n  let hasData = loaderData != null && loaderData[route.id] !== undefined;\n  let hasError = errors != null && errors[route.id] !== undefined;\n  // Don't run if we error'd during SSR\n  if (!hasData && hasError) {\n    return false;\n  }\n  // Explicitly opting-in to running on hydration\n  if (typeof route.loader === \"function\" && route.loader.hydrate === true) {\n    return true;\n  }\n  // Otherwise, run if we're not yet initialized with anything\n  return !hasData && !hasError;\n}\nfunction isNewLoader(currentLoaderData, currentMatch, match) {\n  let isNew =\n  // [a] -> [a, b]\n  !currentMatch ||\n  // [a, b] -> [a, c]\n  match.route.id !== currentMatch.route.id;\n  // Handle the case that we don't have data for a re-used route, potentially\n  // from a prior error or from a cancelled pending deferred\n  let isMissingData = currentLoaderData[match.route.id] === undefined;\n  // Always load if this is a net-new route or we don't yet have data\n  return isNew || isMissingData;\n}\nfunction isNewRouteInstance(currentMatch, match) {\n  let currentPath = currentMatch.route.path;\n  return (\n    // param change for this match, /users/123 -> /users/456\n    currentMatch.pathname !== match.pathname ||\n    // splat param changed, which is not present in match.path\n    // e.g. /files/images/avatar.jpg -> files/finances.xls\n    currentPath != null && currentPath.endsWith(\"*\") && currentMatch.params[\"*\"] !== match.params[\"*\"]\n  );\n}\nfunction shouldRevalidateLoader(loaderMatch, arg) {\n  if (loaderMatch.route.shouldRevalidate) {\n    let routeChoice = loaderMatch.route.shouldRevalidate(arg);\n    if (typeof routeChoice === \"boolean\") {\n      return routeChoice;\n    }\n  }\n  return arg.defaultShouldRevalidate;\n}\nfunction patchRoutesImpl(routeId, children, routesToUse, manifest, mapRouteProperties) {\n  var _childrenToPatch;\n  let childrenToPatch;\n  if (routeId) {\n    let route = manifest[routeId];\n    invariant(route, \"No route found to patch children into: routeId = \" + routeId);\n    if (!route.children) {\n      route.children = [];\n    }\n    childrenToPatch = route.children;\n  } else {\n    childrenToPatch = routesToUse;\n  }\n  // Don't patch in routes we already know about so that `patch` is idempotent\n  // to simplify user-land code. This is useful because we re-call the\n  // `patchRoutesOnNavigation` function for matched routes with params.\n  let uniqueChildren = children.filter(newRoute => !childrenToPatch.some(existingRoute => isSameRoute(newRoute, existingRoute)));\n  let newRoutes = convertRoutesToDataRoutes(uniqueChildren, mapRouteProperties, [routeId || \"_\", \"patch\", String(((_childrenToPatch = childrenToPatch) == null ? void 0 : _childrenToPatch.length) || \"0\")], manifest);\n  childrenToPatch.push(...newRoutes);\n}\nfunction isSameRoute(newRoute, existingRoute) {\n  // Most optimal check is by id\n  if (\"id\" in newRoute && \"id\" in existingRoute && newRoute.id === existingRoute.id) {\n    return true;\n  }\n  // Second is by pathing differences\n  if (!(newRoute.index === existingRoute.index && newRoute.path === existingRoute.path && newRoute.caseSensitive === existingRoute.caseSensitive)) {\n    return false;\n  }\n  // Pathless layout routes are trickier since we need to check children.\n  // If they have no children then they're the same as far as we can tell\n  if ((!newRoute.children || newRoute.children.length === 0) && (!existingRoute.children || existingRoute.children.length === 0)) {\n    return true;\n  }\n  // Otherwise, we look to see if every child in the new route is already\n  // represented in the existing route's children\n  return newRoute.children.every((aChild, i) => {\n    var _existingRoute$childr;\n    return (_existingRoute$childr = existingRoute.children) == null ? void 0 : _existingRoute$childr.some(bChild => isSameRoute(aChild, bChild));\n  });\n}\n/**\n * Execute route.lazy() methods to lazily load route modules (loader, action,\n * shouldRevalidate) and update the routeManifest in place which shares objects\n * with dataRoutes so those get updated as well.\n */\nasync function loadLazyRouteModule(route, mapRouteProperties, manifest) {\n  if (!route.lazy) {\n    return;\n  }\n  let lazyRoute = await route.lazy();\n  // If the lazy route function was executed and removed by another parallel\n  // call then we can return - first lazy() to finish wins because the return\n  // value of lazy is expected to be static\n  if (!route.lazy) {\n    return;\n  }\n  let routeToUpdate = manifest[route.id];\n  invariant(routeToUpdate, \"No route found in manifest\");\n  // Update the route in place.  This should be safe because there's no way\n  // we could yet be sitting on this route as we can't get there without\n  // resolving lazy() first.\n  //\n  // This is different than the HMR \"update\" use-case where we may actively be\n  // on the route being updated.  The main concern boils down to \"does this\n  // mutation affect any ongoing navigations or any current state.matches\n  // values?\".  If not, it should be safe to update in place.\n  let routeUpdates = {};\n  for (let lazyRouteProperty in lazyRoute) {\n    let staticRouteValue = routeToUpdate[lazyRouteProperty];\n    let isPropertyStaticallyDefined = staticRouteValue !== undefined &&\n    // This property isn't static since it should always be updated based\n    // on the route updates\n    lazyRouteProperty !== \"hasErrorBoundary\";\n    warning(!isPropertyStaticallyDefined, \"Route \\\"\" + routeToUpdate.id + \"\\\" has a static property \\\"\" + lazyRouteProperty + \"\\\" \" + \"defined but its lazy function is also returning a value for this property. \" + (\"The lazy route property \\\"\" + lazyRouteProperty + \"\\\" will be ignored.\"));\n    if (!isPropertyStaticallyDefined && !immutableRouteKeys.has(lazyRouteProperty)) {\n      routeUpdates[lazyRouteProperty] = lazyRoute[lazyRouteProperty];\n    }\n  }\n  // Mutate the route with the provided updates.  Do this first so we pass\n  // the updated version to mapRouteProperties\n  Object.assign(routeToUpdate, routeUpdates);\n  // Mutate the `hasErrorBoundary` property on the route based on the route\n  // updates and remove the `lazy` function so we don't resolve the lazy\n  // route again.\n  Object.assign(routeToUpdate, _extends({}, mapRouteProperties(routeToUpdate), {\n    lazy: undefined\n  }));\n}\n// Default implementation of `dataStrategy` which fetches all loaders in parallel\nasync function defaultDataStrategy(_ref4) {\n  let {\n    matches\n  } = _ref4;\n  let matchesToLoad = matches.filter(m => m.shouldLoad);\n  let results = await Promise.all(matchesToLoad.map(m => m.resolve()));\n  return results.reduce((acc, result, i) => Object.assign(acc, {\n    [matchesToLoad[i].route.id]: result\n  }), {});\n}\nasync function callDataStrategyImpl(dataStrategyImpl, type, state, request, matchesToLoad, matches, fetcherKey, manifest, mapRouteProperties, requestContext) {\n  let loadRouteDefinitionsPromises = matches.map(m => m.route.lazy ? loadLazyRouteModule(m.route, mapRouteProperties, manifest) : undefined);\n  let dsMatches = matches.map((match, i) => {\n    let loadRoutePromise = loadRouteDefinitionsPromises[i];\n    let shouldLoad = matchesToLoad.some(m => m.route.id === match.route.id);\n    // `resolve` encapsulates route.lazy(), executing the loader/action,\n    // and mapping return values/thrown errors to a `DataStrategyResult`.  Users\n    // can pass a callback to take fine-grained control over the execution\n    // of the loader/action\n    let resolve = async handlerOverride => {\n      if (handlerOverride && request.method === \"GET\" && (match.route.lazy || match.route.loader)) {\n        shouldLoad = true;\n      }\n      return shouldLoad ? callLoaderOrAction(type, request, match, loadRoutePromise, handlerOverride, requestContext) : Promise.resolve({\n        type: ResultType.data,\n        result: undefined\n      });\n    };\n    return _extends({}, match, {\n      shouldLoad,\n      resolve\n    });\n  });\n  // Send all matches here to allow for a middleware-type implementation.\n  // handler will be a no-op for unneeded routes and we filter those results\n  // back out below.\n  let results = await dataStrategyImpl({\n    matches: dsMatches,\n    request,\n    params: matches[0].params,\n    fetcherKey,\n    context: requestContext\n  });\n  // Wait for all routes to load here but 'swallow the error since we want\n  // it to bubble up from the `await loadRoutePromise` in `callLoaderOrAction` -\n  // called from `match.resolve()`\n  try {\n    await Promise.all(loadRouteDefinitionsPromises);\n  } catch (e) {\n    // No-op\n  }\n  return results;\n}\n// Default logic for calling a loader/action is the user has no specified a dataStrategy\nasync function callLoaderOrAction(type, request, match, loadRoutePromise, handlerOverride, staticContext) {\n  let result;\n  let onReject;\n  let runHandler = handler => {\n    // Setup a promise we can race against so that abort signals short circuit\n    let reject;\n    // This will never resolve so safe to type it as Promise<DataStrategyResult> to\n    // satisfy the function return value\n    let abortPromise = new Promise((_, r) => reject = r);\n    onReject = () => reject();\n    request.signal.addEventListener(\"abort\", onReject);\n    let actualHandler = ctx => {\n      if (typeof handler !== \"function\") {\n        return Promise.reject(new Error(\"You cannot call the handler for a route which defines a boolean \" + (\"\\\"\" + type + \"\\\" [routeId: \" + match.route.id + \"]\")));\n      }\n      return handler({\n        request,\n        params: match.params,\n        context: staticContext\n      }, ...(ctx !== undefined ? [ctx] : []));\n    };\n    let handlerPromise = (async () => {\n      try {\n        let val = await (handlerOverride ? handlerOverride(ctx => actualHandler(ctx)) : actualHandler());\n        return {\n          type: \"data\",\n          result: val\n        };\n      } catch (e) {\n        return {\n          type: \"error\",\n          result: e\n        };\n      }\n    })();\n    return Promise.race([handlerPromise, abortPromise]);\n  };\n  try {\n    let handler = match.route[type];\n    // If we have a route.lazy promise, await that first\n    if (loadRoutePromise) {\n      if (handler) {\n        // Run statically defined handler in parallel with lazy()\n        let handlerError;\n        let [value] = await Promise.all([\n        // If the handler throws, don't let it immediately bubble out,\n        // since we need to let the lazy() execution finish so we know if this\n        // route has a boundary that can handle the error\n        runHandler(handler).catch(e => {\n          handlerError = e;\n        }), loadRoutePromise]);\n        if (handlerError !== undefined) {\n          throw handlerError;\n        }\n        result = value;\n      } else {\n        // Load lazy route module, then run any returned handler\n        await loadRoutePromise;\n        handler = match.route[type];\n        if (handler) {\n          // Handler still runs even if we got interrupted to maintain consistency\n          // with un-abortable behavior of handler execution on non-lazy or\n          // previously-lazy-loaded routes\n          result = await runHandler(handler);\n        } else if (type === \"action\") {\n          let url = new URL(request.url);\n          let pathname = url.pathname + url.search;\n          throw getInternalRouterError(405, {\n            method: request.method,\n            pathname,\n            routeId: match.route.id\n          });\n        } else {\n          // lazy() route has no loader to run.  Short circuit here so we don't\n          // hit the invariant below that errors on returning undefined.\n          return {\n            type: ResultType.data,\n            result: undefined\n          };\n        }\n      }\n    } else if (!handler) {\n      let url = new URL(request.url);\n      let pathname = url.pathname + url.search;\n      throw getInternalRouterError(404, {\n        pathname\n      });\n    } else {\n      result = await runHandler(handler);\n    }\n    invariant(result.result !== undefined, \"You defined \" + (type === \"action\" ? \"an action\" : \"a loader\") + \" for route \" + (\"\\\"\" + match.route.id + \"\\\" but didn't return anything from your `\" + type + \"` \") + \"function. Please return a value or `null`.\");\n  } catch (e) {\n    // We should already be catching and converting normal handler executions to\n    // DataStrategyResults and returning them, so anything that throws here is an\n    // unexpected error we still need to wrap\n    return {\n      type: ResultType.error,\n      result: e\n    };\n  } finally {\n    if (onReject) {\n      request.signal.removeEventListener(\"abort\", onReject);\n    }\n  }\n  return result;\n}\nasync function convertDataStrategyResultToDataResult(dataStrategyResult) {\n  let {\n    result,\n    type\n  } = dataStrategyResult;\n  if (isResponse(result)) {\n    let data;\n    try {\n      let contentType = result.headers.get(\"Content-Type\");\n      // Check between word boundaries instead of startsWith() due to the last\n      // paragraph of https://httpwg.org/specs/rfc9110.html#field.content-type\n      if (contentType && /\\bapplication\\/json\\b/.test(contentType)) {\n        if (result.body == null) {\n          data = null;\n        } else {\n          data = await result.json();\n        }\n      } else {\n        data = await result.text();\n      }\n    } catch (e) {\n      return {\n        type: ResultType.error,\n        error: e\n      };\n    }\n    if (type === ResultType.error) {\n      return {\n        type: ResultType.error,\n        error: new ErrorResponseImpl(result.status, result.statusText, data),\n        statusCode: result.status,\n        headers: result.headers\n      };\n    }\n    return {\n      type: ResultType.data,\n      data,\n      statusCode: result.status,\n      headers: result.headers\n    };\n  }\n  if (type === ResultType.error) {\n    if (isDataWithResponseInit(result)) {\n      var _result$init3, _result$init4;\n      if (result.data instanceof Error) {\n        var _result$init, _result$init2;\n        return {\n          type: ResultType.error,\n          error: result.data,\n          statusCode: (_result$init = result.init) == null ? void 0 : _result$init.status,\n          headers: (_result$init2 = result.init) != null && _result$init2.headers ? new Headers(result.init.headers) : undefined\n        };\n      }\n      // Convert thrown data() to ErrorResponse instances\n      return {\n        type: ResultType.error,\n        error: new ErrorResponseImpl(((_result$init3 = result.init) == null ? void 0 : _result$init3.status) || 500, undefined, result.data),\n        statusCode: isRouteErrorResponse(result) ? result.status : undefined,\n        headers: (_result$init4 = result.init) != null && _result$init4.headers ? new Headers(result.init.headers) : undefined\n      };\n    }\n    return {\n      type: ResultType.error,\n      error: result,\n      statusCode: isRouteErrorResponse(result) ? result.status : undefined\n    };\n  }\n  if (isDeferredData(result)) {\n    var _result$init5, _result$init6;\n    return {\n      type: ResultType.deferred,\n      deferredData: result,\n      statusCode: (_result$init5 = result.init) == null ? void 0 : _result$init5.status,\n      headers: ((_result$init6 = result.init) == null ? void 0 : _result$init6.headers) && new Headers(result.init.headers)\n    };\n  }\n  if (isDataWithResponseInit(result)) {\n    var _result$init7, _result$init8;\n    return {\n      type: ResultType.data,\n      data: result.data,\n      statusCode: (_result$init7 = result.init) == null ? void 0 : _result$init7.status,\n      headers: (_result$init8 = result.init) != null && _result$init8.headers ? new Headers(result.init.headers) : undefined\n    };\n  }\n  return {\n    type: ResultType.data,\n    data: result\n  };\n}\n// Support relative routing in internal redirects\nfunction normalizeRelativeRoutingRedirectResponse(response, request, routeId, matches, basename, v7_relativeSplatPath) {\n  let location = response.headers.get(\"Location\");\n  invariant(location, \"Redirects returned/thrown from loaders/actions must have a Location header\");\n  if (!ABSOLUTE_URL_REGEX.test(location)) {\n    let trimmedMatches = matches.slice(0, matches.findIndex(m => m.route.id === routeId) + 1);\n    location = normalizeTo(new URL(request.url), trimmedMatches, basename, true, location, v7_relativeSplatPath);\n    response.headers.set(\"Location\", location);\n  }\n  return response;\n}\nfunction normalizeRedirectLocation(location, currentUrl, basename) {\n  if (ABSOLUTE_URL_REGEX.test(location)) {\n    // Strip off the protocol+origin for same-origin + same-basename absolute redirects\n    let normalizedLocation = location;\n    let url = normalizedLocation.startsWith(\"//\") ? new URL(currentUrl.protocol + normalizedLocation) : new URL(normalizedLocation);\n    let isSameBasename = stripBasename(url.pathname, basename) != null;\n    if (url.origin === currentUrl.origin && isSameBasename) {\n      return url.pathname + url.search + url.hash;\n    }\n  }\n  return location;\n}\n// Utility method for creating the Request instances for loaders/actions during\n// client-side navigations and fetches.  During SSR we will always have a\n// Request instance from the static handler (query/queryRoute)\nfunction createClientSideRequest(history, location, signal, submission) {\n  let url = history.createURL(stripHashFromPath(location)).toString();\n  let init = {\n    signal\n  };\n  if (submission && isMutationMethod(submission.formMethod)) {\n    let {\n      formMethod,\n      formEncType\n    } = submission;\n    // Didn't think we needed this but it turns out unlike other methods, patch\n    // won't be properly normalized to uppercase and results in a 405 error.\n    // See: https://fetch.spec.whatwg.org/#concept-method\n    init.method = formMethod.toUpperCase();\n    if (formEncType === \"application/json\") {\n      init.headers = new Headers({\n        \"Content-Type\": formEncType\n      });\n      init.body = JSON.stringify(submission.json);\n    } else if (formEncType === \"text/plain\") {\n      // Content-Type is inferred (https://fetch.spec.whatwg.org/#dom-request)\n      init.body = submission.text;\n    } else if (formEncType === \"application/x-www-form-urlencoded\" && submission.formData) {\n      // Content-Type is inferred (https://fetch.spec.whatwg.org/#dom-request)\n      init.body = convertFormDataToSearchParams(submission.formData);\n    } else {\n      // Content-Type is inferred (https://fetch.spec.whatwg.org/#dom-request)\n      init.body = submission.formData;\n    }\n  }\n  return new Request(url, init);\n}\nfunction convertFormDataToSearchParams(formData) {\n  let searchParams = new URLSearchParams();\n  for (let [key, value] of formData.entries()) {\n    // https://html.spec.whatwg.org/multipage/form-control-infrastructure.html#converting-an-entry-list-to-a-list-of-name-value-pairs\n    searchParams.append(key, typeof value === \"string\" ? value : value.name);\n  }\n  return searchParams;\n}\nfunction convertSearchParamsToFormData(searchParams) {\n  let formData = new FormData();\n  for (let [key, value] of searchParams.entries()) {\n    formData.append(key, value);\n  }\n  return formData;\n}\nfunction processRouteLoaderData(matches, results, pendingActionResult, activeDeferreds, skipLoaderErrorBubbling) {\n  // Fill in loaderData/errors from our loaders\n  let loaderData = {};\n  let errors = null;\n  let statusCode;\n  let foundError = false;\n  let loaderHeaders = {};\n  let pendingError = pendingActionResult && isErrorResult(pendingActionResult[1]) ? pendingActionResult[1].error : undefined;\n  // Process loader results into state.loaderData/state.errors\n  matches.forEach(match => {\n    if (!(match.route.id in results)) {\n      return;\n    }\n    let id = match.route.id;\n    let result = results[id];\n    invariant(!isRedirectResult(result), \"Cannot handle redirect results in processLoaderData\");\n    if (isErrorResult(result)) {\n      let error = result.error;\n      // If we have a pending action error, we report it at the highest-route\n      // that throws a loader error, and then clear it out to indicate that\n      // it was consumed\n      if (pendingError !== undefined) {\n        error = pendingError;\n        pendingError = undefined;\n      }\n      errors = errors || {};\n      if (skipLoaderErrorBubbling) {\n        errors[id] = error;\n      } else {\n        // Look upwards from the matched route for the closest ancestor error\n        // boundary, defaulting to the root match.  Prefer higher error values\n        // if lower errors bubble to the same boundary\n        let boundaryMatch = findNearestBoundary(matches, id);\n        if (errors[boundaryMatch.route.id] == null) {\n          errors[boundaryMatch.route.id] = error;\n        }\n      }\n      // Clear our any prior loaderData for the throwing route\n      loaderData[id] = undefined;\n      // Once we find our first (highest) error, we set the status code and\n      // prevent deeper status codes from overriding\n      if (!foundError) {\n        foundError = true;\n        statusCode = isRouteErrorResponse(result.error) ? result.error.status : 500;\n      }\n      if (result.headers) {\n        loaderHeaders[id] = result.headers;\n      }\n    } else {\n      if (isDeferredResult(result)) {\n        activeDeferreds.set(id, result.deferredData);\n        loaderData[id] = result.deferredData.data;\n        // Error status codes always override success status codes, but if all\n        // loaders are successful we take the deepest status code.\n        if (result.statusCode != null && result.statusCode !== 200 && !foundError) {\n          statusCode = result.statusCode;\n        }\n        if (result.headers) {\n          loaderHeaders[id] = result.headers;\n        }\n      } else {\n        loaderData[id] = result.data;\n        // Error status codes always override success status codes, but if all\n        // loaders are successful we take the deepest status code.\n        if (result.statusCode && result.statusCode !== 200 && !foundError) {\n          statusCode = result.statusCode;\n        }\n        if (result.headers) {\n          loaderHeaders[id] = result.headers;\n        }\n      }\n    }\n  });\n  // If we didn't consume the pending action error (i.e., all loaders\n  // resolved), then consume it here.  Also clear out any loaderData for the\n  // throwing route\n  if (pendingError !== undefined && pendingActionResult) {\n    errors = {\n      [pendingActionResult[0]]: pendingError\n    };\n    loaderData[pendingActionResult[0]] = undefined;\n  }\n  return {\n    loaderData,\n    errors,\n    statusCode: statusCode || 200,\n    loaderHeaders\n  };\n}\nfunction processLoaderData(state, matches, results, pendingActionResult, revalidatingFetchers, fetcherResults, activeDeferreds) {\n  let {\n    loaderData,\n    errors\n  } = processRouteLoaderData(matches, results, pendingActionResult, activeDeferreds, false // This method is only called client side so we always want to bubble\n  );\n  // Process results from our revalidating fetchers\n  revalidatingFetchers.forEach(rf => {\n    let {\n      key,\n      match,\n      controller\n    } = rf;\n    let result = fetcherResults[key];\n    invariant(result, \"Did not find corresponding fetcher result\");\n    // Process fetcher non-redirect errors\n    if (controller && controller.signal.aborted) {\n      // Nothing to do for aborted fetchers\n      return;\n    } else if (isErrorResult(result)) {\n      let boundaryMatch = findNearestBoundary(state.matches, match == null ? void 0 : match.route.id);\n      if (!(errors && errors[boundaryMatch.route.id])) {\n        errors = _extends({}, errors, {\n          [boundaryMatch.route.id]: result.error\n        });\n      }\n      state.fetchers.delete(key);\n    } else if (isRedirectResult(result)) {\n      // Should never get here, redirects should get processed above, but we\n      // keep this to type narrow to a success result in the else\n      invariant(false, \"Unhandled fetcher revalidation redirect\");\n    } else if (isDeferredResult(result)) {\n      // Should never get here, deferred data should be awaited for fetchers\n      // in resolveDeferredResults\n      invariant(false, \"Unhandled fetcher deferred data\");\n    } else {\n      let doneFetcher = getDoneFetcher(result.data);\n      state.fetchers.set(key, doneFetcher);\n    }\n  });\n  return {\n    loaderData,\n    errors\n  };\n}\nfunction mergeLoaderData(loaderData, newLoaderData, matches, errors) {\n  let mergedLoaderData = _extends({}, newLoaderData);\n  for (let match of matches) {\n    let id = match.route.id;\n    if (newLoaderData.hasOwnProperty(id)) {\n      if (newLoaderData[id] !== undefined) {\n        mergedLoaderData[id] = newLoaderData[id];\n      }\n    } else if (loaderData[id] !== undefined && match.route.loader) {\n      // Preserve existing keys not included in newLoaderData and where a loader\n      // wasn't removed by HMR\n      mergedLoaderData[id] = loaderData[id];\n    }\n    if (errors && errors.hasOwnProperty(id)) {\n      // Don't keep any loader data below the boundary\n      break;\n    }\n  }\n  return mergedLoaderData;\n}\nfunction getActionDataForCommit(pendingActionResult) {\n  if (!pendingActionResult) {\n    return {};\n  }\n  return isErrorResult(pendingActionResult[1]) ? {\n    // Clear out prior actionData on errors\n    actionData: {}\n  } : {\n    actionData: {\n      [pendingActionResult[0]]: pendingActionResult[1].data\n    }\n  };\n}\n// Find the nearest error boundary, looking upwards from the leaf route (or the\n// route specified by routeId) for the closest ancestor error boundary,\n// defaulting to the root match\nfunction findNearestBoundary(matches, routeId) {\n  let eligibleMatches = routeId ? matches.slice(0, matches.findIndex(m => m.route.id === routeId) + 1) : [...matches];\n  return eligibleMatches.reverse().find(m => m.route.hasErrorBoundary === true) || matches[0];\n}\nfunction getShortCircuitMatches(routes) {\n  // Prefer a root layout route if present, otherwise shim in a route object\n  let route = routes.length === 1 ? routes[0] : routes.find(r => r.index || !r.path || r.path === \"/\") || {\n    id: \"__shim-error-route__\"\n  };\n  return {\n    matches: [{\n      params: {},\n      pathname: \"\",\n      pathnameBase: \"\",\n      route\n    }],\n    route\n  };\n}\nfunction getInternalRouterError(status, _temp5) {\n  let {\n    pathname,\n    routeId,\n    method,\n    type,\n    message\n  } = _temp5 === void 0 ? {} : _temp5;\n  let statusText = \"Unknown Server Error\";\n  let errorMessage = \"Unknown @remix-run/router error\";\n  if (status === 400) {\n    statusText = \"Bad Request\";\n    if (method && pathname && routeId) {\n      errorMessage = \"You made a \" + method + \" request to \\\"\" + pathname + \"\\\" but \" + (\"did not provide a `loader` for route \\\"\" + routeId + \"\\\", \") + \"so there is no way to handle the request.\";\n    } else if (type === \"defer-action\") {\n      errorMessage = \"defer() is not supported in actions\";\n    } else if (type === \"invalid-body\") {\n      errorMessage = \"Unable to encode submission body\";\n    }\n  } else if (status === 403) {\n    statusText = \"Forbidden\";\n    errorMessage = \"Route \\\"\" + routeId + \"\\\" does not match URL \\\"\" + pathname + \"\\\"\";\n  } else if (status === 404) {\n    statusText = \"Not Found\";\n    errorMessage = \"No route matches URL \\\"\" + pathname + \"\\\"\";\n  } else if (status === 405) {\n    statusText = \"Method Not Allowed\";\n    if (method && pathname && routeId) {\n      errorMessage = \"You made a \" + method.toUpperCase() + \" request to \\\"\" + pathname + \"\\\" but \" + (\"did not provide an `action` for route \\\"\" + routeId + \"\\\", \") + \"so there is no way to handle the request.\";\n    } else if (method) {\n      errorMessage = \"Invalid request method \\\"\" + method.toUpperCase() + \"\\\"\";\n    }\n  }\n  return new ErrorResponseImpl(status || 500, statusText, new Error(errorMessage), true);\n}\n// Find any returned redirect errors, starting from the lowest match\nfunction findRedirect(results) {\n  let entries = Object.entries(results);\n  for (let i = entries.length - 1; i >= 0; i--) {\n    let [key, result] = entries[i];\n    if (isRedirectResult(result)) {\n      return {\n        key,\n        result\n      };\n    }\n  }\n}\nfunction stripHashFromPath(path) {\n  let parsedPath = typeof path === \"string\" ? parsePath(path) : path;\n  return createPath(_extends({}, parsedPath, {\n    hash: \"\"\n  }));\n}\nfunction isHashChangeOnly(a, b) {\n  if (a.pathname !== b.pathname || a.search !== b.search) {\n    return false;\n  }\n  if (a.hash === \"\") {\n    // /page -> /page#hash\n    return b.hash !== \"\";\n  } else if (a.hash === b.hash) {\n    // /page#hash -> /page#hash\n    return true;\n  } else if (b.hash !== \"\") {\n    // /page#hash -> /page#other\n    return true;\n  }\n  // If the hash is removed the browser will re-perform a request to the server\n  // /page#hash -> /page\n  return false;\n}\nfunction isDataStrategyResult(result) {\n  return result != null && typeof result === \"object\" && \"type\" in result && \"result\" in result && (result.type === ResultType.data || result.type === ResultType.error);\n}\nfunction isRedirectDataStrategyResultResult(result) {\n  return isResponse(result.result) && redirectStatusCodes.has(result.result.status);\n}\nfunction isDeferredResult(result) {\n  return result.type === ResultType.deferred;\n}\nfunction isErrorResult(result) {\n  return result.type === ResultType.error;\n}\nfunction isRedirectResult(result) {\n  return (result && result.type) === ResultType.redirect;\n}\nfunction isDataWithResponseInit(value) {\n  return typeof value === \"object\" && value != null && \"type\" in value && \"data\" in value && \"init\" in value && value.type === \"DataWithResponseInit\";\n}\nfunction isDeferredData(value) {\n  let deferred = value;\n  return deferred && typeof deferred === \"object\" && typeof deferred.data === \"object\" && typeof deferred.subscribe === \"function\" && typeof deferred.cancel === \"function\" && typeof deferred.resolveData === \"function\";\n}\nfunction isResponse(value) {\n  return value != null && typeof value.status === \"number\" && typeof value.statusText === \"string\" && typeof value.headers === \"object\" && typeof value.body !== \"undefined\";\n}\nfunction isRedirectResponse(result) {\n  if (!isResponse(result)) {\n    return false;\n  }\n  let status = result.status;\n  let location = result.headers.get(\"Location\");\n  return status >= 300 && status <= 399 && location != null;\n}\nfunction isValidMethod(method) {\n  return validRequestMethods.has(method.toLowerCase());\n}\nfunction isMutationMethod(method) {\n  return validMutationMethods.has(method.toLowerCase());\n}\nasync function resolveNavigationDeferredResults(matches, results, signal, currentMatches, currentLoaderData) {\n  let entries = Object.entries(results);\n  for (let index = 0; index < entries.length; index++) {\n    let [routeId, result] = entries[index];\n    let match = matches.find(m => (m == null ? void 0 : m.route.id) === routeId);\n    // If we don't have a match, then we can have a deferred result to do\n    // anything with.  This is for revalidating fetchers where the route was\n    // removed during HMR\n    if (!match) {\n      continue;\n    }\n    let currentMatch = currentMatches.find(m => m.route.id === match.route.id);\n    let isRevalidatingLoader = currentMatch != null && !isNewRouteInstance(currentMatch, match) && (currentLoaderData && currentLoaderData[match.route.id]) !== undefined;\n    if (isDeferredResult(result) && isRevalidatingLoader) {\n      // Note: we do not have to touch activeDeferreds here since we race them\n      // against the signal in resolveDeferredData and they'll get aborted\n      // there if needed\n      await resolveDeferredData(result, signal, false).then(result => {\n        if (result) {\n          results[routeId] = result;\n        }\n      });\n    }\n  }\n}\nasync function resolveFetcherDeferredResults(matches, results, revalidatingFetchers) {\n  for (let index = 0; index < revalidatingFetchers.length; index++) {\n    let {\n      key,\n      routeId,\n      controller\n    } = revalidatingFetchers[index];\n    let result = results[key];\n    let match = matches.find(m => (m == null ? void 0 : m.route.id) === routeId);\n    // If we don't have a match, then we can have a deferred result to do\n    // anything with.  This is for revalidating fetchers where the route was\n    // removed during HMR\n    if (!match) {\n      continue;\n    }\n    if (isDeferredResult(result)) {\n      // Note: we do not have to touch activeDeferreds here since we race them\n      // against the signal in resolveDeferredData and they'll get aborted\n      // there if needed\n      invariant(controller, \"Expected an AbortController for revalidating fetcher deferred result\");\n      await resolveDeferredData(result, controller.signal, true).then(result => {\n        if (result) {\n          results[key] = result;\n        }\n      });\n    }\n  }\n}\nasync function resolveDeferredData(result, signal, unwrap) {\n  if (unwrap === void 0) {\n    unwrap = false;\n  }\n  let aborted = await result.deferredData.resolveData(signal);\n  if (aborted) {\n    return;\n  }\n  if (unwrap) {\n    try {\n      return {\n        type: ResultType.data,\n        data: result.deferredData.unwrappedData\n      };\n    } catch (e) {\n      // Handle any TrackedPromise._error values encountered while unwrapping\n      return {\n        type: ResultType.error,\n        error: e\n      };\n    }\n  }\n  return {\n    type: ResultType.data,\n    data: result.deferredData.data\n  };\n}\nfunction hasNakedIndexQuery(search) {\n  return new URLSearchParams(search).getAll(\"index\").some(v => v === \"\");\n}\nfunction getTargetMatch(matches, location) {\n  let search = typeof location === \"string\" ? parsePath(location).search : location.search;\n  if (matches[matches.length - 1].route.index && hasNakedIndexQuery(search || \"\")) {\n    // Return the leaf index route when index is present\n    return matches[matches.length - 1];\n  }\n  // Otherwise grab the deepest \"path contributing\" match (ignoring index and\n  // pathless layout routes)\n  let pathMatches = getPathContributingMatches(matches);\n  return pathMatches[pathMatches.length - 1];\n}\nfunction getSubmissionFromNavigation(navigation) {\n  let {\n    formMethod,\n    formAction,\n    formEncType,\n    text,\n    formData,\n    json\n  } = navigation;\n  if (!formMethod || !formAction || !formEncType) {\n    return;\n  }\n  if (text != null) {\n    return {\n      formMethod,\n      formAction,\n      formEncType,\n      formData: undefined,\n      json: undefined,\n      text\n    };\n  } else if (formData != null) {\n    return {\n      formMethod,\n      formAction,\n      formEncType,\n      formData,\n      json: undefined,\n      text: undefined\n    };\n  } else if (json !== undefined) {\n    return {\n      formMethod,\n      formAction,\n      formEncType,\n      formData: undefined,\n      json,\n      text: undefined\n    };\n  }\n}\nfunction getLoadingNavigation(location, submission) {\n  if (submission) {\n    let navigation = {\n      state: \"loading\",\n      location,\n      formMethod: submission.formMethod,\n      formAction: submission.formAction,\n      formEncType: submission.formEncType,\n      formData: submission.formData,\n      json: submission.json,\n      text: submission.text\n    };\n    return navigation;\n  } else {\n    let navigation = {\n      state: \"loading\",\n      location,\n      formMethod: undefined,\n      formAction: undefined,\n      formEncType: undefined,\n      formData: undefined,\n      json: undefined,\n      text: undefined\n    };\n    return navigation;\n  }\n}\nfunction getSubmittingNavigation(location, submission) {\n  let navigation = {\n    state: \"submitting\",\n    location,\n    formMethod: submission.formMethod,\n    formAction: submission.formAction,\n    formEncType: submission.formEncType,\n    formData: submission.formData,\n    json: submission.json,\n    text: submission.text\n  };\n  return navigation;\n}\nfunction getLoadingFetcher(submission, data) {\n  if (submission) {\n    let fetcher = {\n      state: \"loading\",\n      formMethod: submission.formMethod,\n      formAction: submission.formAction,\n      formEncType: submission.formEncType,\n      formData: submission.formData,\n      json: submission.json,\n      text: submission.text,\n      data\n    };\n    return fetcher;\n  } else {\n    let fetcher = {\n      state: \"loading\",\n      formMethod: undefined,\n      formAction: undefined,\n      formEncType: undefined,\n      formData: undefined,\n      json: undefined,\n      text: undefined,\n      data\n    };\n    return fetcher;\n  }\n}\nfunction getSubmittingFetcher(submission, existingFetcher) {\n  let fetcher = {\n    state: \"submitting\",\n    formMethod: submission.formMethod,\n    formAction: submission.formAction,\n    formEncType: submission.formEncType,\n    formData: submission.formData,\n    json: submission.json,\n    text: submission.text,\n    data: existingFetcher ? existingFetcher.data : undefined\n  };\n  return fetcher;\n}\nfunction getDoneFetcher(data) {\n  let fetcher = {\n    state: \"idle\",\n    formMethod: undefined,\n    formAction: undefined,\n    formEncType: undefined,\n    formData: undefined,\n    json: undefined,\n    text: undefined,\n    data\n  };\n  return fetcher;\n}\nfunction restoreAppliedTransitions(_window, transitions) {\n  try {\n    let sessionPositions = _window.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);\n    if (sessionPositions) {\n      let json = JSON.parse(sessionPositions);\n      for (let [k, v] of Object.entries(json || {})) {\n        if (v && Array.isArray(v)) {\n          transitions.set(k, new Set(v || []));\n        }\n      }\n    }\n  } catch (e) {\n    // no-op, use default empty object\n  }\n}\nfunction persistAppliedTransitions(_window, transitions) {\n  if (transitions.size > 0) {\n    let json = {};\n    for (let [k, v] of transitions) {\n      json[k] = [...v];\n    }\n    try {\n      _window.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY, JSON.stringify(json));\n    } catch (error) {\n      warning(false, \"Failed to save applied view transitions in sessionStorage (\" + error + \").\");\n    }\n  }\n}\n//#endregion\n\nexport { AbortedDeferredError, Action, IDLE_BLOCKER, IDLE_FETCHER, IDLE_NAVIGATION, UNSAFE_DEFERRED_SYMBOL, DeferredData as UNSAFE_DeferredData, ErrorResponseImpl as UNSAFE_ErrorResponseImpl, convertRouteMatchToUiMatch as UNSAFE_convertRouteMatchToUiMatch, convertRoutesToDataRoutes as UNSAFE_convertRoutesToDataRoutes, decodePath as UNSAFE_decodePath, getResolveToMatches as UNSAFE_getResolveToMatches, invariant as UNSAFE_invariant, warning as UNSAFE_warning, createBrowserHistory, createHashHistory, createMemoryHistory, createPath, createRouter, createStaticHandler, data, defer, generatePath, getStaticContextFromError, getToPathname, isDataWithResponseInit, isDeferredData, isRouteErrorResponse, joinPaths, json, matchPath, matchRoutes, normalizePathname, parsePath, redirect, redirectDocument, replace, resolvePath, resolveTo, stripBasename };\n//# sourceMappingURL=router.js.map\n","/**\n * React Router v6.30.1\n *\n * Copyright (c) Remix Software Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nimport * as React from 'react';\nimport { UNSAFE_invariant, joinPaths, matchPath, UNSAFE_decodePath, UNSAFE_getResolveToMatches, UNSAFE_warning, resolveTo, parsePath, matchRoutes, Action, UNSAFE_convertRouteMatchToUiMatch, stripBasename, IDLE_BLOCKER, isRouteErrorResponse, createMemoryHistory, AbortedDeferredError, createRouter } from '@remix-run/router';\nexport { AbortedDeferredError, Action as NavigationType, createPath, defer, generatePath, isRouteErrorResponse, json, matchPath, matchRoutes, parsePath, redirect, redirectDocument, replace, resolvePath } from '@remix-run/router';\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\n// Create react-specific types from the agnostic types in @remix-run/router to\n// export from react-router\nconst DataRouterContext = /*#__PURE__*/React.createContext(null);\nif (process.env.NODE_ENV !== \"production\") {\n  DataRouterContext.displayName = \"DataRouter\";\n}\nconst DataRouterStateContext = /*#__PURE__*/React.createContext(null);\nif (process.env.NODE_ENV !== \"production\") {\n  DataRouterStateContext.displayName = \"DataRouterState\";\n}\nconst AwaitContext = /*#__PURE__*/React.createContext(null);\nif (process.env.NODE_ENV !== \"production\") {\n  AwaitContext.displayName = \"Await\";\n}\n\n/**\n * A Navigator is a \"location changer\"; it's how you get to different locations.\n *\n * Every history instance conforms to the Navigator interface, but the\n * distinction is useful primarily when it comes to the low-level `<Router>` API\n * where both the location and a navigator must be provided separately in order\n * to avoid \"tearing\" that may occur in a suspense-enabled app if the action\n * and/or location were to be read directly from the history instance.\n */\n\nconst NavigationContext = /*#__PURE__*/React.createContext(null);\nif (process.env.NODE_ENV !== \"production\") {\n  NavigationContext.displayName = \"Navigation\";\n}\nconst LocationContext = /*#__PURE__*/React.createContext(null);\nif (process.env.NODE_ENV !== \"production\") {\n  LocationContext.displayName = \"Location\";\n}\nconst RouteContext = /*#__PURE__*/React.createContext({\n  outlet: null,\n  matches: [],\n  isDataRoute: false\n});\nif (process.env.NODE_ENV !== \"production\") {\n  RouteContext.displayName = \"Route\";\n}\nconst RouteErrorContext = /*#__PURE__*/React.createContext(null);\nif (process.env.NODE_ENV !== \"production\") {\n  RouteErrorContext.displayName = \"RouteError\";\n}\n\n/**\n * Returns the full href for the given \"to\" value. This is useful for building\n * custom links that are also accessible and preserve right-click behavior.\n *\n * @see https://reactrouter.com/v6/hooks/use-href\n */\nfunction useHref(to, _temp) {\n  let {\n    relative\n  } = _temp === void 0 ? {} : _temp;\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useHref() may be used only in the context of a <Router> component.\") : UNSAFE_invariant(false) : void 0;\n  let {\n    basename,\n    navigator\n  } = React.useContext(NavigationContext);\n  let {\n    hash,\n    pathname,\n    search\n  } = useResolvedPath(to, {\n    relative\n  });\n  let joinedPathname = pathname;\n\n  // If we're operating within a basename, prepend it to the pathname prior\n  // to creating the href.  If this is a root navigation, then just use the raw\n  // basename which allows the basename to have full control over the presence\n  // of a trailing slash on root links\n  if (basename !== \"/\") {\n    joinedPathname = pathname === \"/\" ? basename : joinPaths([basename, pathname]);\n  }\n  return navigator.createHref({\n    pathname: joinedPathname,\n    search,\n    hash\n  });\n}\n\n/**\n * Returns true if this component is a descendant of a `<Router>`.\n *\n * @see https://reactrouter.com/v6/hooks/use-in-router-context\n */\nfunction useInRouterContext() {\n  return React.useContext(LocationContext) != null;\n}\n\n/**\n * Returns the current location object, which represents the current URL in web\n * browsers.\n *\n * Note: If you're using this it may mean you're doing some of your own\n * \"routing\" in your app, and we'd like to know what your use case is. We may\n * be able to provide something higher-level to better suit your needs.\n *\n * @see https://reactrouter.com/v6/hooks/use-location\n */\nfunction useLocation() {\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useLocation() may be used only in the context of a <Router> component.\") : UNSAFE_invariant(false) : void 0;\n  return React.useContext(LocationContext).location;\n}\n\n/**\n * Returns the current navigation action which describes how the router came to\n * the current location, either by a pop, push, or replace on the history stack.\n *\n * @see https://reactrouter.com/v6/hooks/use-navigation-type\n */\nfunction useNavigationType() {\n  return React.useContext(LocationContext).navigationType;\n}\n\n/**\n * Returns a PathMatch object if the given pattern matches the current URL.\n * This is useful for components that need to know \"active\" state, e.g.\n * `<NavLink>`.\n *\n * @see https://reactrouter.com/v6/hooks/use-match\n */\nfunction useMatch(pattern) {\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useMatch() may be used only in the context of a <Router> component.\") : UNSAFE_invariant(false) : void 0;\n  let {\n    pathname\n  } = useLocation();\n  return React.useMemo(() => matchPath(pattern, UNSAFE_decodePath(pathname)), [pathname, pattern]);\n}\n\n/**\n * The interface for the navigate() function returned from useNavigate().\n */\n\nconst navigateEffectWarning = \"You should call navigate() in a React.useEffect(), not when \" + \"your component is first rendered.\";\n\n// Mute warnings for calls to useNavigate in SSR environments\nfunction useIsomorphicLayoutEffect(cb) {\n  let isStatic = React.useContext(NavigationContext).static;\n  if (!isStatic) {\n    // We should be able to get rid of this once react 18.3 is released\n    // See: https://github.com/facebook/react/pull/26395\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useLayoutEffect(cb);\n  }\n}\n\n/**\n * Returns an imperative method for changing the location. Used by `<Link>`s, but\n * may also be used by other elements to change the location.\n *\n * @see https://reactrouter.com/v6/hooks/use-navigate\n */\nfunction useNavigate() {\n  let {\n    isDataRoute\n  } = React.useContext(RouteContext);\n  // Conditional usage is OK here because the usage of a data router is static\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  return isDataRoute ? useNavigateStable() : useNavigateUnstable();\n}\nfunction useNavigateUnstable() {\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useNavigate() may be used only in the context of a <Router> component.\") : UNSAFE_invariant(false) : void 0;\n  let dataRouterContext = React.useContext(DataRouterContext);\n  let {\n    basename,\n    future,\n    navigator\n  } = React.useContext(NavigationContext);\n  let {\n    matches\n  } = React.useContext(RouteContext);\n  let {\n    pathname: locationPathname\n  } = useLocation();\n  let routePathnamesJson = JSON.stringify(UNSAFE_getResolveToMatches(matches, future.v7_relativeSplatPath));\n  let activeRef = React.useRef(false);\n  useIsomorphicLayoutEffect(() => {\n    activeRef.current = true;\n  });\n  let navigate = React.useCallback(function (to, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(activeRef.current, navigateEffectWarning) : void 0;\n\n    // Short circuit here since if this happens on first render the navigate\n    // is useless because we haven't wired up our history listener yet\n    if (!activeRef.current) return;\n    if (typeof to === \"number\") {\n      navigator.go(to);\n      return;\n    }\n    let path = resolveTo(to, JSON.parse(routePathnamesJson), locationPathname, options.relative === \"path\");\n\n    // If we're operating within a basename, prepend it to the pathname prior\n    // to handing off to history (but only if we're not in a data router,\n    // otherwise it'll prepend the basename inside of the router).\n    // If this is a root navigation, then we navigate to the raw basename\n    // which allows the basename to have full control over the presence of a\n    // trailing slash on root links\n    if (dataRouterContext == null && basename !== \"/\") {\n      path.pathname = path.pathname === \"/\" ? basename : joinPaths([basename, path.pathname]);\n    }\n    (!!options.replace ? navigator.replace : navigator.push)(path, options.state, options);\n  }, [basename, navigator, routePathnamesJson, locationPathname, dataRouterContext]);\n  return navigate;\n}\nconst OutletContext = /*#__PURE__*/React.createContext(null);\n\n/**\n * Returns the context (if provided) for the child route at this level of the route\n * hierarchy.\n * @see https://reactrouter.com/v6/hooks/use-outlet-context\n */\nfunction useOutletContext() {\n  return React.useContext(OutletContext);\n}\n\n/**\n * Returns the element for the child route at this level of the route\n * hierarchy. Used internally by `<Outlet>` to render child routes.\n *\n * @see https://reactrouter.com/v6/hooks/use-outlet\n */\nfunction useOutlet(context) {\n  let outlet = React.useContext(RouteContext).outlet;\n  if (outlet) {\n    return /*#__PURE__*/React.createElement(OutletContext.Provider, {\n      value: context\n    }, outlet);\n  }\n  return outlet;\n}\n\n/**\n * Returns an object of key/value pairs of the dynamic params from the current\n * URL that were matched by the route path.\n *\n * @see https://reactrouter.com/v6/hooks/use-params\n */\nfunction useParams() {\n  let {\n    matches\n  } = React.useContext(RouteContext);\n  let routeMatch = matches[matches.length - 1];\n  return routeMatch ? routeMatch.params : {};\n}\n\n/**\n * Resolves the pathname of the given `to` value against the current location.\n *\n * @see https://reactrouter.com/v6/hooks/use-resolved-path\n */\nfunction useResolvedPath(to, _temp2) {\n  let {\n    relative\n  } = _temp2 === void 0 ? {} : _temp2;\n  let {\n    future\n  } = React.useContext(NavigationContext);\n  let {\n    matches\n  } = React.useContext(RouteContext);\n  let {\n    pathname: locationPathname\n  } = useLocation();\n  let routePathnamesJson = JSON.stringify(UNSAFE_getResolveToMatches(matches, future.v7_relativeSplatPath));\n  return React.useMemo(() => resolveTo(to, JSON.parse(routePathnamesJson), locationPathname, relative === \"path\"), [to, routePathnamesJson, locationPathname, relative]);\n}\n\n/**\n * Returns the element of the route that matched the current location, prepared\n * with the correct context to render the remainder of the route tree. Route\n * elements in the tree must render an `<Outlet>` to render their child route's\n * element.\n *\n * @see https://reactrouter.com/v6/hooks/use-routes\n */\nfunction useRoutes(routes, locationArg) {\n  return useRoutesImpl(routes, locationArg);\n}\n\n// Internal implementation with accept optional param for RouterProvider usage\nfunction useRoutesImpl(routes, locationArg, dataRouterState, future) {\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, // TODO: This error is probably because they somehow have 2 versions of the\n  // router loaded. We can help them understand how to avoid that.\n  \"useRoutes() may be used only in the context of a <Router> component.\") : UNSAFE_invariant(false) : void 0;\n  let {\n    navigator\n  } = React.useContext(NavigationContext);\n  let {\n    matches: parentMatches\n  } = React.useContext(RouteContext);\n  let routeMatch = parentMatches[parentMatches.length - 1];\n  let parentParams = routeMatch ? routeMatch.params : {};\n  let parentPathname = routeMatch ? routeMatch.pathname : \"/\";\n  let parentPathnameBase = routeMatch ? routeMatch.pathnameBase : \"/\";\n  let parentRoute = routeMatch && routeMatch.route;\n  if (process.env.NODE_ENV !== \"production\") {\n    // You won't get a warning about 2 different <Routes> under a <Route>\n    // without a trailing *, but this is a best-effort warning anyway since we\n    // cannot even give the warning unless they land at the parent route.\n    //\n    // Example:\n    //\n    // <Routes>\n    //   {/* This route path MUST end with /* because otherwise\n    //       it will never match /blog/post/123 */}\n    //   <Route path=\"blog\" element={<Blog />} />\n    //   <Route path=\"blog/feed\" element={<BlogFeed />} />\n    // </Routes>\n    //\n    // function Blog() {\n    //   return (\n    //     <Routes>\n    //       <Route path=\"post/:id\" element={<Post />} />\n    //     </Routes>\n    //   );\n    // }\n    let parentPath = parentRoute && parentRoute.path || \"\";\n    warningOnce(parentPathname, !parentRoute || parentPath.endsWith(\"*\"), \"You rendered descendant <Routes> (or called `useRoutes()`) at \" + (\"\\\"\" + parentPathname + \"\\\" (under <Route path=\\\"\" + parentPath + \"\\\">) but the \") + \"parent route path has no trailing \\\"*\\\". This means if you navigate \" + \"deeper, the parent won't match anymore and therefore the child \" + \"routes will never render.\\n\\n\" + (\"Please change the parent <Route path=\\\"\" + parentPath + \"\\\"> to <Route \") + (\"path=\\\"\" + (parentPath === \"/\" ? \"*\" : parentPath + \"/*\") + \"\\\">.\"));\n  }\n  let locationFromContext = useLocation();\n  let location;\n  if (locationArg) {\n    var _parsedLocationArg$pa;\n    let parsedLocationArg = typeof locationArg === \"string\" ? parsePath(locationArg) : locationArg;\n    !(parentPathnameBase === \"/\" || ((_parsedLocationArg$pa = parsedLocationArg.pathname) == null ? void 0 : _parsedLocationArg$pa.startsWith(parentPathnameBase))) ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, \" + \"the location pathname must begin with the portion of the URL pathname that was \" + (\"matched by all parent routes. The current pathname base is \\\"\" + parentPathnameBase + \"\\\" \") + (\"but pathname \\\"\" + parsedLocationArg.pathname + \"\\\" was given in the `location` prop.\")) : UNSAFE_invariant(false) : void 0;\n    location = parsedLocationArg;\n  } else {\n    location = locationFromContext;\n  }\n  let pathname = location.pathname || \"/\";\n  let remainingPathname = pathname;\n  if (parentPathnameBase !== \"/\") {\n    // Determine the remaining pathname by removing the # of URL segments the\n    // parentPathnameBase has, instead of removing based on character count.\n    // This is because we can't guarantee that incoming/outgoing encodings/\n    // decodings will match exactly.\n    // We decode paths before matching on a per-segment basis with\n    // decodeURIComponent(), but we re-encode pathnames via `new URL()` so they\n    // match what `window.location.pathname` would reflect.  Those don't 100%\n    // align when it comes to encoded URI characters such as % and &.\n    //\n    // So we may end up with:\n    //   pathname:           \"/descendant/a%25b/match\"\n    //   parentPathnameBase: \"/descendant/a%b\"\n    //\n    // And the direct substring removal approach won't work :/\n    let parentSegments = parentPathnameBase.replace(/^\\//, \"\").split(\"/\");\n    let segments = pathname.replace(/^\\//, \"\").split(\"/\");\n    remainingPathname = \"/\" + segments.slice(parentSegments.length).join(\"/\");\n  }\n  let matches = matchRoutes(routes, {\n    pathname: remainingPathname\n  });\n  if (process.env.NODE_ENV !== \"production\") {\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(parentRoute || matches != null, \"No routes matched location \\\"\" + location.pathname + location.search + location.hash + \"\\\" \") : void 0;\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(matches == null || matches[matches.length - 1].route.element !== undefined || matches[matches.length - 1].route.Component !== undefined || matches[matches.length - 1].route.lazy !== undefined, \"Matched leaf route at location \\\"\" + location.pathname + location.search + location.hash + \"\\\" \" + \"does not have an element or Component. This means it will render an <Outlet /> with a \" + \"null value by default resulting in an \\\"empty\\\" page.\") : void 0;\n  }\n  let renderedMatches = _renderMatches(matches && matches.map(match => Object.assign({}, match, {\n    params: Object.assign({}, parentParams, match.params),\n    pathname: joinPaths([parentPathnameBase,\n    // Re-encode pathnames that were decoded inside matchRoutes\n    navigator.encodeLocation ? navigator.encodeLocation(match.pathname).pathname : match.pathname]),\n    pathnameBase: match.pathnameBase === \"/\" ? parentPathnameBase : joinPaths([parentPathnameBase,\n    // Re-encode pathnames that were decoded inside matchRoutes\n    navigator.encodeLocation ? navigator.encodeLocation(match.pathnameBase).pathname : match.pathnameBase])\n  })), parentMatches, dataRouterState, future);\n\n  // When a user passes in a `locationArg`, the associated routes need to\n  // be wrapped in a new `LocationContext.Provider` in order for `useLocation`\n  // to use the scoped location instead of the global location.\n  if (locationArg && renderedMatches) {\n    return /*#__PURE__*/React.createElement(LocationContext.Provider, {\n      value: {\n        location: _extends({\n          pathname: \"/\",\n          search: \"\",\n          hash: \"\",\n          state: null,\n          key: \"default\"\n        }, location),\n        navigationType: Action.Pop\n      }\n    }, renderedMatches);\n  }\n  return renderedMatches;\n}\nfunction DefaultErrorComponent() {\n  let error = useRouteError();\n  let message = isRouteErrorResponse(error) ? error.status + \" \" + error.statusText : error instanceof Error ? error.message : JSON.stringify(error);\n  let stack = error instanceof Error ? error.stack : null;\n  let lightgrey = \"rgba(200,200,200, 0.5)\";\n  let preStyles = {\n    padding: \"0.5rem\",\n    backgroundColor: lightgrey\n  };\n  let codeStyles = {\n    padding: \"2px 4px\",\n    backgroundColor: lightgrey\n  };\n  let devInfo = null;\n  if (process.env.NODE_ENV !== \"production\") {\n    console.error(\"Error handled by React Router default ErrorBoundary:\", error);\n    devInfo = /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", null, \"\\uD83D\\uDCBF Hey developer \\uD83D\\uDC4B\"), /*#__PURE__*/React.createElement(\"p\", null, \"You can provide a way better UX than this when your app throws errors by providing your own \", /*#__PURE__*/React.createElement(\"code\", {\n      style: codeStyles\n    }, \"ErrorBoundary\"), \" or\", \" \", /*#__PURE__*/React.createElement(\"code\", {\n      style: codeStyles\n    }, \"errorElement\"), \" prop on your route.\"));\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", null, \"Unexpected Application Error!\"), /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      fontStyle: \"italic\"\n    }\n  }, message), stack ? /*#__PURE__*/React.createElement(\"pre\", {\n    style: preStyles\n  }, stack) : null, devInfo);\n}\nconst defaultErrorElement = /*#__PURE__*/React.createElement(DefaultErrorComponent, null);\nclass RenderErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      location: props.location,\n      revalidation: props.revalidation,\n      error: props.error\n    };\n  }\n  static getDerivedStateFromError(error) {\n    return {\n      error: error\n    };\n  }\n  static getDerivedStateFromProps(props, state) {\n    // When we get into an error state, the user will likely click \"back\" to the\n    // previous page that didn't have an error. Because this wraps the entire\n    // application, that will have no effect--the error page continues to display.\n    // This gives us a mechanism to recover from the error when the location changes.\n    //\n    // Whether we're in an error state or not, we update the location in state\n    // so that when we are in an error state, it gets reset when a new location\n    // comes in and the user recovers from the error.\n    if (state.location !== props.location || state.revalidation !== \"idle\" && props.revalidation === \"idle\") {\n      return {\n        error: props.error,\n        location: props.location,\n        revalidation: props.revalidation\n      };\n    }\n\n    // If we're not changing locations, preserve the location but still surface\n    // any new errors that may come through. We retain the existing error, we do\n    // this because the error provided from the app state may be cleared without\n    // the location changing.\n    return {\n      error: props.error !== undefined ? props.error : state.error,\n      location: state.location,\n      revalidation: props.revalidation || state.revalidation\n    };\n  }\n  componentDidCatch(error, errorInfo) {\n    console.error(\"React Router caught the following error during render\", error, errorInfo);\n  }\n  render() {\n    return this.state.error !== undefined ? /*#__PURE__*/React.createElement(RouteContext.Provider, {\n      value: this.props.routeContext\n    }, /*#__PURE__*/React.createElement(RouteErrorContext.Provider, {\n      value: this.state.error,\n      children: this.props.component\n    })) : this.props.children;\n  }\n}\nfunction RenderedRoute(_ref) {\n  let {\n    routeContext,\n    match,\n    children\n  } = _ref;\n  let dataRouterContext = React.useContext(DataRouterContext);\n\n  // Track how deep we got in our render pass to emulate SSR componentDidCatch\n  // in a DataStaticRouter\n  if (dataRouterContext && dataRouterContext.static && dataRouterContext.staticContext && (match.route.errorElement || match.route.ErrorBoundary)) {\n    dataRouterContext.staticContext._deepestRenderedBoundaryId = match.route.id;\n  }\n  return /*#__PURE__*/React.createElement(RouteContext.Provider, {\n    value: routeContext\n  }, children);\n}\nfunction _renderMatches(matches, parentMatches, dataRouterState, future) {\n  var _dataRouterState;\n  if (parentMatches === void 0) {\n    parentMatches = [];\n  }\n  if (dataRouterState === void 0) {\n    dataRouterState = null;\n  }\n  if (future === void 0) {\n    future = null;\n  }\n  if (matches == null) {\n    var _future;\n    if (!dataRouterState) {\n      return null;\n    }\n    if (dataRouterState.errors) {\n      // Don't bail if we have data router errors so we can render them in the\n      // boundary.  Use the pre-matched (or shimmed) matches\n      matches = dataRouterState.matches;\n    } else if ((_future = future) != null && _future.v7_partialHydration && parentMatches.length === 0 && !dataRouterState.initialized && dataRouterState.matches.length > 0) {\n      // Don't bail if we're initializing with partial hydration and we have\n      // router matches.  That means we're actively running `patchRoutesOnNavigation`\n      // so we should render down the partial matches to the appropriate\n      // `HydrateFallback`.  We only do this if `parentMatches` is empty so it\n      // only impacts the root matches for `RouterProvider` and no descendant\n      // `<Routes>`\n      matches = dataRouterState.matches;\n    } else {\n      return null;\n    }\n  }\n  let renderedMatches = matches;\n\n  // If we have data errors, trim matches to the highest error boundary\n  let errors = (_dataRouterState = dataRouterState) == null ? void 0 : _dataRouterState.errors;\n  if (errors != null) {\n    let errorIndex = renderedMatches.findIndex(m => m.route.id && (errors == null ? void 0 : errors[m.route.id]) !== undefined);\n    !(errorIndex >= 0) ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"Could not find a matching route for errors on route IDs: \" + Object.keys(errors).join(\",\")) : UNSAFE_invariant(false) : void 0;\n    renderedMatches = renderedMatches.slice(0, Math.min(renderedMatches.length, errorIndex + 1));\n  }\n\n  // If we're in a partial hydration mode, detect if we need to render down to\n  // a given HydrateFallback while we load the rest of the hydration data\n  let renderFallback = false;\n  let fallbackIndex = -1;\n  if (dataRouterState && future && future.v7_partialHydration) {\n    for (let i = 0; i < renderedMatches.length; i++) {\n      let match = renderedMatches[i];\n      // Track the deepest fallback up until the first route without data\n      if (match.route.HydrateFallback || match.route.hydrateFallbackElement) {\n        fallbackIndex = i;\n      }\n      if (match.route.id) {\n        let {\n          loaderData,\n          errors\n        } = dataRouterState;\n        let needsToRunLoader = match.route.loader && loaderData[match.route.id] === undefined && (!errors || errors[match.route.id] === undefined);\n        if (match.route.lazy || needsToRunLoader) {\n          // We found the first route that's not ready to render (waiting on\n          // lazy, or has a loader that hasn't run yet).  Flag that we need to\n          // render a fallback and render up until the appropriate fallback\n          renderFallback = true;\n          if (fallbackIndex >= 0) {\n            renderedMatches = renderedMatches.slice(0, fallbackIndex + 1);\n          } else {\n            renderedMatches = [renderedMatches[0]];\n          }\n          break;\n        }\n      }\n    }\n  }\n  return renderedMatches.reduceRight((outlet, match, index) => {\n    // Only data routers handle errors/fallbacks\n    let error;\n    let shouldRenderHydrateFallback = false;\n    let errorElement = null;\n    let hydrateFallbackElement = null;\n    if (dataRouterState) {\n      error = errors && match.route.id ? errors[match.route.id] : undefined;\n      errorElement = match.route.errorElement || defaultErrorElement;\n      if (renderFallback) {\n        if (fallbackIndex < 0 && index === 0) {\n          warningOnce(\"route-fallback\", false, \"No `HydrateFallback` element provided to render during initial hydration\");\n          shouldRenderHydrateFallback = true;\n          hydrateFallbackElement = null;\n        } else if (fallbackIndex === index) {\n          shouldRenderHydrateFallback = true;\n          hydrateFallbackElement = match.route.hydrateFallbackElement || null;\n        }\n      }\n    }\n    let matches = parentMatches.concat(renderedMatches.slice(0, index + 1));\n    let getChildren = () => {\n      let children;\n      if (error) {\n        children = errorElement;\n      } else if (shouldRenderHydrateFallback) {\n        children = hydrateFallbackElement;\n      } else if (match.route.Component) {\n        // Note: This is a de-optimized path since React won't re-use the\n        // ReactElement since it's identity changes with each new\n        // React.createElement call.  We keep this so folks can use\n        // `<Route Component={...}>` in `<Routes>` but generally `Component`\n        // usage is only advised in `RouterProvider` when we can convert it to\n        // `element` ahead of time.\n        children = /*#__PURE__*/React.createElement(match.route.Component, null);\n      } else if (match.route.element) {\n        children = match.route.element;\n      } else {\n        children = outlet;\n      }\n      return /*#__PURE__*/React.createElement(RenderedRoute, {\n        match: match,\n        routeContext: {\n          outlet,\n          matches,\n          isDataRoute: dataRouterState != null\n        },\n        children: children\n      });\n    };\n    // Only wrap in an error boundary within data router usages when we have an\n    // ErrorBoundary/errorElement on this route.  Otherwise let it bubble up to\n    // an ancestor ErrorBoundary/errorElement\n    return dataRouterState && (match.route.ErrorBoundary || match.route.errorElement || index === 0) ? /*#__PURE__*/React.createElement(RenderErrorBoundary, {\n      location: dataRouterState.location,\n      revalidation: dataRouterState.revalidation,\n      component: errorElement,\n      error: error,\n      children: getChildren(),\n      routeContext: {\n        outlet: null,\n        matches,\n        isDataRoute: true\n      }\n    }) : getChildren();\n  }, null);\n}\nvar DataRouterHook = /*#__PURE__*/function (DataRouterHook) {\n  DataRouterHook[\"UseBlocker\"] = \"useBlocker\";\n  DataRouterHook[\"UseRevalidator\"] = \"useRevalidator\";\n  DataRouterHook[\"UseNavigateStable\"] = \"useNavigate\";\n  return DataRouterHook;\n}(DataRouterHook || {});\nvar DataRouterStateHook = /*#__PURE__*/function (DataRouterStateHook) {\n  DataRouterStateHook[\"UseBlocker\"] = \"useBlocker\";\n  DataRouterStateHook[\"UseLoaderData\"] = \"useLoaderData\";\n  DataRouterStateHook[\"UseActionData\"] = \"useActionData\";\n  DataRouterStateHook[\"UseRouteError\"] = \"useRouteError\";\n  DataRouterStateHook[\"UseNavigation\"] = \"useNavigation\";\n  DataRouterStateHook[\"UseRouteLoaderData\"] = \"useRouteLoaderData\";\n  DataRouterStateHook[\"UseMatches\"] = \"useMatches\";\n  DataRouterStateHook[\"UseRevalidator\"] = \"useRevalidator\";\n  DataRouterStateHook[\"UseNavigateStable\"] = \"useNavigate\";\n  DataRouterStateHook[\"UseRouteId\"] = \"useRouteId\";\n  return DataRouterStateHook;\n}(DataRouterStateHook || {});\nfunction getDataRouterConsoleError(hookName) {\n  return hookName + \" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router.\";\n}\nfunction useDataRouterContext(hookName) {\n  let ctx = React.useContext(DataRouterContext);\n  !ctx ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, getDataRouterConsoleError(hookName)) : UNSAFE_invariant(false) : void 0;\n  return ctx;\n}\nfunction useDataRouterState(hookName) {\n  let state = React.useContext(DataRouterStateContext);\n  !state ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, getDataRouterConsoleError(hookName)) : UNSAFE_invariant(false) : void 0;\n  return state;\n}\nfunction useRouteContext(hookName) {\n  let route = React.useContext(RouteContext);\n  !route ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, getDataRouterConsoleError(hookName)) : UNSAFE_invariant(false) : void 0;\n  return route;\n}\n\n// Internal version with hookName-aware debugging\nfunction useCurrentRouteId(hookName) {\n  let route = useRouteContext(hookName);\n  let thisRoute = route.matches[route.matches.length - 1];\n  !thisRoute.route.id ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, hookName + \" can only be used on routes that contain a unique \\\"id\\\"\") : UNSAFE_invariant(false) : void 0;\n  return thisRoute.route.id;\n}\n\n/**\n * Returns the ID for the nearest contextual route\n */\nfunction useRouteId() {\n  return useCurrentRouteId(DataRouterStateHook.UseRouteId);\n}\n\n/**\n * Returns the current navigation, defaulting to an \"idle\" navigation when\n * no navigation is in progress\n */\nfunction useNavigation() {\n  let state = useDataRouterState(DataRouterStateHook.UseNavigation);\n  return state.navigation;\n}\n\n/**\n * Returns a revalidate function for manually triggering revalidation, as well\n * as the current state of any manual revalidations\n */\nfunction useRevalidator() {\n  let dataRouterContext = useDataRouterContext(DataRouterHook.UseRevalidator);\n  let state = useDataRouterState(DataRouterStateHook.UseRevalidator);\n  return React.useMemo(() => ({\n    revalidate: dataRouterContext.router.revalidate,\n    state: state.revalidation\n  }), [dataRouterContext.router.revalidate, state.revalidation]);\n}\n\n/**\n * Returns the active route matches, useful for accessing loaderData for\n * parent/child routes or the route \"handle\" property\n */\nfunction useMatches() {\n  let {\n    matches,\n    loaderData\n  } = useDataRouterState(DataRouterStateHook.UseMatches);\n  return React.useMemo(() => matches.map(m => UNSAFE_convertRouteMatchToUiMatch(m, loaderData)), [matches, loaderData]);\n}\n\n/**\n * Returns the loader data for the nearest ancestor Route loader\n */\nfunction useLoaderData() {\n  let state = useDataRouterState(DataRouterStateHook.UseLoaderData);\n  let routeId = useCurrentRouteId(DataRouterStateHook.UseLoaderData);\n  if (state.errors && state.errors[routeId] != null) {\n    console.error(\"You cannot `useLoaderData` in an errorElement (routeId: \" + routeId + \")\");\n    return undefined;\n  }\n  return state.loaderData[routeId];\n}\n\n/**\n * Returns the loaderData for the given routeId\n */\nfunction useRouteLoaderData(routeId) {\n  let state = useDataRouterState(DataRouterStateHook.UseRouteLoaderData);\n  return state.loaderData[routeId];\n}\n\n/**\n * Returns the action data for the nearest ancestor Route action\n */\nfunction useActionData() {\n  let state = useDataRouterState(DataRouterStateHook.UseActionData);\n  let routeId = useCurrentRouteId(DataRouterStateHook.UseLoaderData);\n  return state.actionData ? state.actionData[routeId] : undefined;\n}\n\n/**\n * Returns the nearest ancestor Route error, which could be a loader/action\n * error or a render error.  This is intended to be called from your\n * ErrorBoundary/errorElement to display a proper error message.\n */\nfunction useRouteError() {\n  var _state$errors;\n  let error = React.useContext(RouteErrorContext);\n  let state = useDataRouterState(DataRouterStateHook.UseRouteError);\n  let routeId = useCurrentRouteId(DataRouterStateHook.UseRouteError);\n\n  // If this was a render error, we put it in a RouteError context inside\n  // of RenderErrorBoundary\n  if (error !== undefined) {\n    return error;\n  }\n\n  // Otherwise look for errors from our data router state\n  return (_state$errors = state.errors) == null ? void 0 : _state$errors[routeId];\n}\n\n/**\n * Returns the happy-path data from the nearest ancestor `<Await />` value\n */\nfunction useAsyncValue() {\n  let value = React.useContext(AwaitContext);\n  return value == null ? void 0 : value._data;\n}\n\n/**\n * Returns the error from the nearest ancestor `<Await />` value\n */\nfunction useAsyncError() {\n  let value = React.useContext(AwaitContext);\n  return value == null ? void 0 : value._error;\n}\nlet blockerId = 0;\n\n/**\n * Allow the application to block navigations within the SPA and present the\n * user a confirmation dialog to confirm the navigation.  Mostly used to avoid\n * using half-filled form data.  This does not handle hard-reloads or\n * cross-origin navigations.\n */\nfunction useBlocker(shouldBlock) {\n  let {\n    router,\n    basename\n  } = useDataRouterContext(DataRouterHook.UseBlocker);\n  let state = useDataRouterState(DataRouterStateHook.UseBlocker);\n  let [blockerKey, setBlockerKey] = React.useState(\"\");\n  let blockerFunction = React.useCallback(arg => {\n    if (typeof shouldBlock !== \"function\") {\n      return !!shouldBlock;\n    }\n    if (basename === \"/\") {\n      return shouldBlock(arg);\n    }\n\n    // If they provided us a function and we've got an active basename, strip\n    // it from the locations we expose to the user to match the behavior of\n    // useLocation\n    let {\n      currentLocation,\n      nextLocation,\n      historyAction\n    } = arg;\n    return shouldBlock({\n      currentLocation: _extends({}, currentLocation, {\n        pathname: stripBasename(currentLocation.pathname, basename) || currentLocation.pathname\n      }),\n      nextLocation: _extends({}, nextLocation, {\n        pathname: stripBasename(nextLocation.pathname, basename) || nextLocation.pathname\n      }),\n      historyAction\n    });\n  }, [basename, shouldBlock]);\n\n  // This effect is in charge of blocker key assignment and deletion (which is\n  // tightly coupled to the key)\n  React.useEffect(() => {\n    let key = String(++blockerId);\n    setBlockerKey(key);\n    return () => router.deleteBlocker(key);\n  }, [router]);\n\n  // This effect handles assigning the blockerFunction.  This is to handle\n  // unstable blocker function identities, and happens only after the prior\n  // effect so we don't get an orphaned blockerFunction in the router with a\n  // key of \"\".  Until then we just have the IDLE_BLOCKER.\n  React.useEffect(() => {\n    if (blockerKey !== \"\") {\n      router.getBlocker(blockerKey, blockerFunction);\n    }\n  }, [router, blockerKey, blockerFunction]);\n\n  // Prefer the blocker from `state` not `router.state` since DataRouterContext\n  // is memoized so this ensures we update on blocker state updates\n  return blockerKey && state.blockers.has(blockerKey) ? state.blockers.get(blockerKey) : IDLE_BLOCKER;\n}\n\n/**\n * Stable version of useNavigate that is used when we are in the context of\n * a RouterProvider.\n */\nfunction useNavigateStable() {\n  let {\n    router\n  } = useDataRouterContext(DataRouterHook.UseNavigateStable);\n  let id = useCurrentRouteId(DataRouterStateHook.UseNavigateStable);\n  let activeRef = React.useRef(false);\n  useIsomorphicLayoutEffect(() => {\n    activeRef.current = true;\n  });\n  let navigate = React.useCallback(function (to, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(activeRef.current, navigateEffectWarning) : void 0;\n\n    // Short circuit here since if this happens on first render the navigate\n    // is useless because we haven't wired up our router subscriber yet\n    if (!activeRef.current) return;\n    if (typeof to === \"number\") {\n      router.navigate(to);\n    } else {\n      router.navigate(to, _extends({\n        fromRouteId: id\n      }, options));\n    }\n  }, [router, id]);\n  return navigate;\n}\nconst alreadyWarned$1 = {};\nfunction warningOnce(key, cond, message) {\n  if (!cond && !alreadyWarned$1[key]) {\n    alreadyWarned$1[key] = true;\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, message) : void 0;\n  }\n}\n\nconst alreadyWarned = {};\nfunction warnOnce(key, message) {\n  if (process.env.NODE_ENV !== \"production\" && !alreadyWarned[message]) {\n    alreadyWarned[message] = true;\n    console.warn(message);\n  }\n}\nconst logDeprecation = (flag, msg, link) => warnOnce(flag, \"\\u26A0\\uFE0F React Router Future Flag Warning: \" + msg + \". \" + (\"You can use the `\" + flag + \"` future flag to opt-in early. \") + (\"For more information, see \" + link + \".\"));\nfunction logV6DeprecationWarnings(renderFuture, routerFuture) {\n  if ((renderFuture == null ? void 0 : renderFuture.v7_startTransition) === undefined) {\n    logDeprecation(\"v7_startTransition\", \"React Router will begin wrapping state updates in `React.startTransition` in v7\", \"https://reactrouter.com/v6/upgrading/future#v7_starttransition\");\n  }\n  if ((renderFuture == null ? void 0 : renderFuture.v7_relativeSplatPath) === undefined && (!routerFuture || routerFuture.v7_relativeSplatPath === undefined)) {\n    logDeprecation(\"v7_relativeSplatPath\", \"Relative route resolution within Splat routes is changing in v7\", \"https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath\");\n  }\n  if (routerFuture) {\n    if (routerFuture.v7_fetcherPersist === undefined) {\n      logDeprecation(\"v7_fetcherPersist\", \"The persistence behavior of fetchers is changing in v7\", \"https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist\");\n    }\n    if (routerFuture.v7_normalizeFormMethod === undefined) {\n      logDeprecation(\"v7_normalizeFormMethod\", \"Casing of `formMethod` fields is being normalized to uppercase in v7\", \"https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod\");\n    }\n    if (routerFuture.v7_partialHydration === undefined) {\n      logDeprecation(\"v7_partialHydration\", \"`RouterProvider` hydration behavior is changing in v7\", \"https://reactrouter.com/v6/upgrading/future#v7_partialhydration\");\n    }\n    if (routerFuture.v7_skipActionErrorRevalidation === undefined) {\n      logDeprecation(\"v7_skipActionErrorRevalidation\", \"The revalidation behavior after 4xx/5xx `action` responses is changing in v7\", \"https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation\");\n    }\n  }\n}\n\n/**\n  Webpack + React 17 fails to compile on any of the following because webpack\n  complains that `startTransition` doesn't exist in `React`:\n  * import { startTransition } from \"react\"\n  * import * as React from from \"react\";\n    \"startTransition\" in React ? React.startTransition(() => setState()) : setState()\n  * import * as React from from \"react\";\n    \"startTransition\" in React ? React[\"startTransition\"](() => setState()) : setState()\n\n  Moving it to a constant such as the following solves the Webpack/React 17 issue:\n  * import * as React from from \"react\";\n    const START_TRANSITION = \"startTransition\";\n    START_TRANSITION in React ? React[START_TRANSITION](() => setState()) : setState()\n\n  However, that introduces webpack/terser minification issues in production builds\n  in React 18 where minification/obfuscation ends up removing the call of\n  React.startTransition entirely from the first half of the ternary.  Grabbing\n  this exported reference once up front resolves that issue.\n\n  See https://github.com/remix-run/react-router/issues/10579\n*/\nconst START_TRANSITION = \"startTransition\";\nconst startTransitionImpl = React[START_TRANSITION];\n\n/**\n * Given a Remix Router instance, render the appropriate UI\n */\nfunction RouterProvider(_ref) {\n  let {\n    fallbackElement,\n    router,\n    future\n  } = _ref;\n  let [state, setStateImpl] = React.useState(router.state);\n  let {\n    v7_startTransition\n  } = future || {};\n  let setState = React.useCallback(newState => {\n    if (v7_startTransition && startTransitionImpl) {\n      startTransitionImpl(() => setStateImpl(newState));\n    } else {\n      setStateImpl(newState);\n    }\n  }, [setStateImpl, v7_startTransition]);\n\n  // Need to use a layout effect here so we are subscribed early enough to\n  // pick up on any render-driven redirects/navigations (useEffect/<Navigate>)\n  React.useLayoutEffect(() => router.subscribe(setState), [router, setState]);\n  React.useEffect(() => {\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(fallbackElement == null || !router.future.v7_partialHydration, \"`<RouterProvider fallbackElement>` is deprecated when using \" + \"`v7_partialHydration`, use a `HydrateFallback` component instead\") : void 0;\n    // Only log this once on initial mount\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  let navigator = React.useMemo(() => {\n    return {\n      createHref: router.createHref,\n      encodeLocation: router.encodeLocation,\n      go: n => router.navigate(n),\n      push: (to, state, opts) => router.navigate(to, {\n        state,\n        preventScrollReset: opts == null ? void 0 : opts.preventScrollReset\n      }),\n      replace: (to, state, opts) => router.navigate(to, {\n        replace: true,\n        state,\n        preventScrollReset: opts == null ? void 0 : opts.preventScrollReset\n      })\n    };\n  }, [router]);\n  let basename = router.basename || \"/\";\n  let dataRouterContext = React.useMemo(() => ({\n    router,\n    navigator,\n    static: false,\n    basename\n  }), [router, navigator, basename]);\n  React.useEffect(() => logV6DeprecationWarnings(future, router.future), [router, future]);\n\n  // The fragment and {null} here are important!  We need them to keep React 18's\n  // useId happy when we are server-rendering since we may have a <script> here\n  // containing the hydrated server-side staticContext (from StaticRouterProvider).\n  // useId relies on the component tree structure to generate deterministic id's\n  // so we need to ensure it remains the same on the client even though\n  // we don't need the <script> tag\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(DataRouterContext.Provider, {\n    value: dataRouterContext\n  }, /*#__PURE__*/React.createElement(DataRouterStateContext.Provider, {\n    value: state\n  }, /*#__PURE__*/React.createElement(Router, {\n    basename: basename,\n    location: state.location,\n    navigationType: state.historyAction,\n    navigator: navigator,\n    future: {\n      v7_relativeSplatPath: router.future.v7_relativeSplatPath\n    }\n  }, state.initialized || router.future.v7_partialHydration ? /*#__PURE__*/React.createElement(DataRoutes, {\n    routes: router.routes,\n    future: router.future,\n    state: state\n  }) : fallbackElement))), null);\n}\nfunction DataRoutes(_ref2) {\n  let {\n    routes,\n    future,\n    state\n  } = _ref2;\n  return useRoutesImpl(routes, undefined, state, future);\n}\n/**\n * A `<Router>` that stores all entries in memory.\n *\n * @see https://reactrouter.com/v6/router-components/memory-router\n */\nfunction MemoryRouter(_ref3) {\n  let {\n    basename,\n    children,\n    initialEntries,\n    initialIndex,\n    future\n  } = _ref3;\n  let historyRef = React.useRef();\n  if (historyRef.current == null) {\n    historyRef.current = createMemoryHistory({\n      initialEntries,\n      initialIndex,\n      v5Compat: true\n    });\n  }\n  let history = historyRef.current;\n  let [state, setStateImpl] = React.useState({\n    action: history.action,\n    location: history.location\n  });\n  let {\n    v7_startTransition\n  } = future || {};\n  let setState = React.useCallback(newState => {\n    v7_startTransition && startTransitionImpl ? startTransitionImpl(() => setStateImpl(newState)) : setStateImpl(newState);\n  }, [setStateImpl, v7_startTransition]);\n  React.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  React.useEffect(() => logV6DeprecationWarnings(future), [future]);\n  return /*#__PURE__*/React.createElement(Router, {\n    basename: basename,\n    children: children,\n    location: state.location,\n    navigationType: state.action,\n    navigator: history,\n    future: future\n  });\n}\n/**\n * Changes the current location.\n *\n * Note: This API is mostly useful in React.Component subclasses that are not\n * able to use hooks. In functional components, we recommend you use the\n * `useNavigate` hook instead.\n *\n * @see https://reactrouter.com/v6/components/navigate\n */\nfunction Navigate(_ref4) {\n  let {\n    to,\n    replace,\n    state,\n    relative\n  } = _ref4;\n  !useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, // TODO: This error is probably because they somehow have 2 versions of\n  // the router loaded. We can help them understand how to avoid that.\n  \"<Navigate> may be used only in the context of a <Router> component.\") : UNSAFE_invariant(false) : void 0;\n  let {\n    future,\n    static: isStatic\n  } = React.useContext(NavigationContext);\n  process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(!isStatic, \"<Navigate> must not be used on the initial render in a <StaticRouter>. \" + \"This is a no-op, but you should modify your code so the <Navigate> is \" + \"only ever rendered in response to some user interaction or state change.\") : void 0;\n  let {\n    matches\n  } = React.useContext(RouteContext);\n  let {\n    pathname: locationPathname\n  } = useLocation();\n  let navigate = useNavigate();\n\n  // Resolve the path outside of the effect so that when effects run twice in\n  // StrictMode they navigate to the same place\n  let path = resolveTo(to, UNSAFE_getResolveToMatches(matches, future.v7_relativeSplatPath), locationPathname, relative === \"path\");\n  let jsonPath = JSON.stringify(path);\n  React.useEffect(() => navigate(JSON.parse(jsonPath), {\n    replace,\n    state,\n    relative\n  }), [navigate, jsonPath, relative, replace, state]);\n  return null;\n}\n/**\n * Renders the child route's element, if there is one.\n *\n * @see https://reactrouter.com/v6/components/outlet\n */\nfunction Outlet(props) {\n  return useOutlet(props.context);\n}\n/**\n * Declares an element that should be rendered at a certain URL path.\n *\n * @see https://reactrouter.com/v6/components/route\n */\nfunction Route(_props) {\n  process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"A <Route> is only ever to be used as the child of <Routes> element, \" + \"never rendered directly. Please wrap your <Route> in a <Routes>.\") : UNSAFE_invariant(false) ;\n}\n/**\n * Provides location context for the rest of the app.\n *\n * Note: You usually won't render a `<Router>` directly. Instead, you'll render a\n * router that is more specific to your environment such as a `<BrowserRouter>`\n * in web browsers or a `<StaticRouter>` for server rendering.\n *\n * @see https://reactrouter.com/v6/router-components/router\n */\nfunction Router(_ref5) {\n  let {\n    basename: basenameProp = \"/\",\n    children = null,\n    location: locationProp,\n    navigationType = Action.Pop,\n    navigator,\n    static: staticProp = false,\n    future\n  } = _ref5;\n  !!useInRouterContext() ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"You cannot render a <Router> inside another <Router>.\" + \" You should never have more than one in your app.\") : UNSAFE_invariant(false) : void 0;\n\n  // Preserve trailing slashes on basename, so we can let the user control\n  // the enforcement of trailing slashes throughout the app\n  let basename = basenameProp.replace(/^\\/*/, \"/\");\n  let navigationContext = React.useMemo(() => ({\n    basename,\n    navigator,\n    static: staticProp,\n    future: _extends({\n      v7_relativeSplatPath: false\n    }, future)\n  }), [basename, future, navigator, staticProp]);\n  if (typeof locationProp === \"string\") {\n    locationProp = parsePath(locationProp);\n  }\n  let {\n    pathname = \"/\",\n    search = \"\",\n    hash = \"\",\n    state = null,\n    key = \"default\"\n  } = locationProp;\n  let locationContext = React.useMemo(() => {\n    let trailingPathname = stripBasename(pathname, basename);\n    if (trailingPathname == null) {\n      return null;\n    }\n    return {\n      location: {\n        pathname: trailingPathname,\n        search,\n        hash,\n        state,\n        key\n      },\n      navigationType\n    };\n  }, [basename, pathname, search, hash, state, key, navigationType]);\n  process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(locationContext != null, \"<Router basename=\\\"\" + basename + \"\\\"> is not able to match the URL \" + (\"\\\"\" + pathname + search + hash + \"\\\" because it does not start with the \") + \"basename, so the <Router> won't render anything.\") : void 0;\n  if (locationContext == null) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(NavigationContext.Provider, {\n    value: navigationContext\n  }, /*#__PURE__*/React.createElement(LocationContext.Provider, {\n    children: children,\n    value: locationContext\n  }));\n}\n/**\n * A container for a nested tree of `<Route>` elements that renders the branch\n * that best matches the current location.\n *\n * @see https://reactrouter.com/v6/components/routes\n */\nfunction Routes(_ref6) {\n  let {\n    children,\n    location\n  } = _ref6;\n  return useRoutes(createRoutesFromChildren(children), location);\n}\n/**\n * Component to use for rendering lazily loaded data from returning defer()\n * in a loader function\n */\nfunction Await(_ref7) {\n  let {\n    children,\n    errorElement,\n    resolve\n  } = _ref7;\n  return /*#__PURE__*/React.createElement(AwaitErrorBoundary, {\n    resolve: resolve,\n    errorElement: errorElement\n  }, /*#__PURE__*/React.createElement(ResolveAwait, null, children));\n}\nvar AwaitRenderStatus = /*#__PURE__*/function (AwaitRenderStatus) {\n  AwaitRenderStatus[AwaitRenderStatus[\"pending\"] = 0] = \"pending\";\n  AwaitRenderStatus[AwaitRenderStatus[\"success\"] = 1] = \"success\";\n  AwaitRenderStatus[AwaitRenderStatus[\"error\"] = 2] = \"error\";\n  return AwaitRenderStatus;\n}(AwaitRenderStatus || {});\nconst neverSettledPromise = new Promise(() => {});\nclass AwaitErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null\n    };\n  }\n  static getDerivedStateFromError(error) {\n    return {\n      error\n    };\n  }\n  componentDidCatch(error, errorInfo) {\n    console.error(\"<Await> caught the following error during render\", error, errorInfo);\n  }\n  render() {\n    let {\n      children,\n      errorElement,\n      resolve\n    } = this.props;\n    let promise = null;\n    let status = AwaitRenderStatus.pending;\n    if (!(resolve instanceof Promise)) {\n      // Didn't get a promise - provide as a resolved promise\n      status = AwaitRenderStatus.success;\n      promise = Promise.resolve();\n      Object.defineProperty(promise, \"_tracked\", {\n        get: () => true\n      });\n      Object.defineProperty(promise, \"_data\", {\n        get: () => resolve\n      });\n    } else if (this.state.error) {\n      // Caught a render error, provide it as a rejected promise\n      status = AwaitRenderStatus.error;\n      let renderError = this.state.error;\n      promise = Promise.reject().catch(() => {}); // Avoid unhandled rejection warnings\n      Object.defineProperty(promise, \"_tracked\", {\n        get: () => true\n      });\n      Object.defineProperty(promise, \"_error\", {\n        get: () => renderError\n      });\n    } else if (resolve._tracked) {\n      // Already tracked promise - check contents\n      promise = resolve;\n      status = \"_error\" in promise ? AwaitRenderStatus.error : \"_data\" in promise ? AwaitRenderStatus.success : AwaitRenderStatus.pending;\n    } else {\n      // Raw (untracked) promise - track it\n      status = AwaitRenderStatus.pending;\n      Object.defineProperty(resolve, \"_tracked\", {\n        get: () => true\n      });\n      promise = resolve.then(data => Object.defineProperty(resolve, \"_data\", {\n        get: () => data\n      }), error => Object.defineProperty(resolve, \"_error\", {\n        get: () => error\n      }));\n    }\n    if (status === AwaitRenderStatus.error && promise._error instanceof AbortedDeferredError) {\n      // Freeze the UI by throwing a never resolved promise\n      throw neverSettledPromise;\n    }\n    if (status === AwaitRenderStatus.error && !errorElement) {\n      // No errorElement, throw to the nearest route-level error boundary\n      throw promise._error;\n    }\n    if (status === AwaitRenderStatus.error) {\n      // Render via our errorElement\n      return /*#__PURE__*/React.createElement(AwaitContext.Provider, {\n        value: promise,\n        children: errorElement\n      });\n    }\n    if (status === AwaitRenderStatus.success) {\n      // Render children with resolved value\n      return /*#__PURE__*/React.createElement(AwaitContext.Provider, {\n        value: promise,\n        children: children\n      });\n    }\n\n    // Throw to the suspense boundary\n    throw promise;\n  }\n}\n\n/**\n * @private\n * Indirection to leverage useAsyncValue for a render-prop API on `<Await>`\n */\nfunction ResolveAwait(_ref8) {\n  let {\n    children\n  } = _ref8;\n  let data = useAsyncValue();\n  let toRender = typeof children === \"function\" ? children(data) : children;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, toRender);\n}\n\n///////////////////////////////////////////////////////////////////////////////\n// UTILS\n///////////////////////////////////////////////////////////////////////////////\n\n/**\n * Creates a route config from a React \"children\" object, which is usually\n * either a `<Route>` element or an array of them. Used internally by\n * `<Routes>` to create a route config from its children.\n *\n * @see https://reactrouter.com/v6/utils/create-routes-from-children\n */\nfunction createRoutesFromChildren(children, parentPath) {\n  if (parentPath === void 0) {\n    parentPath = [];\n  }\n  let routes = [];\n  React.Children.forEach(children, (element, index) => {\n    if (! /*#__PURE__*/React.isValidElement(element)) {\n      // Ignore non-elements. This allows people to more easily inline\n      // conditionals in their route config.\n      return;\n    }\n    let treePath = [...parentPath, index];\n    if (element.type === React.Fragment) {\n      // Transparently support React.Fragment and its children.\n      routes.push.apply(routes, createRoutesFromChildren(element.props.children, treePath));\n      return;\n    }\n    !(element.type === Route) ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"[\" + (typeof element.type === \"string\" ? element.type : element.type.name) + \"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>\") : UNSAFE_invariant(false) : void 0;\n    !(!element.props.index || !element.props.children) ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"An index route cannot have child routes.\") : UNSAFE_invariant(false) : void 0;\n    let route = {\n      id: element.props.id || treePath.join(\"-\"),\n      caseSensitive: element.props.caseSensitive,\n      element: element.props.element,\n      Component: element.props.Component,\n      index: element.props.index,\n      path: element.props.path,\n      loader: element.props.loader,\n      action: element.props.action,\n      errorElement: element.props.errorElement,\n      ErrorBoundary: element.props.ErrorBoundary,\n      hasErrorBoundary: element.props.ErrorBoundary != null || element.props.errorElement != null,\n      shouldRevalidate: element.props.shouldRevalidate,\n      handle: element.props.handle,\n      lazy: element.props.lazy\n    };\n    if (element.props.children) {\n      route.children = createRoutesFromChildren(element.props.children, treePath);\n    }\n    routes.push(route);\n  });\n  return routes;\n}\n\n/**\n * Renders the result of `matchRoutes()` into a React element.\n */\nfunction renderMatches(matches) {\n  return _renderMatches(matches);\n}\n\nfunction mapRouteProperties(route) {\n  let updates = {\n    // Note: this check also occurs in createRoutesFromChildren so update\n    // there if you change this -- please and thank you!\n    hasErrorBoundary: route.ErrorBoundary != null || route.errorElement != null\n  };\n  if (route.Component) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (route.element) {\n        process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, \"You should not include both `Component` and `element` on your route - \" + \"`Component` will be used.\") : void 0;\n      }\n    }\n    Object.assign(updates, {\n      element: /*#__PURE__*/React.createElement(route.Component),\n      Component: undefined\n    });\n  }\n  if (route.HydrateFallback) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (route.hydrateFallbackElement) {\n        process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, \"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - \" + \"`HydrateFallback` will be used.\") : void 0;\n      }\n    }\n    Object.assign(updates, {\n      hydrateFallbackElement: /*#__PURE__*/React.createElement(route.HydrateFallback),\n      HydrateFallback: undefined\n    });\n  }\n  if (route.ErrorBoundary) {\n    if (process.env.NODE_ENV !== \"production\") {\n      if (route.errorElement) {\n        process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, \"You should not include both `ErrorBoundary` and `errorElement` on your route - \" + \"`ErrorBoundary` will be used.\") : void 0;\n      }\n    }\n    Object.assign(updates, {\n      errorElement: /*#__PURE__*/React.createElement(route.ErrorBoundary),\n      ErrorBoundary: undefined\n    });\n  }\n  return updates;\n}\nfunction createMemoryRouter(routes, opts) {\n  return createRouter({\n    basename: opts == null ? void 0 : opts.basename,\n    future: _extends({}, opts == null ? void 0 : opts.future, {\n      v7_prependBasename: true\n    }),\n    history: createMemoryHistory({\n      initialEntries: opts == null ? void 0 : opts.initialEntries,\n      initialIndex: opts == null ? void 0 : opts.initialIndex\n    }),\n    hydrationData: opts == null ? void 0 : opts.hydrationData,\n    routes,\n    mapRouteProperties,\n    dataStrategy: opts == null ? void 0 : opts.dataStrategy,\n    patchRoutesOnNavigation: opts == null ? void 0 : opts.patchRoutesOnNavigation\n  }).initialize();\n}\n\nexport { Await, MemoryRouter, Navigate, Outlet, Route, Router, RouterProvider, Routes, DataRouterContext as UNSAFE_DataRouterContext, DataRouterStateContext as UNSAFE_DataRouterStateContext, LocationContext as UNSAFE_LocationContext, NavigationContext as UNSAFE_NavigationContext, RouteContext as UNSAFE_RouteContext, logV6DeprecationWarnings as UNSAFE_logV6DeprecationWarnings, mapRouteProperties as UNSAFE_mapRouteProperties, useRouteId as UNSAFE_useRouteId, useRoutesImpl as UNSAFE_useRoutesImpl, createMemoryRouter, createRoutesFromChildren, createRoutesFromChildren as createRoutesFromElements, renderMatches, useActionData, useAsyncError, useAsyncValue, useBlocker, useHref, useInRouterContext, useLoaderData, useLocation, useMatch, useMatches, useNavigate, useNavigation, useNavigationType, useOutlet, useOutletContext, useParams, useResolvedPath, useRevalidator, useRouteError, useRouteLoaderData, useRoutes };\n//# sourceMappingURL=index.js.map\n","/**\n * React Router DOM v6.30.1\n *\n * Copyright (c) Remix Software Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE.md file in the root directory of this source tree.\n *\n * @license MIT\n */\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { UNSAFE_mapRouteProperties, UNSAFE_logV6DeprecationWarnings, UNSAFE_DataRouterContext, UNSAFE_DataRouterStateContext, Router, UNSAFE_useRoutesImpl, UNSAFE_NavigationContext, useHref, useResolvedPath, useLocation, useNavigate, createPath, UNSAFE_useRouteId, UNSAFE_RouteContext, useMatches, useNavigation, useBlocker } from 'react-router';\nexport { AbortedDeferredError, Await, MemoryRouter, Navigate, NavigationType, Outlet, Route, Router, Routes, UNSAFE_DataRouterContext, UNSAFE_DataRouterStateContext, UNSAFE_LocationContext, UNSAFE_NavigationContext, UNSAFE_RouteContext, UNSAFE_useRouteId, createMemoryRouter, createPath, createRoutesFromChildren, createRoutesFromElements, defer, generatePath, isRouteErrorResponse, json, matchPath, matchRoutes, parsePath, redirect, redirectDocument, renderMatches, replace, resolvePath, useActionData, useAsyncError, useAsyncValue, useBlocker, useHref, useInRouterContext, useLoaderData, useLocation, useMatch, useMatches, useNavigate, useNavigation, useNavigationType, useOutlet, useOutletContext, useParams, useResolvedPath, useRevalidator, useRouteError, useRouteLoaderData, useRoutes } from 'react-router';\nimport { stripBasename, UNSAFE_warning, createRouter, createBrowserHistory, createHashHistory, UNSAFE_ErrorResponseImpl, UNSAFE_invariant, joinPaths, IDLE_FETCHER, matchPath } from '@remix-run/router';\nexport { UNSAFE_ErrorResponseImpl } from '@remix-run/router';\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\n\nconst defaultMethod = \"get\";\nconst defaultEncType = \"application/x-www-form-urlencoded\";\nfunction isHtmlElement(object) {\n  return object != null && typeof object.tagName === \"string\";\n}\nfunction isButtonElement(object) {\n  return isHtmlElement(object) && object.tagName.toLowerCase() === \"button\";\n}\nfunction isFormElement(object) {\n  return isHtmlElement(object) && object.tagName.toLowerCase() === \"form\";\n}\nfunction isInputElement(object) {\n  return isHtmlElement(object) && object.tagName.toLowerCase() === \"input\";\n}\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\nfunction shouldProcessLinkClick(event, target) {\n  return event.button === 0 && (\n  // Ignore everything but left clicks\n  !target || target === \"_self\") &&\n  // Let browser handle \"target=_blank\" etc.\n  !isModifiedEvent(event) // Ignore clicks with modifier keys\n  ;\n}\n/**\n * Creates a URLSearchParams object using the given initializer.\n *\n * This is identical to `new URLSearchParams(init)` except it also\n * supports arrays as values in the object form of the initializer\n * instead of just strings. This is convenient when you need multiple\n * values for a given key, but don't want to use an array initializer.\n *\n * For example, instead of:\n *\n *   let searchParams = new URLSearchParams([\n *     ['sort', 'name'],\n *     ['sort', 'price']\n *   ]);\n *\n * you can do:\n *\n *   let searchParams = createSearchParams({\n *     sort: ['name', 'price']\n *   });\n */\nfunction createSearchParams(init) {\n  if (init === void 0) {\n    init = \"\";\n  }\n  return new URLSearchParams(typeof init === \"string\" || Array.isArray(init) || init instanceof URLSearchParams ? init : Object.keys(init).reduce((memo, key) => {\n    let value = init[key];\n    return memo.concat(Array.isArray(value) ? value.map(v => [key, v]) : [[key, value]]);\n  }, []));\n}\nfunction getSearchParamsForLocation(locationSearch, defaultSearchParams) {\n  let searchParams = createSearchParams(locationSearch);\n  if (defaultSearchParams) {\n    // Use `defaultSearchParams.forEach(...)` here instead of iterating of\n    // `defaultSearchParams.keys()` to work-around a bug in Firefox related to\n    // web extensions. Relevant Bugzilla tickets:\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1414602\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1023984\n    defaultSearchParams.forEach((_, key) => {\n      if (!searchParams.has(key)) {\n        defaultSearchParams.getAll(key).forEach(value => {\n          searchParams.append(key, value);\n        });\n      }\n    });\n  }\n  return searchParams;\n}\n// One-time check for submitter support\nlet _formDataSupportsSubmitter = null;\nfunction isFormDataSubmitterSupported() {\n  if (_formDataSupportsSubmitter === null) {\n    try {\n      new FormData(document.createElement(\"form\"),\n      // @ts-expect-error if FormData supports the submitter parameter, this will throw\n      0);\n      _formDataSupportsSubmitter = false;\n    } catch (e) {\n      _formDataSupportsSubmitter = true;\n    }\n  }\n  return _formDataSupportsSubmitter;\n}\nconst supportedFormEncTypes = new Set([\"application/x-www-form-urlencoded\", \"multipart/form-data\", \"text/plain\"]);\nfunction getFormEncType(encType) {\n  if (encType != null && !supportedFormEncTypes.has(encType)) {\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, \"\\\"\" + encType + \"\\\" is not a valid `encType` for `<Form>`/`<fetcher.Form>` \" + (\"and will default to \\\"\" + defaultEncType + \"\\\"\")) : void 0;\n    return null;\n  }\n  return encType;\n}\nfunction getFormSubmissionInfo(target, basename) {\n  let method;\n  let action;\n  let encType;\n  let formData;\n  let body;\n  if (isFormElement(target)) {\n    // When grabbing the action from the element, it will have had the basename\n    // prefixed to ensure non-JS scenarios work, so strip it since we'll\n    // re-prefix in the router\n    let attr = target.getAttribute(\"action\");\n    action = attr ? stripBasename(attr, basename) : null;\n    method = target.getAttribute(\"method\") || defaultMethod;\n    encType = getFormEncType(target.getAttribute(\"enctype\")) || defaultEncType;\n    formData = new FormData(target);\n  } else if (isButtonElement(target) || isInputElement(target) && (target.type === \"submit\" || target.type === \"image\")) {\n    let form = target.form;\n    if (form == null) {\n      throw new Error(\"Cannot submit a <button> or <input type=\\\"submit\\\"> without a <form>\");\n    }\n    // <button>/<input type=\"submit\"> may override attributes of <form>\n    // When grabbing the action from the element, it will have had the basename\n    // prefixed to ensure non-JS scenarios work, so strip it since we'll\n    // re-prefix in the router\n    let attr = target.getAttribute(\"formaction\") || form.getAttribute(\"action\");\n    action = attr ? stripBasename(attr, basename) : null;\n    method = target.getAttribute(\"formmethod\") || form.getAttribute(\"method\") || defaultMethod;\n    encType = getFormEncType(target.getAttribute(\"formenctype\")) || getFormEncType(form.getAttribute(\"enctype\")) || defaultEncType;\n    // Build a FormData object populated from a form and submitter\n    formData = new FormData(form, target);\n    // If this browser doesn't support the `FormData(el, submitter)` format,\n    // then tack on the submitter value at the end.  This is a lightweight\n    // solution that is not 100% spec compliant.  For complete support in older\n    // browsers, consider using the `formdata-submitter-polyfill` package\n    if (!isFormDataSubmitterSupported()) {\n      let {\n        name,\n        type,\n        value\n      } = target;\n      if (type === \"image\") {\n        let prefix = name ? name + \".\" : \"\";\n        formData.append(prefix + \"x\", \"0\");\n        formData.append(prefix + \"y\", \"0\");\n      } else if (name) {\n        formData.append(name, value);\n      }\n    }\n  } else if (isHtmlElement(target)) {\n    throw new Error(\"Cannot submit element that is not <form>, <button>, or \" + \"<input type=\\\"submit|image\\\">\");\n  } else {\n    method = defaultMethod;\n    action = null;\n    encType = defaultEncType;\n    body = target;\n  }\n  // Send body for <Form encType=\"text/plain\" so we encode it into text\n  if (formData && encType === \"text/plain\") {\n    body = formData;\n    formData = undefined;\n  }\n  return {\n    action,\n    method: method.toLowerCase(),\n    encType,\n    formData,\n    body\n  };\n}\n\nconst _excluded = [\"onClick\", \"relative\", \"reloadDocument\", \"replace\", \"state\", \"target\", \"to\", \"preventScrollReset\", \"viewTransition\"],\n  _excluded2 = [\"aria-current\", \"caseSensitive\", \"className\", \"end\", \"style\", \"to\", \"viewTransition\", \"children\"],\n  _excluded3 = [\"fetcherKey\", \"navigate\", \"reloadDocument\", \"replace\", \"state\", \"method\", \"action\", \"onSubmit\", \"relative\", \"preventScrollReset\", \"viewTransition\"];\n// HEY YOU! DON'T TOUCH THIS VARIABLE!\n//\n// It is replaced with the proper version at build time via a babel plugin in\n// the rollup config.\n//\n// Export a global property onto the window for React Router detection by the\n// Core Web Vitals Technology Report.  This way they can configure the `wappalyzer`\n// to detect and properly classify live websites as being built with React Router:\n// https://github.com/HTTPArchive/wappalyzer/blob/main/src/technologies/r.json\nconst REACT_ROUTER_VERSION = \"6\";\ntry {\n  window.__reactRouterVersion = REACT_ROUTER_VERSION;\n} catch (e) {\n  // no-op\n}\nfunction createBrowserRouter(routes, opts) {\n  return createRouter({\n    basename: opts == null ? void 0 : opts.basename,\n    future: _extends({}, opts == null ? void 0 : opts.future, {\n      v7_prependBasename: true\n    }),\n    history: createBrowserHistory({\n      window: opts == null ? void 0 : opts.window\n    }),\n    hydrationData: (opts == null ? void 0 : opts.hydrationData) || parseHydrationData(),\n    routes,\n    mapRouteProperties: UNSAFE_mapRouteProperties,\n    dataStrategy: opts == null ? void 0 : opts.dataStrategy,\n    patchRoutesOnNavigation: opts == null ? void 0 : opts.patchRoutesOnNavigation,\n    window: opts == null ? void 0 : opts.window\n  }).initialize();\n}\nfunction createHashRouter(routes, opts) {\n  return createRouter({\n    basename: opts == null ? void 0 : opts.basename,\n    future: _extends({}, opts == null ? void 0 : opts.future, {\n      v7_prependBasename: true\n    }),\n    history: createHashHistory({\n      window: opts == null ? void 0 : opts.window\n    }),\n    hydrationData: (opts == null ? void 0 : opts.hydrationData) || parseHydrationData(),\n    routes,\n    mapRouteProperties: UNSAFE_mapRouteProperties,\n    dataStrategy: opts == null ? void 0 : opts.dataStrategy,\n    patchRoutesOnNavigation: opts == null ? void 0 : opts.patchRoutesOnNavigation,\n    window: opts == null ? void 0 : opts.window\n  }).initialize();\n}\nfunction parseHydrationData() {\n  var _window;\n  let state = (_window = window) == null ? void 0 : _window.__staticRouterHydrationData;\n  if (state && state.errors) {\n    state = _extends({}, state, {\n      errors: deserializeErrors(state.errors)\n    });\n  }\n  return state;\n}\nfunction deserializeErrors(errors) {\n  if (!errors) return null;\n  let entries = Object.entries(errors);\n  let serialized = {};\n  for (let [key, val] of entries) {\n    // Hey you!  If you change this, please change the corresponding logic in\n    // serializeErrors in react-router-dom/server.tsx :)\n    if (val && val.__type === \"RouteErrorResponse\") {\n      serialized[key] = new UNSAFE_ErrorResponseImpl(val.status, val.statusText, val.data, val.internal === true);\n    } else if (val && val.__type === \"Error\") {\n      // Attempt to reconstruct the right type of Error (i.e., ReferenceError)\n      if (val.__subType) {\n        let ErrorConstructor = window[val.__subType];\n        if (typeof ErrorConstructor === \"function\") {\n          try {\n            // @ts-expect-error\n            let error = new ErrorConstructor(val.message);\n            // Wipe away the client-side stack trace.  Nothing to fill it in with\n            // because we don't serialize SSR stack traces for security reasons\n            error.stack = \"\";\n            serialized[key] = error;\n          } catch (e) {\n            // no-op - fall through and create a normal Error\n          }\n        }\n      }\n      if (serialized[key] == null) {\n        let error = new Error(val.message);\n        // Wipe away the client-side stack trace.  Nothing to fill it in with\n        // because we don't serialize SSR stack traces for security reasons\n        error.stack = \"\";\n        serialized[key] = error;\n      }\n    } else {\n      serialized[key] = val;\n    }\n  }\n  return serialized;\n}\nconst ViewTransitionContext = /*#__PURE__*/React.createContext({\n  isTransitioning: false\n});\nif (process.env.NODE_ENV !== \"production\") {\n  ViewTransitionContext.displayName = \"ViewTransition\";\n}\nconst FetchersContext = /*#__PURE__*/React.createContext(new Map());\nif (process.env.NODE_ENV !== \"production\") {\n  FetchersContext.displayName = \"Fetchers\";\n}\n//#endregion\n////////////////////////////////////////////////////////////////////////////////\n//#region Components\n////////////////////////////////////////////////////////////////////////////////\n/**\n  Webpack + React 17 fails to compile on any of the following because webpack\n  complains that `startTransition` doesn't exist in `React`:\n  * import { startTransition } from \"react\"\n  * import * as React from from \"react\";\n    \"startTransition\" in React ? React.startTransition(() => setState()) : setState()\n  * import * as React from from \"react\";\n    \"startTransition\" in React ? React[\"startTransition\"](() => setState()) : setState()\n\n  Moving it to a constant such as the following solves the Webpack/React 17 issue:\n  * import * as React from from \"react\";\n    const START_TRANSITION = \"startTransition\";\n    START_TRANSITION in React ? React[START_TRANSITION](() => setState()) : setState()\n\n  However, that introduces webpack/terser minification issues in production builds\n  in React 18 where minification/obfuscation ends up removing the call of\n  React.startTransition entirely from the first half of the ternary.  Grabbing\n  this exported reference once up front resolves that issue.\n\n  See https://github.com/remix-run/react-router/issues/10579\n*/\nconst START_TRANSITION = \"startTransition\";\nconst startTransitionImpl = React[START_TRANSITION];\nconst FLUSH_SYNC = \"flushSync\";\nconst flushSyncImpl = ReactDOM[FLUSH_SYNC];\nconst USE_ID = \"useId\";\nconst useIdImpl = React[USE_ID];\nfunction startTransitionSafe(cb) {\n  if (startTransitionImpl) {\n    startTransitionImpl(cb);\n  } else {\n    cb();\n  }\n}\nfunction flushSyncSafe(cb) {\n  if (flushSyncImpl) {\n    flushSyncImpl(cb);\n  } else {\n    cb();\n  }\n}\nclass Deferred {\n  constructor() {\n    this.status = \"pending\";\n    this.promise = new Promise((resolve, reject) => {\n      this.resolve = value => {\n        if (this.status === \"pending\") {\n          this.status = \"resolved\";\n          resolve(value);\n        }\n      };\n      this.reject = reason => {\n        if (this.status === \"pending\") {\n          this.status = \"rejected\";\n          reject(reason);\n        }\n      };\n    });\n  }\n}\n/**\n * Given a Remix Router instance, render the appropriate UI\n */\nfunction RouterProvider(_ref) {\n  let {\n    fallbackElement,\n    router,\n    future\n  } = _ref;\n  let [state, setStateImpl] = React.useState(router.state);\n  let [pendingState, setPendingState] = React.useState();\n  let [vtContext, setVtContext] = React.useState({\n    isTransitioning: false\n  });\n  let [renderDfd, setRenderDfd] = React.useState();\n  let [transition, setTransition] = React.useState();\n  let [interruption, setInterruption] = React.useState();\n  let fetcherData = React.useRef(new Map());\n  let {\n    v7_startTransition\n  } = future || {};\n  let optInStartTransition = React.useCallback(cb => {\n    if (v7_startTransition) {\n      startTransitionSafe(cb);\n    } else {\n      cb();\n    }\n  }, [v7_startTransition]);\n  let setState = React.useCallback((newState, _ref2) => {\n    let {\n      deletedFetchers,\n      flushSync: flushSync,\n      viewTransitionOpts: viewTransitionOpts\n    } = _ref2;\n    newState.fetchers.forEach((fetcher, key) => {\n      if (fetcher.data !== undefined) {\n        fetcherData.current.set(key, fetcher.data);\n      }\n    });\n    deletedFetchers.forEach(key => fetcherData.current.delete(key));\n    let isViewTransitionUnavailable = router.window == null || router.window.document == null || typeof router.window.document.startViewTransition !== \"function\";\n    // If this isn't a view transition or it's not available in this browser,\n    // just update and be done with it\n    if (!viewTransitionOpts || isViewTransitionUnavailable) {\n      if (flushSync) {\n        flushSyncSafe(() => setStateImpl(newState));\n      } else {\n        optInStartTransition(() => setStateImpl(newState));\n      }\n      return;\n    }\n    // flushSync + startViewTransition\n    if (flushSync) {\n      // Flush through the context to mark DOM elements as transition=ing\n      flushSyncSafe(() => {\n        // Cancel any pending transitions\n        if (transition) {\n          renderDfd && renderDfd.resolve();\n          transition.skipTransition();\n        }\n        setVtContext({\n          isTransitioning: true,\n          flushSync: true,\n          currentLocation: viewTransitionOpts.currentLocation,\n          nextLocation: viewTransitionOpts.nextLocation\n        });\n      });\n      // Update the DOM\n      let t = router.window.document.startViewTransition(() => {\n        flushSyncSafe(() => setStateImpl(newState));\n      });\n      // Clean up after the animation completes\n      t.finished.finally(() => {\n        flushSyncSafe(() => {\n          setRenderDfd(undefined);\n          setTransition(undefined);\n          setPendingState(undefined);\n          setVtContext({\n            isTransitioning: false\n          });\n        });\n      });\n      flushSyncSafe(() => setTransition(t));\n      return;\n    }\n    // startTransition + startViewTransition\n    if (transition) {\n      // Interrupting an in-progress transition, cancel and let everything flush\n      // out, and then kick off a new transition from the interruption state\n      renderDfd && renderDfd.resolve();\n      transition.skipTransition();\n      setInterruption({\n        state: newState,\n        currentLocation: viewTransitionOpts.currentLocation,\n        nextLocation: viewTransitionOpts.nextLocation\n      });\n    } else {\n      // Completed navigation update with opted-in view transitions, let 'er rip\n      setPendingState(newState);\n      setVtContext({\n        isTransitioning: true,\n        flushSync: false,\n        currentLocation: viewTransitionOpts.currentLocation,\n        nextLocation: viewTransitionOpts.nextLocation\n      });\n    }\n  }, [router.window, transition, renderDfd, fetcherData, optInStartTransition]);\n  // Need to use a layout effect here so we are subscribed early enough to\n  // pick up on any render-driven redirects/navigations (useEffect/<Navigate>)\n  React.useLayoutEffect(() => router.subscribe(setState), [router, setState]);\n  // When we start a view transition, create a Deferred we can use for the\n  // eventual \"completed\" render\n  React.useEffect(() => {\n    if (vtContext.isTransitioning && !vtContext.flushSync) {\n      setRenderDfd(new Deferred());\n    }\n  }, [vtContext]);\n  // Once the deferred is created, kick off startViewTransition() to update the\n  // DOM and then wait on the Deferred to resolve (indicating the DOM update has\n  // happened)\n  React.useEffect(() => {\n    if (renderDfd && pendingState && router.window) {\n      let newState = pendingState;\n      let renderPromise = renderDfd.promise;\n      let transition = router.window.document.startViewTransition(async () => {\n        optInStartTransition(() => setStateImpl(newState));\n        await renderPromise;\n      });\n      transition.finished.finally(() => {\n        setRenderDfd(undefined);\n        setTransition(undefined);\n        setPendingState(undefined);\n        setVtContext({\n          isTransitioning: false\n        });\n      });\n      setTransition(transition);\n    }\n  }, [optInStartTransition, pendingState, renderDfd, router.window]);\n  // When the new location finally renders and is committed to the DOM, this\n  // effect will run to resolve the transition\n  React.useEffect(() => {\n    if (renderDfd && pendingState && state.location.key === pendingState.location.key) {\n      renderDfd.resolve();\n    }\n  }, [renderDfd, transition, state.location, pendingState]);\n  // If we get interrupted with a new navigation during a transition, we skip\n  // the active transition, let it cleanup, then kick it off again here\n  React.useEffect(() => {\n    if (!vtContext.isTransitioning && interruption) {\n      setPendingState(interruption.state);\n      setVtContext({\n        isTransitioning: true,\n        flushSync: false,\n        currentLocation: interruption.currentLocation,\n        nextLocation: interruption.nextLocation\n      });\n      setInterruption(undefined);\n    }\n  }, [vtContext.isTransitioning, interruption]);\n  React.useEffect(() => {\n    process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(fallbackElement == null || !router.future.v7_partialHydration, \"`<RouterProvider fallbackElement>` is deprecated when using \" + \"`v7_partialHydration`, use a `HydrateFallback` component instead\") : void 0;\n    // Only log this once on initial mount\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  let navigator = React.useMemo(() => {\n    return {\n      createHref: router.createHref,\n      encodeLocation: router.encodeLocation,\n      go: n => router.navigate(n),\n      push: (to, state, opts) => router.navigate(to, {\n        state,\n        preventScrollReset: opts == null ? void 0 : opts.preventScrollReset\n      }),\n      replace: (to, state, opts) => router.navigate(to, {\n        replace: true,\n        state,\n        preventScrollReset: opts == null ? void 0 : opts.preventScrollReset\n      })\n    };\n  }, [router]);\n  let basename = router.basename || \"/\";\n  let dataRouterContext = React.useMemo(() => ({\n    router,\n    navigator,\n    static: false,\n    basename\n  }), [router, navigator, basename]);\n  let routerFuture = React.useMemo(() => ({\n    v7_relativeSplatPath: router.future.v7_relativeSplatPath\n  }), [router.future.v7_relativeSplatPath]);\n  React.useEffect(() => UNSAFE_logV6DeprecationWarnings(future, router.future), [future, router.future]);\n  // The fragment and {null} here are important!  We need them to keep React 18's\n  // useId happy when we are server-rendering since we may have a <script> here\n  // containing the hydrated server-side staticContext (from StaticRouterProvider).\n  // useId relies on the component tree structure to generate deterministic id's\n  // so we need to ensure it remains the same on the client even though\n  // we don't need the <script> tag\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(UNSAFE_DataRouterContext.Provider, {\n    value: dataRouterContext\n  }, /*#__PURE__*/React.createElement(UNSAFE_DataRouterStateContext.Provider, {\n    value: state\n  }, /*#__PURE__*/React.createElement(FetchersContext.Provider, {\n    value: fetcherData.current\n  }, /*#__PURE__*/React.createElement(ViewTransitionContext.Provider, {\n    value: vtContext\n  }, /*#__PURE__*/React.createElement(Router, {\n    basename: basename,\n    location: state.location,\n    navigationType: state.historyAction,\n    navigator: navigator,\n    future: routerFuture\n  }, state.initialized || router.future.v7_partialHydration ? /*#__PURE__*/React.createElement(MemoizedDataRoutes, {\n    routes: router.routes,\n    future: router.future,\n    state: state\n  }) : fallbackElement))))), null);\n}\n// Memoize to avoid re-renders when updating `ViewTransitionContext`\nconst MemoizedDataRoutes = /*#__PURE__*/React.memo(DataRoutes);\nfunction DataRoutes(_ref3) {\n  let {\n    routes,\n    future,\n    state\n  } = _ref3;\n  return UNSAFE_useRoutesImpl(routes, undefined, state, future);\n}\n/**\n * A `<Router>` for use in web browsers. Provides the cleanest URLs.\n */\nfunction BrowserRouter(_ref4) {\n  let {\n    basename,\n    children,\n    future,\n    window\n  } = _ref4;\n  let historyRef = React.useRef();\n  if (historyRef.current == null) {\n    historyRef.current = createBrowserHistory({\n      window,\n      v5Compat: true\n    });\n  }\n  let history = historyRef.current;\n  let [state, setStateImpl] = React.useState({\n    action: history.action,\n    location: history.location\n  });\n  let {\n    v7_startTransition\n  } = future || {};\n  let setState = React.useCallback(newState => {\n    v7_startTransition && startTransitionImpl ? startTransitionImpl(() => setStateImpl(newState)) : setStateImpl(newState);\n  }, [setStateImpl, v7_startTransition]);\n  React.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  React.useEffect(() => UNSAFE_logV6DeprecationWarnings(future), [future]);\n  return /*#__PURE__*/React.createElement(Router, {\n    basename: basename,\n    children: children,\n    location: state.location,\n    navigationType: state.action,\n    navigator: history,\n    future: future\n  });\n}\n/**\n * A `<Router>` for use in web browsers. Stores the location in the hash\n * portion of the URL so it is not sent to the server.\n */\nfunction HashRouter(_ref5) {\n  let {\n    basename,\n    children,\n    future,\n    window\n  } = _ref5;\n  let historyRef = React.useRef();\n  if (historyRef.current == null) {\n    historyRef.current = createHashHistory({\n      window,\n      v5Compat: true\n    });\n  }\n  let history = historyRef.current;\n  let [state, setStateImpl] = React.useState({\n    action: history.action,\n    location: history.location\n  });\n  let {\n    v7_startTransition\n  } = future || {};\n  let setState = React.useCallback(newState => {\n    v7_startTransition && startTransitionImpl ? startTransitionImpl(() => setStateImpl(newState)) : setStateImpl(newState);\n  }, [setStateImpl, v7_startTransition]);\n  React.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  React.useEffect(() => UNSAFE_logV6DeprecationWarnings(future), [future]);\n  return /*#__PURE__*/React.createElement(Router, {\n    basename: basename,\n    children: children,\n    location: state.location,\n    navigationType: state.action,\n    navigator: history,\n    future: future\n  });\n}\n/**\n * A `<Router>` that accepts a pre-instantiated history object. It's important\n * to note that using your own history object is highly discouraged and may add\n * two versions of the history library to your bundles unless you use the same\n * version of the history library that React Router uses internally.\n */\nfunction HistoryRouter(_ref6) {\n  let {\n    basename,\n    children,\n    future,\n    history\n  } = _ref6;\n  let [state, setStateImpl] = React.useState({\n    action: history.action,\n    location: history.location\n  });\n  let {\n    v7_startTransition\n  } = future || {};\n  let setState = React.useCallback(newState => {\n    v7_startTransition && startTransitionImpl ? startTransitionImpl(() => setStateImpl(newState)) : setStateImpl(newState);\n  }, [setStateImpl, v7_startTransition]);\n  React.useLayoutEffect(() => history.listen(setState), [history, setState]);\n  React.useEffect(() => UNSAFE_logV6DeprecationWarnings(future), [future]);\n  return /*#__PURE__*/React.createElement(Router, {\n    basename: basename,\n    children: children,\n    location: state.location,\n    navigationType: state.action,\n    navigator: history,\n    future: future\n  });\n}\nif (process.env.NODE_ENV !== \"production\") {\n  HistoryRouter.displayName = \"unstable_HistoryRouter\";\n}\nconst isBrowser = typeof window !== \"undefined\" && typeof window.document !== \"undefined\" && typeof window.document.createElement !== \"undefined\";\nconst ABSOLUTE_URL_REGEX = /^(?:[a-z][a-z0-9+.-]*:|\\/\\/)/i;\n/**\n * The public API for rendering a history-aware `<a>`.\n */\nconst Link = /*#__PURE__*/React.forwardRef(function LinkWithRef(_ref7, ref) {\n  let {\n      onClick,\n      relative,\n      reloadDocument,\n      replace,\n      state,\n      target,\n      to,\n      preventScrollReset,\n      viewTransition\n    } = _ref7,\n    rest = _objectWithoutPropertiesLoose(_ref7, _excluded);\n  let {\n    basename\n  } = React.useContext(UNSAFE_NavigationContext);\n  // Rendered into <a href> for absolute URLs\n  let absoluteHref;\n  let isExternal = false;\n  if (typeof to === \"string\" && ABSOLUTE_URL_REGEX.test(to)) {\n    // Render the absolute href server- and client-side\n    absoluteHref = to;\n    // Only check for external origins client-side\n    if (isBrowser) {\n      try {\n        let currentUrl = new URL(window.location.href);\n        let targetUrl = to.startsWith(\"//\") ? new URL(currentUrl.protocol + to) : new URL(to);\n        let path = stripBasename(targetUrl.pathname, basename);\n        if (targetUrl.origin === currentUrl.origin && path != null) {\n          // Strip the protocol/origin/basename for same-origin absolute URLs\n          to = path + targetUrl.search + targetUrl.hash;\n        } else {\n          isExternal = true;\n        }\n      } catch (e) {\n        // We can't do external URL detection without a valid URL\n        process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, \"<Link to=\\\"\" + to + \"\\\"> contains an invalid URL which will probably break \" + \"when clicked - please update to a valid URL path.\") : void 0;\n      }\n    }\n  }\n  // Rendered into <a href> for relative URLs\n  let href = useHref(to, {\n    relative\n  });\n  let internalOnClick = useLinkClickHandler(to, {\n    replace,\n    state,\n    target,\n    preventScrollReset,\n    relative,\n    viewTransition\n  });\n  function handleClick(event) {\n    if (onClick) onClick(event);\n    if (!event.defaultPrevented) {\n      internalOnClick(event);\n    }\n  }\n  return (\n    /*#__PURE__*/\n    // eslint-disable-next-line jsx-a11y/anchor-has-content\n    React.createElement(\"a\", _extends({}, rest, {\n      href: absoluteHref || href,\n      onClick: isExternal || reloadDocument ? onClick : handleClick,\n      ref: ref,\n      target: target\n    }))\n  );\n});\nif (process.env.NODE_ENV !== \"production\") {\n  Link.displayName = \"Link\";\n}\n/**\n * A `<Link>` wrapper that knows if it's \"active\" or not.\n */\nconst NavLink = /*#__PURE__*/React.forwardRef(function NavLinkWithRef(_ref8, ref) {\n  let {\n      \"aria-current\": ariaCurrentProp = \"page\",\n      caseSensitive = false,\n      className: classNameProp = \"\",\n      end = false,\n      style: styleProp,\n      to,\n      viewTransition,\n      children\n    } = _ref8,\n    rest = _objectWithoutPropertiesLoose(_ref8, _excluded2);\n  let path = useResolvedPath(to, {\n    relative: rest.relative\n  });\n  let location = useLocation();\n  let routerState = React.useContext(UNSAFE_DataRouterStateContext);\n  let {\n    navigator,\n    basename\n  } = React.useContext(UNSAFE_NavigationContext);\n  let isTransitioning = routerState != null &&\n  // Conditional usage is OK here because the usage of a data router is static\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  useViewTransitionState(path) && viewTransition === true;\n  let toPathname = navigator.encodeLocation ? navigator.encodeLocation(path).pathname : path.pathname;\n  let locationPathname = location.pathname;\n  let nextLocationPathname = routerState && routerState.navigation && routerState.navigation.location ? routerState.navigation.location.pathname : null;\n  if (!caseSensitive) {\n    locationPathname = locationPathname.toLowerCase();\n    nextLocationPathname = nextLocationPathname ? nextLocationPathname.toLowerCase() : null;\n    toPathname = toPathname.toLowerCase();\n  }\n  if (nextLocationPathname && basename) {\n    nextLocationPathname = stripBasename(nextLocationPathname, basename) || nextLocationPathname;\n  }\n  // If the `to` has a trailing slash, look at that exact spot.  Otherwise,\n  // we're looking for a slash _after_ what's in `to`.  For example:\n  //\n  // <NavLink to=\"/users\"> and <NavLink to=\"/users/\">\n  // both want to look for a / at index 6 to match URL `/users/matt`\n  const endSlashPosition = toPathname !== \"/\" && toPathname.endsWith(\"/\") ? toPathname.length - 1 : toPathname.length;\n  let isActive = locationPathname === toPathname || !end && locationPathname.startsWith(toPathname) && locationPathname.charAt(endSlashPosition) === \"/\";\n  let isPending = nextLocationPathname != null && (nextLocationPathname === toPathname || !end && nextLocationPathname.startsWith(toPathname) && nextLocationPathname.charAt(toPathname.length) === \"/\");\n  let renderProps = {\n    isActive,\n    isPending,\n    isTransitioning\n  };\n  let ariaCurrent = isActive ? ariaCurrentProp : undefined;\n  let className;\n  if (typeof classNameProp === \"function\") {\n    className = classNameProp(renderProps);\n  } else {\n    // If the className prop is not a function, we use a default `active`\n    // class for <NavLink />s that are active. In v5 `active` was the default\n    // value for `activeClassName`, but we are removing that API and can still\n    // use the old default behavior for a cleaner upgrade path and keep the\n    // simple styling rules working as they currently do.\n    className = [classNameProp, isActive ? \"active\" : null, isPending ? \"pending\" : null, isTransitioning ? \"transitioning\" : null].filter(Boolean).join(\" \");\n  }\n  let style = typeof styleProp === \"function\" ? styleProp(renderProps) : styleProp;\n  return /*#__PURE__*/React.createElement(Link, _extends({}, rest, {\n    \"aria-current\": ariaCurrent,\n    className: className,\n    ref: ref,\n    style: style,\n    to: to,\n    viewTransition: viewTransition\n  }), typeof children === \"function\" ? children(renderProps) : children);\n});\nif (process.env.NODE_ENV !== \"production\") {\n  NavLink.displayName = \"NavLink\";\n}\n/**\n * A `@remix-run/router`-aware `<form>`. It behaves like a normal form except\n * that the interaction with the server is with `fetch` instead of new document\n * requests, allowing components to add nicer UX to the page as the form is\n * submitted and returns with data.\n */\nconst Form = /*#__PURE__*/React.forwardRef((_ref9, forwardedRef) => {\n  let {\n      fetcherKey,\n      navigate,\n      reloadDocument,\n      replace,\n      state,\n      method = defaultMethod,\n      action,\n      onSubmit,\n      relative,\n      preventScrollReset,\n      viewTransition\n    } = _ref9,\n    props = _objectWithoutPropertiesLoose(_ref9, _excluded3);\n  let submit = useSubmit();\n  let formAction = useFormAction(action, {\n    relative\n  });\n  let formMethod = method.toLowerCase() === \"get\" ? \"get\" : \"post\";\n  let submitHandler = event => {\n    onSubmit && onSubmit(event);\n    if (event.defaultPrevented) return;\n    event.preventDefault();\n    let submitter = event.nativeEvent.submitter;\n    let submitMethod = (submitter == null ? void 0 : submitter.getAttribute(\"formmethod\")) || method;\n    submit(submitter || event.currentTarget, {\n      fetcherKey,\n      method: submitMethod,\n      navigate,\n      replace,\n      state,\n      relative,\n      preventScrollReset,\n      viewTransition\n    });\n  };\n  return /*#__PURE__*/React.createElement(\"form\", _extends({\n    ref: forwardedRef,\n    method: formMethod,\n    action: formAction,\n    onSubmit: reloadDocument ? onSubmit : submitHandler\n  }, props));\n});\nif (process.env.NODE_ENV !== \"production\") {\n  Form.displayName = \"Form\";\n}\n/**\n * This component will emulate the browser's scroll restoration on location\n * changes.\n */\nfunction ScrollRestoration(_ref10) {\n  let {\n    getKey,\n    storageKey\n  } = _ref10;\n  useScrollRestoration({\n    getKey,\n    storageKey\n  });\n  return null;\n}\nif (process.env.NODE_ENV !== \"production\") {\n  ScrollRestoration.displayName = \"ScrollRestoration\";\n}\n//#endregion\n////////////////////////////////////////////////////////////////////////////////\n//#region Hooks\n////////////////////////////////////////////////////////////////////////////////\nvar DataRouterHook;\n(function (DataRouterHook) {\n  DataRouterHook[\"UseScrollRestoration\"] = \"useScrollRestoration\";\n  DataRouterHook[\"UseSubmit\"] = \"useSubmit\";\n  DataRouterHook[\"UseSubmitFetcher\"] = \"useSubmitFetcher\";\n  DataRouterHook[\"UseFetcher\"] = \"useFetcher\";\n  DataRouterHook[\"useViewTransitionState\"] = \"useViewTransitionState\";\n})(DataRouterHook || (DataRouterHook = {}));\nvar DataRouterStateHook;\n(function (DataRouterStateHook) {\n  DataRouterStateHook[\"UseFetcher\"] = \"useFetcher\";\n  DataRouterStateHook[\"UseFetchers\"] = \"useFetchers\";\n  DataRouterStateHook[\"UseScrollRestoration\"] = \"useScrollRestoration\";\n})(DataRouterStateHook || (DataRouterStateHook = {}));\n// Internal hooks\nfunction getDataRouterConsoleError(hookName) {\n  return hookName + \" must be used within a data router.  See https://reactrouter.com/v6/routers/picking-a-router.\";\n}\nfunction useDataRouterContext(hookName) {\n  let ctx = React.useContext(UNSAFE_DataRouterContext);\n  !ctx ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, getDataRouterConsoleError(hookName)) : UNSAFE_invariant(false) : void 0;\n  return ctx;\n}\nfunction useDataRouterState(hookName) {\n  let state = React.useContext(UNSAFE_DataRouterStateContext);\n  !state ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, getDataRouterConsoleError(hookName)) : UNSAFE_invariant(false) : void 0;\n  return state;\n}\n// External hooks\n/**\n * Handles the click behavior for router `<Link>` components. This is useful if\n * you need to create custom `<Link>` components with the same click behavior we\n * use in our exported `<Link>`.\n */\nfunction useLinkClickHandler(to, _temp) {\n  let {\n    target,\n    replace: replaceProp,\n    state,\n    preventScrollReset,\n    relative,\n    viewTransition\n  } = _temp === void 0 ? {} : _temp;\n  let navigate = useNavigate();\n  let location = useLocation();\n  let path = useResolvedPath(to, {\n    relative\n  });\n  return React.useCallback(event => {\n    if (shouldProcessLinkClick(event, target)) {\n      event.preventDefault();\n      // If the URL hasn't changed, a regular <a> will do a replace instead of\n      // a push, so do the same here unless the replace prop is explicitly set\n      let replace = replaceProp !== undefined ? replaceProp : createPath(location) === createPath(path);\n      navigate(to, {\n        replace,\n        state,\n        preventScrollReset,\n        relative,\n        viewTransition\n      });\n    }\n  }, [location, navigate, path, replaceProp, state, target, to, preventScrollReset, relative, viewTransition]);\n}\n/**\n * A convenient wrapper for reading and writing search parameters via the\n * URLSearchParams interface.\n */\nfunction useSearchParams(defaultInit) {\n  process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(typeof URLSearchParams !== \"undefined\", \"You cannot use the `useSearchParams` hook in a browser that does not \" + \"support the URLSearchParams API. If you need to support Internet \" + \"Explorer 11, we recommend you load a polyfill such as \" + \"https://github.com/ungap/url-search-params.\") : void 0;\n  let defaultSearchParamsRef = React.useRef(createSearchParams(defaultInit));\n  let hasSetSearchParamsRef = React.useRef(false);\n  let location = useLocation();\n  let searchParams = React.useMemo(() =>\n  // Only merge in the defaults if we haven't yet called setSearchParams.\n  // Once we call that we want those to take precedence, otherwise you can't\n  // remove a param with setSearchParams({}) if it has an initial value\n  getSearchParamsForLocation(location.search, hasSetSearchParamsRef.current ? null : defaultSearchParamsRef.current), [location.search]);\n  let navigate = useNavigate();\n  let setSearchParams = React.useCallback((nextInit, navigateOptions) => {\n    const newSearchParams = createSearchParams(typeof nextInit === \"function\" ? nextInit(searchParams) : nextInit);\n    hasSetSearchParamsRef.current = true;\n    navigate(\"?\" + newSearchParams, navigateOptions);\n  }, [navigate, searchParams]);\n  return [searchParams, setSearchParams];\n}\nfunction validateClientSideSubmission() {\n  if (typeof document === \"undefined\") {\n    throw new Error(\"You are calling submit during the server render. \" + \"Try calling submit within a `useEffect` or callback instead.\");\n  }\n}\nlet fetcherId = 0;\nlet getUniqueFetcherId = () => \"__\" + String(++fetcherId) + \"__\";\n/**\n * Returns a function that may be used to programmatically submit a form (or\n * some arbitrary data) to the server.\n */\nfunction useSubmit() {\n  let {\n    router\n  } = useDataRouterContext(DataRouterHook.UseSubmit);\n  let {\n    basename\n  } = React.useContext(UNSAFE_NavigationContext);\n  let currentRouteId = UNSAFE_useRouteId();\n  return React.useCallback(function (target, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    validateClientSideSubmission();\n    let {\n      action,\n      method,\n      encType,\n      formData,\n      body\n    } = getFormSubmissionInfo(target, basename);\n    if (options.navigate === false) {\n      let key = options.fetcherKey || getUniqueFetcherId();\n      router.fetch(key, currentRouteId, options.action || action, {\n        preventScrollReset: options.preventScrollReset,\n        formData,\n        body,\n        formMethod: options.method || method,\n        formEncType: options.encType || encType,\n        flushSync: options.flushSync\n      });\n    } else {\n      router.navigate(options.action || action, {\n        preventScrollReset: options.preventScrollReset,\n        formData,\n        body,\n        formMethod: options.method || method,\n        formEncType: options.encType || encType,\n        replace: options.replace,\n        state: options.state,\n        fromRouteId: currentRouteId,\n        flushSync: options.flushSync,\n        viewTransition: options.viewTransition\n      });\n    }\n  }, [router, basename, currentRouteId]);\n}\n// v7: Eventually we should deprecate this entirely in favor of using the\n// router method directly?\nfunction useFormAction(action, _temp2) {\n  let {\n    relative\n  } = _temp2 === void 0 ? {} : _temp2;\n  let {\n    basename\n  } = React.useContext(UNSAFE_NavigationContext);\n  let routeContext = React.useContext(UNSAFE_RouteContext);\n  !routeContext ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"useFormAction must be used inside a RouteContext\") : UNSAFE_invariant(false) : void 0;\n  let [match] = routeContext.matches.slice(-1);\n  // Shallow clone path so we can modify it below, otherwise we modify the\n  // object referenced by useMemo inside useResolvedPath\n  let path = _extends({}, useResolvedPath(action ? action : \".\", {\n    relative\n  }));\n  // If no action was specified, browsers will persist current search params\n  // when determining the path, so match that behavior\n  // https://github.com/remix-run/remix/issues/927\n  let location = useLocation();\n  if (action == null) {\n    // Safe to write to this directly here since if action was undefined, we\n    // would have called useResolvedPath(\".\") which will never include a search\n    path.search = location.search;\n    // When grabbing search params from the URL, remove any included ?index param\n    // since it might not apply to our contextual route.  We add it back based\n    // on match.route.index below\n    let params = new URLSearchParams(path.search);\n    let indexValues = params.getAll(\"index\");\n    let hasNakedIndexParam = indexValues.some(v => v === \"\");\n    if (hasNakedIndexParam) {\n      params.delete(\"index\");\n      indexValues.filter(v => v).forEach(v => params.append(\"index\", v));\n      let qs = params.toString();\n      path.search = qs ? \"?\" + qs : \"\";\n    }\n  }\n  if ((!action || action === \".\") && match.route.index) {\n    path.search = path.search ? path.search.replace(/^\\?/, \"?index&\") : \"?index\";\n  }\n  // If we're operating within a basename, prepend it to the pathname prior\n  // to creating the form action.  If this is a root navigation, then just use\n  // the raw basename which allows the basename to have full control over the\n  // presence of a trailing slash on root actions\n  if (basename !== \"/\") {\n    path.pathname = path.pathname === \"/\" ? basename : joinPaths([basename, path.pathname]);\n  }\n  return createPath(path);\n}\n// TODO: (v7) Change the useFetcher generic default from `any` to `unknown`\n/**\n * Interacts with route loaders and actions without causing a navigation. Great\n * for any interaction that stays on the same page.\n */\nfunction useFetcher(_temp3) {\n  var _route$matches;\n  let {\n    key\n  } = _temp3 === void 0 ? {} : _temp3;\n  let {\n    router\n  } = useDataRouterContext(DataRouterHook.UseFetcher);\n  let state = useDataRouterState(DataRouterStateHook.UseFetcher);\n  let fetcherData = React.useContext(FetchersContext);\n  let route = React.useContext(UNSAFE_RouteContext);\n  let routeId = (_route$matches = route.matches[route.matches.length - 1]) == null ? void 0 : _route$matches.route.id;\n  !fetcherData ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"useFetcher must be used inside a FetchersContext\") : UNSAFE_invariant(false) : void 0;\n  !route ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"useFetcher must be used inside a RouteContext\") : UNSAFE_invariant(false) : void 0;\n  !(routeId != null) ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"useFetcher can only be used on routes that contain a unique \\\"id\\\"\") : UNSAFE_invariant(false) : void 0;\n  // Fetcher key handling\n  // OK to call conditionally to feature detect `useId`\n  // eslint-disable-next-line react-hooks/rules-of-hooks\n  let defaultKey = useIdImpl ? useIdImpl() : \"\";\n  let [fetcherKey, setFetcherKey] = React.useState(key || defaultKey);\n  if (key && key !== fetcherKey) {\n    setFetcherKey(key);\n  } else if (!fetcherKey) {\n    // We will only fall through here when `useId` is not available\n    setFetcherKey(getUniqueFetcherId());\n  }\n  // Registration/cleanup\n  React.useEffect(() => {\n    router.getFetcher(fetcherKey);\n    return () => {\n      // Tell the router we've unmounted - if v7_fetcherPersist is enabled this\n      // will not delete immediately but instead queue up a delete after the\n      // fetcher returns to an `idle` state\n      router.deleteFetcher(fetcherKey);\n    };\n  }, [router, fetcherKey]);\n  // Fetcher additions\n  let load = React.useCallback((href, opts) => {\n    !routeId ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"No routeId available for fetcher.load()\") : UNSAFE_invariant(false) : void 0;\n    router.fetch(fetcherKey, routeId, href, opts);\n  }, [fetcherKey, routeId, router]);\n  let submitImpl = useSubmit();\n  let submit = React.useCallback((target, opts) => {\n    submitImpl(target, _extends({}, opts, {\n      navigate: false,\n      fetcherKey\n    }));\n  }, [fetcherKey, submitImpl]);\n  let FetcherForm = React.useMemo(() => {\n    let FetcherForm = /*#__PURE__*/React.forwardRef((props, ref) => {\n      return /*#__PURE__*/React.createElement(Form, _extends({}, props, {\n        navigate: false,\n        fetcherKey: fetcherKey,\n        ref: ref\n      }));\n    });\n    if (process.env.NODE_ENV !== \"production\") {\n      FetcherForm.displayName = \"fetcher.Form\";\n    }\n    return FetcherForm;\n  }, [fetcherKey]);\n  // Exposed FetcherWithComponents\n  let fetcher = state.fetchers.get(fetcherKey) || IDLE_FETCHER;\n  let data = fetcherData.get(fetcherKey);\n  let fetcherWithComponents = React.useMemo(() => _extends({\n    Form: FetcherForm,\n    submit,\n    load\n  }, fetcher, {\n    data\n  }), [FetcherForm, submit, load, fetcher, data]);\n  return fetcherWithComponents;\n}\n/**\n * Provides all fetchers currently on the page. Useful for layouts and parent\n * routes that need to provide pending/optimistic UI regarding the fetch.\n */\nfunction useFetchers() {\n  let state = useDataRouterState(DataRouterStateHook.UseFetchers);\n  return Array.from(state.fetchers.entries()).map(_ref11 => {\n    let [key, fetcher] = _ref11;\n    return _extends({}, fetcher, {\n      key\n    });\n  });\n}\nconst SCROLL_RESTORATION_STORAGE_KEY = \"react-router-scroll-positions\";\nlet savedScrollPositions = {};\n/**\n * When rendered inside a RouterProvider, will restore scroll positions on navigations\n */\nfunction useScrollRestoration(_temp4) {\n  let {\n    getKey,\n    storageKey\n  } = _temp4 === void 0 ? {} : _temp4;\n  let {\n    router\n  } = useDataRouterContext(DataRouterHook.UseScrollRestoration);\n  let {\n    restoreScrollPosition,\n    preventScrollReset\n  } = useDataRouterState(DataRouterStateHook.UseScrollRestoration);\n  let {\n    basename\n  } = React.useContext(UNSAFE_NavigationContext);\n  let location = useLocation();\n  let matches = useMatches();\n  let navigation = useNavigation();\n  // Trigger manual scroll restoration while we're active\n  React.useEffect(() => {\n    window.history.scrollRestoration = \"manual\";\n    return () => {\n      window.history.scrollRestoration = \"auto\";\n    };\n  }, []);\n  // Save positions on pagehide\n  usePageHide(React.useCallback(() => {\n    if (navigation.state === \"idle\") {\n      let key = (getKey ? getKey(location, matches) : null) || location.key;\n      savedScrollPositions[key] = window.scrollY;\n    }\n    try {\n      sessionStorage.setItem(storageKey || SCROLL_RESTORATION_STORAGE_KEY, JSON.stringify(savedScrollPositions));\n    } catch (error) {\n      process.env.NODE_ENV !== \"production\" ? UNSAFE_warning(false, \"Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (\" + error + \").\") : void 0;\n    }\n    window.history.scrollRestoration = \"auto\";\n  }, [storageKey, getKey, navigation.state, location, matches]));\n  // Read in any saved scroll locations\n  if (typeof document !== \"undefined\") {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useLayoutEffect(() => {\n      try {\n        let sessionPositions = sessionStorage.getItem(storageKey || SCROLL_RESTORATION_STORAGE_KEY);\n        if (sessionPositions) {\n          savedScrollPositions = JSON.parse(sessionPositions);\n        }\n      } catch (e) {\n        // no-op, use default empty object\n      }\n    }, [storageKey]);\n    // Enable scroll restoration in the router\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useLayoutEffect(() => {\n      let getKeyWithoutBasename = getKey && basename !== \"/\" ? (location, matches) => getKey( // Strip the basename to match useLocation()\n      _extends({}, location, {\n        pathname: stripBasename(location.pathname, basename) || location.pathname\n      }), matches) : getKey;\n      let disableScrollRestoration = router == null ? void 0 : router.enableScrollRestoration(savedScrollPositions, () => window.scrollY, getKeyWithoutBasename);\n      return () => disableScrollRestoration && disableScrollRestoration();\n    }, [router, basename, getKey]);\n    // Restore scrolling when state.restoreScrollPosition changes\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useLayoutEffect(() => {\n      // Explicit false means don't do anything (used for submissions)\n      if (restoreScrollPosition === false) {\n        return;\n      }\n      // been here before, scroll to it\n      if (typeof restoreScrollPosition === \"number\") {\n        window.scrollTo(0, restoreScrollPosition);\n        return;\n      }\n      // try to scroll to the hash\n      if (location.hash) {\n        let el = document.getElementById(decodeURIComponent(location.hash.slice(1)));\n        if (el) {\n          el.scrollIntoView();\n          return;\n        }\n      }\n      // Don't reset if this navigation opted out\n      if (preventScrollReset === true) {\n        return;\n      }\n      // otherwise go to the top on new locations\n      window.scrollTo(0, 0);\n    }, [location, restoreScrollPosition, preventScrollReset]);\n  }\n}\n/**\n * Setup a callback to be fired on the window's `beforeunload` event. This is\n * useful for saving some data to `window.localStorage` just before the page\n * refreshes.\n *\n * Note: The `callback` argument should be a function created with\n * `React.useCallback()`.\n */\nfunction useBeforeUnload(callback, options) {\n  let {\n    capture\n  } = options || {};\n  React.useEffect(() => {\n    let opts = capture != null ? {\n      capture\n    } : undefined;\n    window.addEventListener(\"beforeunload\", callback, opts);\n    return () => {\n      window.removeEventListener(\"beforeunload\", callback, opts);\n    };\n  }, [callback, capture]);\n}\n/**\n * Setup a callback to be fired on the window's `pagehide` event. This is\n * useful for saving some data to `window.localStorage` just before the page\n * refreshes.  This event is better supported than beforeunload across browsers.\n *\n * Note: The `callback` argument should be a function created with\n * `React.useCallback()`.\n */\nfunction usePageHide(callback, options) {\n  let {\n    capture\n  } = options || {};\n  React.useEffect(() => {\n    let opts = capture != null ? {\n      capture\n    } : undefined;\n    window.addEventListener(\"pagehide\", callback, opts);\n    return () => {\n      window.removeEventListener(\"pagehide\", callback, opts);\n    };\n  }, [callback, capture]);\n}\n/**\n * Wrapper around useBlocker to show a window.confirm prompt to users instead\n * of building a custom UI with useBlocker.\n *\n * Warning: This has *a lot of rough edges* and behaves very differently (and\n * very incorrectly in some cases) across browsers if user click addition\n * back/forward navigations while the confirm is open.  Use at your own risk.\n */\nfunction usePrompt(_ref12) {\n  let {\n    when,\n    message\n  } = _ref12;\n  let blocker = useBlocker(when);\n  React.useEffect(() => {\n    if (blocker.state === \"blocked\") {\n      let proceed = window.confirm(message);\n      if (proceed) {\n        // This timeout is needed to avoid a weird \"race\" on POP navigations\n        // between the `window.history` revert navigation and the result of\n        // `window.confirm`\n        setTimeout(blocker.proceed, 0);\n      } else {\n        blocker.reset();\n      }\n    }\n  }, [blocker, message]);\n  React.useEffect(() => {\n    if (blocker.state === \"blocked\" && !when) {\n      blocker.reset();\n    }\n  }, [blocker, when]);\n}\n/**\n * Return a boolean indicating if there is an active view transition to the\n * given href.  You can use this value to render CSS classes or viewTransitionName\n * styles onto your elements\n *\n * @param href The destination href\n * @param [opts.relative] Relative routing type (\"route\" | \"path\")\n */\nfunction useViewTransitionState(to, opts) {\n  if (opts === void 0) {\n    opts = {};\n  }\n  let vtContext = React.useContext(ViewTransitionContext);\n  !(vtContext != null) ? process.env.NODE_ENV !== \"production\" ? UNSAFE_invariant(false, \"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  \" + \"Did you accidentally import `RouterProvider` from `react-router`?\") : UNSAFE_invariant(false) : void 0;\n  let {\n    basename\n  } = useDataRouterContext(DataRouterHook.useViewTransitionState);\n  let path = useResolvedPath(to, {\n    relative: opts.relative\n  });\n  if (!vtContext.isTransitioning) {\n    return false;\n  }\n  let currentPath = stripBasename(vtContext.currentLocation.pathname, basename) || vtContext.currentLocation.pathname;\n  let nextPath = stripBasename(vtContext.nextLocation.pathname, basename) || vtContext.nextLocation.pathname;\n  // Transition is active if we're going to or coming from the indicated\n  // destination.  This ensures that other PUSH navigations that reverse\n  // an indicated transition apply.  I.e., on the list view you have:\n  //\n  //   <NavLink to=\"/details/1\" viewTransition>\n  //\n  // If you click the breadcrumb back to the list view:\n  //\n  //   <NavLink to=\"/list\" viewTransition>\n  //\n  // We should apply the transition because it's indicated as active going\n  // from /list -> /details/1 and therefore should be active on the reverse\n  // (even though this isn't strictly a POP reverse)\n  return matchPath(path.pathname, nextPath) != null || matchPath(path.pathname, currentPath) != null;\n}\n//#endregion\n\nexport { BrowserRouter, Form, HashRouter, Link, NavLink, RouterProvider, ScrollRestoration, FetchersContext as UNSAFE_FetchersContext, ViewTransitionContext as UNSAFE_ViewTransitionContext, useScrollRestoration as UNSAFE_useScrollRestoration, createBrowserRouter, createHashRouter, createSearchParams, HistoryRouter as unstable_HistoryRouter, usePrompt as unstable_usePrompt, useBeforeUnload, useFetcher, useFetchers, useFormAction, useLinkClickHandler, useSearchParams, useSubmit, useViewTransitionState };\n//# sourceMappingURL=index.js.map\n","let e={data:\"\"},t=t=>\"object\"==typeof window?((t?t.querySelector(\"#_goober\"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement(\"style\")),{innerHTML:\" \",id:\"_goober\"})).firstChild:t||e,r=e=>{let r=t(e),l=r.data;return r.data=\"\",l},l=/(?:([\\u0080-\\uFFFF\\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\\s*)/g,a=/\\/\\*[^]*?\\*\\/|  +/g,n=/\\n+/g,o=(e,t)=>{let r=\"\",l=\"\",a=\"\";for(let n in e){let c=e[n];\"@\"==n[0]?\"i\"==n[1]?r=n+\" \"+c+\";\":l+=\"f\"==n[1]?o(c,n):n+\"{\"+o(c,\"k\"==n[1]?\"\":t)+\"}\":\"object\"==typeof c?l+=o(c,t?t.replace(/([^,])+/g,e=>n.replace(/([^,]*:\\S+\\([^)]*\\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+\" \"+t:t)):n):null!=c&&(n=/^--/.test(n)?n:n.replace(/[A-Z]/g,\"-$&\").toLowerCase(),a+=o.p?o.p(n,c):n+\":\"+c+\";\")}return r+(t&&a?t+\"{\"+a+\"}\":a)+l},c={},s=e=>{if(\"object\"==typeof e){let t=\"\";for(let r in e)t+=r+s(e[r]);return t}return e},i=(e,t,r,i,p)=>{let u=s(e),d=c[u]||(c[u]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return\"go\"+r})(u));if(!c[d]){let t=u!==e?e:(e=>{let t,r,o=[{}];for(;t=l.exec(e.replace(a,\"\"));)t[4]?o.shift():t[3]?(r=t[3].replace(n,\" \").trim(),o.unshift(o[0][r]=o[0][r]||{})):o[0][t[1]]=t[2].replace(n,\" \").trim();return o[0]})(e);c[d]=o(p?{[\"@keyframes \"+d]:t}:t,r?\"\":\".\"+d)}let f=r&&c.g?c.g:null;return r&&(c.g=c[d]),((e,t,r,l)=>{l?t.data=t.data.replace(l,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(c[d],t,i,f),d},p=(e,t,r)=>e.reduce((e,l,a)=>{let n=t[a];if(n&&n.call){let e=n(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;n=t?\".\"+t:e&&\"object\"==typeof e?e.props?\"\":o(e,\"\"):!1===e?\"\":e}return e+l+(null==n?\"\":n)},\"\");function u(e){let r=this||{},l=e.call?e(r.p):e;return i(l.unshift?l.raw?p(l,[].slice.call(arguments,1),r.p):l.reduce((e,t)=>Object.assign(e,t&&t.call?t(r.p):t),{}):l,t(r.target),r.g,r.o,r.k)}let d,f,g,b=u.bind({g:1}),h=u.bind({k:1});function m(e,t,r,l){o.p=t,d=e,f=r,g=l}function j(e,t){let r=this||{};return function(){let l=arguments;function a(n,o){let c=Object.assign({},n),s=c.className||a.className;r.p=Object.assign({theme:f&&f()},c),r.o=/ *go\\d+/.test(s),c.className=u.apply(r,l)+(s?\" \"+s:\"\"),t&&(c.ref=o);let i=e;return e[0]&&(i=c.as||e,delete c.as),g&&i[0]&&g(c),d(i,c)}return t?t(a):a}}export{u as css,r as extractCss,b as glob,h as keyframes,m as setup,j as styled};\n","\"use client\";\nvar Z=e=>typeof e==\"function\",h=(e,t)=>Z(e)?e(t):e;var W=(()=>{let e=0;return()=>(++e).toString()})(),E=(()=>{let e;return()=>{if(e===void 0&&typeof window<\"u\"){let t=matchMedia(\"(prefers-reduced-motion: reduce)\");e=!t||t.matches}return e}})();import{useEffect as ee,useState as te,useRef as oe}from\"react\";var re=20,k=\"default\";var H=(e,t)=>{let{toastLimit:o}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,o)};case 1:return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case 2:let{toast:s}=t;return H(e,{type:e.toasts.find(r=>r.id===s.id)?1:0,toast:s});case 3:let{toastId:a}=t;return{...e,toasts:e.toasts.map(r=>r.id===a||a===void 0?{...r,dismissed:!0,visible:!1}:r)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(r=>({...r,pauseDuration:r.pauseDuration+i}))}}},v=[],j={toasts:[],pausedAt:void 0,settings:{toastLimit:re}},f={},Y=(e,t=k)=>{f[t]=H(f[t]||j,e),v.forEach(([o,s])=>{o===t&&s(f[t])})},_=e=>Object.keys(f).forEach(t=>Y(e,t)),Q=e=>Object.keys(f).find(t=>f[t].toasts.some(o=>o.id===e)),S=(e=k)=>t=>{Y(t,e)},se={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},V=(e={},t=k)=>{let[o,s]=te(f[t]||j),a=oe(f[t]);ee(()=>(a.current!==f[t]&&s(f[t]),v.push([t,s]),()=>{let r=v.findIndex(([l])=>l===t);r>-1&&v.splice(r,1)}),[t]);let i=o.toasts.map(r=>{var l,g,T;return{...e,...e[r.type],...r,removeDelay:r.removeDelay||((l=e[r.type])==null?void 0:l.removeDelay)||(e==null?void 0:e.removeDelay),duration:r.duration||((g=e[r.type])==null?void 0:g.duration)||(e==null?void 0:e.duration)||se[r.type],style:{...e.style,...(T=e[r.type])==null?void 0:T.style,...r.style}}});return{...o,toasts:i}};var ie=(e,t=\"blank\",o)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:\"status\",\"aria-live\":\"polite\"},message:e,pauseDuration:0,...o,id:(o==null?void 0:o.id)||W()}),P=e=>(t,o)=>{let s=ie(t,e,o);return S(s.toasterId||Q(s.id))({type:2,toast:s}),s.id},n=(e,t)=>P(\"blank\")(e,t);n.error=P(\"error\");n.success=P(\"success\");n.loading=P(\"loading\");n.custom=P(\"custom\");n.dismiss=(e,t)=>{let o={type:3,toastId:e};t?S(t)(o):_(o)};n.dismissAll=e=>n.dismiss(void 0,e);n.remove=(e,t)=>{let o={type:4,toastId:e};t?S(t)(o):_(o)};n.removeAll=e=>n.remove(void 0,e);n.promise=(e,t,o)=>{let s=n.loading(t.loading,{...o,...o==null?void 0:o.loading});return typeof e==\"function\"&&(e=e()),e.then(a=>{let i=t.success?h(t.success,a):void 0;return i?n.success(i,{id:s,...o,...o==null?void 0:o.success}):n.dismiss(s),a}).catch(a=>{let i=t.error?h(t.error,a):void 0;i?n.error(i,{id:s,...o,...o==null?void 0:o.error}):n.dismiss(s)}),e};import{useEffect as X,useCallback as A,useRef as ne}from\"react\";var ce=1e3,w=(e,t=\"default\")=>{let{toasts:o,pausedAt:s}=V(e,t),a=ne(new Map).current,i=A((c,m=ce)=>{if(a.has(c))return;let p=setTimeout(()=>{a.delete(c),r({type:4,toastId:c})},m);a.set(c,p)},[]);X(()=>{if(s)return;let c=Date.now(),m=o.map(p=>{if(p.duration===1/0)return;let R=(p.duration||0)+p.pauseDuration-(c-p.createdAt);if(R<0){p.visible&&n.dismiss(p.id);return}return setTimeout(()=>n.dismiss(p.id,t),R)});return()=>{m.forEach(p=>p&&clearTimeout(p))}},[o,s,t]);let r=A(S(t),[t]),l=A(()=>{r({type:5,time:Date.now()})},[r]),g=A((c,m)=>{r({type:1,toast:{id:c,height:m}})},[r]),T=A(()=>{s&&r({type:6,time:Date.now()})},[s,r]),d=A((c,m)=>{let{reverseOrder:p=!1,gutter:R=8,defaultPosition:z}=m||{},O=o.filter(u=>(u.position||z)===(c.position||z)&&u.height),K=O.findIndex(u=>u.id===c.id),B=O.filter((u,I)=>I<K&&u.visible).length;return O.filter(u=>u.visible).slice(...p?[B+1]:[0,B]).reduce((u,I)=>u+(I.height||0)+R,0)},[o]);return X(()=>{o.forEach(c=>{if(c.dismissed)i(c.id,c.removeDelay);else{let m=a.get(c.id);m&&(clearTimeout(m),a.delete(c.id))}})},[o,i]),{toasts:o,handlers:{updateHeight:g,startPause:l,endPause:T,calculateOffset:d}}};import*as y from\"react\";import{styled as J,keyframes as G}from\"goober\";import*as b from\"react\";import{styled as U,keyframes as xe}from\"goober\";import{styled as pe,keyframes as M}from\"goober\";var de=M`\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}`,me=M`\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}`,le=M`\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}`,C=pe(\"div\")`\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ${e=>e.primary||\"#ff4b4b\"};\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: ${de} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: ${me} 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ${e=>e.secondary||\"#fff\"};\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: ${le} 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n`;import{styled as ue,keyframes as fe}from\"goober\";var Te=fe`\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n`,F=ue(\"div\")`\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ${e=>e.secondary||\"#e0e0e0\"};\n  border-right-color: ${e=>e.primary||\"#616161\"};\n  animation: ${Te} 1s linear infinite;\n`;import{styled as ye,keyframes as q}from\"goober\";var ge=q`\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}`,he=q`\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}`,L=ye(\"div\")`\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ${e=>e.primary||\"#61d345\"};\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: ${ge} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: ${he} 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ${e=>e.secondary||\"#fff\"};\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n`;var be=U(\"div\")`\n  position: absolute;\n`,Se=U(\"div\")`\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n`,Ae=xe`\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}`,Pe=U(\"div\")`\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: ${Ae} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n`,$=({toast:e})=>{let{icon:t,type:o,iconTheme:s}=e;return t!==void 0?typeof t==\"string\"?b.createElement(Pe,null,t):t:o===\"blank\"?null:b.createElement(Se,null,b.createElement(F,{...s}),o!==\"loading\"&&b.createElement(be,null,o===\"error\"?b.createElement(C,{...s}):b.createElement(L,{...s})))};var Re=e=>`\n0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,Ee=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}\n`,ve=\"0%{opacity:0;} 100%{opacity:1;}\",De=\"0%{opacity:1;} 100%{opacity:0;}\",Oe=J(\"div\")`\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n`,Ie=J(\"div\")`\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n`,ke=(e,t)=>{let s=e.includes(\"top\")?1:-1,[a,i]=E()?[ve,De]:[Re(s),Ee(s)];return{animation:t?`${G(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${G(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},N=y.memo(({toast:e,position:t,style:o,children:s})=>{let a=e.height?ke(e.position||t||\"top-center\",e.visible):{opacity:0},i=y.createElement($,{toast:e}),r=y.createElement(Ie,{...e.ariaProps},h(e.message,e));return y.createElement(Oe,{className:e.className,style:{...a,...o,...e.style}},typeof s==\"function\"?s({icon:i,message:r}):y.createElement(y.Fragment,null,i,r))});import{css as _e,setup as Ve}from\"goober\";import*as x from\"react\";Ve(x.createElement);var we=({id:e,className:t,style:o,onHeightUpdate:s,children:a})=>{let i=x.useCallback(r=>{if(r){let l=()=>{let g=r.getBoundingClientRect().height;s(e,g)};l(),new MutationObserver(l).observe(r,{subtree:!0,childList:!0,characterData:!0})}},[e,s]);return x.createElement(\"div\",{ref:i,className:t,style:o},a)},Me=(e,t)=>{let o=e.includes(\"top\"),s=o?{top:0}:{bottom:0},a=e.includes(\"center\")?{justifyContent:\"center\"}:e.includes(\"right\")?{justifyContent:\"flex-end\"}:{};return{left:0,right:0,display:\"flex\",position:\"absolute\",transition:E()?void 0:\"all 230ms cubic-bezier(.21,1.02,.73,1)\",transform:`translateY(${t*(o?1:-1)}px)`,...s,...a}},Ce=_e`\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n`,D=16,Fe=({reverseOrder:e,position:t=\"top-center\",toastOptions:o,gutter:s,children:a,toasterId:i,containerStyle:r,containerClassName:l})=>{let{toasts:g,handlers:T}=w(o,i);return x.createElement(\"div\",{\"data-rht-toaster\":i||\"\",style:{position:\"fixed\",zIndex:9999,top:D,left:D,right:D,bottom:D,pointerEvents:\"none\",...r},className:l,onMouseEnter:T.startPause,onMouseLeave:T.endPause},g.map(d=>{let c=d.position||t,m=T.calculateOffset(d,{reverseOrder:e,gutter:s,defaultPosition:t}),p=Me(c,m);return x.createElement(we,{id:d.id,key:d.id,onHeightUpdate:T.updateHeight,className:d.visible?Ce:\"\",style:p},d.type===\"custom\"?h(d.message,d):a?a(d):x.createElement(N,{toast:d,position:c}))}))};var zt=n;export{L as CheckmarkIcon,C as ErrorIcon,F as LoaderIcon,N as ToastBar,$ as ToastIcon,Fe as Toaster,zt as default,h as resolveValue,n as toast,w as useToaster,V as useToasterStore};\n//# sourceMappingURL=index.mjs.map","/**\n * lucide-react v0.288.0 - ISC\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ color = \"currentColor\", size = 24, strokeWidth = 2, absoluteStrokeWidth, children, ...rest }, ref) => createElement(\n      \"svg\",\n      {\n        ref,\n        ...defaultAttributes,\n        width: size,\n        height: size,\n        stroke: color,\n        strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n        className: `lucide lucide-${toKebabCase(iconName)}`,\n        ...rest\n      },\n      [\n        ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n        ...(Array.isArray(children) ? children : [children]) || []\n      ]\n    )\n  );\n  Component.displayName = `${iconName}`;\n  return Component;\n};\n\nexport { createLucideIcon as default, toKebabCase };\n//# sourceMappingURL=createLucideIcon.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Activity = createLucideIcon(\"Activity\", [\n  [\"path\", { d: \"M22 12h-4l-3 9L9 3l-3 9H2\", key: \"d5dnw9\" }]\n]);\n\nexport { Activity as default };\n//# sourceMappingURL=activity.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertCircle = createLucideIcon(\"AlertCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n]);\n\nexport { AlertCircle as default };\n//# sourceMappingURL=alert-circle.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertTriangle = createLucideIcon(\"AlertTriangle\", [\n  [\n    \"path\",\n    {\n      d: \"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z\",\n      key: \"c3ski4\"\n    }\n  ],\n  [\"path\", { d: \"M12 9v4\", key: \"juzpu7\" }],\n  [\"path\", { d: \"M12 17h.01\", key: \"p32p05\" }]\n]);\n\nexport { AlertTriangle as default };\n//# sourceMappingURL=alert-triangle.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst BarChart3 = createLucideIcon(\"BarChart3\", [\n  [\"path\", { d: \"M3 3v18h18\", key: \"1s2lah\" }],\n  [\"path\", { d: \"M18 17V9\", key: \"2bz60n\" }],\n  [\"path\", { d: \"M13 17V5\", key: \"1frdt8\" }],\n  [\"path\", { d: \"M8 17v-3\", key: \"17ska0\" }]\n]);\n\nexport { BarChart3 as default };\n//# sourceMappingURL=bar-chart-3.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bell = createLucideIcon(\"Bell\", [\n  [\"path\", { d: \"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9\", key: \"1qo2s2\" }],\n  [\"path\", { d: \"M10.3 21a1.94 1.94 0 0 0 3.4 0\", key: \"qgo35s\" }]\n]);\n\nexport { Bell as default };\n//# sourceMappingURL=bell.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Brain = createLucideIcon(\"Brain\", [\n  [\n    \"path\",\n    {\n      d: \"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z\",\n      key: \"1mhkh5\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z\",\n      key: \"1d6s00\"\n    }\n  ]\n]);\n\nexport { Brain as default };\n//# sourceMappingURL=brain.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Calendar = createLucideIcon(\"Calendar\", [\n  [\n    \"rect\",\n    {\n      width: \"18\",\n      height: \"18\",\n      x: \"3\",\n      y: \"4\",\n      rx: \"2\",\n      ry: \"2\",\n      key: \"eu3xkr\"\n    }\n  ],\n  [\"line\", { x1: \"16\", x2: \"16\", y1: \"2\", y2: \"6\", key: \"m3sa8f\" }],\n  [\"line\", { x1: \"8\", x2: \"8\", y1: \"2\", y2: \"6\", key: \"18kwsl\" }],\n  [\"line\", { x1: \"3\", x2: \"21\", y1: \"10\", y2: \"10\", key: \"xt86sb\" }]\n]);\n\nexport { Calendar as default };\n//# sourceMappingURL=calendar.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckCircle2 = createLucideIcon(\"CheckCircle2\", [\n  [\n    \"path\",\n    {\n      d: \"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z\",\n      key: \"14v8dr\"\n    }\n  ],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n]);\n\nexport { CheckCircle2 as default };\n//# sourceMappingURL=check-circle-2.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CheckCircle = createLucideIcon(\"CheckCircle\", [\n  [\"path\", { d: \"M22 11.08V12a10 10 0 1 1-5.93-9.14\", key: \"g774vq\" }],\n  [\"polyline\", { points: \"22 4 12 14.01 9 11.01\", key: \"6xbx8j\" }]\n]);\n\nexport { CheckCircle as default };\n//# sourceMappingURL=check-circle.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Check = createLucideIcon(\"Check\", [\n  [\"polyline\", { points: \"20 6 9 17 4 12\", key: \"10jjfj\" }]\n]);\n\nexport { Check as default };\n//# sourceMappingURL=check.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronLeft = createLucideIcon(\"ChevronLeft\", [\n  [\"path\", { d: \"m15 18-6-6 6-6\", key: \"1wnfg3\" }]\n]);\n\nexport { ChevronLeft as default };\n//# sourceMappingURL=chevron-left.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ChevronRight = createLucideIcon(\"ChevronRight\", [\n  [\"path\", { d: \"m9 18 6-6-6-6\", key: \"mthhwq\" }]\n]);\n\nexport { ChevronRight as default };\n//# sourceMappingURL=chevron-right.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Clock = createLucideIcon(\"Clock\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"polyline\", { points: \"12 6 12 12 16 14\", key: \"68esgv\" }]\n]);\n\nexport { Clock as default };\n//# sourceMappingURL=clock.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Coffee = createLucideIcon(\"Coffee\", [\n  [\"path\", { d: \"M17 8h1a4 4 0 1 1 0 8h-1\", key: \"jx4kbh\" }],\n  [\"path\", { d: \"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z\", key: \"1bxrl0\" }],\n  [\"line\", { x1: \"6\", x2: \"6\", y1: \"2\", y2: \"4\", key: \"1cr9l3\" }],\n  [\"line\", { x1: \"10\", x2: \"10\", y1: \"2\", y2: \"4\", key: \"170wym\" }],\n  [\"line\", { x1: \"14\", x2: \"14\", y1: \"2\", y2: \"4\", key: \"1c5f70\" }]\n]);\n\nexport { Coffee as default };\n//# sourceMappingURL=coffee.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Database = createLucideIcon(\"Database\", [\n  [\"ellipse\", { cx: \"12\", cy: \"5\", rx: \"9\", ry: \"3\", key: \"msslwz\" }],\n  [\"path\", { d: \"M3 5V19A9 3 0 0 0 21 19V5\", key: \"1wlel7\" }],\n  [\"path\", { d: \"M3 12A9 3 0 0 0 21 12\", key: \"mv7ke4\" }]\n]);\n\nexport { Database as default };\n//# sourceMappingURL=database.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Download = createLucideIcon(\"Download\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"7 10 12 15 17 10\", key: \"2ggqvy\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"15\", y2: \"3\", key: \"1vk2je\" }]\n]);\n\nexport { Download as default };\n//# sourceMappingURL=download.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst FileText = createLucideIcon(\"FileText\", [\n  [\n    \"path\",\n    {\n      d: \"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z\",\n      key: \"1nnpy2\"\n    }\n  ],\n  [\"polyline\", { points: \"14 2 14 8 20 8\", key: \"1ew0cm\" }],\n  [\"line\", { x1: \"16\", x2: \"8\", y1: \"13\", y2: \"13\", key: \"14keom\" }],\n  [\"line\", { x1: \"16\", x2: \"8\", y1: \"17\", y2: \"17\", key: \"17nazh\" }],\n  [\"line\", { x1: \"10\", x2: \"8\", y1: \"9\", y2: \"9\", key: \"1a5vjj\" }]\n]);\n\nexport { FileText as default };\n//# sourceMappingURL=file-text.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Filter = createLucideIcon(\"Filter\", [\n  [\n    \"polygon\",\n    { points: \"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3\", key: \"1yg77f\" }\n  ]\n]);\n\nexport { Filter as default };\n//# sourceMappingURL=filter.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Heart = createLucideIcon(\"Heart\", [\n  [\n    \"path\",\n    {\n      d: \"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z\",\n      key: \"c3ymky\"\n    }\n  ]\n]);\n\nexport { Heart as default };\n//# sourceMappingURL=heart.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Home = createLucideIcon(\"Home\", [\n  [\n    \"path\",\n    { d: \"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\", key: \"y5dka4\" }\n  ],\n  [\"polyline\", { points: \"9 22 9 12 15 12 15 22\", key: \"e2us08\" }]\n]);\n\nexport { Home as default };\n//# sourceMappingURL=home.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Lightbulb = createLucideIcon(\"Lightbulb\", [\n  [\n    \"path\",\n    {\n      d: \"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5\",\n      key: \"1gvzjb\"\n    }\n  ],\n  [\"path\", { d: \"M9 18h6\", key: \"x1upvd\" }],\n  [\"path\", { d: \"M10 22h4\", key: \"ceow96\" }]\n]);\n\nexport { Lightbulb as default };\n//# sourceMappingURL=lightbulb.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Loader = createLucideIcon(\"Loader\", [\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"2\", y2: \"6\", key: \"gza1u7\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"18\", y2: \"22\", key: \"1qhbu9\" }],\n  [\"line\", { x1: \"4.93\", x2: \"7.76\", y1: \"4.93\", y2: \"7.76\", key: \"xae44r\" }],\n  [\n    \"line\",\n    { x1: \"16.24\", x2: \"19.07\", y1: \"16.24\", y2: \"19.07\", key: \"bxnmvf\" }\n  ],\n  [\"line\", { x1: \"2\", x2: \"6\", y1: \"12\", y2: \"12\", key: \"89khin\" }],\n  [\"line\", { x1: \"18\", x2: \"22\", y1: \"12\", y2: \"12\", key: \"pb8tfm\" }],\n  [\"line\", { x1: \"4.93\", x2: \"7.76\", y1: \"19.07\", y2: \"16.24\", key: \"1uxjnu\" }],\n  [\"line\", { x1: \"16.24\", x2: \"19.07\", y1: \"7.76\", y2: \"4.93\", key: \"6duxfx\" }]\n]);\n\nexport { Loader as default };\n//# sourceMappingURL=loader.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Mail = createLucideIcon(\"Mail\", [\n  [\n    \"rect\",\n    { width: \"20\", height: \"16\", x: \"2\", y: \"4\", rx: \"2\", key: \"18n3k1\" }\n  ],\n  [\"path\", { d: \"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7\", key: \"1ocrg3\" }]\n]);\n\nexport { Mail as default };\n//# sourceMappingURL=mail.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MapPin = createLucideIcon(\"MapPin\", [\n  [\n    \"path\",\n    { d: \"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z\", key: \"2oe9fu\" }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"10\", r: \"3\", key: \"ilqhr7\" }]\n]);\n\nexport { MapPin as default };\n//# sourceMappingURL=map-pin.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Menu = createLucideIcon(\"Menu\", [\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"12\", y2: \"12\", key: \"1e0a9i\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"6\", y2: \"6\", key: \"1owob3\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"18\", y2: \"18\", key: \"yk5zj1\" }]\n]);\n\nexport { Menu as default };\n//# sourceMappingURL=menu.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MessageSquare = createLucideIcon(\"MessageSquare\", [\n  [\n    \"path\",\n    {\n      d: \"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\",\n      key: \"1lielz\"\n    }\n  ]\n]);\n\nexport { MessageSquare as default };\n//# sourceMappingURL=message-square.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Minus = createLucideIcon(\"Minus\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }]\n]);\n\nexport { Minus as default };\n//# sourceMappingURL=minus.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst MoreVertical = createLucideIcon(\"MoreVertical\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"1\", key: \"41hilf\" }],\n  [\"circle\", { cx: \"12\", cy: \"5\", r: \"1\", key: \"gxeob9\" }],\n  [\"circle\", { cx: \"12\", cy: \"19\", r: \"1\", key: \"lyex9k\" }]\n]);\n\nexport { MoreVertical as default };\n//# sourceMappingURL=more-vertical.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Package = createLucideIcon(\"Package\", [\n  [\"path\", { d: \"m7.5 4.27 9 5.15\", key: \"1c824w\" }],\n  [\n    \"path\",\n    {\n      d: \"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z\",\n      key: \"hh9hay\"\n    }\n  ],\n  [\"path\", { d: \"m3.3 7 8.7 5 8.7-5\", key: \"g66t2b\" }],\n  [\"path\", { d: \"M12 22V12\", key: \"d0xqtd\" }]\n]);\n\nexport { Package as default };\n//# sourceMappingURL=package.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Pen = createLucideIcon(\"Pen\", [\n  [\n    \"path\",\n    { d: \"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z\", key: \"5qss01\" }\n  ]\n]);\n\nexport { Pen as default };\n//# sourceMappingURL=pen.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Phone = createLucideIcon(\"Phone\", [\n  [\n    \"path\",\n    {\n      d: \"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z\",\n      key: \"foiqr5\"\n    }\n  ]\n]);\n\nexport { Phone as default };\n//# sourceMappingURL=phone.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Pill = createLucideIcon(\"Pill\", [\n  [\n    \"path\",\n    {\n      d: \"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z\",\n      key: \"wa1lgi\"\n    }\n  ],\n  [\"path\", { d: \"m8.5 8.5 7 7\", key: \"rvfmvr\" }]\n]);\n\nexport { Pill as default };\n//# sourceMappingURL=pill.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Play = createLucideIcon(\"Play\", [\n  [\"polygon\", { points: \"5 3 19 12 5 21 5 3\", key: \"191637\" }]\n]);\n\nexport { Play as default };\n//# sourceMappingURL=play.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Plus = createLucideIcon(\"Plus\", [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n]);\n\nexport { Plus as default };\n//# sourceMappingURL=plus.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst RefreshCw = createLucideIcon(\"RefreshCw\", [\n  [\n    \"path\",\n    { d: \"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8\", key: \"v9h5vc\" }\n  ],\n  [\"path\", { d: \"M21 3v5h-5\", key: \"1q7to0\" }],\n  [\n    \"path\",\n    { d: \"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16\", key: \"3uifl3\" }\n  ],\n  [\"path\", { d: \"M8 16H3v5\", key: \"1cv678\" }]\n]);\n\nexport { RefreshCw as default };\n//# sourceMappingURL=refresh-cw.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Save = createLucideIcon(\"Save\", [\n  [\n    \"path\",\n    {\n      d: \"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z\",\n      key: \"1owoqh\"\n    }\n  ],\n  [\"polyline\", { points: \"17 21 17 13 7 13 7 21\", key: \"1md35c\" }],\n  [\"polyline\", { points: \"7 3 7 8 15 8\", key: \"8nz8an\" }]\n]);\n\nexport { Save as default };\n//# sourceMappingURL=save.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Search = createLucideIcon(\"Search\", [\n  [\"circle\", { cx: \"11\", cy: \"11\", r: \"8\", key: \"4ej97u\" }],\n  [\"path\", { d: \"m21 21-4.3-4.3\", key: \"1qie3q\" }]\n]);\n\nexport { Search as default };\n//# sourceMappingURL=search.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings = createLucideIcon(\"Settings\", [\n  [\n    \"path\",\n    {\n      d: \"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z\",\n      key: \"1qme2f\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Settings as default };\n//# sourceMappingURL=settings.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ShieldAlert = createLucideIcon(\"ShieldAlert\", [\n  [\"path\", { d: \"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10\", key: \"1irkt0\" }],\n  [\"path\", { d: \"M12 8v4\", key: \"1got3b\" }],\n  [\"path\", { d: \"M12 16h.01\", key: \"1drbdi\" }]\n]);\n\nexport { ShieldAlert as default };\n//# sourceMappingURL=shield-alert.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Shield = createLucideIcon(\"Shield\", [\n  [\"path\", { d: \"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10\", key: \"1irkt0\" }]\n]);\n\nexport { Shield as default };\n//# sourceMappingURL=shield.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ShoppingCart = createLucideIcon(\"ShoppingCart\", [\n  [\"circle\", { cx: \"8\", cy: \"21\", r: \"1\", key: \"jimo8o\" }],\n  [\"circle\", { cx: \"19\", cy: \"21\", r: \"1\", key: \"13723u\" }],\n  [\n    \"path\",\n    {\n      d: \"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12\",\n      key: \"9zh506\"\n    }\n  ]\n]);\n\nexport { ShoppingCart as default };\n//# sourceMappingURL=shopping-cart.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Star = createLucideIcon(\"Star\", [\n  [\n    \"polygon\",\n    {\n      points: \"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\",\n      key: \"8f66p6\"\n    }\n  ]\n]);\n\nexport { Star as default };\n//# sourceMappingURL=star.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Target = createLucideIcon(\"Target\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"6\", key: \"1vlfrh\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"2\", key: \"1c9p78\" }]\n]);\n\nexport { Target as default };\n//# sourceMappingURL=target.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ToggleLeft = createLucideIcon(\"ToggleLeft\", [\n  [\n    \"rect\",\n    {\n      width: \"20\",\n      height: \"12\",\n      x: \"2\",\n      y: \"6\",\n      rx: \"6\",\n      ry: \"6\",\n      key: \"f2vt7d\"\n    }\n  ],\n  [\"circle\", { cx: \"8\", cy: \"12\", r: \"2\", key: \"1nvbw3\" }]\n]);\n\nexport { ToggleLeft as default };\n//# sourceMappingURL=toggle-left.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ToggleRight = createLucideIcon(\"ToggleRight\", [\n  [\n    \"rect\",\n    {\n      width: \"20\",\n      height: \"12\",\n      x: \"2\",\n      y: \"6\",\n      rx: \"6\",\n      ry: \"6\",\n      key: \"f2vt7d\"\n    }\n  ],\n  [\"circle\", { cx: \"16\", cy: \"12\", r: \"2\", key: \"4ma0v8\" }]\n]);\n\nexport { ToggleRight as default };\n//# sourceMappingURL=toggle-right.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Trash2 = createLucideIcon(\"Trash2\", [\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6\", key: \"4alrt4\" }],\n  [\"path\", { d: \"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2\", key: \"v07s0e\" }],\n  [\"line\", { x1: \"10\", x2: \"10\", y1: \"11\", y2: \"17\", key: \"1uufr5\" }],\n  [\"line\", { x1: \"14\", x2: \"14\", y1: \"11\", y2: \"17\", key: \"xtxkd\" }]\n]);\n\nexport { Trash2 as default };\n//# sourceMappingURL=trash-2.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst TrendingDown = createLucideIcon(\"TrendingDown\", [\n  [\"polyline\", { points: \"22 17 13.5 8.5 8.5 13.5 2 7\", key: \"1r2t7k\" }],\n  [\"polyline\", { points: \"16 17 22 17 22 11\", key: \"11uiuu\" }]\n]);\n\nexport { TrendingDown as default };\n//# sourceMappingURL=trending-down.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst TrendingUp = createLucideIcon(\"TrendingUp\", [\n  [\"polyline\", { points: \"22 7 13.5 15.5 8.5 10.5 2 17\", key: \"126l90\" }],\n  [\"polyline\", { points: \"16 7 22 7 22 13\", key: \"kwv8wd\" }]\n]);\n\nexport { TrendingUp as default };\n//# sourceMappingURL=trending-up.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Upload = createLucideIcon(\"Upload\", [\n  [\"path\", { d: \"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\", key: \"ih7n3h\" }],\n  [\"polyline\", { points: \"17 8 12 3 7 8\", key: \"t8dd8p\" }],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"3\", y2: \"15\", key: \"widbto\" }]\n]);\n\nexport { Upload as default };\n//# sourceMappingURL=upload.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst User = createLucideIcon(\"User\", [\n  [\"path\", { d: \"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2\", key: \"975kel\" }],\n  [\"circle\", { cx: \"12\", cy: \"7\", r: \"4\", key: \"17ys0d\" }]\n]);\n\nexport { User as default };\n//# sourceMappingURL=user.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst XCircle = createLucideIcon(\"XCircle\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m15 9-6 6\", key: \"1uzhvr\" }],\n  [\"path\", { d: \"m9 9 6 6\", key: \"z0biqf\" }]\n]);\n\nexport { XCircle as default };\n//# sourceMappingURL=x-circle.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst X = createLucideIcon(\"X\", [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n]);\n\nexport { X as default };\n//# sourceMappingURL=x.js.map\n","/**\n * lucide-react v0.288.0 - ISC\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Zap = createLucideIcon(\"Zap\", [\n  [\n    \"polygon\",\n    { points: \"13 2 3 14 12 14 11 22 21 10 12 10 13 2\", key: \"45s27k\" }\n  ]\n]);\n\nexport { Zap as default };\n//# sourceMappingURL=zap.js.map\n","import { clsx, type ClassValue } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\nimport { format, isToday as isDateToday, isSameDay as isDateSame, formatDistanceToNow } from 'date-fns';\n\n/**\n * Utility function to merge Tailwind CSS classes\n */\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\n/**\n * Generate a unique ID\n */\nexport function generateId(): string {\n  return `${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n}\n\n/**\n * Check if a date is today\n */\nexport function isToday(date: Date): boolean {\n  return isDateToday(date);\n}\n\n/**\n * Check if two dates are the same day\n */\nexport function isSameDay(date1: Date, date2: Date): boolean {\n  return isDateSame(date1, date2);\n}\n\n/**\n * Format a date for display\n */\nexport function formatDate(date: Date | string | number | undefined | null, formatString = 'MMM dd, yyyy'): string {\n  if (!date) return 'N/A';\n  \n  const dateObj = date instanceof Date ? date : new Date(date);\n  \n  // Check if the date is valid\n  if (isNaN(dateObj.getTime())) {\n    return 'Invalid Date';\n  }\n  \n  return format(dateObj, formatString);\n}\n\n/**\n * Format a time for display\n */\nexport function formatTime(date: Date | string | number | undefined | null, use24Hour = false): string {\n  if (!date) return 'N/A';\n  \n  const dateObj = date instanceof Date ? date : new Date(date);\n  \n  // Check if the date is valid\n  if (isNaN(dateObj.getTime())) {\n    return 'Invalid Time';\n  }\n  \n  return format(dateObj, use24Hour ? 'HH:mm' : 'h:mm a');\n}\n\n/**\n * Get relative time (e.g., \"2 hours ago\")\n */\nexport function getRelativeTime(date: Date): string {\n  return formatDistanceToNow(date, { addSuffix: true });\n}\n\n/**\n * Convert time string (HH:MM) to Date object for today\n */\nexport function timeStringToDate(timeString: string): Date {\n  const [hours, minutes] = timeString.split(':').map(Number);\n  const date = new Date();\n  date.setHours(hours, minutes, 0, 0);\n  return date;\n}\n\n/**\n * Convert Date object to time string (HH:MM)\n */\nexport function dateToTimeString(date: Date): string {\n  return format(date, 'HH:mm');\n}\n\n/**\n * Validate email format\n */\nexport function isValidEmail(email: string): boolean {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n}\n\n/**\n * Validate phone number format\n */\nexport function isValidPhone(phone: string): boolean {\n  const phoneRegex = /^\\+?[\\d\\s\\-\\(\\)]{10,}$/;\n  return phoneRegex.test(phone);\n}\n\n/**\n * Capitalize first letter of each word\n */\nexport function capitalizeWords(str: string): string {\n  return str.replace(/\\b\\w/g, (char) => char.toUpperCase());\n}\n\n/**\n * Truncate text to specified length\n */\nexport function truncateText(text: string, maxLength: number): string {\n  if (text.length <= maxLength) return text;\n  return text.slice(0, maxLength).trim() + '...';\n}\n\n/**\n * Debounce function\n */\nexport function debounce<T extends (...args: any[]) => any>(\n  func: T,\n  delay: number\n): (...args: Parameters<T>) => void {\n  let timeoutId: ReturnType<typeof setTimeout>;\n  return (...args: Parameters<T>) => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => func(...args), delay);\n  };\n}\n\n/**\n * Throttle function\n */\nexport function throttle<T extends (...args: any[]) => any>(\n  func: T,\n  limit: number\n): (...args: Parameters<T>) => void {\n  let lastCall = 0;\n  return (...args: Parameters<T>) => {\n    const now = Date.now();\n    if (now - lastCall >= limit) {\n      lastCall = now;\n      func(...args);\n    }\n  };\n}\n\n/**\n * Deep clone an object\n */\nexport function deepClone<T>(obj: T): T {\n  if (obj === null || typeof obj !== 'object') return obj;\n  if (obj instanceof Date) return new Date(obj.getTime()) as unknown as T;\n  if (Array.isArray(obj)) return obj.map(deepClone) as unknown as T;\n  \n  const cloned = {} as T;\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      cloned[key] = deepClone(obj[key]);\n    }\n  }\n  return cloned;\n}\n\n/**\n * Check if object is empty\n */\nexport function isEmpty(obj: any): boolean {\n  if (obj == null) return true;\n  if (Array.isArray(obj) || typeof obj === 'string') return obj.length === 0;\n  if (typeof obj === 'object') return Object.keys(obj).length === 0;\n  return false;\n}\n\n/**\n * Generate a random color for medications\n */\nexport function generateRandomColor(): string {\n  const colors = [\n    '#3b82f6', // blue\n    '#ef4444', // red\n    '#10b981', // emerald\n    '#f59e0b', // amber\n    '#8b5cf6', // violet\n    '#ec4899', // pink\n    '#06b6d4', // cyan\n    '#84cc16', // lime\n    '#f97316', // orange\n    '#6366f1', // indigo\n  ];\n  return colors[Math.floor(Math.random() * colors.length)];\n}\n\n/**\n * Calculate adherence percentage\n */\nexport function calculateAdherence(taken: number, total: number): number {\n  if (total === 0 || isNaN(taken) || isNaN(total)) return 0;\n  const percentage = Math.round((taken / total) * 100);\n  return isNaN(percentage) ? 0 : percentage;\n}\n\n/**\n * Get adherence status color\n */\nexport function getAdherenceColor(percentage: number): string {\n  if (percentage >= 90) return 'text-green-600';\n  if (percentage >= 75) return 'text-yellow-600';\n  if (percentage >= 50) return 'text-orange-600';\n  return 'text-red-600';\n}\n\n/**\n * Format medication dosage for display\n */\nexport function formatDosage(dosage: string, unit: string): string {\n  return `${dosage} ${unit}`;\n}\n\n// NEW: Multiple Pills Display Functions\nexport function formatPillDisplay(medication: any): string {\n  if (!medication.useMultiplePills || !medication.pillConfigurations || !medication.doseConfigurations) {\n    return `${medication.dosage} ${medication.unit}`;\n  }\n\n  const defaultDoseConfig = medication.doseConfigurations?.find(\n    (config: any) => config.id === medication.defaultDoseConfigurationId\n  ) || medication.doseConfigurations?.[0];\n\n  if (!defaultDoseConfig) {\n    return `${medication.dosage} ${medication.unit}`;\n  }\n\n  const pillDescriptions = defaultDoseConfig.pillComponents.map((component: any) => {\n    const pillConfig = medication.pillConfigurations.find(\n      (config: any) => config.id === component.pillConfigurationId\n    );\n    if (!pillConfig) return '';\n    \n    const quantity = component.quantity;\n    const strength = pillConfig.strength;\n    const unit = pillConfig.unit;\n    const color = pillConfig.color;\n    \n    if (quantity === 1) {\n      return `1  ${strength}${unit}${color ? ` ${color}` : ''} pill`;\n    } else if (quantity % 1 === 0) {\n      return `${quantity}  ${strength}${unit}${color ? ` ${color}` : ''} pills`;\n    } else {\n      return `${quantity}  ${strength}${unit}${color ? ` ${color}` : ''} pill`;\n    }\n  }).filter(Boolean);\n\n  if (pillDescriptions.length === 0) {\n    return `${medication.dosage} ${medication.unit}`;\n  }\n\n  const totalDose = defaultDoseConfig.totalDoseAmount;\n  const totalUnit = defaultDoseConfig.totalDoseUnit;\n  \n  if (pillDescriptions.length === 1) {\n    return `${pillDescriptions[0]} (${totalDose}${totalUnit} total)`;\n  } else {\n    return `${pillDescriptions.join(' + ')} (${totalDose}${totalUnit} total)`;\n  }\n}\n\nexport function formatPillDisplayShort(medication: any): string {\n  if (!medication.useMultiplePills || !medication.pillConfigurations || !medication.doseConfigurations) {\n    return `${medication.dosage} ${medication.unit}`;\n  }\n\n  const defaultDoseConfig = medication.doseConfigurations?.find(\n    (config: any) => config.id === medication.defaultDoseConfigurationId\n  ) || medication.doseConfigurations?.[0];\n\n  if (!defaultDoseConfig) {\n    return `${medication.dosage} ${medication.unit}`;\n  }\n\n  const totalPills = defaultDoseConfig.pillComponents.reduce(\n    (sum: number, component: any) => sum + component.quantity, 0\n  );\n  \n  if (totalPills === 1) {\n    return `1 pill (${defaultDoseConfig.totalDoseAmount}${defaultDoseConfig.totalDoseUnit})`;\n  } else if (totalPills % 1 === 0) {\n    return `${totalPills} pills (${defaultDoseConfig.totalDoseAmount}${defaultDoseConfig.totalDoseUnit})`;\n  } else {\n    return `${totalPills} pills (${defaultDoseConfig.totalDoseAmount}${defaultDoseConfig.totalDoseUnit})`;\n  }\n}\n\nexport function getPillComponents(medication: any): any[] {\n  if (!medication.useMultiplePills || !medication.pillConfigurations || !medication.doseConfigurations) {\n    return [];\n  }\n\n  const defaultDoseConfig = medication.doseConfigurations?.find(\n    (config: any) => config.id === medication.defaultDoseConfigurationId\n  ) || medication.doseConfigurations?.[0];\n\n  if (!defaultDoseConfig) return [];\n\n  return defaultDoseConfig.pillComponents.map((component: any) => {\n    const pillConfig = medication.pillConfigurations.find(\n      (config: any) => config.id === component.pillConfigurationId\n    );\n    return {\n      ...component,\n      pillConfig,\n      displayText: pillConfig ? \n        `${component.quantity}  ${pillConfig.strength}${pillConfig.unit}${pillConfig.color ? ` ${pillConfig.color}` : ''}` :\n        'Unknown pill'\n    };\n  }).filter((comp: any) => comp.pillConfig);\n}\n\n/**\n * Parse frequency to human readable format\n */\nexport function formatFrequency(frequency: string): string {\n  const frequencyMap: Record<string, string> = {\n    'as-needed': 'As needed',\n    'once-daily': 'Once daily',\n    'twice-daily': 'Twice daily',\n    'three-times-daily': '3 times daily',\n    'four-times-daily': '4 times daily',\n    'every-other-day': 'Every other day',\n    'weekly': 'Weekly',\n    'monthly': 'Monthly',\n    'custom': 'Custom schedule',\n  };\n  return frequencyMap[frequency] || frequency;\n}\n\n/**\n * Sort medications by name\n */\nexport function sortMedicationsByName<T extends { name: string }>(medications: T[]): T[] {\n  return [...medications].sort((a, b) => a.name.localeCompare(b.name));\n}\n\n/**\n * Filter medications by search term\n */\nexport function filterMedicationsBySearch<T extends { name: string }>(\n  medications: T[],\n  searchTerm: string\n): T[] {\n  if (!searchTerm.trim()) return medications;\n  \n  const term = searchTerm.toLowerCase();\n  return medications.filter((med) =>\n    med.name.toLowerCase().includes(term)\n  );\n}\n\n/**\n * Local storage helpers\n */\nexport const storage = {\n  get<T>(key: string, defaultValue: T): T {\n    try {\n      const item = localStorage.getItem(key);\n      return item ? JSON.parse(item) : defaultValue;\n    } catch {\n      return defaultValue;\n    }\n  },\n\n  set<T>(key: string, value: T): void {\n    try {\n      localStorage.setItem(key, JSON.stringify(value));\n    } catch (error) {\n      console.error('Failed to save to localStorage:', error);\n    }\n  },\n\n  remove(key: string): void {\n    try {\n      localStorage.removeItem(key);\n    } catch (error) {\n      console.error('Failed to remove from localStorage:', error);\n    }\n  },\n\n  clear(): void {\n    try {\n      localStorage.clear();\n    } catch (error) {\n      console.error('Failed to clear localStorage:', error);\n    }\n  },\n};\n\n/**\n * Notification helpers\n */\nexport const notifications = {\n  async requestPermission(): Promise<boolean> {\n    if (!('Notification' in window)) {\n      console.warn('This browser does not support notifications');\n      return false;\n    }\n\n    if (Notification.permission === 'granted') {\n      return true;\n    }\n\n    if (Notification.permission === 'denied') {\n      return false;\n    }\n\n    const permission = await Notification.requestPermission();\n    return permission === 'granted';\n  },\n\n  show(title: string, options: NotificationOptions = {}): Notification | null {\n    if (Notification.permission !== 'granted') {\n      return null;\n    }\n\n    return new Notification(title, {\n      icon: '/pill-icon.svg',\n      badge: '/pill-icon.svg',\n      ...options,\n    });\n  },\n};\n\n/**\n * File download helper\n */\nexport function downloadFile(data: string, filename: string, type = 'text/plain'): void {\n  const blob = new Blob([data], { type });\n  const url = URL.createObjectURL(blob);\n  \n  const link = document.createElement('a');\n  link.href = url;\n  link.download = filename;\n  document.body.appendChild(link);\n  link.click();\n  \n  document.body.removeChild(link);\n  URL.revokeObjectURL(url);\n}\n\n/**\n * Generate CSV from array of objects\n */\nexport function generateCSV<T extends Record<string, any>>(data: T[], headers?: string[]): string {\n  if (data.length === 0) return '';\n\n  const keys = headers || Object.keys(data[0]);\n  const csvHeaders = keys.join(',');\n  \n  const csvRows = data.map((row) =>\n    keys.map((key) => {\n      const value = row[key];\n      // Escape quotes and wrap in quotes if contains comma or quotes\n      if (typeof value === 'string' && (value.includes(',') || value.includes('\"'))) {\n        return `\"${value.replace(/\"/g, '\"\"')}\"`;\n      }\n      return value;\n    }).join(',')\n  );\n\n  return [csvHeaders, ...csvRows].join('\\n');\n}\n\n// Advanced Features - Risk Assessment\nexport function getRiskLevel(category: string): 'minimal' | 'low' | 'moderate' | 'high' {\n  const riskMapping: Record<string, 'minimal' | 'low' | 'moderate' | 'high'> = {\n    'opioid': 'high',\n    'benzodiazepine': 'high',\n    'stimulant': 'high',\n    'sleep-aid': 'moderate',\n    'muscle-relaxant': 'moderate',\n    'antidepressant': 'low',\n    'anticonvulsant': 'low',\n    'antipsychotic': 'moderate',\n    'low-risk': 'minimal'\n  };\n  \n  return riskMapping[category] || 'low';\n}\n\nexport function getDependencyRiskCategory(medicationName: string): string {\n  const name = medicationName.toLowerCase();\n  \n  // Opioids\n  if (name.includes('oxycodone') || name.includes('morphine') || name.includes('fentanyl') || \n      name.includes('hydrocodone') || name.includes('codeine') || name.includes('tramadol') ||\n      name.includes('kratom')) {\n    return 'opioid';\n  }\n  \n  // Benzodiazepines and GABA drugs\n  if (name.includes('alprazolam') || name.includes('lorazepam') || name.includes('diazepam') || \n      name.includes('clonazepam') || name.includes('xanax') || name.includes('valium') ||\n      name.includes('ativan') || name.includes('klonopin') || name.includes('phenibut')) {\n    return 'benzodiazepine';\n  }\n  \n  // Stimulants\n  if (name.includes('adderall') || name.includes('ritalin') || name.includes('concerta') || \n      name.includes('vyvanse') || name.includes('amphetamine') || name.includes('methylphenidate') ||\n      name.includes('modafinil')) {\n    return 'stimulant';\n  }\n  \n  // Sleep aids\n  if (name.includes('zolpidem') || name.includes('ambien') || name.includes('lunesta') || \n      name.includes('sonata') || name.includes('eszopiclone')) {\n    return 'sleep-aid';\n  }\n  \n  // Muscle relaxants\n  if (name.includes('cyclobenzaprine') || name.includes('flexeril') || name.includes('baclofen') || \n      name.includes('tizanidine')) {\n    return 'muscle-relaxant';\n  }\n  \n  // Antidepressants\n  if (name.includes('sertraline') || name.includes('fluoxetine') || name.includes('escitalopram') ||\n      name.includes('venlafaxine') || name.includes('duloxetine') || name.includes('paroxetine') ||\n      name.includes('bupropion') || name.includes('mirtazapine') || name.includes('zoloft') ||\n      name.includes('prozac') || name.includes('lexapro') || name.includes('effexor') ||\n      name.includes('cymbalta') || name.includes('paxil') || name.includes('wellbutrin') ||\n      name.includes('remeron')) {\n    return 'antidepressant';\n  }\n  \n  // Anticonvulsants\n  if (name.includes('gabapentin') || name.includes('pregabalin') || name.includes('neurontin') ||\n      name.includes('lyrica')) {\n    return 'anticonvulsant';\n  }\n  \n  // Antipsychotics\n  if (name.includes('quetiapine') || name.includes('seroquel') || name.includes('olanzapine') ||\n      name.includes('risperidone') || name.includes('aripiprazole') || name.includes('haloperidol')) {\n    return 'antipsychotic';\n  }\n  \n  return 'low-risk';\n}\n\n// Cyclic Dosing Calculations\nexport function calculateCyclicDose(\n  baseDose: number,\n  cyclicPattern: any,\n  currentDate: Date\n): { dose: number; phase: string; message?: string } {\n  if (!cyclicPattern?.pattern) {\n    return { dose: baseDose, phase: 'maintenance' };\n  }\n  \n  const startDate = new Date(cyclicPattern.startDate);\n  const daysDiff = Math.floor((currentDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24));\n  \n  let totalCycleDuration = 0;\n  cyclicPattern.pattern.forEach((cycle: any) => {\n    totalCycleDuration += cycle.duration;\n  });\n  \n  if (totalCycleDuration === 0) {\n    return { dose: baseDose, phase: 'maintenance' };\n  }\n  \n  const cyclePosition = daysDiff % totalCycleDuration;\n  let currentDay = 0;\n  \n  for (const cycle of cyclicPattern.pattern) {\n    if (cyclePosition >= currentDay && cyclePosition < currentDay + cycle.duration) {\n      return {\n        dose: baseDose * cycle.dosageMultiplier,\n        phase: cycle.phase,\n        message: cycle.customMessage\n      };\n    }\n    currentDay += cycle.duration;\n  }\n  \n  return { dose: baseDose, phase: 'maintenance' };\n}\n\nexport function calculateTaperingDose(\n  baseDose: number,\n  taperingSchedule: any,\n  currentDate: Date,\n  medication?: any\n): number {\n  if (!taperingSchedule) return baseDose;\n  \n  // Check if tapering is paused\n  if (taperingSchedule.isPaused) {\n    // Return the dose from when it was paused, or find the appropriate step\n    const pausedDate = taperingSchedule.pausedAt ? new Date(taperingSchedule.pausedAt) : currentDate;\n    // Use the paused date for calculation instead of current date\n    return calculateTaperingDose(baseDose, { ...taperingSchedule, isPaused: false }, pausedDate, medication);\n  }\n  \n  const startDate = new Date(taperingSchedule.startDate);\n  const endDate = new Date(taperingSchedule.endDate);\n  const daysDiff = Math.floor((currentDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24));\n  const totalDays = Math.floor((endDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24));\n  \n  if (daysDiff < 0) return taperingSchedule.initialDose;\n  if (daysDiff >= totalDays) return taperingSchedule.finalDose;\n  \n  // Use custom steps if available (for hyperbolic and other advanced methods)\n  if (taperingSchedule.customSteps && taperingSchedule.customSteps.length > 0) {\n    // Find the appropriate step for the current day\n    const applicableStep = taperingSchedule.customSteps\n      .filter((step: any) => step.day <= daysDiff)\n      .sort((a: any, b: any) => b.day - a.day)[0]; // Get the most recent applicable step\n    \n    if (applicableStep) {\n      return taperingSchedule.initialDose * applicableStep.dosageMultiplier;\n    }\n  }\n  \n  if (taperingSchedule.taperingMethod === 'linear') {\n    const progress = daysDiff / totalDays;\n    return taperingSchedule.initialDose + \n           (taperingSchedule.finalDose - taperingSchedule.initialDose) * progress;\n  }\n  \n  if (taperingSchedule.taperingMethod === 'exponential') {\n    const progress = daysDiff / totalDays;\n    const exponentialProgress = 1 - Math.pow(1 - progress, 2);\n    return taperingSchedule.initialDose + \n           (taperingSchedule.finalDose - taperingSchedule.initialDose) * exponentialProgress;\n  }\n  \n  // Custom steps\n  if (taperingSchedule.customSteps) {\n    const applicableStep = taperingSchedule.customSteps\n      .filter((step: any) => step.day <= daysDiff)\n      .sort((a: any, b: any) => b.day - a.day)[0];\n    \n    if (applicableStep) {\n      return baseDose * applicableStep.dosageMultiplier;\n    }\n  }\n  \n  const taperedDose = baseDose;\n  \n  // If medication uses multiple pills, we might need to adjust to available pill combinations\n  if (medication?.useMultiplePills && medication?.pillConfigurations) {\n    return adjustDoseForMultiplePills(taperedDose, medication);\n  }\n  \n  return taperedDose;\n}\n\n// Helper function to adjust tapered dose to available pill combinations\nexport function adjustDoseForMultiplePills(targetDose: number, medication: any): number {\n  if (!medication?.pillConfigurations) return targetDose;\n  \n  // Find the best combination of available pills to get closest to target dose\n  const availablePills = medication.pillConfigurations.filter((config: any) => config.isActive);\n  \n  let bestCombination = targetDose;\n  let minDifference = Infinity;\n  \n  // Try different combinations of pills (simple approach: use largest pills first)\n  availablePills.sort((a: any, b: any) => b.strength - a.strength);\n  \n  for (let i = 0; i < availablePills.length; i++) {\n    const pill = availablePills[i];\n    const wholePills = Math.floor(targetDose / pill.strength);\n    const halfPills = targetDose >= pill.strength * (wholePills + 0.5) ? 0.5 : 0;\n    \n    const achievableDose = pill.strength * (wholePills + halfPills);\n    const difference = Math.abs(targetDose - achievableDose);\n    \n    if (difference < minDifference && achievableDose <= targetDose * 1.1) { // Allow 10% overshoot\n      minDifference = difference;\n      bestCombination = achievableDose;\n    }\n  }\n  \n  return bestCombination;\n}\n\n// Enhanced tapering functions for multiple pills\nexport function calculateOptimalPillReduction(\n  currentPillCounts: Record<string, number>,\n  reductionPercent: number,\n  medication: any\n): { newPillCounts: Record<string, number>; actualReduction: number } {\n  if (!medication?.pillConfigurations || !medication?.doseConfigurations) {\n    return { newPillCounts: currentPillCounts, actualReduction: 0 };\n  }\n\n  // Calculate current total dose\n  let currentTotalDose = 0;\n  Object.entries(currentPillCounts).forEach(([pillConfigId, count]) => {\n    const pillConfig = medication.pillConfigurations.find((config: any) => config.id === pillConfigId);\n    if (pillConfig) {\n      currentTotalDose += pillConfig.strength * (count as number);\n    }\n  });\n\n  // Calculate target dose after reduction\n  const targetDose = currentTotalDose * (1 - reductionPercent / 100);\n  \n  // Find the best pill combination for the target dose\n  const adjustedDose = adjustDoseForMultiplePills(targetDose, medication);\n  \n  // Convert back to pill counts\n  const newPillCounts = calculatePillCountsForDose(adjustedDose, medication);\n  \n  // Calculate actual reduction achieved\n  let newTotalDose = 0;\n  Object.entries(newPillCounts).forEach(([pillConfigId, count]) => {\n    const pillConfig = medication.pillConfigurations.find((config: any) => config.id === pillConfigId);\n    if (pillConfig) {\n      newTotalDose += pillConfig.strength * (count as number);\n    }\n  });\n  \n  const actualReduction = currentTotalDose > 0 ? ((currentTotalDose - newTotalDose) / currentTotalDose) * 100 : 0;\n  \n  return { newPillCounts, actualReduction };\n}\n\nexport function calculatePillCountsForDose(targetDose: number, medication: any): Record<string, number> {\n  if (!medication?.pillConfigurations) return {};\n  \n  const availablePills = medication.pillConfigurations\n    .filter((config: any) => config.isActive)\n    .sort((a: any, b: any) => b.strength - a.strength); // Largest pills first\n  \n  const pillCounts: Record<string, number> = {};\n  let remainingDose = targetDose;\n  \n  // Initialize all pill counts to 0\n  availablePills.forEach((pill: any) => {\n    pillCounts[pill.id] = 0;\n  });\n  \n  // Use greedy algorithm: largest pills first\n  for (const pill of availablePills) {\n    if (remainingDose <= 0) break;\n    \n    const wholePills = Math.floor(remainingDose / pill.strength);\n    if (wholePills > 0) {\n      pillCounts[pill.id] += wholePills;\n      remainingDose -= wholePills * pill.strength;\n    }\n    \n    // Check if we can use a half pill (if remaining dose is significant)\n    if (remainingDose >= pill.strength * 0.4) { // Use half if remaining is at least 40% of pill strength\n      pillCounts[pill.id] += 0.5;\n      remainingDose -= pill.strength * 0.5;\n    }\n  }\n  \n  return pillCounts;\n}\n\nexport function formatPillCountsForTapering(pillCounts: Record<string, number>, medication: any): string {\n  if (!medication?.pillConfigurations) return '';\n  \n  const descriptions: string[] = [];\n  \n  Object.entries(pillCounts).forEach(([pillConfigId, count]) => {\n    if ((count as number) > 0) {\n      const pillConfig = medication.pillConfigurations.find((config: any) => config.id === pillConfigId);\n      if (pillConfig) {\n        const countStr = (count as number) % 1 === 0 ? count.toString() : count.toString();\n        descriptions.push(`${countStr}  ${pillConfig.strength}${pillConfig.unit} ${pillConfig.color || ''} pill${(count as number) !== 1 ? 's' : ''}`);\n      }\n    }\n  });\n  \n  return descriptions.join(' + ') || 'No pills';\n}\n\n// Psychological Messaging\nexport function generatePsychologicalMessage(\n  type: 'adherence-reminder' | 'dependency-warning' | 'motivation' | 'celebration' | 'risk-alert',\n  medicationName: string,\n  personalizedData?: Record<string, any>\n): { title: string; message: string; approach: string } {\n  const approaches = {\n    'adherence-reminder': 'gentle-reminder',\n    'dependency-warning': 'factual-warning',\n    'motivation': 'positive-reinforcement',\n    'celebration': 'positive-reinforcement',\n    'risk-alert': 'empathetic-support'\n  };\n  \n  const messages = {\n    'adherence-reminder': {\n      title: 'Gentle Reminder',\n      message: `Hi there! It's time for your ${medicationName}. Taking your medication consistently helps maintain your health and well-being. You've got this! `\n    },\n    'dependency-warning': {\n      title: 'Health Check-In',\n      message: `We noticed some changes in your ${medicationName} usage pattern. It's important to stick to your prescribed schedule. If you're experiencing increased symptoms, please consult your healthcare provider rather than adjusting the dose yourself.`\n    },\n    'motivation': {\n      title: 'You\\'re Doing Great!',\n      message: `Your consistency with ${medicationName} is impressive! Every dose you take as prescribed is an investment in your health. Keep up the excellent work! `\n    },\n    'celebration': {\n      title: 'Milestone Achieved! ',\n      message: `Congratulations! You've maintained excellent adherence with ${medicationName} this week. Your dedication to your health is inspiring and making a real difference!`\n    },\n    'risk-alert': {\n      title: 'Supportive Check-In',\n      message: `We care about your well-being. If you're finding it challenging to stick to your ${medicationName} schedule, remember that this is normal and you're not alone. Consider reaching out to your healthcare provider for support.`\n    }\n  };\n  \n  const baseMessage = messages[type];\n  \n  // Personalize with data if available\n  if (personalizedData?.adherenceStreak) {\n    baseMessage.message += ` You're on a ${personalizedData.adherenceStreak}-day streak!`;\n  }\n  \n  return {\n    ...baseMessage,\n    approach: approaches[type]\n  };\n}\n\n// Enhanced dose calculation functions for dashboard\nexport function calculateRemainingDosesForDay(\n  medication: any,\n  todaysLogs: any[]\n): { remaining: number; total: number; completed: boolean } {\n  const frequencyMap = {\n    'once-daily': 1,\n    'twice-daily': 2,\n    'three-times-daily': 3,\n    'four-times-daily': 4,\n    'as-needed': 0, // Variable, so we don't show remaining\n  };\n  \n  const totalDoses = frequencyMap[medication.frequency as keyof typeof frequencyMap] || 0;\n  \n  if (totalDoses === 0) {\n    // For as-needed medications, just check if taken today\n    const takenToday = todaysLogs.some(log => \n      log.medicationId === medication.id && log.adherence === 'taken'\n    );\n    return { remaining: 0, total: 0, completed: takenToday };\n  }\n  \n  const takenDoses = todaysLogs.filter(log => \n    log.medicationId === medication.id && log.adherence === 'taken'\n  ).length;\n  \n  const remaining = Math.max(0, totalDoses - takenDoses);\n  const completed = takenDoses >= totalDoses;\n  \n  return { remaining, total: totalDoses, completed };\n}\n\nexport function getProgressDisplayText(\n  remaining: number,\n  total: number,\n  completed: boolean,\n  frequency: string\n): string {\n  if (frequency === 'as-needed') {\n    return completed ? 'Taken today' : 'As needed';\n  }\n  \n  if (completed) {\n    return 'All doses complete';\n  }\n  \n  if (remaining === total) {\n    return `${total} dose${total > 1 ? 's' : ''} today`;\n  }\n  \n  return `${remaining} of ${total} remaining`;\n}\n\n// Dependency Risk Analysis - Enhanced with medication start date validation\nexport function calculateDependencyRisk(\n  medicationLogs: any[],\n  medication: any,\n  timeWindow: number = 30 // days\n): { riskScore: number; riskFactors: string[]; recommendations: string[] } {\n  // Check if medication was started recently (within grace period)\n  const medicationStartDate = medication.startDate ? new Date(medication.startDate) : medication.createdAt ? new Date(medication.createdAt) : null;\n  const gracePeriodDays = 14; // 2 weeks grace period for new medications\n  \n  if (medicationStartDate) {\n    const daysSinceStart = (Date.now() - medicationStartDate.getTime()) / (1000 * 60 * 60 * 24);\n    \n    // If medication is very new, provide minimal risk assessment\n    if (daysSinceStart < gracePeriodDays) {\n      return {\n        riskScore: 0,\n        riskFactors: ['Recently started medication - monitoring phase'],\n        recommendations: [\n          'Continue taking as prescribed',\n          'Monitor for any side effects or concerns',\n          'Follow up with healthcare provider as scheduled'\n        ]\n      };\n    }\n  }\n\n  const recentLogs = medicationLogs.filter(log => {\n    const logDate = new Date(log.timestamp);\n    const daysAgo = (Date.now() - logDate.getTime()) / (1000 * 60 * 60 * 24);\n    return daysAgo <= timeWindow && log.medicationId === medication.id;\n  });\n  \n  let riskScore = 0;\n  const riskFactors: string[] = [];\n  const recommendations: string[] = [];\n  \n  // Base risk from medication category - reduced for newer medications\n  const categoryRisk = {\n    'opioid': 40,\n    'benzodiazepine': 35,\n    'stimulant': 30,\n    'sleep-aid': 20,\n    'muscle-relaxant': 15,\n    'antidepressant': 5,\n    'anticonvulsant': 5,\n    'low-risk': 0\n  };\n  \n  let baseCategoryRisk = categoryRisk[medication.dependencyRiskCategory as keyof typeof categoryRisk] || 0;\n  \n  // Reduce base risk for newer medications (within first 30 days)\n  if (medicationStartDate) {\n    const daysSinceStart = (Date.now() - medicationStartDate.getTime()) / (1000 * 60 * 60 * 24);\n    if (daysSinceStart < 30) {\n      const reductionFactor = Math.max(0.3, daysSinceStart / 30); // Gradually increase from 30% to 100%\n      baseCategoryRisk *= reductionFactor;\n      riskFactors.push(`Medication started ${Math.round(daysSinceStart)} days ago - risk assessment adjusting`);\n    }\n  }\n  \n  riskScore += baseCategoryRisk;\n  \n  // Analyze dosage patterns - only if we have sufficient data\n  if (recentLogs.length >= 5) { // Need at least 5 logs to detect patterns\n    const dosages = recentLogs.map(log => log.dosageTaken);\n    const prescribedDose = parseFloat(medication.dosage);\n    \n    if (dosages.some(dose => dose > prescribedDose * 1.5)) {\n      riskScore += 25;\n      riskFactors.push('Doses exceeding prescribed amount detected');\n      recommendations.push('Contact healthcare provider about dose concerns');\n    }\n  } else if (recentLogs.length > 0) {\n    riskFactors.push('Limited usage data - continuing to monitor patterns');\n  }\n  \n  // Check for frequency increases - only if we have sufficient data spread over multiple days\n  const expectedDailyDoses = {\n    'once-daily': 1,\n    'twice-daily': 2,\n    'three-times-daily': 3,\n    'four-times-daily': 4\n  };\n  \n  const expectedDaily = expectedDailyDoses[medication.frequency as keyof typeof expectedDailyDoses] || 1;\n  const dailyGroups = recentLogs.reduce((acc, log) => {\n    const date = new Date(log.timestamp).toDateString();\n    acc[date] = (acc[date] || 0) + 1;\n    return acc;\n  }, {});\n  \n  const uniqueDays = Object.keys(dailyGroups).length;\n  \n  // Only flag frequency issues if we have data from multiple days (at least 3 days)\n  if (uniqueDays >= 3) {\n    const excessiveDays = Object.values(dailyGroups).filter((count: unknown) => (count as number) > expectedDaily * 1.5);\n    if (excessiveDays.length > 0 && excessiveDays.length / uniqueDays > 0.3) { // More than 30% of days\n      riskScore += 20;\n      riskFactors.push('Taking medication more frequently than prescribed');\n      recommendations.push('Review dosing schedule with healthcare provider');\n    }\n  }\n  \n  // Check for early refill patterns (if pill count data available)\n  if (medication.pillsRemaining !== undefined && medication.totalPills) {\n    const expectedUsage = (medication.totalPills - medication.pillsRemaining) / \n                         (expectedDaily * (timeWindow / 30));\n    if (expectedUsage > 1.3) {\n      riskScore += 15;\n      riskFactors.push('Using medication faster than expected');\n      recommendations.push('Monitor usage patterns carefully');\n    }\n  }\n  \n  // Cap risk score at 100\n  riskScore = Math.min(riskScore, 100);\n  \n  // Provide appropriate recommendations based on risk score and medication age\n  if (medicationStartDate && (Date.now() - medicationStartDate.getTime()) / (1000 * 60 * 60 * 24) < 30) {\n    // New medication - more conservative recommendations\n    if (riskScore < 30) {\n      recommendations.push('Continue current medication routine and monitor for any changes');\n      recommendations.push('Follow up with healthcare provider as scheduled');\n    } else {\n      recommendations.push('Discuss any concerns with healthcare provider at next appointment');\n      recommendations.push('Monitor usage patterns carefully during adjustment period');\n    }\n  } else {\n    // Established medication - standard recommendations\n    if (riskScore < 20) {\n      recommendations.push('Continue current medication routine');\n    } else if (riskScore < 50) {\n      recommendations.push('Monitor usage patterns and discuss with healthcare provider');\n    } else {\n      recommendations.push('Immediate consultation with healthcare provider recommended');\n      recommendations.push('Consider dependency assessment');\n    }\n  }\n  \n  return { riskScore, riskFactors, recommendations };\n}\n\n// Behavioral Pattern Detection\nexport function detectBehaviorPatterns(\n  medicationLogs: any[],\n  _medication: any,\n  _timeWindow: number = 30\n): any[] {\n  const patterns: any[] = [];\n  \n  // Detect weekend gaps\n  const weekendMisses = medicationLogs.filter(log => {\n    const logDate = new Date(log.timestamp);\n    const dayOfWeek = logDate.getDay();\n    return (dayOfWeek === 0 || dayOfWeek === 6) && log.adherence === 'missed';\n  });\n  \n  if (weekendMisses.length > 2) {\n    patterns.push({\n      type: 'weekend-gaps',\n      detectedDate: new Date(),\n      confidence: 0.8,\n      description: 'Tendency to miss doses on weekends',\n      recommendedAction: 'Set weekend-specific reminders'\n    });\n  }\n  \n  // Detect timing drift\n  const takenLogs = medicationLogs.filter(log => log.adherence === 'taken');\n  const timeDifferences = takenLogs.map(log => {\n    const time = new Date(log.timestamp);\n    return time.getHours() * 60 + time.getMinutes();\n  });\n  \n  if (timeDifferences.length > 7) {\n    const avgTime = timeDifferences.reduce((a, b) => a + b, 0) / timeDifferences.length;\n    const variance = timeDifferences.reduce((acc, time) => acc + Math.pow(time - avgTime, 2), 0) / timeDifferences.length;\n    \n    if (variance > 3600) { // High variance (more than 1 hour standard deviation)\n      patterns.push({\n        type: 'dose-timing-drift',\n        detectedDate: new Date(),\n        confidence: 0.7,\n        description: 'Inconsistent dosing times detected',\n        recommendedAction: 'Consider setting consistent daily reminders'\n      });\n    }\n  }\n\n  return patterns;\n}\n\n","import { NavLink } from 'react-router-dom';\nimport { \n  X, \n  Home, \n  Pill, \n  Calendar, \n  BarChart3, \n  Settings, \n  Heart,\n  Bell,\n  FileText,\n  Package\n} from 'lucide-react';\nimport { cn } from '@/utils/helpers';\n\ninterface SidebarProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nconst navigation = [\n  { name: 'Dashboard', href: '/dashboard', icon: Home },\n  { name: 'Medications', href: '/medications', icon: Pill },\n  { name: 'Inventory', href: '/inventory', icon: Package },\n  { name: 'Calendar', href: '/calendar', icon: Calendar },\n  { name: 'Analytics', href: '/analytics', icon: BarChart3 },\n  { name: 'Settings', href: '/settings', icon: Settings },\n];\n\nconst secondaryNavigation = [\n  { name: 'Reminders', href: '/reminders', icon: Bell },\n  { name: 'Reports', href: '/reports', icon: FileText },\n  { name: 'Health Profile', href: '/profile', icon: Heart },\n];\n\nexport function Sidebar({ isOpen, onClose }: SidebarProps) {\n\n  const NavItem = ({ item, onClick }: { item: typeof navigation[0]; onClick?: () => void }) => {\n    // Generate data-testid based on the item name\n    const testId = `sidebar-${item.name.toLowerCase().replace(/\\s+/g, '-')}`;\n    \n    return (\n      <NavLink\n        to={item.href}\n        onClick={onClick}\n        data-testid={testId}\n        className={({ isActive }) =>\n          cn(\n            'flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors',\n            isActive\n              ? 'bg-primary-100 text-primary-700 border-r-2 border-primary-600'\n              : 'text-gray-600 hover:bg-gray-100 hover:text-gray-900'\n          )\n        }\n      >\n        <item.icon className=\"mr-3 h-5 w-5 flex-shrink-0\" />\n        {item.name}\n      </NavLink>\n    );\n  };\n\n  return (\n    <>\n      {/* Mobile overlay */}\n      {isOpen && (\n        <div\n          className=\"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden\"\n          onClick={onClose}\n        />\n      )}\n\n      {/* Sidebar */}\n      <div\n        className={cn(\n          'fixed inset-y-0 left-0 z-50 w-64 bg-white border-r border-gray-200 transform transition-transform lg:translate-x-0 lg:static lg:inset-0',\n          isOpen ? 'translate-x-0' : '-translate-x-full'\n        )}\n      >\n        <div className=\"flex flex-col h-full\">\n          {/* Header */}\n          <div className=\"flex items-center justify-between h-16 px-6 border-b border-gray-200\">\n            <div className=\"flex items-center space-x-3\" data-testid=\"header-logo\">\n              <div className=\"h-8 w-8 bg-primary-600 rounded-lg flex items-center justify-center\">\n                <Pill className=\"h-5 w-5 text-white\" />\n              </div>\n              <span className=\"text-lg font-semibold text-gray-900\">MedTrack</span>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100\"\n            >\n              <X className=\"h-5 w-5\" />\n            </button>\n          </div>\n\n          {/* Navigation */}\n          <nav className=\"flex-1 px-4 py-6 space-y-1\">\n            <div className=\"space-y-1\">\n              {navigation.map((item) => (\n                <NavItem key={item.name} item={item} onClick={() => isOpen && onClose()} />\n              ))}\n            </div>\n\n            <div className=\"pt-6\">\n              <h3 className=\"px-4 text-xs font-semibold text-gray-500 uppercase tracking-wider\">\n                Tools\n              </h3>\n              <div className=\"mt-2 space-y-1\">\n                {secondaryNavigation.map((item) => (\n                  <NavItem key={item.name} item={item} onClick={() => isOpen && onClose()} />\n                ))}\n              </div>\n            </div>\n          </nav>\n\n          {/* Footer */}\n          <div className=\"border-t border-gray-200 p-4\">\n            <div className=\"flex items-center space-x-3\" data-testid=\"footer-help\">\n              <div className=\"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center\">\n                <Heart className=\"h-4 w-4 text-green-600\" />\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-xs text-gray-500\">Stay healthy</p>\n                <p className=\"text-xs text-gray-400\" data-testid=\"footer-privacy\">Track your progress</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n","const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const destroy = () => {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected.\"\n      );\n    }\n    listeners.clear();\n  };\n  const api = { setState, getState, getInitialState, subscribe, destroy };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = (createState) => createState ? createStoreImpl(createState) : createStoreImpl;\nvar vanilla = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use import { createStore } from 'zustand/vanilla'.\"\n    );\n  }\n  return createStore(createState);\n};\n\nexport { createStore, vanilla as default };\n","/**\n * @license React\n * use-sync-external-store-shim.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useState = React.useState,\n  useEffect = React.useEffect,\n  useLayoutEffect = React.useLayoutEffect,\n  useDebugValue = React.useDebugValue;\nfunction useSyncExternalStore$2(subscribe, getSnapshot) {\n  var value = getSnapshot(),\n    _useState = useState({ inst: { value: value, getSnapshot: getSnapshot } }),\n    inst = _useState[0].inst,\n    forceUpdate = _useState[1];\n  useLayoutEffect(\n    function () {\n      inst.value = value;\n      inst.getSnapshot = getSnapshot;\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n    },\n    [subscribe, value, getSnapshot]\n  );\n  useEffect(\n    function () {\n      checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      return subscribe(function () {\n        checkIfSnapshotChanged(inst) && forceUpdate({ inst: inst });\n      });\n    },\n    [subscribe]\n  );\n  useDebugValue(value);\n  return value;\n}\nfunction checkIfSnapshotChanged(inst) {\n  var latestGetSnapshot = inst.getSnapshot;\n  inst = inst.value;\n  try {\n    var nextValue = latestGetSnapshot();\n    return !objectIs(inst, nextValue);\n  } catch (error) {\n    return !0;\n  }\n}\nfunction useSyncExternalStore$1(subscribe, getSnapshot) {\n  return getSnapshot();\n}\nvar shim =\n  \"undefined\" === typeof window ||\n  \"undefined\" === typeof window.document ||\n  \"undefined\" === typeof window.document.createElement\n    ? useSyncExternalStore$1\n    : useSyncExternalStore$2;\nexports.useSyncExternalStore =\n  void 0 !== React.useSyncExternalStore ? React.useSyncExternalStore : shim;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim.development.js');\n}\n","/**\n * @license React\n * use-sync-external-store-shim/with-selector.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nvar React = require(\"react\"),\n  shim = require(\"use-sync-external-store/shim\");\nfunction is(x, y) {\n  return (x === y && (0 !== x || 1 / x === 1 / y)) || (x !== x && y !== y);\n}\nvar objectIs = \"function\" === typeof Object.is ? Object.is : is,\n  useSyncExternalStore = shim.useSyncExternalStore,\n  useRef = React.useRef,\n  useEffect = React.useEffect,\n  useMemo = React.useMemo,\n  useDebugValue = React.useDebugValue;\nexports.useSyncExternalStoreWithSelector = function (\n  subscribe,\n  getSnapshot,\n  getServerSnapshot,\n  selector,\n  isEqual\n) {\n  var instRef = useRef(null);\n  if (null === instRef.current) {\n    var inst = { hasValue: !1, value: null };\n    instRef.current = inst;\n  } else inst = instRef.current;\n  instRef = useMemo(\n    function () {\n      function memoizedSelector(nextSnapshot) {\n        if (!hasMemo) {\n          hasMemo = !0;\n          memoizedSnapshot = nextSnapshot;\n          nextSnapshot = selector(nextSnapshot);\n          if (void 0 !== isEqual && inst.hasValue) {\n            var currentSelection = inst.value;\n            if (isEqual(currentSelection, nextSnapshot))\n              return (memoizedSelection = currentSelection);\n          }\n          return (memoizedSelection = nextSnapshot);\n        }\n        currentSelection = memoizedSelection;\n        if (objectIs(memoizedSnapshot, nextSnapshot)) return currentSelection;\n        var nextSelection = selector(nextSnapshot);\n        if (void 0 !== isEqual && isEqual(currentSelection, nextSelection))\n          return (memoizedSnapshot = nextSnapshot), currentSelection;\n        memoizedSnapshot = nextSnapshot;\n        return (memoizedSelection = nextSelection);\n      }\n      var hasMemo = !1,\n        memoizedSnapshot,\n        memoizedSelection,\n        maybeGetServerSnapshot =\n          void 0 === getServerSnapshot ? null : getServerSnapshot;\n      return [\n        function () {\n          return memoizedSelector(getSnapshot());\n        },\n        null === maybeGetServerSnapshot\n          ? void 0\n          : function () {\n              return memoizedSelector(maybeGetServerSnapshot());\n            }\n      ];\n    },\n    [getSnapshot, getServerSnapshot, selector, isEqual]\n  );\n  var value = useSyncExternalStore(subscribe, instRef[0], instRef[1]);\n  useEffect(\n    function () {\n      inst.hasValue = !0;\n      inst.value = value;\n    },\n    [value]\n  );\n  useDebugValue(value);\n  return value;\n};\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.production.js');\n} else {\n  module.exports = require('../cjs/use-sync-external-store-shim/with-selector.development.js');\n}\n","import { createStore } from 'zustand/vanilla';\nexport * from 'zustand/vanilla';\nimport ReactExports from 'react';\nimport useSyncExternalStoreExports from 'use-sync-external-store/shim/with-selector.js';\n\nconst { useDebugValue } = ReactExports;\nconst { useSyncExternalStoreWithSelector } = useSyncExternalStoreExports;\nlet didWarnAboutEqualityFn = false;\nconst identity = (arg) => arg;\nfunction useStore(api, selector = identity, equalityFn) {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && equalityFn && !didWarnAboutEqualityFn) {\n    console.warn(\n      \"[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937\"\n    );\n    didWarnAboutEqualityFn = true;\n  }\n  const slice = useSyncExternalStoreWithSelector(\n    api.subscribe,\n    api.getState,\n    api.getServerState || api.getInitialState,\n    selector,\n    equalityFn\n  );\n  useDebugValue(slice);\n  return slice;\n}\nconst createImpl = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && typeof createState !== \"function\") {\n    console.warn(\n      \"[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.\"\n    );\n  }\n  const api = typeof createState === \"function\" ? createStore(createState) : createState;\n  const useBoundStore = (selector, equalityFn) => useStore(api, selector, equalityFn);\n  Object.assign(useBoundStore, api);\n  return useBoundStore;\n};\nconst create = (createState) => createState ? createImpl(createState) : createImpl;\nvar react = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`.\"\n    );\n  }\n  return create(createState);\n};\n\nexport { create, react as default, useStore };\n","const reduxImpl = (reducer, initial) => (set, _get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action), false, action);\n    return action;\n  };\n  api.dispatchFromDevtools = true;\n  return { dispatch: (...a) => api.dispatch(...a), ...initial };\n};\nconst redux = reduxImpl;\n\nconst trackedConnections = /* @__PURE__ */ new Map();\nconst getTrackedConnectionState = (name) => {\n  const api = trackedConnections.get(name);\n  if (!api) return {};\n  return Object.fromEntries(\n    Object.entries(api.stores).map(([key, api2]) => [key, api2.getState()])\n  );\n};\nconst extractConnectionInformation = (store, extensionConnector, options) => {\n  if (store === void 0) {\n    return {\n      type: \"untracked\",\n      connection: extensionConnector.connect(options)\n    };\n  }\n  const existingConnection = trackedConnections.get(options.name);\n  if (existingConnection) {\n    return { type: \"tracked\", store, ...existingConnection };\n  }\n  const newConnection = {\n    connection: extensionConnector.connect(options),\n    stores: {}\n  };\n  trackedConnections.set(options.name, newConnection);\n  return { type: \"tracked\", store, ...newConnection };\n};\nconst devtoolsImpl = (fn, devtoolsOptions = {}) => (set, get, api) => {\n  const { enabled, anonymousActionType, store, ...options } = devtoolsOptions;\n  let extensionConnector;\n  try {\n    extensionConnector = (enabled != null ? enabled : (import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") && window.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch (_e) {\n  }\n  if (!extensionConnector) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && enabled) {\n      console.warn(\n        \"[zustand devtools middleware] Please install/enable Redux devtools extension\"\n      );\n    }\n    return fn(set, get, api);\n  }\n  const { connection, ...connectionInformation } = extractConnectionInformation(store, extensionConnector, options);\n  let isRecording = true;\n  api.setState = (state, replace, nameOrAction) => {\n    const r = set(state, replace);\n    if (!isRecording) return r;\n    const action = nameOrAction === void 0 ? { type: anonymousActionType || \"anonymous\" } : typeof nameOrAction === \"string\" ? { type: nameOrAction } : nameOrAction;\n    if (store === void 0) {\n      connection == null ? void 0 : connection.send(action, get());\n      return r;\n    }\n    connection == null ? void 0 : connection.send(\n      {\n        ...action,\n        type: `${store}/${action.type}`\n      },\n      {\n        ...getTrackedConnectionState(options.name),\n        [store]: api.getState()\n      }\n    );\n    return r;\n  };\n  const setStateFromDevtools = (...a) => {\n    const originalIsRecording = isRecording;\n    isRecording = false;\n    set(...a);\n    isRecording = originalIsRecording;\n  };\n  const initialState = fn(api.setState, get, api);\n  if (connectionInformation.type === \"untracked\") {\n    connection == null ? void 0 : connection.init(initialState);\n  } else {\n    connectionInformation.stores[connectionInformation.store] = api;\n    connection == null ? void 0 : connection.init(\n      Object.fromEntries(\n        Object.entries(connectionInformation.stores).map(([key, store2]) => [\n          key,\n          key === connectionInformation.store ? initialState : store2.getState()\n        ])\n      )\n    );\n  }\n  if (api.dispatchFromDevtools && typeof api.dispatch === \"function\") {\n    let didWarnAboutReservedActionType = false;\n    const originalDispatch = api.dispatch;\n    api.dispatch = (...a) => {\n      if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\" && a[0].type === \"__setState\" && !didWarnAboutReservedActionType) {\n        console.warn(\n          '[zustand devtools middleware] \"__setState\" action type is reserved to set state from the devtools. Avoid using it.'\n        );\n        didWarnAboutReservedActionType = true;\n      }\n      originalDispatch(...a);\n    };\n  }\n  connection.subscribe((message) => {\n    var _a;\n    switch (message.type) {\n      case \"ACTION\":\n        if (typeof message.payload !== \"string\") {\n          console.error(\n            \"[zustand devtools middleware] Unsupported action format\"\n          );\n          return;\n        }\n        return parseJsonThen(\n          message.payload,\n          (action) => {\n            if (action.type === \"__setState\") {\n              if (store === void 0) {\n                setStateFromDevtools(action.state);\n                return;\n              }\n              if (Object.keys(action.state).length !== 1) {\n                console.error(\n                  `\n                    [zustand devtools middleware] Unsupported __setState action format. \n                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),\n                    and value of this only key should be a state object. Example: { \"type\": \"__setState\", \"state\": { \"abc123Store\": { \"foo\": \"bar\" } } }\n                    `\n                );\n              }\n              const stateFromDevtools = action.state[store];\n              if (stateFromDevtools === void 0 || stateFromDevtools === null) {\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(stateFromDevtools)) {\n                setStateFromDevtools(stateFromDevtools);\n              }\n              return;\n            }\n            if (!api.dispatchFromDevtools) return;\n            if (typeof api.dispatch !== \"function\") return;\n            api.dispatch(action);\n          }\n        );\n      case \"DISPATCH\":\n        switch (message.payload.type) {\n          case \"RESET\":\n            setStateFromDevtools(initialState);\n            if (store === void 0) {\n              return connection == null ? void 0 : connection.init(api.getState());\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"COMMIT\":\n            if (store === void 0) {\n              connection == null ? void 0 : connection.init(api.getState());\n              return;\n            }\n            return connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n          case \"ROLLBACK\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                connection == null ? void 0 : connection.init(api.getState());\n                return;\n              }\n              setStateFromDevtools(state[store]);\n              connection == null ? void 0 : connection.init(getTrackedConnectionState(options.name));\n            });\n          case \"JUMP_TO_STATE\":\n          case \"JUMP_TO_ACTION\":\n            return parseJsonThen(message.state, (state) => {\n              if (store === void 0) {\n                setStateFromDevtools(state);\n                return;\n              }\n              if (JSON.stringify(api.getState()) !== JSON.stringify(state[store])) {\n                setStateFromDevtools(state[store]);\n              }\n            });\n          case \"IMPORT_STATE\": {\n            const { nextLiftedState } = message.payload;\n            const lastComputedState = (_a = nextLiftedState.computedStates.slice(-1)[0]) == null ? void 0 : _a.state;\n            if (!lastComputedState) return;\n            if (store === void 0) {\n              setStateFromDevtools(lastComputedState);\n            } else {\n              setStateFromDevtools(lastComputedState[store]);\n            }\n            connection == null ? void 0 : connection.send(\n              null,\n              // FIXME no-any\n              nextLiftedState\n            );\n            return;\n          }\n          case \"PAUSE_RECORDING\":\n            return isRecording = !isRecording;\n        }\n        return;\n    }\n  });\n  return initialState;\n};\nconst devtools = devtoolsImpl;\nconst parseJsonThen = (stringified, f) => {\n  let parsed;\n  try {\n    parsed = JSON.parse(stringified);\n  } catch (e) {\n    console.error(\n      \"[zustand devtools middleware] Could not parse the received json\",\n      e\n    );\n  }\n  if (parsed !== void 0) f(parsed);\n};\n\nconst subscribeWithSelectorImpl = (fn) => (set, get, api) => {\n  const origSubscribe = api.subscribe;\n  api.subscribe = (selector, optListener, options) => {\n    let listener = selector;\n    if (optListener) {\n      const equalityFn = (options == null ? void 0 : options.equalityFn) || Object.is;\n      let currentSlice = selector(api.getState());\n      listener = (state) => {\n        const nextSlice = selector(state);\n        if (!equalityFn(currentSlice, nextSlice)) {\n          const previousSlice = currentSlice;\n          optListener(currentSlice = nextSlice, previousSlice);\n        }\n      };\n      if (options == null ? void 0 : options.fireImmediately) {\n        optListener(currentSlice, currentSlice);\n      }\n    }\n    return origSubscribe(listener);\n  };\n  const initialState = fn(set, get, api);\n  return initialState;\n};\nconst subscribeWithSelector = subscribeWithSelectorImpl;\n\nconst combine = (initialState, create) => (...a) => Object.assign({}, initialState, create(...a));\n\nfunction createJSONStorage(getStorage, options) {\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (_e) {\n    return;\n  }\n  const persistStorage = {\n    getItem: (name) => {\n      var _a;\n      const parse = (str2) => {\n        if (str2 === null) {\n          return null;\n        }\n        return JSON.parse(str2, options == null ? void 0 : options.reviver);\n      };\n      const str = (_a = storage.getItem(name)) != null ? _a : null;\n      if (str instanceof Promise) {\n        return str.then(parse);\n      }\n      return parse(str);\n    },\n    setItem: (name, newValue) => storage.setItem(\n      name,\n      JSON.stringify(newValue, options == null ? void 0 : options.replacer)\n    ),\n    removeItem: (name) => storage.removeItem(name)\n  };\n  return persistStorage;\n}\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst oldImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    getStorage: () => localStorage,\n    serialize: JSON.stringify,\n    deserialize: JSON.parse,\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage;\n  try {\n    storage = options.getStorage();\n  } catch (_e) {\n  }\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const thenableSerialize = toThenable(options.serialize);\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    let errorInSync;\n    const thenable = thenableSerialize({ state, version: options.version }).then(\n      (serializedValue) => storage.setItem(options.name, serializedValue)\n    ).catch((e) => {\n      errorInSync = e;\n    });\n    if (errorInSync) {\n      throw errorInSync;\n    }\n    return thenable;\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => cb(get()));\n    const postRehydrationCallback = ((_a = options.onRehydrateStorage) == null ? void 0 : _a.call(options, get())) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((storageValue) => {\n      if (storageValue) {\n        return options.deserialize(storageValue);\n      }\n    }).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return options.migrate(\n              deserializedStorageValue.state,\n              deserializedStorageValue.version\n            );\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return deserializedStorageValue.state;\n        }\n      }\n    }).then((migratedState) => {\n      var _a2;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      return setItem();\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.getStorage) {\n        storage = newOptions.getStorage();\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  hydrate();\n  return stateFromStorage || configResult;\n};\nconst newImpl = (config, baseOptions) => (set, get, api) => {\n  let options = {\n    storage: createJSONStorage(() => localStorage),\n    partialize: (state) => state,\n    version: 0,\n    merge: (persistedState, currentState) => ({\n      ...currentState,\n      ...persistedState\n    }),\n    ...baseOptions\n  };\n  let hasHydrated = false;\n  const hydrationListeners = /* @__PURE__ */ new Set();\n  const finishHydrationListeners = /* @__PURE__ */ new Set();\n  let storage = options.storage;\n  if (!storage) {\n    return config(\n      (...args) => {\n        console.warn(\n          `[zustand persist middleware] Unable to update item '${options.name}', the given storage is currently unavailable.`\n        );\n        set(...args);\n      },\n      get,\n      api\n    );\n  }\n  const setItem = () => {\n    const state = options.partialize({ ...get() });\n    return storage.setItem(options.name, {\n      state,\n      version: options.version\n    });\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config(\n    (...args) => {\n      set(...args);\n      void setItem();\n    },\n    get,\n    api\n  );\n  api.getInitialState = () => configResult;\n  let stateFromStorage;\n  const hydrate = () => {\n    var _a, _b;\n    if (!storage) return;\n    hasHydrated = false;\n    hydrationListeners.forEach((cb) => {\n      var _a2;\n      return cb((_a2 = get()) != null ? _a2 : configResult);\n    });\n    const postRehydrationCallback = ((_b = options.onRehydrateStorage) == null ? void 0 : _b.call(options, (_a = get()) != null ? _a : configResult)) || void 0;\n    return toThenable(storage.getItem.bind(storage))(options.name).then((deserializedStorageValue) => {\n      if (deserializedStorageValue) {\n        if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== options.version) {\n          if (options.migrate) {\n            return [\n              true,\n              options.migrate(\n                deserializedStorageValue.state,\n                deserializedStorageValue.version\n              )\n            ];\n          }\n          console.error(\n            `State loaded from storage couldn't be migrated since no migrate function was provided`\n          );\n        } else {\n          return [false, deserializedStorageValue.state];\n        }\n      }\n      return [false, void 0];\n    }).then((migrationResult) => {\n      var _a2;\n      const [migrated, migratedState] = migrationResult;\n      stateFromStorage = options.merge(\n        migratedState,\n        (_a2 = get()) != null ? _a2 : configResult\n      );\n      set(stateFromStorage, true);\n      if (migrated) {\n        return setItem();\n      }\n    }).then(() => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n      stateFromStorage = get();\n      hasHydrated = true;\n      finishHydrationListeners.forEach((cb) => cb(stateFromStorage));\n    }).catch((e) => {\n      postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n    });\n  };\n  api.persist = {\n    setOptions: (newOptions) => {\n      options = {\n        ...options,\n        ...newOptions\n      };\n      if (newOptions.storage) {\n        storage = newOptions.storage;\n      }\n    },\n    clearStorage: () => {\n      storage == null ? void 0 : storage.removeItem(options.name);\n    },\n    getOptions: () => options,\n    rehydrate: () => hydrate(),\n    hasHydrated: () => hasHydrated,\n    onHydrate: (cb) => {\n      hydrationListeners.add(cb);\n      return () => {\n        hydrationListeners.delete(cb);\n      };\n    },\n    onFinishHydration: (cb) => {\n      finishHydrationListeners.add(cb);\n      return () => {\n        finishHydrationListeners.delete(cb);\n      };\n    }\n  };\n  if (!options.skipHydration) {\n    hydrate();\n  }\n  return stateFromStorage || configResult;\n};\nconst persistImpl = (config, baseOptions) => {\n  if (\"getStorage\" in baseOptions || \"serialize\" in baseOptions || \"deserialize\" in baseOptions) {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead.\"\n      );\n    }\n    return oldImpl(config, baseOptions);\n  }\n  return newImpl(config, baseOptions);\n};\nconst persist = persistImpl;\n\nexport { combine, createJSONStorage, devtools, persist, redux, subscribeWithSelector };\n","import { Medication, DependencePrevention, UsagePattern, ToleranceIndicator, DependenceAlert, DependenceIntervention } from '@/types';\nimport { generateId } from '@/utils/helpers';\n\n/**\n * Comprehensive Dependence Prevention Service\n * Based on medical research and evidence-based practices\n */\nexport class DependencePreventionService {\n  \n  /**\n   * Risk assessment timelines based on medication class and medical literature\n   */\n  private static readonly RISK_TIMELINES = {\n    // Benzodiazepines: Physical dependence can develop in 2-4 weeks\n    'benzodiazepine': {\n      maxSafeDuration: 14, // days\n      warningDuration: 21,\n      urgentDuration: 30,\n      reviewFrequency: 7\n    },\n    // Opioids: Physical dependence can develop within days to weeks\n    'opioid': {\n      maxSafeDuration: 7,\n      warningDuration: 14,\n      urgentDuration: 21,\n      reviewFrequency: 3\n    },\n    // Z-drugs (sleep aids): Dependence risk similar to benzodiazepines\n    'sleep-aid': {\n      maxSafeDuration: 14,\n      warningDuration: 28,\n      urgentDuration: 42,\n      reviewFrequency: 7\n    },\n    // Antidepressants: Withdrawal syndrome, not true dependence\n    'antidepressant': {\n      maxSafeDuration: 180, // 6 months minimum treatment\n      warningDuration: 365,\n      urgentDuration: 730,\n      reviewFrequency: 30\n    },\n    // Stimulants: Psychological dependence risk\n    'stimulant': {\n      maxSafeDuration: 30,\n      warningDuration: 90,\n      urgentDuration: 180,\n      reviewFrequency: 14\n    },\n    // Default for other medications\n    'low-risk': {\n      maxSafeDuration: 90,\n      warningDuration: 180,\n      urgentDuration: 365,\n      reviewFrequency: 30\n    }\n  };\n\n  /**\n   * Initialize dependence prevention for a medication\n   */\n  static initializePrevention(medication: Medication): DependencePrevention {\n    const riskCategory = medication.dependencyRiskCategory;\n    const timeline = this.RISK_TIMELINES[riskCategory] || this.RISK_TIMELINES['low-risk'];\n    \n    return {\n      medicationId: medication.id,\n      isEnabled: true,\n      riskLevel: this.calculateInitialRiskLevel(medication),\n      dependenceType: this.getDependenceType(riskCategory),\n      usagePatterns: [],\n      toleranceIndicators: [],\n      withdrawalHistory: [],\n      recommendedMaxDuration: timeline.maxSafeDuration,\n      currentDuration: 0,\n      taperingRecommended: false,\n      taperingUrgency: 'none',\n      alerts: [],\n      interventions: [],\n      educationalResources: this.getEducationalResources(riskCategory),\n      doctorReviewRequired: false,\n      reviewFrequency: timeline.reviewFrequency\n    };\n  }\n\n  /**\n   * Assess current dependence risk based on usage patterns\n   */\n  static assessCurrentRisk(medication: Medication, usagePatterns: UsagePattern[]): DependencePrevention {\n    const prevention = medication.dependencePrevention || this.initializePrevention(medication);\n    const currentDuration = this.calculateCurrentDuration(medication.startDate);\n    const riskCategory = medication.dependencyRiskCategory;\n    const timeline = this.RISK_TIMELINES[riskCategory] || this.RISK_TIMELINES['low-risk'];\n\n    // Update current duration\n    prevention.currentDuration = currentDuration;\n\n    // Assess risk level based on multiple factors\n    prevention.riskLevel = this.calculateRiskLevel(medication, usagePatterns, currentDuration);\n\n    // Check if tapering is recommended\n    const taperingAssessment = this.assessTaperingNeed(medication, usagePatterns, currentDuration);\n    prevention.taperingRecommended = taperingAssessment.recommended;\n    prevention.taperingUrgency = taperingAssessment.urgency;\n\n    // Generate alerts based on risk factors\n    const newAlerts = this.generateRiskAlerts(medication, usagePatterns, currentDuration);\n    prevention.alerts = [...prevention.alerts, ...newAlerts];\n\n    // Check if doctor review is needed\n    prevention.doctorReviewRequired = this.shouldReviewWithDoctor(medication, usagePatterns, currentDuration);\n\n    return prevention;\n  }\n\n  /**\n   * Calculate initial risk level based on medication properties\n   */\n  private static calculateInitialRiskLevel(medication: Medication): 'low' | 'moderate' | 'high' | 'very-high' {\n    const category = medication.dependencyRiskCategory;\n    \n    // Base risk by category\n    const baseRisk = {\n      'opioid': 'very-high',\n      'benzodiazepine': 'high',\n      'stimulant': 'high',\n      'sleep-aid': 'moderate',\n      'muscle-relaxant': 'moderate',\n      'antidepressant': 'low',\n      'anticonvulsant': 'low',\n      'antipsychotic': 'low',\n      'low-risk': 'low'\n    } as const;\n\n    return baseRisk[category] || 'low';\n  }\n\n  /**\n   * Determine dependence type based on medication category\n   */\n  private static getDependenceType(category: string): 'physical' | 'psychological' | 'both' | 'none' {\n    switch (category) {\n      case 'opioid':\n      case 'benzodiazepine':\n      case 'sleep-aid':\n        return 'both';\n      case 'stimulant':\n        return 'psychological';\n      case 'antidepressant':\n      case 'anticonvulsant':\n        return 'physical'; // Withdrawal syndrome, not true dependence\n      default:\n        return 'none';\n    }\n  }\n\n  /**\n   * Calculate current medication duration in days\n   */\n  private static calculateCurrentDuration(startDate: Date): number {\n    const now = new Date();\n    const start = new Date(startDate);\n    return Math.floor((now.getTime() - start.getTime()) / (1000 * 60 * 60 * 24));\n  }\n\n  /**\n   * Calculate dynamic risk level based on usage patterns\n   */\n  private static calculateRiskLevel(\n    medication: Medication, \n    usagePatterns: UsagePattern[], \n    currentDuration: number\n  ): 'low' | 'moderate' | 'high' | 'very-high' {\n    let riskScore = 0;\n    const category = medication.dependencyRiskCategory;\n    const timeline = this.RISK_TIMELINES[category] || this.RISK_TIMELINES['low-risk'];\n\n    // Duration-based risk\n    if (currentDuration > timeline.urgentDuration) riskScore += 40;\n    else if (currentDuration > timeline.warningDuration) riskScore += 25;\n    else if (currentDuration > timeline.maxSafeDuration) riskScore += 15;\n\n    // Usage pattern analysis\n    if (usagePatterns.length > 0) {\n      const recentPatterns = usagePatterns.slice(-14); // Last 14 entries\n      \n      // Dose escalation\n      const doseEscalation = this.detectDoseEscalation(recentPatterns);\n      if (doseEscalation.isEscalating) riskScore += 20;\n      \n      // Self-adjustment frequency\n      const selfAdjustments = recentPatterns.filter(p => p.selfAdjustment).length;\n      const adjustmentRate = selfAdjustments / recentPatterns.length;\n      if (adjustmentRate > 0.3) riskScore += 15;\n      \n      // Craving indicators\n      const avgCraving = recentPatterns\n        .filter(p => p.cravingLevel !== undefined)\n        .reduce((sum, p) => sum + (p.cravingLevel || 0), 0) / recentPatterns.length;\n      if (avgCraving > 7) riskScore += 25;\n      else if (avgCraving > 5) riskScore += 15;\n      \n      // Anxiety before dose\n      const avgAnxiety = recentPatterns\n        .filter(p => p.anxietyBeforeDose !== undefined)\n        .reduce((sum, p) => sum + (p.anxietyBeforeDose || 0), 0) / recentPatterns.length;\n      if (avgAnxiety > 7) riskScore += 20;\n      else if (avgAnxiety > 5) riskScore += 10;\n\n      // Decreasing effectiveness\n      const effectivenessDecline = this.detectEffectivenessDecline(recentPatterns);\n      if (effectivenessDecline.isDeclineDetected) riskScore += 15;\n    }\n\n    // Convert score to risk level\n    if (riskScore >= 60) return 'very-high';\n    if (riskScore >= 40) return 'high';\n    if (riskScore >= 20) return 'moderate';\n    return 'low';\n  }\n\n  /**\n   * Detect dose escalation patterns\n   */\n  private static detectDoseEscalation(patterns: UsagePattern[]): { isEscalating: boolean; rate: number } {\n    if (patterns.length < 5) return { isEscalating: false, rate: 0 };\n\n    const doses = patterns.map(p => p.doseTaken);\n    const firstHalf = doses.slice(0, Math.floor(doses.length / 2));\n    const secondHalf = doses.slice(Math.floor(doses.length / 2));\n\n    const avgFirst = firstHalf.reduce((sum, dose) => sum + dose, 0) / firstHalf.length;\n    const avgSecond = secondHalf.reduce((sum, dose) => sum + dose, 0) / secondHalf.length;\n\n    const escalationRate = (avgSecond - avgFirst) / avgFirst;\n    \n    return {\n      isEscalating: escalationRate > 0.1, // 10% increase\n      rate: escalationRate\n    };\n  }\n\n  /**\n   * Detect effectiveness decline\n   */\n  private static detectEffectivenessDecline(patterns: UsagePattern[]): { isDeclineDetected: boolean; rate: number } {\n    const effectivenessRatings = patterns\n      .filter(p => p.effectivenessRating !== undefined)\n      .map(p => p.effectivenessRating!);\n\n    if (effectivenessRatings.length < 5) return { isDeclineDetected: false, rate: 0 };\n\n    const firstHalf = effectivenessRatings.slice(0, Math.floor(effectivenessRatings.length / 2));\n    const secondHalf = effectivenessRatings.slice(Math.floor(effectivenessRatings.length / 2));\n\n    const avgFirst = firstHalf.reduce((sum, rating) => sum + rating, 0) / firstHalf.length;\n    const avgSecond = secondHalf.reduce((sum, rating) => sum + rating, 0) / secondHalf.length;\n\n    const declineRate = (avgFirst - avgSecond) / avgFirst;\n    \n    return {\n      isDeclineDetected: declineRate > 0.15, // 15% decline\n      rate: declineRate\n    };\n  }\n\n  /**\n   * Assess if tapering is needed\n   */\n  private static assessTaperingNeed(\n    medication: Medication, \n    usagePatterns: UsagePattern[], \n    currentDuration: number\n  ): { recommended: boolean; urgency: 'none' | 'consider' | 'recommended' | 'urgent' } {\n    const category = medication.dependencyRiskCategory;\n    const timeline = this.RISK_TIMELINES[category] || this.RISK_TIMELINES['low-risk'];\n\n    // For antidepressants, don't recommend tapering until minimum treatment duration\n    if (category === 'antidepressant' && currentDuration < 180) {\n      return { recommended: false, urgency: 'none' };\n    }\n\n    // Duration-based recommendations\n    if (currentDuration > timeline.urgentDuration) {\n      return { recommended: true, urgency: 'urgent' };\n    } else if (currentDuration > timeline.warningDuration) {\n      return { recommended: true, urgency: 'recommended' };\n    } else if (currentDuration > timeline.maxSafeDuration) {\n      return { recommended: true, urgency: 'consider' };\n    }\n\n    // Pattern-based recommendations\n    if (usagePatterns.length > 0) {\n      const recentPatterns = usagePatterns.slice(-7);\n      const doseEscalation = this.detectDoseEscalation(recentPatterns);\n      \n      if (doseEscalation.isEscalating && doseEscalation.rate > 0.25) {\n        return { recommended: true, urgency: 'recommended' };\n      }\n    }\n\n    return { recommended: false, urgency: 'none' };\n  }\n\n  /**\n   * Generate risk alerts based on current assessment\n   */\n  private static generateRiskAlerts(\n    medication: Medication, \n    usagePatterns: UsagePattern[], \n    currentDuration: number\n  ): DependenceAlert[] {\n    const alerts: DependenceAlert[] = [];\n    const category = medication.dependencyRiskCategory;\n    const timeline = this.RISK_TIMELINES[category] || this.RISK_TIMELINES['low-risk'];\n    const now = new Date();\n\n    // Duration-based alerts\n    if (currentDuration === timeline.maxSafeDuration) {\n      alerts.push({\n        id: generateId(),\n        type: 'early-warning',\n        priority: 'medium',\n        message: `You've been taking ${medication.name} for ${currentDuration} days. Consider discussing with your doctor about treatment goals.`,\n        trigger: 'duration-milestone',\n        timestamp: now,\n        acknowledged: false\n      });\n    }\n\n    if (currentDuration === timeline.warningDuration) {\n      alerts.push({\n        id: generateId(),\n        type: 'intervention-needed',\n        priority: 'high',\n        message: `${medication.name} has been taken for ${currentDuration} days. Review with your healthcare provider is recommended.`,\n        trigger: 'extended-duration',\n        timestamp: now,\n        acknowledged: false\n      });\n    }\n\n    if (currentDuration >= timeline.urgentDuration) {\n      alerts.push({\n        id: generateId(),\n        type: 'urgent-medical',\n        priority: 'critical',\n        message: `Long-term use of ${medication.name} (${currentDuration} days). Urgent medical review and tapering plan needed.`,\n        trigger: 'long-term-use',\n        timestamp: now,\n        acknowledged: false\n      });\n    }\n\n    // Pattern-based alerts\n    if (usagePatterns.length > 0) {\n      const recentPatterns = usagePatterns.slice(-7);\n      const doseEscalation = this.detectDoseEscalation(recentPatterns);\n      \n      if (doseEscalation.isEscalating) {\n        alerts.push({\n          id: generateId(),\n          type: 'intervention-needed',\n          priority: 'high',\n          message: `Dose escalation pattern detected for ${medication.name}. This may indicate developing tolerance.`,\n          trigger: 'dose-escalation',\n          timestamp: now,\n          acknowledged: false\n        });\n      }\n\n      // High craving levels\n      const recentCravings = recentPatterns\n        .filter(p => p.cravingLevel !== undefined && p.cravingLevel! > 7);\n      \n      if (recentCravings.length >= 3) {\n        alerts.push({\n          id: generateId(),\n          type: 'intervention-needed',\n          priority: 'high',\n          message: `High craving levels reported for ${medication.name}. Consider discussing dependence prevention with your doctor.`,\n          trigger: 'high-cravings',\n          timestamp: now,\n          acknowledged: false\n        });\n      }\n    }\n\n    return alerts;\n  }\n\n  /**\n   * Determine if doctor review is needed\n   */\n  private static shouldReviewWithDoctor(\n    medication: Medication, \n    usagePatterns: UsagePattern[], \n    currentDuration: number\n  ): boolean {\n    const category = medication.dependencyRiskCategory;\n    const timeline = this.RISK_TIMELINES[category] || this.RISK_TIMELINES['low-risk'];\n    const prevention = medication.dependencePrevention;\n\n    // Regular review schedule\n    if (prevention?.lastDoctorReview) {\n      const daysSinceReview = Math.floor(\n        (new Date().getTime() - new Date(prevention.lastDoctorReview).getTime()) / (1000 * 60 * 60 * 24)\n      );\n      if (daysSinceReview >= timeline.reviewFrequency) return true;\n    } else {\n      // Never reviewed\n      if (currentDuration >= timeline.reviewFrequency) return true;\n    }\n\n    // Risk-based review\n    if (currentDuration > timeline.warningDuration) return true;\n    \n    // Pattern-based review\n    if (usagePatterns.length > 0) {\n      const recentPatterns = usagePatterns.slice(-14);\n      const doseEscalation = this.detectDoseEscalation(recentPatterns);\n      if (doseEscalation.isEscalating && doseEscalation.rate > 0.2) return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Get educational resources based on medication category\n   */\n  private static getEducationalResources(category: string): string[] {\n    const resources = {\n      'benzodiazepine': [\n        'Understanding benzodiazepine dependence and withdrawal',\n        'Safe tapering strategies for benzodiazepines',\n        'Alternative treatments for anxiety and sleep',\n        'Cognitive behavioral therapy for anxiety disorders'\n      ],\n      'opioid': [\n        'Understanding opioid dependence and tolerance',\n        'Pain management alternatives to opioids',\n        'Safe opioid tapering protocols',\n        'Naloxone (Narcan) administration and safety'\n      ],\n      'stimulant': [\n        'ADHD medication management and monitoring',\n        'Recognizing stimulant abuse and dependence',\n        'Behavioral interventions for ADHD',\n        'Managing stimulant side effects'\n      ],\n      'sleep-aid': [\n        'Sleep hygiene and non-medication approaches',\n        'Understanding sleep medication dependence',\n        'Cognitive behavioral therapy for insomnia',\n        'Safe discontinuation of sleep medications'\n      ],\n      'antidepressant': [\n        'Understanding antidepressant discontinuation syndrome',\n        'Safe tapering of antidepressant medications',\n        'Depression relapse prevention strategies',\n        'Therapy options for depression and anxiety'\n      ]\n    };\n\n    return resources[category] || [\n      'Safe medication use and monitoring',\n      'When to consult your healthcare provider',\n      'Understanding medication dependence vs. addiction',\n      'Building healthy coping strategies'\n    ];\n  }\n\n  /**\n   * Generate tapering schedule recommendation\n   */\n  static generateTaperingRecommendation(medication: Medication): {\n    recommended: boolean;\n    schedule?: {\n      totalDuration: number; // weeks\n      reductionRate: number; // percentage per step\n      steps: Array<{ week: number; dose: number; notes: string }>;\n    };\n    warnings: string[];\n    monitoring: string[];\n  } {\n    const category = medication.dependencyRiskCategory;\n    const currentDose = parseFloat(medication.dosage);\n    \n    // Don't recommend tapering for medications that typically don't require it\n    if (category === 'low-risk' || !this.requiresTapering(category)) {\n      return {\n        recommended: false,\n        warnings: ['Tapering may not be necessary for this medication type'],\n        monitoring: ['Monitor for any unusual symptoms if discontinuing']\n      };\n    }\n\n    // Generate category-specific tapering schedule\n    const schedule = this.generateTaperingSchedule(category, currentDose, medication.unit);\n    \n    return {\n      recommended: true,\n      schedule,\n      warnings: this.getTaperingWarnings(category),\n      monitoring: this.getTaperingMonitoring(category)\n    };\n  }\n\n  /**\n   * Check if medication requires tapering\n   */\n  private static requiresTapering(category: string): boolean {\n    return ['benzodiazepine', 'opioid', 'sleep-aid', 'antidepressant', 'anticonvulsant'].includes(category);\n  }\n\n  /**\n   * Generate specific tapering schedule\n   */\n  private static generateTaperingSchedule(category: string, currentDose: number, unit: string) {\n    const schedules = {\n      'benzodiazepine': {\n        totalDuration: 8, // weeks\n        reductionRate: 12.5, // 12.5% per week\n        stabilizationWeeks: [2, 4, 6] // weeks to pause reduction\n      },\n      'opioid': {\n        totalDuration: 4,\n        reductionRate: 25, // 25% per week\n        stabilizationWeeks: [2]\n      },\n      'sleep-aid': {\n        totalDuration: 6,\n        reductionRate: 15,\n        stabilizationWeeks: [2, 4]\n      },\n      'antidepressant': {\n        totalDuration: 12,\n        reductionRate: 8.3, // 8.3% per week\n        stabilizationWeeks: [4, 8]\n      }\n    };\n\n    const config = schedules[category] || schedules['benzodiazepine'];\n    const steps = [];\n    let dose = currentDose;\n\n    for (let week = 1; week <= config.totalDuration; week++) {\n      if (config.stabilizationWeeks.includes(week)) {\n        steps.push({\n          week,\n          dose,\n          notes: 'Stabilization week - maintain current dose'\n        });\n      } else {\n        dose = dose * (1 - config.reductionRate / 100);\n        steps.push({\n          week,\n          dose: Math.round(dose * 100) / 100,\n          notes: `Reduce to ${Math.round(dose * 100) / 100}${unit}`\n        });\n      }\n    }\n\n    return {\n      totalDuration: config.totalDuration,\n      reductionRate: config.reductionRate,\n      steps\n    };\n  }\n\n  /**\n   * Get tapering warnings by category\n   */\n  private static getTaperingWarnings(category: string): string[] {\n    const warnings = {\n      'benzodiazepine': [\n        'Never stop abruptly - can cause dangerous withdrawal symptoms',\n        'Seizures are a risk with rapid discontinuation',\n        'Withdrawal can be life-threatening - medical supervision required'\n      ],\n      'opioid': [\n        'Withdrawal can be very uncomfortable but not life-threatening',\n        'Consider medication-assisted treatment options',\n        'Monitor for depression and suicidal thoughts'\n      ],\n      'antidepressant': [\n        'Discontinuation syndrome can mimic depression relapse',\n        'Brain zaps and dizziness are common withdrawal symptoms',\n        'Monitor closely for depression relapse'\n      ]\n    };\n\n    return warnings[category] || ['Consult healthcare provider before making changes'];\n  }\n\n  /**\n   * Get tapering monitoring recommendations\n   */\n  private static getTaperingMonitoring(category: string): string[] {\n    const monitoring = {\n      'benzodiazepine': [\n        'Daily mood and anxiety levels',\n        'Sleep quality and patterns',\n        'Any seizure activity',\n        'Blood pressure and heart rate'\n      ],\n      'opioid': [\n        'Pain levels and management',\n        'Mood and mental health',\n        'Sleep and appetite',\n        'Withdrawal symptom severity'\n      ],\n      'antidepressant': [\n        'Depression and anxiety symptoms',\n        'Suicidal thoughts or behaviors',\n        'Sleep and energy levels',\n        'Social and work functioning'\n      ]\n    };\n\n    return monitoring[category] || ['General wellbeing and symptom monitoring'];\n  }\n}\n","import { MedicationCategory, DependencyRiskCategory, RiskLevel } from '@/types';\n\nexport interface MedicationDatabaseEntry {\n  name: string;\n  genericName?: string;\n  brandNames?: string[];\n  category: MedicationCategory;\n  dependencyRiskCategory: DependencyRiskCategory;\n  riskLevel: RiskLevel;\n  commonDosages: string[];\n  commonUnits: string[];\n  commonFrequencies: string[];\n  description?: string;\n  commonSideEffects?: string[];\n  commonInteractions?: string[];\n  withdrawalRisk: 'none' | 'low' | 'moderate' | 'high' | 'severe';\n  taperingRequired: boolean;\n  taperingRecommendations?: {\n    method: 'linear' | 'exponential' | 'hyperbolic' | 'custom';\n    durationWeeks: number;\n    reductionPercent: number;\n    notes?: string;\n  };\n  psychologicalSupport?: {\n    adherenceFactors: string[];\n    motivationalMessages: string[];\n    riskTriggers: string[];\n  };\n}\n\nexport const MEDICATION_DATABASE: MedicationDatabaseEntry[] = [\n  // PRESCRIPTION MEDICATIONS - High Risk (Opioids)\n  {\n    name: \"Oxycodone\",\n    brandNames: [\"OxyContin\", \"Percocet\", \"Roxicodone\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"opioid\",\n    riskLevel: \"high\",\n    commonDosages: [\"5\", \"10\", \"15\", \"20\", \"30\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"every-4-hours\", \"every-6-hours\", \"twice-daily\"],\n    description: \"Strong opioid pain medication for moderate to severe pain\",\n    commonSideEffects: [\"drowsiness\", \"constipation\", \"nausea\", \"dizziness\", \"respiratory depression\"],\n    commonInteractions: [\"alcohol\", \"benzodiazepines\", \"muscle relaxants\", \"sleep aids\"],\n    withdrawalRisk: \"severe\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"hyperbolic\",\n      durationWeeks: 8,\n      reductionPercent: 10,\n      notes: \"Use hyperbolic tapering: 10% reduction of current dose every 1-2 weeks. Monitor for withdrawal symptoms. Medical supervision essential.\"\n    },\n    psychologicalSupport: {\n      adherenceFactors: [\"pain management goals\", \"withdrawal fear\", \"tolerance concerns\"],\n      motivationalMessages: [\n        \"Taking your medication as prescribed helps manage pain safely\",\n        \"Consistent dosing prevents withdrawal while managing pain\",\n        \"You're taking an important step in your pain management journey\"\n      ],\n      riskTriggers: [\"dose escalation\", \"early refills\", \"frequent breakthrough pain\"]\n    }\n  },\n  {\n    name: \"Morphine\",\n    brandNames: [\"MS Contin\", \"Kadian\", \"Avinza\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"opioid\",\n    riskLevel: \"high\",\n    commonDosages: [\"15\", \"30\", \"60\", \"100\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"twice-daily\", \"every-12-hours\"],\n    description: \"Strong opioid for severe pain management\",\n    commonSideEffects: [\"constipation\", \"drowsiness\", \"nausea\", \"confusion\"],\n    withdrawalRisk: \"severe\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"hyperbolic\",\n      durationWeeks: 12,\n      reductionPercent: 10,\n      notes: \"Very slow hyperbolic tapering required. Consider switching to longer-acting formulation first. 10% of current dose every 2 weeks.\"\n    }\n  },\n  {\n    name: \"Tramadol\",\n    brandNames: [\"Ultram\", \"ConZip\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"opioid\",\n    riskLevel: \"moderate\",\n    commonDosages: [\"50\", \"100\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"every-6-hours\", \"every-8-hours\"],\n    description: \"Atypical opioid for moderate pain\",\n    withdrawalRisk: \"moderate\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"linear\",\n      durationWeeks: 2,\n      reductionPercent: 50,\n      notes: \"Can cause seizures if stopped abruptly. Gradual reduction recommended.\"\n    }\n  },\n\n  // PRESCRIPTION MEDICATIONS - High Risk (Benzodiazepines)\n  {\n    name: \"Alprazolam\",\n    brandNames: [\"Xanax\", \"Niravam\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"benzodiazepine\",\n    riskLevel: \"high\",\n    commonDosages: [\"0.25\", \"0.5\", \"1\", \"2\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"as-needed\", \"twice-daily\", \"three-times-daily\"],\n    description: \"Short-acting benzodiazepine for anxiety and panic disorders\",\n    commonSideEffects: [\"drowsiness\", \"memory problems\", \"confusion\", \"coordination problems\"],\n    commonInteractions: [\"alcohol\", \"opioids\", \"muscle relaxants\", \"antihistamines\"],\n    withdrawalRisk: \"severe\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"hyperbolic\",\n      durationWeeks: 16,\n      reductionPercent: 10,\n      notes: \"Extremely slow hyperbolic taper required following Ashton Manual principles. Consider switching to diazepam first. 10% of current dose every 2-3 weeks. Medical supervision essential.\"\n    },\n    psychologicalSupport: {\n      adherenceFactors: [\"anxiety management\", \"withdrawal fear\", \"rebound anxiety\"],\n      motivationalMessages: [\n        \"Taking your anxiety medication consistently helps maintain emotional balance\",\n        \"Gradual, consistent dosing prevents rebound anxiety\",\n        \"You're managing your anxiety responsibly\"\n      ],\n      riskTriggers: [\"dose increases\", \"taking extra doses\", \"rebound anxiety\", \"tolerance\"]\n    }\n  },\n  {\n    name: \"Lorazepam\",\n    brandNames: [\"Ativan\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"benzodiazepine\",\n    riskLevel: \"high\",\n    commonDosages: [\"0.5\", \"1\", \"2\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"as-needed\", \"twice-daily\"],\n    description: \"Intermediate-acting benzodiazepine for anxiety\",\n    withdrawalRisk: \"severe\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"hyperbolic\",\n      durationWeeks: 12,\n      reductionPercent: 10,\n      notes: \"Gradual hyperbolic reduction essential. Risk of seizures if stopped abruptly. 10% of current dose every 2 weeks.\"\n    }\n  },\n  {\n    name: \"Clonazepam\",\n    brandNames: [\"Klonopin\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"benzodiazepine\",\n    riskLevel: \"high\",\n    commonDosages: [\"0.5\", \"1\", \"2\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Long-acting benzodiazepine for anxiety and seizures\",\n    withdrawalRisk: \"severe\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"hyperbolic\",\n      durationWeeks: 20,\n      reductionPercent: 10,\n      notes: \"Very long hyperbolic taper due to long half-life and high potency. 10% of current dose every 3-4 weeks. Monitor for seizure risk.\"\n    }\n  },\n\n  // PRESCRIPTION MEDICATIONS - High Risk (Stimulants)\n  {\n    name: \"Amphetamine/Dextroamphetamine\",\n    brandNames: [\"Adderall\", \"Adderall XR\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"stimulant\",\n    riskLevel: \"high\",\n    commonDosages: [\"5\", \"10\", \"15\", \"20\", \"25\", \"30\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Stimulant medication for ADHD\",\n    commonSideEffects: [\"decreased appetite\", \"insomnia\", \"mood changes\", \"increased heart rate\"],\n    withdrawalRisk: \"moderate\",\n    taperingRequired: false,\n    psychologicalSupport: {\n      adherenceFactors: [\"ADHD symptom management\", \"academic/work performance\", \"side effect tolerance\"],\n      motivationalMessages: [\n        \"Your ADHD medication helps you stay focused and organized\",\n        \"Consistent dosing maintains stable symptom control\",\n        \"You're taking charge of your ADHD management\"\n      ],\n      riskTriggers: [\"dose increases for performance\", \"taking extra doses\", \"using for energy\"]\n    }\n  },\n  {\n    name: \"Methylphenidate\",\n    brandNames: [\"Ritalin\", \"Concerta\", \"Metadate\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"stimulant\",\n    riskLevel: \"high\",\n    commonDosages: [\"5\", \"10\", \"18\", \"27\", \"36\", \"54\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Stimulant medication for ADHD\",\n    withdrawalRisk: \"moderate\",\n    taperingRequired: false\n  },\n\n  // PRESCRIPTION MEDICATIONS - Moderate Risk (Sleep Aids)\n  {\n    name: \"Zolpidem\",\n    brandNames: [\"Ambien\", \"Edluar\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"sleep-aid\",\n    riskLevel: \"moderate\",\n    commonDosages: [\"5\", \"10\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Non-benzodiazepine sleep medication\",\n    commonSideEffects: [\"drowsiness\", \"dizziness\", \"memory problems\", \"complex behaviors\"],\n    withdrawalRisk: \"moderate\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"linear\",\n      durationWeeks: 2,\n      reductionPercent: 25,\n      notes: \"Gradual reduction to prevent rebound insomnia. May cause temporary sleep disturbance.\"\n    }\n  },\n  {\n    name: \"Eszopiclone\",\n    brandNames: [\"Lunesta\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"sleep-aid\",\n    riskLevel: \"moderate\",\n    commonDosages: [\"1\", \"2\", \"3\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Non-benzodiazepine sleep medication\",\n    withdrawalRisk: \"moderate\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"linear\",\n      durationWeeks: 2,\n      reductionPercent: 33,\n      notes: \"Reduce gradually to minimize rebound insomnia.\"\n    }\n  },\n\n  // PRESCRIPTION MEDICATIONS - Low Risk (Antidepressants)\n  {\n    name: \"Sertraline\",\n    brandNames: [\"Zoloft\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"antidepressant\",\n    riskLevel: \"low\",\n    commonDosages: [\"25\", \"50\", \"100\", \"150\", \"200\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"SSRI antidepressant for depression and anxiety\",\n    commonSideEffects: [\"nausea\", \"headache\", \"sexual side effects\", \"sleep changes\"],\n    withdrawalRisk: \"low\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"linear\",\n      durationWeeks: 4,\n      reductionPercent: 25,\n      notes: \"Gradual reduction to prevent discontinuation syndrome.\"\n    },\n    psychologicalSupport: {\n      adherenceFactors: [\"mood stability\", \"symptom return fear\", \"side effect management\"],\n      motivationalMessages: [\n        \"Your antidepressant helps maintain emotional balance\",\n        \"Consistent use supports long-term mental health\",\n        \"You're investing in your mental wellness\"\n      ],\n      riskTriggers: [\"mood episodes\", \"missing doses frequently\", \"stopping abruptly\"]\n    }\n  },\n  {\n    name: \"Fluoxetine\",\n    brandNames: [\"Prozac\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"antidepressant\",\n    riskLevel: \"low\",\n    commonDosages: [\"10\", \"20\", \"40\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"SSRI antidepressant with long half-life\",\n    withdrawalRisk: \"low\",\n    taperingRequired: false,\n    taperingRecommendations: {\n      method: \"linear\",\n      durationWeeks: 2,\n      reductionPercent: 50,\n      notes: \"Long half-life makes withdrawal less likely. Still recommend gradual reduction.\"\n    }\n  },\n  {\n    name: \"Escitalopram\",\n    brandNames: [\"Lexapro\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"antidepressant\",\n    riskLevel: \"low\",\n    commonDosages: [\"5\", \"10\", \"20\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"SSRI antidepressant for depression and anxiety\",\n    withdrawalRisk: \"low\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"linear\",\n      durationWeeks: 3,\n      reductionPercent: 33,\n      notes: \"Monitor for discontinuation symptoms.\"\n    }\n  },\n\n  // OVER-THE-COUNTER MEDICATIONS\n  {\n    name: \"Ibuprofen\",\n    brandNames: [\"Advil\", \"Motrin\"],\n    category: \"over-the-counter\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"200\", \"400\", \"600\", \"800\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"every-6-hours\", \"every-8-hours\"],\n    description: \"NSAID for pain and inflammation\",\n    commonSideEffects: [\"stomach upset\", \"kidney issues\", \"increased bleeding risk\"],\n    commonInteractions: [\"blood thinners\", \"ACE inhibitors\", \"lithium\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Acetaminophen\",\n    brandNames: [\"Tylenol\"],\n    category: \"over-the-counter\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"325\", \"500\", \"650\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"every-4-hours\", \"every-6-hours\"],\n    description: \"Pain reliever and fever reducer\",\n    commonSideEffects: [\"liver damage with overdose\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Diphenhydramine\",\n    brandNames: [\"Benadryl\"],\n    category: \"over-the-counter\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"12.5\", \"25\", \"50\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"every-6-hours\", \"once-daily\"],\n    description: \"Antihistamine for allergies and sleep\",\n    commonSideEffects: [\"drowsiness\", \"dry mouth\", \"confusion in elderly\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n\n  // VITAMINS AND SUPPLEMENTS\n  {\n    name: \"Vitamin D3\",\n    brandNames: [\"Cholecalciferol\"],\n    category: \"vitamin\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"400\", \"800\", \"1000\", \"2000\", \"4000\", \"5000\", \"10000\"],\n    commonUnits: [\"iu\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Essential vitamin for bone health and immune function\",\n    commonSideEffects: [\"nausea\", \"vomiting\", \"kidney stones with excess\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false,\n    psychologicalSupport: {\n      adherenceFactors: [\"bone health goals\", \"mood support\", \"immune health\"],\n      motivationalMessages: [\n        \"Your Vitamin D supports strong bones and immune health\",\n        \"Daily supplementation helps maintain optimal levels\",\n        \"You're taking a proactive step for your long-term health\"\n      ],\n      riskTriggers: []\n    }\n  },\n  {\n    name: \"Vitamin B12\",\n    brandNames: [\"Cyanocobalamin\", \"Methylcobalamin\"],\n    category: \"vitamin\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"100\", \"250\", \"500\", \"1000\", \"2500\"],\n    commonUnits: [\"mcg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Essential vitamin for nerve function and energy metabolism\",\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Vitamin C\",\n    brandNames: [\"Ascorbic Acid\"],\n    category: \"vitamin\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"250\", \"500\", \"1000\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Antioxidant vitamin for immune support\",\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Multivitamin\",\n    category: \"vitamin\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"1\"],\n    commonUnits: [\"tablets\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Comprehensive vitamin and mineral supplement\",\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n\n  // MINERAL SUPPLEMENTS\n  {\n    name: \"Magnesium\",\n    brandNames: [\"Magnesium Oxide\", \"Magnesium Glycinate\", \"Magnesium Citrate\"],\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"200\", \"400\", \"500\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Essential mineral for muscle and nerve function\",\n    commonSideEffects: [\"diarrhea\", \"stomach upset\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Calcium\",\n    brandNames: [\"Calcium Carbonate\", \"Calcium Citrate\"],\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"500\", \"600\", \"1000\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Essential mineral for bone health\",\n    commonSideEffects: [\"constipation\", \"kidney stones\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Iron\",\n    brandNames: [\"Ferrous Sulfate\", \"Ferrous Gluconate\"],\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"18\", \"25\", \"65\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Essential mineral for blood health\",\n    commonSideEffects: [\"constipation\", \"stomach upset\", \"dark stools\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Zinc\",\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"8\", \"15\", \"30\", \"50\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Essential mineral for immune function\",\n    commonSideEffects: [\"nausea\", \"stomach upset\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n\n  // OMEGA AND FATTY ACID SUPPLEMENTS\n  {\n    name: \"Fish Oil\",\n    brandNames: [\"Omega-3\", \"EPA/DHA\"],\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"500\", \"1000\", \"1200\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Omega-3 fatty acids for heart and brain health\",\n    commonSideEffects: [\"fishy aftertaste\", \"stomach upset\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Flaxseed Oil\",\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"1000\", \"1300\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Plant-based omega-3 fatty acids\",\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n\n  // PROBIOTICS\n  {\n    name: \"Probiotics\",\n    brandNames: [\"Lactobacillus\", \"Bifidobacterium\"],\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"1\", \"5\", \"10\", \"50\"],\n    commonUnits: [\"billion CFU\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Beneficial bacteria for digestive health\",\n    commonSideEffects: [\"gas\", \"bloating\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n\n  // HERBAL SUPPLEMENTS\n  {\n    name: \"St. John's Wort\",\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"low\",\n    commonDosages: [\"300\", \"450\", \"600\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"three-times-daily\"],\n    description: \"Herbal supplement traditionally used for mood support\",\n    commonSideEffects: [\"photosensitivity\", \"drug interactions\"],\n    commonInteractions: [\"antidepressants\", \"birth control\", \"blood thinners\"],\n    withdrawalRisk: \"low\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"linear\",\n      durationWeeks: 2,\n      reductionPercent: 50,\n      notes: \"Gradual reduction recommended to prevent mood changes.\"\n    },\n    psychologicalSupport: {\n      adherenceFactors: [\"mood support\", \"natural approach preference\"],\n      motivationalMessages: [\n        \"Your herbal supplement supports natural mood balance\",\n        \"Consistent use helps maintain steady herbal benefits\"\n      ],\n      riskTriggers: [\"mood changes\", \"drug interactions\"]\n    }\n  },\n  {\n    name: \"Valerian Root\",\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"low\",\n    commonDosages: [\"300\", \"450\", \"600\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Herbal supplement for sleep and relaxation\",\n    commonSideEffects: [\"drowsiness\", \"headache\", \"stomach upset\"],\n    withdrawalRisk: \"low\",\n    taperingRequired: false,\n    taperingRecommendations: {\n      method: \"linear\",\n      durationWeeks: 1,\n      reductionPercent: 50,\n      notes: \"May cause rebound insomnia if stopped abruptly.\"\n    }\n  },\n  {\n    name: \"Ginkgo Biloba\",\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"40\", \"60\", \"120\", \"240\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Herbal supplement for cognitive support\",\n    commonSideEffects: [\"headache\", \"dizziness\", \"stomach upset\"],\n    commonInteractions: [\"blood thinners\", \"seizure medications\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Ginseng\",\n    brandNames: [\"American Ginseng\", \"Asian Ginseng\", \"Panax Ginseng\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"100\", \"200\", \"400\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Herbal supplement for energy and immune support\",\n    commonSideEffects: [\"insomnia\", \"headache\", \"digestive upset\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Echinacea\",\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"300\", \"400\", \"500\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"three-times-daily\"],\n    description: \"Herbal supplement for immune support\",\n    commonSideEffects: [\"nausea\", \"dizziness\", \"allergic reactions\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Turmeric/Curcumin\",\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"500\", \"750\", \"1000\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Anti-inflammatory herbal supplement\",\n    commonSideEffects: [\"stomach upset\", \"increased bleeding risk\"],\n    commonInteractions: [\"blood thinners\", \"diabetes medications\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Ashwagandha\",\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"250\", \"300\", \"500\", \"600\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Adaptogenic herb for stress support\",\n    commonSideEffects: [\"drowsiness\", \"stomach upset\", \"diarrhea\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Rhodiola Rosea\",\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"200\", \"300\", \"400\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Adaptogenic herb for stress and fatigue\",\n    commonSideEffects: [\"dizziness\", \"headache\", \"insomnia\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Milk Thistle\",\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"175\", \"200\", \"250\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Herbal supplement for liver support\",\n    commonSideEffects: [\"nausea\", \"diarrhea\", \"bloating\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Saw Palmetto\",\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"160\", \"320\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Herbal supplement for prostate health\",\n    commonSideEffects: [\"stomach upset\", \"headache\", \"dizziness\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n\n  // PLANT-BASED DRUGS AND ETHNOBOTANICALS\n  {\n    name: \"Kratom\",\n    brandNames: [\"Mitragyna speciosa\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"opioid\",\n    riskLevel: \"high\",\n    commonDosages: [\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\"],\n    commonUnits: [\"g\"],\n    commonFrequencies: [\"twice-daily\", \"three-times-daily\", \"as-needed\"],\n    description: \"Plant-based substance with opioid-like effects; legal status varies by location\",\n    commonSideEffects: [\"nausea\", \"constipation\", \"dizziness\", \"drowsiness\", \"dependence\", \"tolerance\"],\n    commonInteractions: [\"opioids\", \"alcohol\", \"benzodiazepines\", \"MAO inhibitors\"],\n    withdrawalRisk: \"high\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"hyperbolic\",\n      durationWeeks: 8,\n      reductionPercent: 10,\n      notes: \"Can cause significant withdrawal symptoms including anxiety, muscle aches, and cravings. Use hyperbolic taper: 10% of current dose every 1-2 weeks. Medical supervision recommended.\"\n    },\n    psychologicalSupport: {\n      adherenceFactors: [\"withdrawal avoidance\", \"pain management\", \"mood regulation\"],\n      motivationalMessages: [\n        \"Managing kratom use responsibly helps prevent dependence\",\n        \"Gradual reduction is safer than abrupt cessation\",\n        \"Consider discussing alternatives with a healthcare provider\"\n      ],\n      riskTriggers: [\"dose escalation\", \"multiple daily doses\", \"using for mood regulation\"]\n    }\n  },\n  {\n    name: \"Kava\",\n    brandNames: [\"Piper methysticum\", \"Kava Kava\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"moderate\",\n    commonDosages: [\"50\", \"100\", \"200\", \"300\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"as-needed\"],\n    description: \"Pacific Island plant used for anxiety and relaxation\",\n    commonSideEffects: [\"liver toxicity\", \"skin changes\", \"drowsiness\", \"nausea\"],\n    commonInteractions: [\"alcohol\", \"hepatotoxic drugs\", \"benzodiazepines\"],\n    withdrawalRisk: \"low\",\n    taperingRequired: false,\n    psychologicalSupport: {\n      adherenceFactors: [\"anxiety management\", \"sleep support\", \"natural preference\"],\n      motivationalMessages: [\n        \"Monitor liver function while using kava\",\n        \"Natural anxiety support can be effective when used safely\"\n      ],\n      riskTriggers: [\"liver symptoms\", \"skin changes\", \"combining with alcohol\"]\n    }\n  },\n  {\n    name: \"Passionflower\",\n    brandNames: [\"Passiflora incarnata\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"250\", \"500\", \"750\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Herbal supplement for anxiety and sleep support\",\n    commonSideEffects: [\"drowsiness\", \"dizziness\", \"confusion\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Lemon Balm\",\n    brandNames: [\"Melissa officinalis\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"300\", \"500\", \"600\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"twice-daily\", \"three-times-daily\"],\n    description: \"Calming herb for stress and sleep\",\n    commonSideEffects: [\"drowsiness\", \"nausea\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Chamomile\",\n    brandNames: [\"Matricaria chamomilla\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"220\", \"350\", \"400\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Gentle herb for relaxation and digestive support\",\n    commonSideEffects: [\"allergic reactions\", \"drowsiness\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Skullcap\",\n    brandNames: [\"Scutellaria lateriflora\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"300\", \"400\", \"500\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"twice-daily\", \"three-times-daily\"],\n    description: \"Nervine herb for anxiety and nervous tension\",\n    commonSideEffects: [\"drowsiness\", \"giddiness\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Blue Lotus\",\n    brandNames: [\"Nymphaea caerulea\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"500\", \"1000\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"as-needed\"],\n    description: \"Traditional herb for relaxation and dream enhancement\",\n    commonSideEffects: [\"drowsiness\", \"vivid dreams\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Wild Dagga\",\n    brandNames: [\"Leonotis leonurus\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"500\", \"1000\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"as-needed\"],\n    description: \"African herb with mild psychoactive properties\",\n    commonSideEffects: [\"mild euphoria\", \"relaxation\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n\n  // AMINO ACIDS AND PROTEINS\n  {\n    name: \"L-Theanine\",\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"100\", \"200\", \"400\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Amino acid for relaxation and focus\",\n    commonSideEffects: [\"headache\", \"dizziness\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"5-HTP\",\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"low\",\n    commonDosages: [\"50\", \"100\", \"200\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Amino acid precursor to serotonin\",\n    commonSideEffects: [\"nausea\", \"drowsiness\", \"muscle pain\"],\n    commonInteractions: [\"antidepressants\", \"carbidopa\"],\n    withdrawalRisk: \"low\",\n    taperingRequired: false\n  },\n  {\n    name: \"GABA\",\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"250\", \"500\", \"750\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Neurotransmitter supplement for relaxation\",\n    commonSideEffects: [\"drowsiness\", \"tingling sensation\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n\n  // MORE PLANT-BASED DRUGS AND NOOTROPICS\n  {\n    name: \"Phenibut\",\n    category: \"herbal\",\n    dependencyRiskCategory: \"benzodiazepine\",\n    riskLevel: \"high\",\n    commonDosages: [\"250\", \"500\", \"750\", \"1000\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"GABA-B agonist with anxiolytic and nootropic effects; high addiction potential\",\n    commonSideEffects: [\"sedation\", \"tolerance\", \"dependence\", \"withdrawal\"],\n    withdrawalRisk: \"severe\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"hyperbolic\",\n      durationWeeks: 12,\n      reductionPercent: 10,\n      notes: \"Extremely dangerous withdrawal similar to benzodiazepines. Medical supervision essential. Can cause seizures if stopped abruptly. Use hyperbolic taper: 10% of current dose every 2-3 weeks.\"\n    },\n    psychologicalSupport: {\n      adherenceFactors: [\"anxiety management\", \"withdrawal fear\", \"tolerance issues\"],\n      motivationalMessages: [\n        \"Tapering phenibut safely requires patience and medical support\",\n        \"Gradual reduction prevents dangerous withdrawal symptoms\"\n      ],\n      riskTriggers: [\"dose escalation\", \"daily use\", \"tolerance development\"]\n    }\n  },\n  {\n    name: \"CBD\",\n    brandNames: [\"Cannabidiol\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"5\", \"10\", \"15\", \"20\", \"25\", \"50\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Non-psychoactive cannabinoid for anxiety, pain, and inflammation\",\n    commonSideEffects: [\"fatigue\", \"diarrhea\", \"appetite changes\"],\n    commonInteractions: [\"blood thinners\", \"seizure medications\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Lion's Mane\",\n    brandNames: [\"Hericium erinaceus\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"500\", \"1000\", \"1500\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Medicinal mushroom for cognitive support and nerve health\",\n    commonSideEffects: [\"skin rash\", \"nausea\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Reishi\",\n    brandNames: [\"Ganoderma lucidum\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"500\", \"1000\", \"1500\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Adaptogenic mushroom for stress and immune support\",\n    commonSideEffects: [\"dizziness\", \"skin rash\", \"upset stomach\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Cordyceps\",\n    brandNames: [\"Cordyceps sinensis\", \"Cordyceps militaris\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"500\", \"1000\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Medicinal mushroom for energy and athletic performance\",\n    commonSideEffects: [\"nausea\", \"diarrhea\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Bacopa Monnieri\",\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"300\", \"600\", \"900\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Ayurvedic herb for memory and cognitive enhancement\",\n    commonSideEffects: [\"nausea\", \"cramping\", \"bloating\", \"fatigue\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Gotu Kola\",\n    brandNames: [\"Centella asiatica\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"250\", \"500\", \"1000\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"twice-daily\"],\n    description: \"Traditional herb for cognitive function and circulation\",\n    commonSideEffects: [\"headache\", \"stomach upset\", \"dizziness\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Mucuna Pruriens\",\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"low\",\n    commonDosages: [\"500\", \"1000\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"L-DOPA containing bean for mood and motor function\",\n    commonSideEffects: [\"nausea\", \"bloating\", \"insomnia\"],\n    commonInteractions: [\"MAO inhibitors\", \"antipsychotics\"],\n    withdrawalRisk: \"low\",\n    taperingRequired: false\n  },\n\n  // ADDITIONAL PRESCRIPTION MEDICATIONS\n  {\n    name: \"Gabapentin\",\n    brandNames: [\"Neurontin\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"anticonvulsant\",\n    riskLevel: \"moderate\",\n    commonDosages: [\"100\", \"300\", \"400\", \"600\", \"800\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"three-times-daily\"],\n    description: \"Anticonvulsant for neuropathic pain and seizures\",\n    commonSideEffects: [\"dizziness\", \"fatigue\", \"weight gain\", \"coordination problems\"],\n    withdrawalRisk: \"moderate\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"hyperbolic\",\n      durationWeeks: 6,\n      reductionPercent: 10,\n      notes: \"Reduce gradually using hyperbolic taper to prevent withdrawal seizures and rebound symptoms. 10% of current dose every 1-2 weeks.\"\n    }\n  },\n  {\n    name: \"Pregabalin\",\n    brandNames: [\"Lyrica\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"anticonvulsant\",\n    riskLevel: \"moderate\",\n    commonDosages: [\"25\", \"50\", \"75\", \"100\", \"150\", \"225\", \"300\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"twice-daily\", \"three-times-daily\"],\n    description: \"Anticonvulsant for neuropathic pain and anxiety\",\n    commonSideEffects: [\"dizziness\", \"drowsiness\", \"weight gain\", \"blurred vision\"],\n    withdrawalRisk: \"moderate\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"linear\",\n      durationWeeks: 2,\n      reductionPercent: 25,\n      notes: \"Gradual reduction recommended to prevent withdrawal symptoms.\"\n    }\n  },\n  {\n    name: \"Venlafaxine\",\n    brandNames: [\"Effexor\", \"Effexor XR\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"antidepressant\",\n    riskLevel: \"moderate\",\n    commonDosages: [\"37.5\", \"75\", \"150\", \"225\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"SNRI antidepressant for depression and anxiety\",\n    commonSideEffects: [\"nausea\", \"dizziness\", \"insomnia\", \"sweating\"],\n    withdrawalRisk: \"moderate\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"hyperbolic\",\n      durationWeeks: 12,\n      reductionPercent: 10,\n      notes: \"Known for severe discontinuation syndrome. Hyperbolic taper essential: 10% of current dose every 2-3 weeks. Consider tapering strips if available.\"\n    }\n  },\n  {\n    name: \"Duloxetine\",\n    brandNames: [\"Cymbalta\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"antidepressant\",\n    riskLevel: \"moderate\",\n    commonDosages: [\"20\", \"30\", \"40\", \"60\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"SNRI antidepressant for depression and pain\",\n    commonSideEffects: [\"nausea\", \"dry mouth\", \"constipation\", \"fatigue\"],\n    withdrawalRisk: \"moderate\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"hyperbolic\",\n      durationWeeks: 8,\n      reductionPercent: 10,\n      notes: \"Discontinuation syndrome common. Hyperbolic taper advised: 10% of current dose every 2 weeks.\"\n    }\n  },\n  {\n    name: \"Paroxetine\",\n    brandNames: [\"Paxil\", \"Pexeva\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"antidepressant\",\n    riskLevel: \"moderate\",\n    commonDosages: [\"10\", \"20\", \"30\", \"40\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"SSRI antidepressant with short half-life\",\n    commonSideEffects: [\"nausea\", \"drowsiness\", \"sexual dysfunction\", \"weight gain\"],\n    withdrawalRisk: \"high\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"hyperbolic\",\n      durationWeeks: 16,\n      reductionPercent: 5,\n      notes: \"Notorious for severe withdrawal. Extremely slow hyperbolic taper required due to short half-life. 5% of current dose every 2-3 weeks. Consider switching to fluoxetine first.\"\n    }\n  },\n\n  // SPECIALTY SUPPLEMENTS\n  {\n    name: \"Melatonin\",\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"0.5\", \"1\", \"3\", \"5\", \"10\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Natural hormone for sleep regulation\",\n    commonSideEffects: [\"daytime drowsiness\", \"headache\", \"dizziness\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false,\n    psychologicalSupport: {\n      adherenceFactors: [\"sleep quality\", \"natural sleep aid preference\"],\n      motivationalMessages: [\n        \"Your melatonin supports natural sleep cycles\",\n        \"Consistent timing helps regulate your sleep-wake cycle\"\n      ],\n      riskTriggers: []\n    }\n  },\n  {\n    name: \"CoQ10\",\n    brandNames: [\"Coenzyme Q10\", \"Ubiquinone\"],\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"30\", \"60\", \"100\", \"200\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Antioxidant supplement for cellular energy\",\n    commonSideEffects: [\"stomach upset\", \"loss of appetite\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Glucosamine\",\n    brandNames: [\"Glucosamine Sulfate\", \"Glucosamine HCl\"],\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"500\", \"750\", \"1000\", \"1500\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Joint health supplement\",\n    commonSideEffects: [\"nausea\", \"heartburn\", \"diarrhea\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Chondroitin\",\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"400\", \"600\", \"800\", \"1200\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Joint health supplement often combined with glucosamine\",\n    commonSideEffects: [\"nausea\", \"stomach pain\", \"constipation\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n\n  // MORE NOOTROPICS AND COGNITIVE ENHANCERS\n  {\n    name: \"Modafinil\",\n    brandNames: [\"Provigil\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"stimulant\",\n    riskLevel: \"moderate\",\n    commonDosages: [\"100\", \"200\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Wakefulness-promoting agent for narcolepsy and shift work\",\n    commonSideEffects: [\"headache\", \"nausea\", \"nervousness\", \"insomnia\"],\n    withdrawalRisk: \"low\",\n    taperingRequired: false\n  },\n  {\n    name: \"Piracetam\",\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"800\", \"1200\", \"1600\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"twice-daily\", \"three-times-daily\"],\n    description: \"Original nootropic compound for cognitive enhancement\",\n    commonSideEffects: [\"nervousness\", \"insomnia\", \"depression\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Alpha-GPC\",\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"300\", \"600\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Choline compound for cognitive function and acetylcholine\",\n    commonSideEffects: [\"heartburn\", \"headache\", \"insomnia\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Huperzine A\",\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"50\", \"100\", \"200\"],\n    commonUnits: [\"mcg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Alkaloid from Chinese club moss for memory enhancement\",\n    commonSideEffects: [\"nausea\", \"diarrhea\", \"vomiting\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Phosphatidylserine\",\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"100\", \"200\", \"300\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Phospholipid for brain health and cognitive function\",\n    commonSideEffects: [\"insomnia\", \"stomach upset\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n\n  // TRADITIONAL ADAPTOGENS AND HERBS\n  {\n    name: \"Holy Basil\",\n    brandNames: [\"Ocimum sanctum\", \"Tulsi\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"300\", \"500\", \"1000\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"twice-daily\"],\n    description: \"Sacred herb for stress reduction and immune support\",\n    commonSideEffects: [\"blood sugar changes\", \"bleeding risk\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Schisandra\",\n    brandNames: [\"Schisandra chinensis\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"500\", \"1000\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Traditional Chinese herb for liver health and adaptation\",\n    commonSideEffects: [\"heartburn\", \"stomach upset\", \"decreased appetite\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Eleuthero\",\n    brandNames: [\"Eleutherococcus senticosus\", \"Siberian Ginseng\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"300\", \"400\", \"500\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"twice-daily\"],\n    description: \"Adaptogenic herb for energy and stress resistance\",\n    commonSideEffects: [\"insomnia\", \"irritability\", \"melancholy\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"He Shou Wu\",\n    brandNames: [\"Polygonum multiflorum\", \"Fo-Ti\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"low\",\n    commonDosages: [\"500\", \"1000\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Traditional Chinese herb for longevity and hair health\",\n    commonSideEffects: [\"liver toxicity\", \"diarrhea\", \"nausea\"],\n    commonInteractions: [\"hepatotoxic drugs\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n\n  // MORE PRESCRIPTION MEDICATIONS\n  {\n    name: \"Bupropion\",\n    brandNames: [\"Wellbutrin\", \"Zyban\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"antidepressant\",\n    riskLevel: \"low\",\n    commonDosages: [\"75\", \"100\", \"150\", \"300\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"twice-daily\"],\n    description: \"Atypical antidepressant and smoking cessation aid\",\n    commonSideEffects: [\"dry mouth\", \"insomnia\", \"headache\", \"nausea\"],\n    withdrawalRisk: \"low\",\n    taperingRequired: false\n  },\n  {\n    name: \"Mirtazapine\",\n    brandNames: [\"Remeron\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"antidepressant\",\n    riskLevel: \"low\",\n    commonDosages: [\"15\", \"30\", \"45\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Tetracyclic antidepressant with sedating properties\",\n    commonSideEffects: [\"sedation\", \"weight gain\", \"increased appetite\"],\n    withdrawalRisk: \"moderate\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"linear\",\n      durationWeeks: 3,\n      reductionPercent: 33,\n      notes: \"Gradual reduction recommended to prevent rebound insomnia and flu-like symptoms.\"\n    }\n  },\n  {\n    name: \"Quetiapine\",\n    brandNames: [\"Seroquel\"],\n    category: \"prescription\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"moderate\",\n    commonDosages: [\"25\", \"50\", \"100\", \"200\", \"300\", \"400\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"twice-daily\"],\n    description: \"Atypical antipsychotic for schizophrenia and bipolar disorder\",\n    commonSideEffects: [\"sedation\", \"weight gain\", \"metabolic changes\"],\n    withdrawalRisk: \"moderate\",\n    taperingRequired: true,\n    taperingRecommendations: {\n      method: \"linear\",\n      durationWeeks: 6,\n      reductionPercent: 25,\n      notes: \"Slow taper required to prevent rebound psychosis and withdrawal symptoms.\"\n    }\n  },\n\n  // PLANT-BASED PSYCHOACTIVES (Educational purposes)\n  {\n    name: \"Damiana\",\n    brandNames: [\"Turnera diffusa\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"400\", \"800\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\", \"as-needed\"],\n    description: \"Traditional herb for mood and sexual health\",\n    commonSideEffects: [\"mild euphoria\", \"relaxation\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Calea Zacatechichi\",\n    brandNames: [\"Dream Herb\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"500\", \"1000\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Traditional Mexican herb for dream enhancement\",\n    commonSideEffects: [\"vivid dreams\", \"nausea\", \"bitter taste\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Mulungu\",\n    brandNames: [\"Erythrina mulungu\"],\n    category: \"herbal\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"500\", \"1000\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Brazilian tree bark for anxiety and sleep\",\n    commonSideEffects: [\"sedation\", \"muscle relaxation\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n\n  // ADDITIONAL SUPPLEMENTS\n  {\n    name: \"NAD+\",\n    brandNames: [\"Nicotinamide Adenine Dinucleotide\"],\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"250\", \"500\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Cellular energy coenzyme for longevity and metabolism\",\n    commonSideEffects: [\"nausea\", \"fatigue\", \"headache\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"NMN\",\n    brandNames: [\"Nicotinamide Mononucleotide\"],\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"250\", \"500\", \"1000\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"NAD+ precursor for cellular health and aging\",\n    commonSideEffects: [\"nausea\", \"flushing\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Resveratrol\",\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"100\", \"250\", \"500\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"once-daily\"],\n    description: \"Polyphenol antioxidant for longevity and cardiovascular health\",\n    commonSideEffects: [\"nausea\", \"diarrhea\", \"skin rash\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Quercetin\",\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"250\", \"500\", \"1000\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"twice-daily\"],\n    description: \"Flavonoid with anti-inflammatory and antioxidant properties\",\n    commonSideEffects: [\"headache\", \"nausea\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  },\n  {\n    name: \"Berberine\",\n    category: \"supplement\",\n    dependencyRiskCategory: \"low-risk\",\n    riskLevel: \"minimal\",\n    commonDosages: [\"500\", \"1000\"],\n    commonUnits: [\"mg\"],\n    commonFrequencies: [\"twice-daily\"],\n    description: \"Plant alkaloid for blood sugar and metabolic health\",\n    commonSideEffects: [\"diarrhea\", \"constipation\", \"gas\"],\n    commonInteractions: [\"diabetes medications\", \"blood thinners\"],\n    withdrawalRisk: \"none\",\n    taperingRequired: false\n  }\n];\n\n// Search and filtering functions\nexport function searchMedicationDatabase(query: string): MedicationDatabaseEntry[] {\n  if (!query.trim()) return MEDICATION_DATABASE;\n  \n  const searchTerm = query.toLowerCase();\n  return MEDICATION_DATABASE.filter(med => \n    med.name.toLowerCase().includes(searchTerm) ||\n    med.genericName?.toLowerCase().includes(searchTerm) ||\n    med.brandNames?.some(brand => brand.toLowerCase().includes(searchTerm)) ||\n    med.description?.toLowerCase().includes(searchTerm)\n  );\n}\n\nexport function getMedicationsByCategory(category: MedicationCategory): MedicationDatabaseEntry[] {\n  return MEDICATION_DATABASE.filter(med => med.category === category);\n}\n\nexport function getMedicationsByRisk(riskLevel: RiskLevel): MedicationDatabaseEntry[] {\n  return MEDICATION_DATABASE.filter(med => med.riskLevel === riskLevel);\n}\n\nexport function getMedicationsRequiringTapering(): MedicationDatabaseEntry[] {\n  return MEDICATION_DATABASE.filter(med => med.taperingRequired);\n}\n\nexport function getMedicationByName(name: string): MedicationDatabaseEntry | undefined {\n  const searchName = name.toLowerCase();\n  return MEDICATION_DATABASE.find(med => \n    med.name.toLowerCase() === searchName ||\n    med.genericName?.toLowerCase() === searchName ||\n    med.brandNames?.some(brand => brand.toLowerCase() === searchName)\n  );\n}\n\nexport function generateTaperingPlan(medicationName: string, currentDose: number, currentUnit: string) {\n  const medication = getMedicationByName(medicationName);\n  \n  if (!medication?.taperingRequired || !medication.taperingRecommendations) {\n    return null;\n  }\n  \n  const tapering = medication.taperingRecommendations;\n  const totalDays = tapering.durationWeeks * 7;\n  const steps: Array<{day: number, dose: number, notes: string}> = [];\n  \n  if (tapering.method === 'linear') {\n    const dailyReduction = (currentDose * (tapering.reductionPercent / 100)) / (tapering.durationWeeks);\n    \n    for (let week = 1; week <= tapering.durationWeeks; week++) {\n      const newDose = Math.max(0, currentDose - (dailyReduction * week));\n      steps.push({\n        day: week * 7,\n        dose: Math.round(newDose * 100) / 100,\n        notes: `Week ${week}: Reduce to ${Math.round(newDose * 100) / 100} ${currentUnit}`\n      });\n    }\n  } else if (tapering.method === 'exponential') {\n    for (let week = 1; week <= tapering.durationWeeks; week++) {\n      const progress = week / tapering.durationWeeks;\n      const exponentialProgress = 1 - Math.pow(1 - progress, 2);\n      const newDose = currentDose * (1 - exponentialProgress * (tapering.reductionPercent / 100));\n      \n      steps.push({\n        day: week * 7,\n        dose: Math.round(newDose * 100) / 100,\n        notes: `Week ${week}: Reduce to ${Math.round(newDose * 100) / 100} ${currentUnit}`\n      });\n    }\n  } else if (tapering.method === 'hyperbolic') {\n    // Hyperbolic tapering: reduce by percentage of current dose each step\n    let currentStepDose = currentDose;\n    const reductionFactor = tapering.reductionPercent / 100;\n    const stepsPerWeek = medication.dependencyRiskCategory === 'benzodiazepine' ? 0.5 : 1; // Slower for benzos\n    const totalSteps = Math.ceil(tapering.durationWeeks * stepsPerWeek);\n    \n    for (let step = 1; step <= totalSteps; step++) {\n      currentStepDose = currentStepDose * (1 - reductionFactor);\n      const daysFromStart = Math.round((step / stepsPerWeek) * 7);\n      \n      steps.push({\n        day: daysFromStart,\n        dose: Math.round(currentStepDose * 1000) / 1000, // More precision for small doses\n        notes: `Step ${step} (Day ${daysFromStart}): Reduce to ${Math.round(currentStepDose * 1000) / 1000} ${currentUnit} (${tapering.reductionPercent}% reduction from previous)`\n      });\n      \n      // Stop if dose gets very small\n      if (currentStepDose < 0.001) break;\n    }\n    \n    // Add final step to zero if not already there\n    if (steps.length > 0 && steps[steps.length - 1].dose > 0.001) {\n      steps.push({\n        day: steps[steps.length - 1].day + 7,\n        dose: 0,\n        notes: `Final step: Complete discontinuation`\n      });\n    }\n  }\n  \n  // Enhanced warnings based on medication type and risk level\n  const baseWarnings = [\n    \"Consult with your healthcare provider before starting any tapering schedule\",\n    \"Monitor for withdrawal symptoms and adjust pace if necessary\", \n    \"Never stop abruptly if experiencing severe withdrawal symptoms\"\n  ];\n  \n  const riskSpecificWarnings = [];\n  if (medication.dependencyRiskCategory === 'benzodiazepine') {\n    riskSpecificWarnings.push(\n      \"Risk of seizures - medical supervision essential\",\n      \"Consider switching to longer-acting benzodiazepine first\",\n      \"Be prepared to pause or slow the taper if withdrawal symptoms are severe\"\n    );\n  }\n  if (medication.dependencyRiskCategory === 'opioid') {\n    riskSpecificWarnings.push(\n      \"Monitor for pain flares and have backup pain management plan\",\n      \"Watch for signs of psychological distress during taper\"\n    );\n  }\n  if (medication.dependencyRiskCategory === 'antidepressant') {\n    riskSpecificWarnings.push(\n      \"Monitor mood carefully during taper\",\n      \"Consider postponing taper during times of high stress\",\n      \"Discontinuation syndrome can mimic flu-like symptoms\"\n    );\n  }\n  \n  return {\n    medicationName: medication.name,\n    method: tapering.method,\n    totalDuration: totalDays,\n    steps,\n    warnings: [\n      ...baseWarnings,\n      ...riskSpecificWarnings,\n      ...(tapering.notes ? [tapering.notes] : [])\n    ],\n    riskLevel: medication.withdrawalRisk,\n    canPause: true, // All modern tapering schedules should allow pausing\n    flexibilityNotes: \"This schedule can be paused or slowed at any point if withdrawal symptoms become problematic. Patient comfort and safety should always take priority over adherence to timeline.\"\n  };\n}\n\n// Intelligent tapering recommendation based on user history and medication factors\nexport function generateIntelligentTaperingRecommendation(\n  medicationName: string, \n  currentDose: number, \n  currentUnit: string,\n  userMedication: any // The user's medication object with history\n): any {\n  const medication = getMedicationByName(medicationName);\n  \n  if (!medication?.taperingRequired || !medication.taperingRecommendations) {\n    return null;\n  }\n\n  // Calculate how long the user has been taking this medication\n  const startDate = new Date(userMedication.startDate);\n  const currentDate = new Date();\n  const monthsOnMedication = Math.floor((currentDate.getTime() - startDate.getTime()) / (1000 * 60 * 60 * 24 * 30));\n  \n  // Base tapering recommendations\n  const baseTapering = { ...medication.taperingRecommendations };\n  \n  // Adjust duration based on usage history\n  let adjustedDurationWeeks = baseTapering.durationWeeks;\n  let adjustedReductionPercent = baseTapering.reductionPercent;\n  let suggestedMethod = baseTapering.method;\n  \n  // History-based adjustments\n  if (monthsOnMedication >= 12) {\n    // Long-term use (1+ years) - much slower taper\n    adjustedDurationWeeks = Math.ceil(adjustedDurationWeeks * 1.5);\n    adjustedReductionPercent = Math.max(5, adjustedReductionPercent * 0.7);\n  } else if (monthsOnMedication >= 6) {\n    // Medium-term use (6+ months) - slower taper\n    adjustedDurationWeeks = Math.ceil(adjustedDurationWeeks * 1.3);\n    adjustedReductionPercent = Math.max(5, adjustedReductionPercent * 0.8);\n  } else if (monthsOnMedication >= 3) {\n    // Short-medium term use (3+ months) - slightly slower\n    adjustedDurationWeeks = Math.ceil(adjustedDurationWeeks * 1.1);\n  }\n  \n  // Dose-based adjustments - higher doses need slower tapers\n  const averageDose = medication.commonDosages.length > 0 ? \n    medication.commonDosages.reduce((sum, dose) => sum + parseFloat(dose), 0) / medication.commonDosages.length : \n    currentDose;\n  \n  if (currentDose > averageDose * 1.5) {\n    // High dose - slower taper\n    adjustedDurationWeeks = Math.ceil(adjustedDurationWeeks * 1.2);\n    adjustedReductionPercent = Math.max(5, adjustedReductionPercent * 0.9);\n  }\n  \n  // Risk category specific adjustments\n  if (medication.dependencyRiskCategory === 'benzodiazepine') {\n    // Always use hyperbolic for benzos\n    suggestedMethod = 'hyperbolic';\n    // Extra safety for benzos\n    if (monthsOnMedication >= 6) {\n      adjustedDurationWeeks = Math.ceil(adjustedDurationWeeks * 1.3);\n      adjustedReductionPercent = Math.min(adjustedReductionPercent, 10);\n    }\n  } else if (medication.dependencyRiskCategory === 'antidepressant' && \n             (medication.name.toLowerCase().includes('paroxetine') || \n              medication.name.toLowerCase().includes('venlafaxine'))) {\n    // Extra slow for notorious withdrawal medications\n    suggestedMethod = 'hyperbolic';\n    adjustedReductionPercent = Math.min(adjustedReductionPercent, 5);\n  }\n  \n  return {\n    originalPlan: baseTapering,\n    adjustedPlan: {\n      method: suggestedMethod,\n      durationWeeks: adjustedDurationWeeks,\n      reductionPercent: adjustedReductionPercent,\n      notes: baseTapering.notes\n    },\n    adjustmentReasons: [\n      monthsOnMedication >= 12 ? `Extended taper recommended: You've been taking ${medicationName} for ${monthsOnMedication} months` :\n      monthsOnMedication >= 6 ? `Slower taper suggested: ${monthsOnMedication} months of use requires more gradual reduction` :\n      monthsOnMedication >= 3 ? `Moderately slower taper: ${monthsOnMedication} months of use` : null,\n      \n      currentDose > averageDose * 1.5 ? `Higher dose detected: ${currentDose}${currentUnit} is above average, slower taper recommended` : null,\n      \n      medication.dependencyRiskCategory === 'benzodiazepine' ? 'Benzodiazepine detected: Extra-slow hyperbolic taper essential for safety' : null,\n      \n      medication.withdrawalRisk === 'severe' ? 'High withdrawal risk: Extended timeline prioritizes safety' : null\n    ].filter(Boolean),\n    monthsOnMedication,\n    riskFactors: {\n      longTermUse: monthsOnMedication >= 6,\n      highDose: currentDose > averageDose * 1.5,\n      highRiskMedication: medication.withdrawalRisk === 'severe',\n      benzodiazepine: medication.dependencyRiskCategory === 'benzodiazepine'\n    }\n  };\n}\n\n// Enhanced tapering plan generation with intelligent recommendations\nexport function generateEnhancedTaperingPlan(\n  medicationName: string, \n  currentDose: number, \n  currentUnit: string,\n  userMedication: any,\n  customOptions?: {\n    preferredMethod?: 'linear' | 'exponential' | 'hyperbolic' | 'custom';\n    preferredDuration?: number;\n    preferredReduction?: number;\n    includeStabilizationPeriods?: boolean;\n  }\n) {\n  const intelligentRec = generateIntelligentTaperingRecommendation(\n    medicationName, currentDose, currentUnit, userMedication\n  );\n  \n  if (!intelligentRec) return null;\n  \n  // Use custom options if provided, otherwise use intelligent recommendations\n  const finalPlan = {\n    method: customOptions?.preferredMethod || intelligentRec.adjustedPlan.method,\n    durationWeeks: customOptions?.preferredDuration || intelligentRec.adjustedPlan.durationWeeks,\n    reductionPercent: customOptions?.preferredReduction || intelligentRec.adjustedPlan.reductionPercent,\n    notes: intelligentRec.adjustedPlan.notes\n  };\n  \n  // Generate the actual tapering schedule\n  const schedule = generateTaperingPlan(medicationName, currentDose, currentUnit);\n  \n  if (!schedule) return null;\n  \n  // Override with intelligent recommendations\n  return {\n    ...schedule,\n    method: finalPlan.method,\n    intelligentRecommendations: intelligentRec,\n    customizationUsed: !!customOptions,\n    includeStabilizationPeriods: customOptions?.includeStabilizationPeriods || false\n  };\n}\n\n// Function to suggest pause duration based on withdrawal symptoms\nexport function suggestPauseDuration(medicationName: string, withdrawalSeverity: 'mild' | 'moderate' | 'severe'): number {\n  const medication = getMedicationByName(medicationName);\n  \n  if (!medication) return 7; // Default 1 week\n  \n  const basePauseDays = {\n    'mild': 3,\n    'moderate': 7,\n    'severe': 14\n  };\n  \n  let pauseDays = basePauseDays[withdrawalSeverity];\n  \n  // Adjust based on medication type\n  if (medication.dependencyRiskCategory === 'benzodiazepine') {\n    pauseDays *= 2; // Benzos need longer stabilization\n  } else if (medication.dependencyRiskCategory === 'antidepressant') {\n    pauseDays *= 1.5; // Antidepressants need moderate stabilization\n  }\n  \n  return Math.min(pauseDays, 30); // Cap at 30 days\n}\n\n// Helper function to get comprehensive medication info for autocomplete\nexport function getMedicationSuggestions(query: string, maxResults: number = 10): Array<{\n  name: string;\n  category: string;\n  riskLevel: string;\n  description: string;\n}> {\n  const results = searchMedicationDatabase(query);\n  return results.slice(0, maxResults).map(med => ({\n    name: med.name,\n    category: med.category,\n    riskLevel: med.riskLevel,\n    description: med.description || ''\n  }));\n}\n","import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\nimport { \n  Medication, \n  MedicationLog, \n  Reminder, \n  UserProfile, \n  StorageData,\n  SmartMessage,\n  CyclicDosingPattern,\n  TaperingSchedule,\n  PsychologicalIntervention,\n  AdherencePattern,\n  DependencyRiskAssessment,\n  RiskLevel,\n  DependencyRiskCategory,\n  PillConfiguration,\n  DoseConfiguration,\n  PillLogEntry,\n  PillInventoryItem,\n  AdherenceDetails,\n  MedicationUnit,\n  SideEffectReport,\n  DependencePrevention,\n  UsagePattern,\n  DependenceAlert,\n  DependenceIntervention\n} from '@/types';\nimport { \n  generateId, \n  isToday, \n  getRiskLevel, \n  getDependencyRiskCategory,\n  calculateCyclicDose,\n  generatePsychologicalMessage,\n  calculateDependencyRisk,\n  detectBehaviorPatterns,\n  generateCSV,\n  formatDate,\n  formatTime,\n  calculateTaperingDose\n} from '@/utils/helpers';\nimport { DependencePreventionService } from '@/services/dependencePreventionService';\nimport { suggestPauseDuration } from '@/services/medicationDatabase';\n\ninterface MedicationStore {\n  // State\n  medications: Medication[];\n  logs: MedicationLog[];\n  reminders: Reminder[];\n  userProfile: UserProfile | null;\n  isLoading: boolean;\n  error: string | null;\n  \n  // Advanced features state\n  smartMessages: SmartMessage[];\n  cyclicDosingPatterns: CyclicDosingPattern[];\n  taperingSchedules: TaperingSchedule[];\n  psychologicalInterventions: PsychologicalIntervention[];\n  adherencePatterns: AdherencePattern[];\n  dependencyRiskAssessments: DependencyRiskAssessment[];\n\n  // Medication actions\n  addMedication: (medication: Omit<Medication, 'id' | 'createdAt' | 'updatedAt'>) => void;\n  updateMedication: (id: string, updates: Partial<Medication>) => void;\n  deleteMedication: (id: string) => void;\n  toggleMedicationActive: (id: string) => void;\n\n  // Log actions\n  logMedication: (medicationId: string, dosage?: number, notes?: string, sideEffects?: string[]) => void;\n  updateLog: (id: string, updates: Partial<MedicationLog>) => void;\n  deleteLog: (id: string) => void;\n  markMedicationTaken: (medicationId: string, dosage?: number) => void;\n  markMedicationMissed: (medicationId: string) => void;\n\n  // NEW: Multiple pills support\n  addPillConfiguration: (medicationId: string, config: Omit<PillConfiguration, 'id'>) => void;\n  updatePillConfiguration: (medicationId: string, configId: string, updates: Partial<PillConfiguration>) => void;\n  deletePillConfiguration: (medicationId: string, configId: string) => void;\n  addDoseConfiguration: (medicationId: string, config: Omit<DoseConfiguration, 'id'>) => void;\n  updateDoseConfiguration: (medicationId: string, configId: string, updates: Partial<DoseConfiguration>) => void;\n  deleteDoseConfiguration: (medicationId: string, configId: string) => void;\n  setDefaultDoseConfiguration: (medicationId: string, configId: string) => void;\n  logMultiplePillDose: (medicationId: string, pillLogs: PillLogEntry[], notes?: string, sideEffects?: string[]) => void;\n  logDoseConfiguration: (medicationId: string, doseConfigId: string, pillLogs: PillLogEntry[], notes?: string, sideEffects?: string[]) => void;\n  calculateTotalDoseFromPills: (medicationId: string, doseConfigId?: string) => { amount: number; unit: MedicationUnit } | null;\n  updatePillInventory: (medicationId: string, inventoryUpdates: Partial<PillInventoryItem>[]) => void;\n  enableMultiplePills: (medicationId: string) => void;\n\n  // Reminder actions\n  addReminder: (reminder: Omit<Reminder, 'id' | 'createdAt' | 'updatedAt'>) => void;\n  updateReminder: (id: string, updates: Partial<Reminder>) => void;\n  deleteReminder: (id: string) => void;\n  toggleReminderActive: (id: string) => void;\n  snoozeReminder: (id: string, minutes: number) => void;\n\n  // Profile actions\n  updateProfile: (updates: Partial<UserProfile>) => void;\n  createProfile: (profile: Omit<UserProfile, 'id' | 'createdAt' | 'updatedAt'>) => void;\n\n  // Analytics and computed values\n  getMedicationAdherence: (medicationId: string, days: number) => number;\n  getTodaysReminders: () => (Reminder & { medication: Medication })[];\n  getTodaysLogs: () => MedicationLog[];\n  getMissedDoses: (days: number) => MedicationLog[];\n  getUpcomingRefills: () => Medication[];\n\n  // Utility actions\n  clearAllData: () => void;\n  importData: (data: Partial<StorageData>) => void;\n  exportData: () => StorageData;\n  setLoading: (loading: boolean) => void;\n  setError: (error: string | null) => void;\n\n  // Enhanced Export/Import actions\n  exportDataWithOptions: (options: any) => Promise<string>;\n  importDataWithValidation: (data: any, format: 'json' | 'csv') => Promise<{ success: boolean; errors: string[]; warnings: string[] }>;\n  validateImportData: (data: any) => { isValid: boolean; errors: string[]; warnings: string[] };\n  exportToCSV: (dataType: 'medications' | 'logs' | 'reminders' | 'all', dateRange?: { start: Date; end: Date }) => string;\n  exportToPDF: (options: any) => Promise<string>;\n  backupData: () => void;\n  restoreData: (backupData: any) => Promise<{ success: boolean; errors: string[] }>;\n\n  // Advanced features actions\n  // Smart messaging\n  addSmartMessage: (message: Omit<SmartMessage, 'id'>) => void;\n  markMessageAsRead: (messageId: string) => void;\n  dismissMessage: (messageId: string) => void;\n  generateContextualMessage: (medicationId: string, type: string) => void;\n\n  // Cyclic dosing\n  addCyclicDosingPattern: (pattern: Omit<CyclicDosingPattern, 'id'>) => void;\n  updateCyclicDosingPattern: (id: string, updates: Partial<CyclicDosingPattern>) => void;\n  deleteCyclicDosingPattern: (id: string) => void;\n  getCurrentDose: (medicationId: string) => { dose: number; phase: string; message?: string };\n\n  // Tapering schedules\n  addTaperingSchedule: (schedule: Omit<TaperingSchedule, 'id'>) => void;\n  updateTaperingSchedule: (id: string, updates: Partial<TaperingSchedule>) => void;\n  deleteTaperingSchedule: (id: string) => void;\n\n  // Risk assessment\n  assessDependencyRisk: (medicationId: string) => DependencyRiskAssessment;\n  updateRiskAssessment: (medicationId: string) => void;\n  getHighRiskMedications: () => Medication[];\n\n  // Behavioral analysis\n  analyzeAdherencePatterns: (medicationId: string) => AdherencePattern;\n  detectBehaviorPattern: (medicationId: string) => void;\n  triggerPsychologicalIntervention: (medicationId: string, type: string, trigger: string) => void;\n\n  // Analytics\n  getSmartInsights: () => any[];\n  getPsychologicalProfile: (medicationId: string) => any;\n  getAdherenceScore: (medicationId: string, timeWindow?: number) => number;\n}\n\nconst initialUserProfile: UserProfile = {\n  id: generateId(),\n  name: '',\n  preferences: {\n    theme: 'system',\n    notifications: {\n      push: true,\n      sound: true,\n      vibration: true,\n      reminderAdvance: 15,\n    },\n    privacy: {\n      shareData: false,\n      analytics: true,\n      anonymousReporting: {\n        enabled: false,\n        consentGiven: false,\n        dataTypesAllowed: [],\n        privacyLevel: 'minimal',\n        granularControls: {\n          includeAdherence: false,\n          includeSideEffects: false,\n          includeMedicationPatterns: false,\n          includeRiskAssessments: false,\n          allowTemporalAnalysis: false,\n          allowDemographicAnalysis: false\n        }\n      }\n    },\n    display: {\n      timeFormat: '12h',\n      dateFormat: 'MM/DD/YYYY',\n      defaultView: 'dashboard',\n    },\n  },\n  createdAt: new Date(),\n  updatedAt: new Date(),\n};\n\nexport const useMedicationStore = create<MedicationStore>()(\n  persist(\n    (set, get) => ({\n      // Initial state\n      medications: [],\n      logs: [],\n      reminders: [],\n      userProfile: null,\n      isLoading: false,\n      error: null,\n      \n      // Advanced features initial state\n      smartMessages: [],\n      cyclicDosingPatterns: [],\n      taperingSchedules: [],\n      psychologicalInterventions: [],\n      adherencePatterns: [],\n      dependencyRiskAssessments: [],\n\n      // Medication actions\n      addMedication: (medicationData) => {\n        const dependencyRiskCategory = getDependencyRiskCategory(medicationData.name) as DependencyRiskCategory;\n        const riskLevel = getRiskLevel(dependencyRiskCategory) as RiskLevel;\n        \n        const medication: Medication = {\n          ...medicationData,\n          id: generateId(),\n          riskLevel,\n          dependencyRiskCategory,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n        };\n\n        set((state) => ({\n          medications: [...state.medications, medication],\n        }));\n\n        // Automatically assess risk for high-risk medications\n        if (riskLevel === 'high' || riskLevel === 'moderate') {\n          setTimeout(() => {\n            get().updateRiskAssessment(medication.id);\n          }, 100);\n        }\n      },\n\n      updateMedication: (id, updates) => {\n        set((state) => ({\n          medications: state.medications.map((med) =>\n            med.id === id ? { ...med, ...updates, updatedAt: new Date() } : med\n          ),\n        }));\n      },\n\n      deleteMedication: (id) => {\n        set((state) => ({\n          medications: state.medications.filter((med) => med.id !== id),\n          logs: state.logs.filter((log) => log.medicationId !== id),\n          reminders: state.reminders.filter((reminder) => reminder.medicationId !== id),\n        }));\n      },\n\n      toggleMedicationActive: (id) => {\n        set((state) => ({\n          medications: state.medications.map((med) =>\n            med.id === id ? { ...med, isActive: !med.isActive, updatedAt: new Date() } : med\n          ),\n        }));\n      },\n\n      // Log actions\n      logMedication: (medicationId, dosage, notes, sideEffects) => {\n        const medication = get().medications.find((med) => med.id === medicationId);\n        if (!medication) return;\n\n        const log: MedicationLog = {\n          id: generateId(),\n          medicationId,\n          timestamp: new Date(),\n          dosageTaken: dosage || parseFloat(medication.dosage),\n          unit: medication.unit,\n          notes,\n          sideEffectsReported: sideEffects,\n          adherence: 'taken',\n          createdAt: new Date(),\n        };\n\n        set((state) => ({\n          logs: [...state.logs, log],\n        }));\n\n        // Update pill inventory for multiple pill medications\n        if (medication.useMultiplePills && medication.pillInventory && medication.pillInventory.length > 0) {\n          // For simple dosage logging, estimate pill consumption based on default dose configuration\n          const defaultConfig = medication.doseConfigurations?.find(\n            config => config.id === medication.defaultDoseConfigurationId\n          ) || medication.doseConfigurations?.[0];\n          \n          if (defaultConfig) {\n            const pillLogs = defaultConfig.pillComponents.map(component => ({\n              pillConfigurationId: component.pillConfigurationId,\n              quantityTaken: component.quantity,\n              timestamp: new Date()\n            }));\n            \n            const inventoryUpdates = pillLogs.map((pillLog) => ({\n              pillConfigurationId: pillLog.pillConfigurationId,\n              currentCount: -pillLog.quantityTaken, // Negative to subtract\n            }));\n            \n            get().updatePillInventory(medicationId, inventoryUpdates);\n          }\n        }\n      },\n\n      updateLog: (id, updates) => {\n        set((state) => ({\n          logs: state.logs.map((log) =>\n            log.id === id ? { ...log, ...updates } : log\n          ),\n        }));\n      },\n\n      deleteLog: (id) => {\n        set((state) => ({\n          logs: state.logs.filter((log) => log.id !== id),\n        }));\n      },\n\n      markMedicationTaken: (medicationId, dosage) => {\n        get().logMedication(medicationId, dosage);\n      },\n\n      markMedicationMissed: (medicationId) => {\n        const medication = get().medications.find((med) => med.id === medicationId);\n        if (!medication) return;\n\n        const log: MedicationLog = {\n          id: generateId(),\n          medicationId,\n          timestamp: new Date(),\n          dosageTaken: 0,\n          unit: medication.unit,\n          adherence: 'missed',\n          createdAt: new Date(),\n        };\n\n        set((state) => ({\n          logs: [...state.logs, log],\n        }));\n      },\n\n      // Reminder actions\n      addReminder: (reminderData) => {\n        const reminder: Reminder = {\n          ...reminderData,\n          id: generateId(),\n          createdAt: new Date(),\n          updatedAt: new Date(),\n        };\n\n        set((state) => ({\n          reminders: [...state.reminders, reminder],\n        }));\n      },\n\n      updateReminder: (id, updates) => {\n        set((state) => ({\n          reminders: state.reminders.map((reminder) =>\n            reminder.id === id ? { ...reminder, ...updates, updatedAt: new Date() } : reminder\n          ),\n        }));\n      },\n\n      deleteReminder: (id) => {\n        set((state) => ({\n          reminders: state.reminders.filter((reminder) => reminder.id !== id),\n        }));\n      },\n\n      toggleReminderActive: (id) => {\n        set((state) => ({\n          reminders: state.reminders.map((reminder) =>\n            reminder.id === id ? { ...reminder, isActive: !reminder.isActive, updatedAt: new Date() } : reminder\n          ),\n        }));\n      },\n\n      snoozeReminder: (id, minutes) => {\n        const snoozeUntil = new Date();\n        snoozeUntil.setMinutes(snoozeUntil.getMinutes() + minutes);\n\n        set((state) => ({\n          reminders: state.reminders.map((reminder) =>\n            reminder.id === id ? { ...reminder, snoozeUntil, updatedAt: new Date() } : reminder\n          ),\n        }));\n      },\n\n      // Profile actions\n      updateProfile: (updates) => {\n        set((state) => ({\n          userProfile: state.userProfile\n            ? { ...state.userProfile, ...updates, updatedAt: new Date() }\n            : { ...initialUserProfile, ...updates },\n        }));\n      },\n\n      createProfile: (profileData) => {\n        const profile: UserProfile = {\n          ...profileData,\n          id: generateId(),\n          createdAt: new Date(),\n          updatedAt: new Date(),\n        };\n\n        set({ userProfile: profile });\n      },\n\n      // Analytics and computed values\n      getMedicationAdherence: (medicationId, days) => {\n        const logs = get().logs.filter((log) => {\n          const logDate = new Date(log.timestamp);\n          const daysDiff = Math.floor((Date.now() - logDate.getTime()) / (1000 * 60 * 60 * 24));\n          return log.medicationId === medicationId && daysDiff <= days;\n        });\n\n        if (logs.length === 0) return 0;\n\n        const takenLogs = logs.filter((log) => log.adherence === 'taken');\n        return Math.round((takenLogs.length / logs.length) * 100);\n      },\n\n      getTodaysReminders: () => {\n        const medications = get().medications;\n        const reminders = get().reminders;\n        const today = new Date().getDay(); // 0 = Sunday, 1 = Monday, etc.\n        const dayMapping = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\n        const todayName = dayMapping[today];\n\n        return reminders\n          .filter((reminder) => {\n            const medication = medications.find((med) => med.id === reminder.medicationId);\n            return (\n              reminder.isActive &&\n              medication?.isActive &&\n              reminder.days.includes(todayName as any) &&\n              (!reminder.snoozeUntil || reminder.snoozeUntil <= new Date())\n            );\n          })\n          .map((reminder) => ({\n            ...reminder,\n            medication: medications.find((med) => med.id === reminder.medicationId)!,\n          }))\n          .sort((a, b) => a.time.localeCompare(b.time));\n      },\n\n      getTodaysLogs: () => {\n        return get().logs.filter((log) => isToday(new Date(log.timestamp)));\n      },\n\n      getMissedDoses: (days) => {\n        const logs = get().logs.filter((log) => {\n          const logDate = new Date(log.timestamp);\n          const daysDiff = Math.floor((Date.now() - logDate.getTime()) / (1000 * 60 * 60 * 24));\n          return log.adherence === 'missed' && daysDiff <= days;\n        });\n\n        return logs.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n      },\n\n      getUpcomingRefills: () => {\n        return get().medications.filter((med) => {\n          if (!med.pillsRemaining || !med.totalPills || !med.refillReminder) return false;\n          const remainingPercent = (med.pillsRemaining / med.totalPills) * 100;\n          return remainingPercent <= 20; // Alert when 20% or less remaining\n        });\n      },\n\n      // Utility actions\n      clearAllData: () => {\n        set({\n          medications: [],\n          logs: [],\n          reminders: [],\n          userProfile: null,\n          error: null,\n          smartMessages: [],\n          cyclicDosingPatterns: [],\n          taperingSchedules: [],\n          psychologicalInterventions: [],\n          adherencePatterns: [],\n          dependencyRiskAssessments: [],\n        });\n      },\n\n      importData: (data) => {\n        set((state) => ({\n          medications: data.medications || state.medications,\n          logs: data.logs || state.logs,\n          reminders: data.reminders || state.reminders,\n          userProfile: data.userProfile || state.userProfile,\n        }));\n      },\n\n      exportData: () => {\n        const state = get();\n        return {\n          medications: state.medications,\n          logs: state.logs,\n          reminders: state.reminders,\n          userProfile: state.userProfile!,\n          version: '1.0.0',\n          lastSyncDate: new Date(),\n        };\n      },\n\n      setLoading: (loading) => {\n        set({ isLoading: loading });\n      },\n\n      setError: (error) => {\n        set({ error });\n      },\n\n      // Enhanced Export/Import methods\n      exportDataWithOptions: async (options) => {\n        const state = get();\n        let filteredData: any = {};\n\n        // Apply date range filtering if specified\n        if (options.dateRange) {\n          const { start, end } = options.dateRange;\n          filteredData.logs = state.logs.filter(log => {\n            const logDate = new Date(log.timestamp);\n            return logDate >= start && logDate <= end;\n          });\n        } else {\n          filteredData.logs = state.logs;\n        }\n\n        // Include data based on options\n        if (options.includeMedications) {\n          filteredData.medications = state.medications;\n        }\n        if (options.includeReminders) {\n          filteredData.reminders = state.reminders;\n        }\n        if (options.includeProfile && options.includePersonalInfo) {\n          filteredData.userProfile = state.userProfile;\n        }\n        if (options.includeAdvancedFeatures) {\n          filteredData.smartMessages = state.smartMessages;\n          filteredData.cyclicDosingPatterns = state.cyclicDosingPatterns;\n          filteredData.taperingSchedules = state.taperingSchedules;\n          filteredData.psychologicalInterventions = state.psychologicalInterventions;\n          filteredData.adherencePatterns = state.adherencePatterns;\n          filteredData.dependencyRiskAssessments = state.dependencyRiskAssessments;\n        }\n\n        // Add metadata\n        filteredData.exportMetadata = {\n          version: '2.0.0',\n          exportDate: new Date(),\n          exportOptions: options,\n          totalRecords: {\n            medications: filteredData.medications?.length || 0,\n            logs: filteredData.logs?.length || 0,\n            reminders: filteredData.reminders?.length || 0,\n            hasProfile: !!filteredData.userProfile\n          }\n        };\n\n        return JSON.stringify(filteredData, null, 2);\n      },\n\n      importDataWithValidation: async (data) => {\n        const validation = get().validateImportData(data);\n        \n        if (!validation.isValid) {\n          return {\n            success: false,\n            errors: validation.errors,\n            warnings: validation.warnings\n          };\n        }\n\n        try {\n          // Backup current data before import\n          get().backupData();\n\n          // Apply imported data\n          set((state) => {\n            const newState = { ...state };\n            \n            if (data.medications) {\n              // Merge medications, avoiding duplicates by name\n              const existingNames = new Set(state.medications.map(med => med.name));\n              const newMedications = data.medications.filter((med: any) => !existingNames.has(med.name));\n              newState.medications = [...state.medications, ...newMedications.map((med: any) => ({\n                ...med,\n                id: generateId(),\n                createdAt: new Date(),\n                updatedAt: new Date()\n              }))];\n            }\n\n            if (data.logs) {\n              newState.logs = [...state.logs, ...data.logs.map((log: any) => ({\n                ...log,\n                id: generateId(),\n                timestamp: new Date(log.timestamp),\n                createdAt: new Date()\n              }))];\n            }\n\n            if (data.reminders) {\n              newState.reminders = [...state.reminders, ...data.reminders.map((reminder: any) => ({\n                ...reminder,\n                id: generateId(),\n                createdAt: new Date(),\n                updatedAt: new Date()\n              }))];\n            }\n\n            if (data.userProfile && !state.userProfile) {\n              newState.userProfile = {\n                ...data.userProfile,\n                id: generateId(),\n                createdAt: new Date(),\n                updatedAt: new Date()\n              };\n            }\n\n            return newState;\n          });\n\n          return {\n            success: true,\n            errors: [],\n            warnings: validation.warnings\n          };\n        } catch (error) {\n          return {\n            success: false,\n            errors: [`Import failed: ${error instanceof Error ? error.message : 'Unknown error'}`],\n            warnings: []\n          };\n        }\n      },\n\n      validateImportData: (data) => {\n        const errors: string[] = [];\n        const warnings: string[] = [];\n\n        // Check for required structure\n        if (!data || typeof data !== 'object') {\n          errors.push('Invalid data format: must be a valid JSON object');\n          return { isValid: false, errors, warnings };\n        }\n\n        // Validate medications\n        if (data.medications) {\n          if (!Array.isArray(data.medications)) {\n            errors.push('Medications must be an array');\n          } else {\n            data.medications.forEach((med: any, index: number) => {\n              if (!med.name || typeof med.name !== 'string') {\n                errors.push(`Medication ${index + 1}: name is required and must be a string`);\n              }\n              if (!med.dosage || typeof med.dosage !== 'string') {\n                errors.push(`Medication ${index + 1}: dosage is required and must be a string`);\n              }\n              if (!med.unit || typeof med.unit !== 'string') {\n                errors.push(`Medication ${index + 1}: unit is required and must be a string`);\n              }\n              if (!med.frequency || typeof med.frequency !== 'string') {\n                errors.push(`Medication ${index + 1}: frequency is required and must be a string`);\n              }\n            });\n          }\n        }\n\n        // Validate logs\n        if (data.logs) {\n          if (!Array.isArray(data.logs)) {\n            errors.push('Logs must be an array');\n          } else {\n            data.logs.forEach((log: any, index: number) => {\n              if (!log.medicationId || typeof log.medicationId !== 'string') {\n                errors.push(`Log ${index + 1}: medicationId is required and must be a string`);\n              }\n              if (!log.timestamp) {\n                errors.push(`Log ${index + 1}: timestamp is required`);\n              } else {\n                const date = new Date(log.timestamp);\n                if (isNaN(date.getTime())) {\n                  errors.push(`Log ${index + 1}: invalid timestamp format`);\n                }\n              }\n              if (log.adherence && !['taken', 'missed', 'skipped', 'partial'].includes(log.adherence)) {\n                warnings.push(`Log ${index + 1}: unknown adherence status '${log.adherence}'`);\n              }\n            });\n          }\n        }\n\n        // Validate reminders\n        if (data.reminders) {\n          if (!Array.isArray(data.reminders)) {\n            errors.push('Reminders must be an array');\n          } else {\n            data.reminders.forEach((reminder: any, index: number) => {\n              if (!reminder.medicationId || typeof reminder.medicationId !== 'string') {\n                errors.push(`Reminder ${index + 1}: medicationId is required and must be a string`);\n              }\n              if (!reminder.time || typeof reminder.time !== 'string') {\n                errors.push(`Reminder ${index + 1}: time is required and must be a string`);\n              }\n              if (!reminder.days || !Array.isArray(reminder.days)) {\n                errors.push(`Reminder ${index + 1}: days is required and must be an array`);\n              }\n            });\n          }\n        }\n\n        // Version compatibility warnings\n        if (data.exportMetadata?.version && data.exportMetadata.version !== '2.0.0') {\n          warnings.push(`Import data was exported with version ${data.exportMetadata.version}, some features may not be compatible`);\n        }\n\n        return {\n          isValid: errors.length === 0,\n          errors,\n          warnings\n        };\n      },\n\n      exportToCSV: (dataType, dateRange) => {\n        const state = get();\n        \n        switch (dataType) {\n          case 'medications':\n            return generateCSV(state.medications.map(med => ({\n              name: med.name,\n              dosage: med.dosage,\n              unit: med.unit,\n              frequency: med.frequency,\n              category: med.category,\n              isActive: med.isActive,\n              startDate: formatDate(new Date(med.startDate)),\n              riskLevel: med.riskLevel,\n              prescribedBy: med.prescribedBy || '',\n              pharmacy: med.pharmacy || '',\n              notes: med.notes || ''\n            })));\n\n          case 'logs':\n            let logs = state.logs;\n            if (dateRange) {\n              logs = logs.filter(log => {\n                const logDate = new Date(log.timestamp);\n                return logDate >= dateRange.start && logDate <= dateRange.end;\n              });\n            }\n            return generateCSV(logs.map(log => {\n              const medication = state.medications.find(med => med.id === log.medicationId);\n              return {\n                date: formatDate(new Date(log.timestamp)),\n                time: formatTime(new Date(log.timestamp)),\n                medication: medication?.name || 'Unknown',\n                dosageTaken: log.dosageTaken,\n                unit: log.unit,\n                adherence: log.adherence,\n                notes: log.notes || '',\n                sideEffects: log.sideEffectsReported?.join('; ') || ''\n              };\n            }));\n\n          case 'reminders':\n            return generateCSV(state.reminders.map(reminder => {\n              const medication = state.medications.find(med => med.id === reminder.medicationId);\n              return {\n                medication: medication?.name || 'Unknown',\n                time: reminder.time,\n                days: reminder.days.join(', '),\n                isActive: reminder.isActive,\n                customMessage: reminder.customMessage || '',\n                notificationSound: reminder.notificationSound || false\n              };\n            }));\n\n          case 'all':\n            // Comprehensive export with all data\n            const allData = {\n              medications: state.medications,\n              logs: dateRange ? state.logs.filter(log => {\n                const logDate = new Date(log.timestamp);\n                return logDate >= dateRange.start && logDate <= dateRange.end;\n              }) : state.logs,\n              reminders: state.reminders,\n              userProfile: state.userProfile,\n              summary: {\n                totalMedications: state.medications.length,\n                activeMedications: state.medications.filter(med => med.isActive).length,\n                totalLogs: state.logs.length,\n                totalReminders: state.reminders.length,\n                exportDate: new Date()\n              }\n            };\n            return JSON.stringify(allData, null, 2);\n\n          default:\n            return '';\n        }\n      },\n\n      exportToPDF: async (options) => {\n        // For now, return JSON data - PDF generation would require additional library\n        // In a real implementation, this would use jsPDF or similar\n        const data = await get().exportDataWithOptions(options);\n        return data;\n      },\n\n      backupData: () => {\n        const state = get();\n        const backup = {\n          medications: state.medications,\n          logs: state.logs,\n          reminders: state.reminders,\n          userProfile: state.userProfile,\n          smartMessages: state.smartMessages,\n          cyclicDosingPatterns: state.cyclicDosingPatterns,\n          taperingSchedules: state.taperingSchedules,\n          psychologicalInterventions: state.psychologicalInterventions,\n          adherencePatterns: state.adherencePatterns,\n          dependencyRiskAssessments: state.dependencyRiskAssessments,\n          backupDate: new Date()\n        };\n        \n        // Store backup in localStorage with timestamp\n        localStorage.setItem(`medtrack-backup-${Date.now()}`, JSON.stringify(backup));\n        \n        // Keep only last 5 backups\n        const backupKeys = Object.keys(localStorage).filter(key => key.startsWith('medtrack-backup-'));\n        if (backupKeys.length > 5) {\n          backupKeys.sort().slice(0, -5).forEach(key => localStorage.removeItem(key));\n        }\n      },\n\n      restoreData: async (backupData) => {\n        try {\n          const validation = get().validateImportData(backupData);\n          \n          if (!validation.isValid) {\n            return {\n              success: false,\n              errors: ['Invalid backup data format', ...validation.errors]\n            };\n          }\n\n          set({\n            medications: backupData.medications || [],\n            logs: backupData.logs || [],\n            reminders: backupData.reminders || [],\n            userProfile: backupData.userProfile || null,\n            smartMessages: backupData.smartMessages || [],\n            cyclicDosingPatterns: backupData.cyclicDosingPatterns || [],\n            taperingSchedules: backupData.taperingSchedules || [],\n            psychologicalInterventions: backupData.psychologicalInterventions || [],\n            adherencePatterns: backupData.adherencePatterns || [],\n            dependencyRiskAssessments: backupData.dependencyRiskAssessments || [],\n          });\n\n          return { success: true, errors: [] };\n        } catch (error) {\n          return {\n            success: false,\n            errors: [`Restore failed: ${error instanceof Error ? error.message : 'Unknown error'}`]\n          };\n        }\n      },\n\n      // Advanced features actions implementation\n      // Smart messaging\n      addSmartMessage: (messageData) => {\n        const message: SmartMessage = {\n          ...messageData,\n          id: generateId(),\n        };\n        \n        set((state) => ({\n          smartMessages: [...state.smartMessages, message],\n        }));\n      },\n\n      markMessageAsRead: (messageId) => {\n        set((state) => ({\n          smartMessages: state.smartMessages.filter(msg => msg.id !== messageId),\n        }));\n      },\n\n      dismissMessage: (messageId) => {\n        set((state) => ({\n          smartMessages: state.smartMessages.filter(msg => msg.id !== messageId),\n        }));\n      },\n\n      generateContextualMessage: (medicationId, type) => {\n        const { medications, logs } = get();\n        const medication = medications.find(med => med.id === medicationId);\n        \n        if (!medication) return;\n\n        const adherenceData = {\n          adherenceStreak: logs.filter(log => \n            log.medicationId === medicationId && \n            log.adherence === 'taken'\n          ).length\n        };\n\n        const messageContent = generatePsychologicalMessage(\n          type as any, \n          medication.name, \n          adherenceData\n        );\n\n        get().addSmartMessage({\n          medicationId,\n          type: type as any,\n          priority: medication.riskLevel === 'high' ? 'high' : 'medium',\n          title: messageContent.title,\n          message: messageContent.message,\n          psychologicalApproach: messageContent.approach as any,\n          scheduledTime: new Date(),\n          expiresAt: new Date(Date.now() + 24 * 60 * 60 * 1000), // 24 hours\n        });\n      },\n\n      // Cyclic dosing\n      addCyclicDosingPattern: (patternData) => {\n        const pattern: CyclicDosingPattern = {\n          ...patternData,\n          id: generateId(),\n        };\n        \n        set((state) => ({\n          cyclicDosingPatterns: [...state.cyclicDosingPatterns, pattern],\n        }));\n      },\n\n      updateCyclicDosingPattern: (id, updates) => {\n        set((state) => ({\n          cyclicDosingPatterns: state.cyclicDosingPatterns.map(pattern =>\n            pattern.id === id ? { ...pattern, ...updates } : pattern\n          ),\n        }));\n      },\n\n      deleteCyclicDosingPattern: (id) => {\n        set((state) => ({\n          cyclicDosingPatterns: state.cyclicDosingPatterns.filter(pattern => pattern.id !== id),\n        }));\n      },\n\n      getCurrentDose: (medicationId) => {\n        const { medications, cyclicDosingPatterns } = get();\n        const medication = medications.find(med => med.id === medicationId);\n        \n        if (!medication) return { dose: 0, phase: 'maintenance' };\n        \n        let baseDose = parseFloat(medication.dosage);\n        \n        // Handle multiple pills - use total dose from default configuration\n        if (medication.useMultiplePills && medication.doseConfigurations) {\n          const defaultConfig = medication.doseConfigurations.find(\n            config => config.id === medication.defaultDoseConfigurationId\n          ) || medication.doseConfigurations[0];\n          \n          if (defaultConfig) {\n            baseDose = defaultConfig.totalDoseAmount;\n          }\n        }\n        \n        // Apply tapering if active\n        if (medication.tapering?.isActive) {\n          baseDose = calculateTaperingDose(baseDose, medication.tapering, new Date(), medication);\n        }\n        \n        // Apply cyclic dosing if active\n        const pattern = cyclicDosingPatterns.find(p => \n          p.isActive && \n          medication.cyclicDosing?.id === p.id\n        );\n        \n        return calculateCyclicDose(baseDose, pattern, new Date());\n      },\n\n      // Tapering schedules\n      addTaperingSchedule: (scheduleData) => {\n        const schedule: TaperingSchedule = {\n          ...scheduleData,\n          id: generateId(),\n        };\n        \n        set((state) => ({\n          taperingSchedules: [...state.taperingSchedules, schedule],\n        }));\n      },\n\n      updateTaperingSchedule: (id, updates) => {\n        set((state) => ({\n          taperingSchedules: state.taperingSchedules.map(schedule =>\n            schedule.id === id ? { ...schedule, ...updates } : schedule\n          ),\n        }));\n      },\n\n      deleteTaperingSchedule: (id) => {\n        set((state) => ({\n          taperingSchedules: state.taperingSchedules.filter(schedule => schedule.id !== id),\n        }));\n      },\n\n      pauseTaperingSchedule: (medicationId, withdrawalSeverity: 'mild' | 'moderate' | 'severe' = 'moderate') => {\n        set((state) => ({\n          medications: state.medications.map(med => {\n            if (med.id === medicationId && med.tapering && !med.tapering.isPaused) {\n              const suggestedDays = suggestPauseDuration(med.name, withdrawalSeverity);\n              \n              return {\n                ...med,\n                tapering: {\n                  ...med.tapering,\n                  isPaused: true,\n                  pausedAt: new Date(),\n                  suggestedResumeDays: suggestedDays\n                }\n              };\n            }\n            return med;\n          })\n        }));\n      },\n\n      resumeTaperingSchedule: (medicationId) => {\n        set((state) => ({\n          medications: state.medications.map(med => {\n            if (med.id === medicationId && med.tapering && med.tapering.isPaused) {\n              const pauseDuration = med.tapering.pausedAt ? \n                Math.floor((new Date().getTime() - new Date(med.tapering.pausedAt).getTime()) / (1000 * 60 * 60 * 24)) : 0;\n              \n              // Extend the end date by the pause duration\n              const newEndDate = new Date(med.tapering.endDate);\n              newEndDate.setDate(newEndDate.getDate() + pauseDuration);\n              \n              return {\n                ...med,\n                tapering: {\n                  ...med.tapering,\n                  isPaused: false,\n                  pausedAt: undefined,\n                  endDate: newEndDate,\n                  suggestedResumeDays: undefined\n                }\n              };\n            }\n            return med;\n          })\n        }));\n      },\n\n      adjustTaperingSchedule: (medicationId, adjustments: {\n        newReductionPercent?: number;\n        extendDurationWeeks?: number;\n        changeMethod?: 'linear' | 'exponential' | 'hyperbolic' | 'custom';\n      }) => {\n        set((state) => ({\n          medications: state.medications.map(med => {\n            if (med.id === medicationId && med.tapering) {\n              const updatedTapering = { ...med.tapering };\n              \n              if (adjustments.extendDurationWeeks) {\n                const extensionDays = adjustments.extendDurationWeeks * 7;\n                const newEndDate = new Date(updatedTapering.endDate);\n                newEndDate.setDate(newEndDate.getDate() + extensionDays);\n                updatedTapering.endDate = newEndDate;\n              }\n              \n              if (adjustments.changeMethod) {\n                updatedTapering.taperingMethod = adjustments.changeMethod;\n              }\n              \n              return {\n                ...med,\n                tapering: updatedTapering\n              };\n            }\n            return med;\n          })\n        }));\n      },\n\n      // Risk assessment\n      assessDependencyRisk: (medicationId) => {\n        const { medications, logs } = get();\n        const medication = medications.find(med => med.id === medicationId);\n        \n        if (!medication) {\n          return {\n            medicationId,\n            riskScore: 0,\n            riskFactors: [],\n            lastAssessment: new Date(),\n            recommendedActions: [],\n            escalationRequired: false,\n          };\n        }\n\n        const riskAssessment = calculateDependencyRisk(logs, medication);\n        \n        const assessment: DependencyRiskAssessment = {\n          medicationId,\n          riskScore: riskAssessment.riskScore,\n          riskFactors: riskAssessment.riskFactors.map(factor => ({\n            factor: 'dose-escalation',\n            weight: 1,\n            description: factor,\n            firstDetected: new Date(),\n            currentSeverity: 'medium' as const,\n          })),\n          lastAssessment: new Date(),\n          recommendedActions: riskAssessment.recommendations,\n          escalationRequired: riskAssessment.riskScore > 50,\n        };\n\n        return assessment;\n      },\n\n      updateRiskAssessment: (medicationId) => {\n        const assessment = get().assessDependencyRisk(medicationId);\n        \n        set((state) => ({\n          dependencyRiskAssessments: [\n            ...state.dependencyRiskAssessments.filter(a => a.medicationId !== medicationId),\n            assessment,\n          ],\n        }));\n\n        // Generate alert message if high risk\n        if (assessment.escalationRequired) {\n          get().generateContextualMessage(medicationId, 'risk-alert');\n        }\n      },\n\n      getHighRiskMedications: () => {\n        return get().medications.filter(med => \n          med.riskLevel === 'high' || med.riskLevel === 'moderate'\n        );\n      },\n\n      // Behavioral analysis\n      analyzeAdherencePatterns: (medicationId) => {\n        const { medications } = get();\n        const medication = medications.find(med => med.id === medicationId);\n        \n        if (!medication) {\n          return {\n            medicationId,\n            weeklyAdherence: [],\n            monthlyTrend: 'stable' as const,\n            riskScore: 0,\n            concerningBehaviors: [],\n            positivePatterns: [],\n          };\n        }\n\n        // const medicationLogs = logs.filter(log => log.medicationId === medicationId);\n        const adherenceData = get().getMedicationAdherence(medicationId, 7);\n        \n        const pattern: AdherencePattern = {\n          medicationId,\n          weeklyAdherence: [adherenceData],\n          monthlyTrend: adherenceData > 80 ? 'stable' : 'declining',\n          riskScore: 100 - adherenceData,\n          concerningBehaviors: adherenceData < 70 ? ['Low adherence detected'] : [],\n          positivePatterns: adherenceData > 90 ? ['Excellent adherence'] : [],\n        };\n\n        return pattern;\n      },\n\n      detectBehaviorPattern: (medicationId) => {\n        const { medications, logs } = get();\n        const medication = medications.find(med => med.id === medicationId);\n        \n        if (!medication) return;\n\n        const patterns = detectBehaviorPatterns(logs, medication);\n        \n        // Generate appropriate interventions based on detected patterns\n        patterns.forEach(pattern => {\n          if (pattern.type === 'weekend-gaps') {\n            get().generateContextualMessage(medicationId, 'adherence-reminder');\n          } else if (pattern.type === 'dose-timing-drift') {\n            get().generateContextualMessage(medicationId, 'motivation');\n          }\n        });\n      },\n\n      triggerPsychologicalIntervention: (medicationId, type, trigger) => {\n        const intervention: PsychologicalIntervention = {\n          id: generateId(),\n          medicationId,\n          type: type as any,\n          trigger,\n          message: '',\n          timestamp: new Date(),\n        };\n\n        set((state) => ({\n          psychologicalInterventions: [...state.psychologicalInterventions, intervention],\n        }));\n\n        // Generate corresponding smart message\n        get().generateContextualMessage(medicationId, type);\n      },\n\n      // Analytics\n      getSmartInsights: () => {\n        const { medications } = get();\n        const insights: any[] = [];\n\n        // High-risk medication insights\n        const highRiskMeds = medications.filter(med => med.riskLevel === 'high');\n        if (highRiskMeds.length > 0) {\n          insights.push({\n            type: 'risk-alert',\n            title: 'High-Risk Medications Detected',\n            description: `You have ${highRiskMeds.length} high-risk medication(s) that require careful monitoring.`,\n            priority: 'high',\n            medications: highRiskMeds.map(med => med.name),\n          });\n        }\n\n        // Adherence insights\n        const adherenceScores = medications.map(med => \n          get().getMedicationAdherence(med.id, 7)\n        );\n        const avgAdherence = adherenceScores.reduce((a, b) => a + b, 0) / adherenceScores.length;\n        \n        if (avgAdherence < 70) {\n          insights.push({\n            type: 'adherence-concern',\n            title: 'Adherence Below Target',\n            description: `Your average adherence is ${Math.round(avgAdherence)}%. Consider setting more reminders.`,\n            priority: 'medium',\n          });\n        } else if (avgAdherence > 90) {\n          insights.push({\n            type: 'celebration',\n            title: 'Excellent Adherence!',\n            description: `Your adherence is ${Math.round(avgAdherence)}%. Keep up the great work!`,\n            priority: 'low',\n          });\n        }\n\n        return insights;\n      },\n\n      getPsychologicalProfile: (medicationId) => {\n        const medication = get().medications.find(med => med.id === medicationId);\n        return medication?.psychologicalProfile || null;\n      },\n\n      getAdherenceScore: (medicationId, timeWindow = 30) => {\n        return get().getMedicationAdherence(medicationId, timeWindow);\n      },\n\n      // NEW: Multiple pills support methods\n      addPillConfiguration: (medicationId, config) => {\n        const pillConfig: PillConfiguration = {\n          ...config,\n          id: generateId(),\n        };\n\n        set((state) => ({\n          medications: state.medications.map((med) =>\n            med.id === medicationId\n              ? {\n                  ...med,\n                  pillConfigurations: [...(med.pillConfigurations || []), pillConfig],\n                  updatedAt: new Date(),\n                }\n              : med\n          ),\n        }));\n      },\n\n      updatePillConfiguration: (medicationId, configId, updates) => {\n        set((state) => ({\n          medications: state.medications.map((med) =>\n            med.id === medicationId\n              ? {\n                  ...med,\n                  pillConfigurations: (med.pillConfigurations || []).map((config) =>\n                    config.id === configId ? { ...config, ...updates } : config\n                  ),\n                  updatedAt: new Date(),\n                }\n              : med\n          ),\n        }));\n      },\n\n      deletePillConfiguration: (medicationId, configId) => {\n        set((state) => ({\n          medications: state.medications.map((med) =>\n            med.id === medicationId\n              ? {\n                  ...med,\n                  pillConfigurations: (med.pillConfigurations || []).filter(\n                    (config) => config.id !== configId\n                  ),\n                  updatedAt: new Date(),\n                }\n              : med\n          ),\n        }));\n      },\n\n      addDoseConfiguration: (medicationId, config) => {\n        const doseConfig: DoseConfiguration = {\n          ...config,\n          id: generateId(),\n        };\n\n        set((state) => ({\n          medications: state.medications.map((med) =>\n            med.id === medicationId\n              ? {\n                  ...med,\n                  doseConfigurations: [...(med.doseConfigurations || []), doseConfig],\n                  defaultDoseConfigurationId: med.defaultDoseConfigurationId || doseConfig.id,\n                  updatedAt: new Date(),\n                }\n              : med\n          ),\n        }));\n      },\n\n      updateDoseConfiguration: (medicationId, configId, updates) => {\n        set((state) => ({\n          medications: state.medications.map((med) =>\n            med.id === medicationId\n              ? {\n                  ...med,\n                  doseConfigurations: (med.doseConfigurations || []).map((config) =>\n                    config.id === configId ? { ...config, ...updates } : config\n                  ),\n                  updatedAt: new Date(),\n                }\n              : med\n          ),\n        }));\n      },\n\n      deleteDoseConfiguration: (medicationId, configId) => {\n        set((state) => ({\n          medications: state.medications.map((med) => {\n            if (med.id === medicationId) {\n              const updatedDoseConfigs = (med.doseConfigurations || []).filter(\n                (config) => config.id !== configId\n              );\n              return {\n                ...med,\n                doseConfigurations: updatedDoseConfigs,\n                defaultDoseConfigurationId:\n                  med.defaultDoseConfigurationId === configId\n                    ? updatedDoseConfigs[0]?.id || undefined\n                    : med.defaultDoseConfigurationId,\n                updatedAt: new Date(),\n              };\n            }\n            return med;\n          }),\n        }));\n      },\n\n      setDefaultDoseConfiguration: (medicationId, configId) => {\n        set((state) => ({\n          medications: state.medications.map((med) =>\n            med.id === medicationId\n              ? {\n                  ...med,\n                  defaultDoseConfigurationId: configId,\n                  updatedAt: new Date(),\n                }\n              : med\n          ),\n        }));\n      },\n\n      logMultiplePillDose: (medicationId, pillLogs, notes, sideEffects) => {\n        const medication = get().medications.find((med) => med.id === medicationId);\n        if (!medication) return;\n\n        // Calculate adherence details\n        const totalExpected = pillLogs.reduce((sum, log) => sum + log.quantityExpected, 0);\n        const totalTaken = pillLogs.reduce((sum, log) => sum + log.quantityTaken, 0);\n        const adherencePercentage = totalExpected > 0 ? (totalTaken / totalExpected) * 100 : 0;\n        const partialDose = adherencePercentage > 0 && adherencePercentage < 100;\n\n        const adherenceDetails: AdherenceDetails = {\n          totalExpectedPills: totalExpected,\n          totalTakenPills: totalTaken,\n          partialDose,\n          adherencePercentage,\n        };\n\n        const log: MedicationLog = {\n          id: generateId(),\n          medicationId,\n          timestamp: new Date(),\n          dosageTaken: totalTaken, // For backward compatibility\n          unit: medication.unit, // For backward compatibility\n          notes,\n          sideEffectsReported: sideEffects,\n          adherence: adherencePercentage >= 100 ? 'taken' : partialDose ? 'partial' : 'missed',\n          createdAt: new Date(),\n          pillsLogged: pillLogs,\n          adherenceDetails,\n          useMultiplePills: true,\n        };\n\n        set((state) => ({\n          logs: [...state.logs, log],\n        }));\n\n        // Update pill inventory if available\n        if (medication.pillInventory) {\n          const inventoryUpdates = pillLogs.map((pillLog) => ({\n            pillConfigurationId: pillLog.pillConfigurationId,\n            currentCount: -pillLog.quantityTaken, // Negative to subtract\n          }));\n          get().updatePillInventory(medicationId, inventoryUpdates);\n        }\n      },\n\n      logDoseConfiguration: (medicationId, doseConfigId, pillLogs, notes, sideEffects) => {\n        get().logMultiplePillDose(medicationId, pillLogs, notes, sideEffects);\n        \n        // Update the log to include dose configuration reference\n        const logs = get().logs;\n        const latestLog = logs[logs.length - 1];\n        if (latestLog && latestLog.medicationId === medicationId) {\n          get().updateLog(latestLog.id, { doseConfigurationId: doseConfigId });\n        }\n      },\n\n      calculateTotalDoseFromPills: (medicationId, doseConfigId) => {\n        const medication = get().medications.find((med) => med.id === medicationId);\n        if (!medication?.pillConfigurations || !medication?.doseConfigurations) {\n          return null;\n        }\n\n        let targetDoseConfig: DoseConfiguration | undefined;\n        if (doseConfigId) {\n          targetDoseConfig = medication.doseConfigurations.find((config) => config.id === doseConfigId);\n        } else {\n          targetDoseConfig = medication.doseConfigurations.find(\n            (config) => config.id === medication.defaultDoseConfigurationId\n          ) || medication.doseConfigurations[0];\n        }\n\n        if (!targetDoseConfig) return null;\n\n        let totalAmount = 0;\n        let commonUnit: MedicationUnit | null = null;\n\n        for (const component of targetDoseConfig.pillComponents) {\n          const pillConfig = medication.pillConfigurations.find(\n            (config) => config.id === component.pillConfigurationId\n          );\n          if (pillConfig) {\n            totalAmount += pillConfig.strength * component.quantity;\n            commonUnit = commonUnit || pillConfig.unit;\n          }\n        }\n\n        return commonUnit ? { amount: totalAmount, unit: commonUnit } : null;\n      },\n\n      updatePillInventory: (medicationId, inventoryUpdates) => {\n        set((state) => ({\n          medications: state.medications.map((med) => {\n            if (med.id === medicationId) {\n              const currentInventory = med.pillInventory || [];\n              const updatedInventory = [...currentInventory];\n\n              inventoryUpdates.forEach((update) => {\n                const existingIndex = updatedInventory.findIndex(\n                  (item) => item.pillConfigurationId === update.pillConfigurationId\n                );\n\n                if (existingIndex >= 0) {\n                  updatedInventory[existingIndex] = {\n                    ...updatedInventory[existingIndex],\n                    ...update,\n                    currentCount: Math.max(\n                      0,\n                      updatedInventory[existingIndex].currentCount + (update.currentCount || 0)\n                    ),\n                    lastUpdated: new Date(),\n                  };\n                } else if (update.currentCount !== undefined) {\n                  updatedInventory.push({\n                    pillConfigurationId: update.pillConfigurationId!,\n                    currentCount: Math.max(0, update.currentCount),\n                    lastUpdated: new Date(),\n                    ...update,\n                  } as PillInventoryItem);\n                }\n              });\n\n              return {\n                ...med,\n                pillInventory: updatedInventory,\n                updatedAt: new Date(),\n              };\n            }\n            return med;\n          }),\n        }));\n      },\n\n      // Enhanced Side Effect Reporting\n      addSideEffectReport: (medicationId: string, report: Omit<SideEffectReport, 'id' | 'medicationId' | 'timestamp'>) => {\n        set((state) => ({\n          medications: state.medications.map((med) =>\n            med.id === medicationId\n              ? {\n                  ...med,\n                  sideEffectReports: [\n                    ...(med.sideEffectReports || []),\n                    {\n                      ...report,\n                      id: generateId(),\n                      medicationId,\n                      timestamp: new Date()\n                    } as SideEffectReport\n                  ],\n                  enhancedMonitoring: true\n                }\n              : med\n          ),\n        }));\n      },\n\n      updateSideEffectReport: (medicationId: string, reportId: string, updates: Partial<SideEffectReport>) => {\n        set((state) => ({\n          medications: state.medications.map((med) =>\n            med.id === medicationId\n              ? {\n                  ...med,\n                  sideEffectReports: med.sideEffectReports?.map((report) =>\n                    report.id === reportId ? { ...report, ...updates } : report\n                  )\n                }\n              : med\n          ),\n        }));\n      },\n\n      // Dependence Prevention System\n      initializeDependencePrevention: (medicationId: string) => {\n        const medication = get().medications.find(med => med.id === medicationId);\n        if (!medication) return;\n\n        const prevention = DependencePreventionService.initializePrevention(medication);\n        \n        set((state) => ({\n          medications: state.medications.map((med) =>\n            med.id === medicationId\n              ? { ...med, dependencePrevention: prevention, enhancedMonitoring: true }\n              : med\n          ),\n        }));\n      },\n\n      updateDependenceAssessment: (medicationId: string) => {\n        const state = get();\n        const medication = state.medications.find(med => med.id === medicationId);\n        if (!medication || !medication.dependencePrevention) return;\n\n        // Get usage patterns from medication logs\n        const usagePatterns: UsagePattern[] = state.logs\n          .filter(log => log.medicationId === medicationId)\n          .slice(-30) // Last 30 entries\n          .map(log => ({\n            date: new Date(log.timestamp),\n            doseTaken: parseFloat(log.dosageTaken || medication.dosage),\n            prescribedDose: parseFloat(medication.dosage),\n            selfAdjustment: false, // Would need to track this separately\n            timesBetweenDoses: 24 / (medication.timesPerDay || 1), // Estimate\n            effectivenessRating: 7 // Default, would need user input\n          }));\n\n        const updatedPrevention = DependencePreventionService.assessCurrentRisk(medication, usagePatterns);\n        \n        set((state) => ({\n          medications: state.medications.map((med) =>\n            med.id === medicationId\n              ? { ...med, dependencePrevention: updatedPrevention }\n              : med\n          ),\n        }));\n      },\n\n      recordUsagePattern: (medicationId: string, pattern: Omit<UsagePattern, 'date'>) => {\n        set((state) => ({\n          medications: state.medications.map((med) =>\n            med.id === medicationId && med.dependencePrevention\n              ? {\n                  ...med,\n                  dependencePrevention: {\n                    ...med.dependencePrevention,\n                    usagePatterns: [\n                      ...med.dependencePrevention.usagePatterns,\n                      { ...pattern, date: new Date() }\n                    ].slice(-50) // Keep last 50 patterns\n                  }\n                }\n              : med\n          ),\n        }));\n\n        // Trigger reassessment\n        get().updateDependenceAssessment(medicationId);\n      },\n\n      acknowledgeDependenceAlert: (medicationId: string, alertId: string, actionTaken?: string) => {\n        set((state) => ({\n          medications: state.medications.map((med) =>\n            med.id === medicationId && med.dependencePrevention\n              ? {\n                  ...med,\n                  dependencePrevention: {\n                    ...med.dependencePrevention,\n                    alerts: med.dependencePrevention.alerts.map((alert) =>\n                      alert.id === alertId\n                        ? { ...alert, acknowledged: true, actionTaken }\n                        : alert\n                    )\n                  }\n                }\n              : med\n          ),\n        }));\n      },\n\n      addDependenceIntervention: (medicationId: string, intervention: Omit<DependenceIntervention, 'id' | 'timestamp'>) => {\n        set((state) => ({\n          medications: state.medications.map((med) =>\n            med.id === medicationId && med.dependencePrevention\n              ? {\n                  ...med,\n                  dependencePrevention: {\n                    ...med.dependencePrevention,\n                    interventions: [\n                      ...med.dependencePrevention.interventions,\n                      {\n                        ...intervention,\n                        id: generateId(),\n                        timestamp: new Date()\n                      }\n                    ]\n                  }\n                }\n              : med\n          ),\n        }));\n      },\n\n      updateDoctorReview: (medicationId: string, reviewDate: Date) => {\n        set((state) => ({\n          medications: state.medications.map((med) =>\n            med.id === medicationId && med.dependencePrevention\n              ? {\n                  ...med,\n                  dependencePrevention: {\n                    ...med.dependencePrevention,\n                    lastDoctorReview: reviewDate,\n                    doctorReviewRequired: false\n                  }\n                }\n              : med\n          ),\n        }));\n      },\n\n      // Get dependence insights and recommendations\n      getDependenceInsights: (medicationId: string) => {\n        const medication = get().medications.find(med => med.id === medicationId);\n        if (!medication) return null;\n\n        return DependencePreventionService.generateTaperingRecommendation(medication);\n      },\n\n      enableMultiplePills: (medicationId) => {\n        set((state) => ({\n          medications: state.medications.map((med) => {\n            if (med.id !== medicationId) return med;\n\n            // Create pill configurations if they don't exist\n            const pillConfigs = med.pillConfigurations || [\n              {\n                id: generateId(),\n                strength: parseFloat(med.dosage) || 1,\n                unit: med.unit,\n                isActive: true,\n                color: med.color,\n                shape: 'round',\n                markings: ''\n              },\n            ];\n\n            // Create dose configurations with proper pillComponents linking\n            const doseConfigs = med.doseConfigurations || [\n              {\n                id: generateId(),\n                name: 'Default Dose',\n                description: `Standard dose of ${med.dosage} ${med.unit}`,\n                pillComponents: [\n                  {\n                    pillConfigurationId: pillConfigs[0].id,\n                    quantity: 1 // Adjust based on how many pills make up the dose\n                  }\n                ],\n                totalDoseAmount: parseFloat(med.dosage) || 1,\n                totalDoseUnit: med.unit,\n                isDefault: true\n              }\n            ];\n\n            // Create initial pill inventory if it doesn't exist\n            const pillInventory = med.pillInventory || pillConfigs.map(config => ({\n              pillConfigurationId: config.id,\n              currentCount: med.pillsRemaining || 30, // Use existing pills remaining or default to 30\n              lastUpdated: new Date()\n            }));\n\n            return {\n              ...med,\n              useMultiplePills: true,\n              pillConfigurations: pillConfigs,\n              doseConfigurations: doseConfigs,\n              defaultDoseConfigurationId: doseConfigs[0].id,\n              pillInventory: pillInventory,\n              updatedAt: new Date(),\n            };\n          }),\n        }));\n      },\n    }),\n    {\n      name: 'medtrack-storage',\n      storage: createJSONStorage(() => localStorage),\n      version: 1,\n    }\n  )\n);\n","import React from 'react';\nimport { Menu, Bell, Search, User } from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { formatTime } from '@/utils/helpers';\n\ninterface HeaderProps {\n  onMenuClick: () => void;\n}\n\nexport function Header({ onMenuClick }: HeaderProps) {\n  const { getTodaysReminders, userProfile } = useMedicationStore();\n  const [currentTime, setCurrentTime] = React.useState(new Date());\n\n  // Update time every minute\n  React.useEffect(() => {\n    const timer = setInterval(() => {\n      setCurrentTime(new Date());\n    }, 60000);\n\n    return () => clearInterval(timer);\n  }, []);\n\n  const todaysReminders = getTodaysReminders();\n  const upcomingReminders = todaysReminders.filter(reminder => {\n    const reminderTime = new Date();\n    const [hours, minutes] = reminder.time.split(':').map(Number);\n    reminderTime.setHours(hours, minutes, 0, 0);\n    return reminderTime > currentTime;\n  });\n\n  return (\n    <header className=\"bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between\">\n      {/* Left side */}\n      <div className=\"flex items-center space-x-4\">\n        <button\n          onClick={onMenuClick}\n          className=\"lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 touch-target\"\n        >\n          <Menu className=\"h-5 w-5\" />\n        </button>\n        \n        <div className=\"hidden sm:block\">\n          <h1 className=\"text-xl font-semibold text-gray-900\" data-testid=\"header-logo\">\n            Good {currentTime.getHours() < 12 ? 'morning' : currentTime.getHours() < 18 ? 'afternoon' : 'evening'}\n            {userProfile?.name && `, ${userProfile.name.split(' ')[0]}`}\n          </h1>\n          <p className=\"text-sm text-gray-500\">\n            {formatTime(currentTime)}  {currentTime.toLocaleDateString('en-US', { \n              weekday: 'long', \n              month: 'long', \n              day: 'numeric' \n            })}\n          </p>\n        </div>\n      </div>\n\n      {/* Center - Search */}\n      <div className=\"hidden md:flex flex-1 max-w-md mx-8\">\n        <div className=\"relative w-full\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n          <input\n            type=\"text\"\n            placeholder=\"Search medications...\"\n            className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent\"\n            data-testid=\"search-button\"\n          />\n        </div>\n      </div>\n\n      {/* Right side */}\n      <div className=\"flex items-center space-x-3\">\n        {/* Notifications */}\n        <div className=\"relative\">\n          <button className=\"relative p-2 text-gray-400 hover:text-gray-500 hover:bg-gray-100 rounded-full touch-target\" data-testid=\"header-notifications\">\n            <Bell className=\"h-5 w-5\" />\n            {upcomingReminders.length > 0 && (\n              <span className=\"absolute -top-0.5 -right-0.5 h-4 w-4 bg-red-500 rounded-full flex items-center justify-center\">\n                <span className=\"text-xs text-white font-medium\">\n                  {upcomingReminders.length > 9 ? '9+' : upcomingReminders.length}\n                </span>\n              </span>\n            )}\n          </button>\n        </div>\n\n        {/* Profile */}\n        <div className=\"relative\">\n          <button className=\"flex items-center space-x-2 p-2 text-gray-400 hover:text-gray-500 hover:bg-gray-100 rounded-lg touch-target\" data-testid=\"header-settings\">\n            <div className=\"h-8 w-8 bg-primary-100 rounded-full flex items-center justify-center\">\n              <User className=\"h-4 w-4 text-primary-600\" />\n            </div>\n            {userProfile?.name && (\n              <span className=\"hidden sm:block text-sm font-medium text-gray-700\">\n                {userProfile.name}\n              </span>\n            )}\n          </button>\n        </div>\n      </div>\n    </header>\n  );\n}\n","import React from 'react';\nimport { Sidebar } from './Sidebar';\nimport { Header } from './Header';\n\ninterface LayoutProps {\n  children: React.ReactNode;\n}\n\nexport function Layout({ children }: LayoutProps) {\n  const [sidebarOpen, setSidebarOpen] = React.useState(false);\n\n  return (\n    <div className=\"flex h-screen bg-gray-50\">\n      {/* Sidebar */}\n      <Sidebar isOpen={sidebarOpen} onClose={() => setSidebarOpen(false)} />\n      \n      {/* Main content */}\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        {/* Header */}\n        <Header onMenuClick={() => setSidebarOpen(true)} />\n        \n        {/* Page content */}\n        <main className=\"flex-1 overflow-y-auto p-4 lg:p-6 mobile-scroll mobile-safe-area\">\n          <div className=\"max-w-7xl mx-auto\">\n            {children}\n          </div>\n        </main>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { Check, X, Pill } from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { Medication, PillLogEntry } from '@/types';\nimport { getPillComponents } from '@/utils/helpers';\nimport toast from 'react-hot-toast';\n\ninterface MultiplePillQuickLogProps {\n  medication: Medication;\n  onAction?: (action: 'taken' | 'skipped' | 'partial') => void;\n}\n\nexport function MultiplePillQuickLog({ medication, onAction }: MultiplePillQuickLogProps) {\n  const { logMultiplePillDose } = useMedicationStore();\n  const [pillsTaken, setPillsTaken] = React.useState<Record<string, number>>({});\n  const [isLogging, setIsLogging] = React.useState(false);\n\n  const pillComponents = React.useMemo(() => {\n    // Return empty array if not supporting multiple pills\n    if (!medication.useMultiplePills || !medication.pillConfigurations || !medication.doseConfigurations) {\n      return [];\n    }\n    const components = getPillComponents(medication);\n    console.log(` MultiplePillQuickLog getPillComponents for ${medication.name}:`, components);\n    return components;\n  }, [\n    medication.useMultiplePills,\n    medication.pillConfigurations,\n    medication.doseConfigurations,\n    medication.defaultDoseConfigurationId\n  ]);\n\n  // Create a stable key from medication configuration for useEffect dependency\n  const configurationKey = React.useMemo(() => {\n    if (pillComponents.length === 0) return 'no-pills';\n    \n    return pillComponents\n      .map(comp => comp.pillConfigurationId)\n      .sort()\n      .join('-');\n  }, [medication.id, medication.defaultDoseConfigurationId]);\n\n  // Initialize pills taken state - only when configuration actually changes\n  React.useEffect(() => {\n    if (pillComponents.length === 0) return;\n    \n    const initialState: Record<string, number> = {};\n    pillComponents.forEach(component => {\n      initialState[component.pillConfigurationId] = 0;\n    });\n    setPillsTaken(initialState);\n  }, [configurationKey]); // Use stable configuration key\n\n  const handlePillCountChange = (pillConfigId: string, change: number) => {\n    setPillsTaken(prev => ({\n      ...prev,\n      [pillConfigId]: Math.max(0, (prev[pillConfigId] || 0) + change)\n    }));\n  };\n\n  const handleLogDose = async () => {\n    setIsLogging(true);\n    try {\n      const pillLogs: PillLogEntry[] = pillComponents.map(component => ({\n        pillConfigurationId: component.pillConfigurationId,\n        quantityTaken: pillsTaken[component.pillConfigurationId] || 0,\n        quantityExpected: component.quantity,\n        timeTaken: new Date(),\n      }));\n\n      console.log(' Logging multiple pill dose:', medication.name, {\n        pillLogs,\n        pillComponents,\n        pillsTaken,\n        inventoryCount: medication.pillInventory?.length || 0\n      });\n\n      logMultiplePillDose(medication.id, pillLogs);\n\n      const totalExpected = pillComponents.reduce((sum, comp) => sum + comp.quantity, 0);\n      const totalTaken = Object.values(pillsTaken).reduce((sum, count) => sum + count, 0);\n\n      if (totalTaken === totalExpected) {\n        toast.success(` All pills logged for ${medication.name}!`, { icon: '' });\n        onAction?.('taken');\n      } else if (totalTaken > 0) {\n        toast.success(` Partial dose logged for ${medication.name}`, { icon: '' });\n        onAction?.('partial');\n      } else {\n        toast(` Skipped ${medication.name}`, { icon: '' });\n        onAction?.('skipped');\n      }\n\n      // Reset pill counts\n      const resetState: Record<string, number> = {};\n      pillComponents.forEach(component => {\n        resetState[component.pillConfigurationId] = 0;\n      });\n      setPillsTaken(resetState);\n    } catch (error) {\n      console.error(' Failed to log multiple pill dose:', error);\n      toast.error('Failed to log pills');\n    } finally {\n      setIsLogging(false);\n    }\n  };\n\n  const handleQuickTakeAll = () => {\n    const allPillsState: Record<string, number> = {};\n    pillComponents.forEach(component => {\n      allPillsState[component.pillConfigurationId] = component.quantity;\n    });\n    setPillsTaken(allPillsState);\n  };\n\n  const getTotalTaken = () => Object.values(pillsTaken).reduce((sum, count) => sum + count, 0);\n  const getTotalExpected = () => pillComponents.reduce((sum, comp) => sum + comp.quantity, 0);\n\n  // Debug the validation checks\n  console.log(` MultiplePillQuickLog validation for ${medication.name}:`, {\n    useMultiplePills: medication.useMultiplePills,\n    hasPillConfigs: !!medication.pillConfigurations,\n    hasDoseConfigs: !!medication.doseConfigurations,\n    pillConfigsLength: medication.pillConfigurations?.length || 0,\n    doseConfigsLength: medication.doseConfigurations?.length || 0,\n    pillComponentsLength: pillComponents.length,\n    pillComponents: pillComponents\n  });\n\n  // Return early if no valid configuration (after all hooks)\n  if (!medication.useMultiplePills || \n      !medication.pillConfigurations || \n      !medication.doseConfigurations ||\n      medication.pillConfigurations.length === 0 ||\n      medication.doseConfigurations.length === 0 ||\n      pillComponents.length === 0) {\n    console.log(` MultiplePillQuickLog: Invalid configuration for ${medication.name}, returning null`);\n    return null;\n  }\n\n  return (\n    <div className=\"bg-white rounded-lg border border-gray-200 p-4 space-y-4\">\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-2\">\n          <div \n            className=\"w-4 h-4 rounded-full\"\n            style={{ backgroundColor: medication.color }}\n          />\n          <h3 className=\"font-medium text-gray-900\">{medication.name}</h3>\n        </div>\n        <div className=\"text-sm text-gray-500\">\n          {getTotalTaken()}/{getTotalExpected()} pills\n        </div>\n      </div>\n\n      {/* Individual Pill Controls */}\n      <div className=\"space-y-3\">\n        {pillComponents.map((component) => {\n          const taken = pillsTaken[component.pillConfigurationId] || 0;\n          const expected = component.quantity;\n          const pillConfig = component.pillConfig;\n\n          return (\n            <div key={component.pillConfigurationId} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n              <div className=\"flex items-center space-x-3\">\n                <div \n                  className=\"w-3 h-3 rounded-full\"\n                  style={{ backgroundColor: pillConfig.color || medication.color }}\n                />\n                <div>\n                  <div className=\"text-sm font-medium text-gray-900\">\n                    {pillConfig.strength}{pillConfig.unit} {pillConfig.color} pill\n                  </div>\n                  <div className=\"text-xs text-gray-500\">\n                    Need: {expected} {expected === 1 ? 'pill' : 'pills'}\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center space-x-2\">\n                <button\n                  onClick={() => handlePillCountChange(component.pillConfigurationId, -0.5)}\n                  disabled={taken <= 0}\n                  className=\"w-8 h-8 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center text-gray-600 text-sm font-medium\"\n                >\n                  \n                </button>\n                \n                <div className=\"w-12 text-center\">\n                  <span className={`text-sm font-medium ${taken === expected ? 'text-green-600' : taken > expected ? 'text-orange-600' : 'text-gray-900'}`}>\n                    {taken}\n                  </span>\n                </div>\n                \n                <button\n                  onClick={() => handlePillCountChange(component.pillConfigurationId, 0.5)}\n                  className=\"w-8 h-8 rounded-full bg-gray-200 hover:bg-gray-300 flex items-center justify-center text-gray-600 text-sm font-medium\"\n                >\n                  +\n                </button>\n                \n                {taken !== expected && (\n                  <button\n                    onClick={() => setPillsTaken(prev => ({ ...prev, [component.pillConfigurationId]: expected }))}\n                    className=\"ml-2 text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded\"\n                  >\n                    Set {expected}\n                  </button>\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Action Buttons */}\n      <div className=\"flex space-x-2\">\n        <button\n          onClick={handleQuickTakeAll}\n          className=\"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center space-x-2\"\n        >\n          <Check className=\"h-4 w-4\" />\n          <span>Take All Pills</span>\n        </button>\n        \n        <button\n          onClick={handleLogDose}\n          disabled={isLogging || getTotalTaken() === 0}\n          className=\"bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2\"\n        >\n          <Pill className=\"h-4 w-4\" />\n          <span>Log</span>\n        </button>\n        \n        <button\n          onClick={() => {\n            const resetState: Record<string, number> = {};\n            pillComponents.forEach(component => {\n              resetState[component.pillConfigurationId] = 0;\n            });\n            setPillsTaken(resetState);\n          }}\n          className=\"border border-gray-300 text-gray-700 px-4 py-2 rounded-lg text-sm hover:bg-gray-50 transition-colors flex items-center space-x-2\"\n        >\n          <X className=\"h-4 w-4\" />\n          <span>Reset</span>\n        </button>\n      </div>\n\n      {/* Visual Progress */}\n      <div className=\"space-y-2\">\n        <div className=\"flex justify-between text-xs text-gray-500\">\n          <span>Progress</span>\n          <span>{Math.round((getTotalTaken() / getTotalExpected()) * 100)}%</span>\n        </div>\n        <div className=\"w-full bg-gray-200 rounded-full h-2\">\n          <div \n            className=\"bg-green-500 h-2 rounded-full transition-all duration-300\"\n            style={{ width: `${Math.min(100, (getTotalTaken() / getTotalExpected()) * 100)}%` }}\n          />\n        </div>\n      </div>\n\n      {/* Helpful Tips */}\n      <div className=\"text-xs text-gray-500 bg-blue-50 border border-blue-200 rounded p-2\">\n         <strong>Tip:</strong> Use + and  buttons to count half pills (0.5). Click \"Take All Pills\" to set everything at once.\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { Check, X, Clock, AlertCircle, Heart, Target, Zap } from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { Medication } from '@/types';\nimport { formatDosage, formatTime, formatPillDisplay, formatPillDisplayShort, getPillComponents } from '@/utils/helpers';\nimport { MultiplePillQuickLog } from './MultiplePillQuickLog';\nimport toast from 'react-hot-toast';\n\ninterface QuickMedicationLogProps {\n  medication: Medication;\n  reminder?: {\n    time: string;\n    id: string;\n  };\n  onAction?: (action: 'taken' | 'skipped' | 'snoozed') => void;\n}\n\nexport function QuickMedicationLog({ medication, reminder, onAction }: QuickMedicationLogProps) {\n  const { \n    markMedicationTaken, \n    markMedicationMissed, \n    getCurrentDose,\n    generateContextualMessage,\n    addSmartMessage,\n    logMedication\n  } = useMedicationStore();\n\n  const [showDosageInput, setShowDosageInput] = React.useState(false);\n  const [customDosage, setCustomDosage] = React.useState('');\n  const [showSkipReason, setShowSkipReason] = React.useState(false);\n  const [skipReason, setSkipReason] = React.useState('');\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [showDoseWarning, setShowDoseWarning] = React.useState(false);\n  const [warningMessage, setWarningMessage] = React.useState('');\n\n  const currentDose = getCurrentDose(medication.id);\n  const displayDose = currentDose.phase !== 'maintenance' ? currentDose.dose : parseFloat(medication.dosage);\n  \n  // Dose validation and psychological safety checks\n  const validateCustomDose = (proposedDose: number) => {\n    const expectedDose = displayDose;\n    const deviation = ((proposedDose - expectedDose) / expectedDose) * 100;\n    const warnings: string[] = [];\n    let severity: 'info' | 'warning' | 'critical' = 'info';\n\n    // Check for tapering medications\n    if (medication.tapering?.isActive) {\n      if (deviation > 20) {\n        warnings.push(` You're taking ${Math.round(deviation)}% more than your tapering schedule.`);\n        warnings.push(' Taking more during tapering can disrupt your withdrawal plan and make it harder to reduce later.');\n        warnings.push(' Consider contacting your healthcare provider before taking this higher dose.');\n        severity = 'critical';\n      } else if (deviation < -20) {\n        warnings.push(` You're taking ${Math.round(Math.abs(deviation))}% less than scheduled.`);\n        warnings.push(' Sudden dose reductions can trigger withdrawal symptoms.');\n        warnings.push(' Stick to your tapering plan for your safety and comfort.');\n        severity = 'critical';\n      } else if (Math.abs(deviation) > 10) {\n        warnings.push(` This is ${Math.round(Math.abs(deviation))}% ${deviation > 0 ? 'higher' : 'lower'} than planned.`);\n        warnings.push(' Small deviations are sometimes okay, but consistency helps your body adjust.');\n        severity = 'warning';\n      }\n    }\n\n    // Check for high-risk medications\n    if (medication.riskLevel === 'high') {\n      if (Math.abs(deviation) > 50) {\n        warnings.push(` Significant dose change for a high-risk medication.`);\n        warnings.push(' This medication requires careful monitoring. Large changes can be dangerous.');\n        warnings.push(' Please consult your healthcare provider before taking this dose.');\n        severity = 'critical';\n      } else if (Math.abs(deviation) > 25) {\n        warnings.push(` Notable dose change for a monitored medication.`);\n        warnings.push(' Be mindful of how this change affects you.');\n        severity = 'warning';\n      }\n    }\n\n    // Check for maximum daily dose limits\n    if (medication.maxDailyDose && proposedDose > medication.maxDailyDose) {\n      warnings.push(` This exceeds your maximum daily dose limit (${medication.maxDailyDose} ${medication.unit}).`);\n      warnings.push(' Taking more than prescribed can be dangerous and may cause serious side effects.');\n      warnings.push(' Contact your healthcare provider immediately if you feel you need more medication.');\n      severity = 'critical';\n    }\n\n    // Psychological support messages\n    if (deviation > 0 && medication.frequency === 'as-needed') {\n      warnings.push(' Remember: Taking PRN medications is about finding balance, not avoiding all discomfort.');\n    } else if (deviation > 30) {\n      warnings.push(' Consider: Are you taking more because you\\'re having a difficult day? That\\'s human and understandable.');\n      warnings.push(' There are other coping strategies that might help alongside your medication.');\n    }\n\n    return { warnings, severity };\n  };\n\n  // Helper function to check if multiple pills are actually configured\n  const hasConfiguredMultiplePills = () => {\n    const result = medication.useMultiplePills && \n           medication.pillConfigurations && \n           medication.doseConfigurations &&\n           medication.pillConfigurations.length > 0 &&\n           medication.doseConfigurations.length > 0;\n    \n    // Debug logging\n    console.log(` QuickMedicationLog ${medication.name}:`, {\n      useMultiplePills: medication.useMultiplePills,\n      hasConfigs: result,\n      pillConfigs: medication.pillConfigurations?.length || 0,\n      doseConfigs: medication.doseConfigurations?.length || 0,\n      fullMedication: medication\n    });\n    \n    return result;\n  };\n\n  const handleTaken = async (dosage?: number) => {\n    setIsLoading(true);\n    try {\n      const actualDosage = dosage || displayDose;\n      console.log(' Logging medication:', medication.name, {\n        dosage: actualDosage,\n        useMultiplePills: medication.useMultiplePills,\n        hasPillInventory: !!medication.pillInventory?.length\n      });\n      \n      markMedicationTaken(medication.id, actualDosage);\n      \n      // Generate positive reinforcement message\n      generateContextualMessage(medication.id, 'celebration');\n      \n      toast.success(` ${medication.name} logged successfully!`, {\n        icon: '',\n        duration: 3000,\n      });\n\n      // Add motivational smart message for streaks\n      const now = new Date();\n      addSmartMessage({\n        medicationId: medication.id,\n        type: 'celebration',\n        priority: 'low',\n        title: 'Great Job!',\n        message: `You took your ${medication.name} on time. Consistency builds healthy habits! `,\n        psychologicalApproach: 'positive-reinforcement',\n        scheduledTime: now,\n        expiresAt: new Date(now.getTime() + 2 * 60 * 60 * 1000), // 2 hours\n      });\n\n      onAction?.('taken');\n    } catch (error) {\n      console.error(' Failed to log medication:', error);\n      toast.error('Failed to log medication');\n    } finally {\n      setIsLoading(false);\n      setShowDosageInput(false);\n      setCustomDosage('');\n    }\n  };\n\n  const handleSkipped = async () => {\n    setIsLoading(true);\n    try {\n      markMedicationMissed(medication.id);\n      \n      // Generate supportive message for missed doses\n      if (medication.riskLevel === 'high' || medication.riskLevel === 'moderate') {\n        generateContextualMessage(medication.id, 'adherence-reminder');\n      }\n\n      toast(` ${medication.name} marked as skipped`, {\n        icon: '',\n        duration: 4000,\n      });\n\n      // Add supportive smart message\n      const now = new Date();\n      addSmartMessage({\n        medicationId: medication.id,\n        type: 'adherence-reminder',\n        priority: medication.riskLevel === 'high' ? 'high' : 'medium',\n        title: 'Gentle Reminder',\n        message: `It's okay to miss occasionally, but try to stay consistent with your ${medication.name}. Your health journey matters! `,\n        psychologicalApproach: 'empathetic-support',\n        scheduledTime: now,\n        expiresAt: new Date(now.getTime() + 6 * 60 * 60 * 1000), // 6 hours\n      });\n\n      onAction?.('skipped');\n    } catch (error) {\n      toast.error('Failed to log skip');\n    } finally {\n      setIsLoading(false);\n      setShowSkipReason(false);\n      setSkipReason('');\n    }\n  };\n\n  const handleCustomDosage = () => {\n    if (!customDosage || isNaN(parseFloat(customDosage))) {\n      toast.error('Please enter a valid dosage');\n      return;\n    }\n\n    const proposedDose = parseFloat(customDosage);\n    const validation = validateCustomDose(proposedDose);\n\n    // Show warning for significant deviations\n    if (validation.warnings.length > 0) {\n      setWarningMessage(validation.warnings.join('\\n\\n'));\n      setShowDoseWarning(true);\n      return;\n    }\n\n    // Proceed with logging if no warnings\n    handleTaken(proposedDose);\n  };\n\n  const confirmCustomDosage = () => {\n    const proposedDose = parseFloat(customDosage);\n    \n    // Log with special notes about the deviation\n    logMedication(\n      medication.id, \n      proposedDose, \n      `Custom dose: ${proposedDose} ${medication.unit} (expected: ${displayDose} ${medication.unit})`,\n      []\n    );\n\n    // Add psychological support message for concerning patterns\n    const validation = validateCustomDose(proposedDose);\n    if (validation.severity === 'critical') {\n      addSmartMessage({\n        medicationId: medication.id,\n        type: 'risk-alert',\n        priority: 'urgent',\n        title: 'Dose Deviation Detected',\n        message: `You took a different dose than planned for ${medication.name}. This has been logged for your healthcare provider's review.`,\n        psychologicalApproach: 'empathetic-support',\n        scheduledTime: new Date(),\n        expiresAt: new Date(Date.now() + 24 * 60 * 60 * 1000)\n      });\n    }\n\n    toast.success(` ${medication.name} (${proposedDose} ${medication.unit}) logged!`, {\n      icon: '',\n      duration: 3000,\n    });\n\n    onAction?.('taken');\n    setShowDosageInput(false);\n    setShowDoseWarning(false);\n    setCustomDosage('');\n    setWarningMessage('');\n  };\n\n  const getPsychologicalIcon = () => {\n    if (medication.category === 'vitamin' || medication.category === 'supplement') {\n      return <Heart className=\"h-4 w-4 text-green-500\" />;\n    }\n    if (medication.riskLevel === 'high') {\n      return <AlertCircle className=\"h-4 w-4 text-red-500\" />;\n    }\n    if (medication.category === 'herbal') {\n      return <Zap className=\"h-4 w-4 text-purple-500\" />;\n    }\n    return <Target className=\"h-4 w-4 text-blue-500\" />;\n  };\n\n  const getMotivationalMessage = () => {\n    if (medication.category === 'vitamin' || medication.category === 'supplement') {\n      return \"Nourishing your body! \";\n    }\n    if (medication.category === 'herbal') {\n      return \"Natural wellness choice! \";\n    }\n    if (medication.riskLevel === 'high') {\n      return \"Important for your health \";\n    }\n    return \"Taking care of yourself! \";\n  };\n\n  // Use MultiplePillQuickLog for medications with multiple pills enabled AND configured\n  if (hasConfiguredMultiplePills()) {\n    console.log(` Using MultiplePillQuickLog for ${medication.name}`);\n    return (\n      <MultiplePillQuickLog \n        medication={medication} \n        onAction={onAction}\n      />\n    );\n  }\n  \n  console.log(` Using regular QuickMedicationLog for ${medication.name}`);\n\n  return (\n    <div className=\"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow\">\n      <div className=\"flex items-start justify-between mb-3\">\n        <div className=\"flex items-start space-x-3\">\n          <div\n            className=\"w-4 h-4 rounded-full mt-1 flex-shrink-0\"\n            style={{ backgroundColor: medication.color }}\n          />\n          <div className=\"flex-1\">\n            <div className=\"flex items-center space-x-2\">\n              <h3 className=\"font-medium text-gray-900\">{medication.name}</h3>\n              {getPsychologicalIcon()}\n            </div>\n            <p className=\"text-sm text-gray-600 mt-1\">\n              {hasConfiguredMultiplePills() \n                ? formatPillDisplayShort(medication) \n                : formatDosage(displayDose.toString(), medication.unit)}\n            </p>\n            {hasConfiguredMultiplePills() && (\n              <div className=\"mt-2 space-y-1\">\n                {getPillComponents(medication).map((component, index) => (\n                  <div key={index} className=\"flex items-center space-x-2 text-xs text-gray-500\">\n                    <div \n                      className=\"w-2 h-2 rounded-full\" \n                      style={{ backgroundColor: component.pillConfig.color || medication.color }}\n                    />\n                    <span>{component.displayText}</span>\n                  </div>\n                ))}\n              </div>\n            )}\n            {currentDose.phase !== 'maintenance' && (\n              <p className=\"text-xs text-blue-600 font-medium mt-1\">\n                Current: {currentDose.dose} {medication.unit} ({currentDose.phase})\n              </p>\n            )}\n            {reminder && (\n              <div className=\"flex items-center space-x-1 mt-1\">\n                <Clock className=\"h-3 w-3 text-gray-400\" />\n                <span className=\"text-xs text-gray-500\">Due: {reminder.time}</span>\n              </div>\n            )}\n            <p className=\"text-xs text-gray-500 mt-1 italic\">{getMotivationalMessage()}</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Quick Action Buttons */}\n      <div className=\"space-y-3\">\n        {!showDosageInput && !showSkipReason && (\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={() => handleTaken()}\n              disabled={isLoading}\n              className=\"flex-1 bg-green-600 hover:bg-green-700 disabled:opacity-50 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center justify-center space-x-2\"\n            >\n              <Check className=\"h-4 w-4\" />\n              <span>\n                {hasConfiguredMultiplePills()\n                  ? `Take ${formatPillDisplayShort(medication).split('(')[0].trim()}`\n                  : `Take ${displayDose} ${medication.unit}`\n                }\n              </span>\n            </button>\n            \n            <button\n              onClick={() => setShowDosageInput(true)}\n              className=\"px-3 py-2 border border-gray-300 text-gray-700 rounded-lg text-sm hover:bg-gray-50 transition-colors\"\n              title=\"Different dosage\"\n            >\n              \n            </button>\n            \n            <button\n              onClick={() => setShowSkipReason(true)}\n              className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg text-sm hover:bg-gray-50 transition-colors flex items-center space-x-1\"\n            >\n              <X className=\"h-4 w-4\" />\n              <span>Skip</span>\n            </button>\n          </div>\n        )}\n\n        {/* Custom Dosage Input */}\n        {showDosageInput && !showDoseWarning && (\n          <div className=\"space-y-2\">\n            <label className=\"block text-sm font-medium text-gray-700\">\n              Custom Dosage ({medication.unit})\n            </label>\n            <div className=\"text-xs text-gray-500 mb-2\">\n              Expected: {displayDose} {medication.unit}\n              {medication.tapering?.isActive && (\n                <span className=\"text-purple-600 font-medium\"> (Tapering Schedule)</span>\n              )}\n            </div>\n            <div className=\"flex space-x-2\">\n              <input\n                type=\"number\"\n                step=\"0.1\"\n                value={customDosage}\n                onChange={(e) => setCustomDosage(e.target.value)}\n                placeholder={displayDose.toString()}\n                className=\"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                autoFocus\n              />\n              <button\n                onClick={handleCustomDosage}\n                disabled={isLoading || !customDosage}\n                className=\"bg-green-600 hover:bg-green-700 disabled:opacity-50 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors\"\n              >\n                Check Dose\n              </button>\n              <button\n                onClick={() => {\n                  setShowDosageInput(false);\n                  setCustomDosage('');\n                }}\n                className=\"border border-gray-300 text-gray-700 px-4 py-2 rounded-md text-sm hover:bg-gray-50 transition-colors\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Dose Warning Modal */}\n        {showDoseWarning && (\n          <div className=\"space-y-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n            <div className=\"flex items-start space-x-3\">\n              <AlertCircle className=\"h-5 w-5 text-yellow-600 mt-0.5 flex-shrink-0\" />\n              <div className=\"flex-1\">\n                <h4 className=\"text-sm font-medium text-yellow-800\">Dose Safety Check</h4>\n                <div className=\"mt-2 text-sm text-yellow-700 whitespace-pre-line\">\n                  {warningMessage}\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"flex space-x-2\">\n              <button\n                onClick={confirmCustomDosage}\n                className=\"flex-1 bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors\"\n              >\n                I Understand - Log This Dose\n              </button>\n              <button\n                onClick={() => {\n                  setShowDoseWarning(false);\n                  setWarningMessage('');\n                }}\n                className=\"flex-1 border border-gray-300 text-gray-700 px-4 py-2 rounded-md text-sm hover:bg-gray-50 transition-colors\"\n              >\n                Cancel & Revise\n              </button>\n            </div>\n            \n            <div className=\"text-xs text-gray-600 bg-white p-2 rounded border\">\n               <strong>Remember:</strong> Your healthcare provider can help adjust your medication plan if you're consistently needing different doses.\n            </div>\n          </div>\n        )}\n\n        {/* Skip Reason */}\n        {showSkipReason && (\n          <div className=\"space-y-2\">\n            <label className=\"block text-sm font-medium text-gray-700\">\n              Why are you skipping? (Optional)\n            </label>\n            <div className=\"space-y-2\">\n              <select\n                value={skipReason}\n                onChange={(e) => setSkipReason(e.target.value)}\n                className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              >\n                <option value=\"\">Select a reason</option>\n                <option value=\"forgot\">Forgot to take it</option>\n                <option value=\"side-effects\">Experiencing side effects</option>\n                <option value=\"no-access\">Don't have medication with me</option>\n                <option value=\"feeling-better\">Feeling better</option>\n                <option value=\"doctor-advice\">Doctor advised to skip</option>\n                <option value=\"interaction\">Potential drug interaction</option>\n                <option value=\"other\">Other reason</option>\n              </select>\n              <div className=\"flex space-x-2\">\n                <button\n                  onClick={handleSkipped}\n                  disabled={isLoading}\n                  className=\"flex-1 bg-orange-500 hover:bg-orange-600 disabled:opacity-50 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors\"\n                >\n                  Skip This Dose\n                </button>\n                <button\n                  onClick={() => {\n                    setShowSkipReason(false);\n                    setSkipReason('');\n                  }}\n                  className=\"border border-gray-300 text-gray-700 px-4 py-2 rounded-md text-sm hover:bg-gray-50 transition-colors\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Psychological Support Messages */}\n      {medication.riskLevel === 'high' && (\n        <div className=\"mt-3 p-2 bg-blue-50 border border-blue-200 rounded-lg\">\n          <p className=\"text-xs text-blue-700\">\n             <strong>You're doing great!</strong> Staying consistent with this medication is important for your health and well-being.\n          </p>\n        </div>\n      )}\n      \n      {(medication.category === 'vitamin' || medication.category === 'supplement') && (\n        <div className=\"mt-3 p-2 bg-green-50 border border-green-200 rounded-lg\">\n          <p className=\"text-xs text-green-700\">\n             <strong>Investing in your wellness!</strong> Every supplement you take is a step towards better health.\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport { Calendar, Clock, AlertTriangle, CheckCircle2, Plus } from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { QuickMedicationLog } from './QuickMedicationLog';\nimport { formatTime, formatPillDisplay, formatPillDisplayShort, calculateRemainingDosesForDay, getProgressDisplayText } from '@/utils/helpers';\n\nexport function TodaysMedications() {\n  const { \n    getTodaysReminders, \n    getTodaysLogs, \n    medications,\n    smartMessages\n  } = useMedicationStore();\n\n  const todaysReminders = getTodaysReminders();\n  const todaysLogs = getTodaysLogs();\n  const activeMedications = medications.filter(med => med.isActive);\n  \n  // Debug logging to understand what's happening\n  React.useEffect(() => {\n    console.log(' TodaysMedications Debug:', {\n      totalMedications: medications.length,\n      activeMedications: activeMedications.length,\n      todaysReminders: todaysReminders.length,\n      medicationsWithoutReminders: medicationsWithoutReminders.length,\n      totalForToday: getTotalMedicationsForToday(),\n      medications: activeMedications.map(med => ({\n        id: med.id,\n        name: med.name,\n        isActive: med.isActive,\n        useMultiplePills: med.useMultiplePills,\n        hasConfigs: !!(med.pillConfigurations && med.doseConfigurations)\n      }))\n    });\n  }, [medications.length, activeMedications.length, todaysReminders.length]);\n\n  // Get medications that need to be taken today but don't have reminders\n  const medicationsWithoutReminders = activeMedications.filter(med => \n    !todaysReminders.some(reminder => reminder.medicationId === med.id)\n  );\n\n  // Check which medications have been logged today\n  const loggedMedicationIds = new Set(todaysLogs.map(log => log.medicationId));\n\n  // Get urgent smart messages for today's medications\n  const urgentMessages = smartMessages.filter(msg => \n    msg.priority === 'urgent' || msg.priority === 'high'\n  );\n\n  const getTimeBasedGreeting = () => {\n    const hour = new Date().getHours();\n    if (hour < 12) return \"Good morning! \";\n    if (hour < 17) return \"Good afternoon! \";\n    return \"Good evening! \";\n  };\n\n  const getTotalMedicationsForToday = () => {\n    return todaysReminders.length + medicationsWithoutReminders.length;\n  };\n\n  const getCompletedCount = () => {\n    return todaysReminders.filter(reminder => \n      loggedMedicationIds.has(reminder.medicationId)\n    ).length + medicationsWithoutReminders.filter(med => \n      loggedMedicationIds.has(med.id)\n    ).length;\n  };\n\n  // Enhanced completion tracking for multiple doses per day\n  const getDailyCompletionStatus = (medication: any) => {\n    return calculateRemainingDosesForDay(medication, todaysLogs);\n  };\n\n  const getCompletionPercentage = () => {\n    const total = getTotalMedicationsForToday();\n    if (total === 0) return 0;\n    return Math.round((getCompletedCount() / total) * 100);\n  };\n\n  const getMotivationalMessage = () => {\n    const percentage = getCompletionPercentage();\n    const completed = getCompletedCount();\n    const total = getTotalMedicationsForToday();\n    \n    if (percentage === 100) {\n      return {\n        message: \" Perfect! You've completed all your medications for today!\",\n        color: \"text-green-600 bg-green-50 border-green-200\"\n      };\n    } else if (percentage >= 75) {\n      return {\n        message: ` Great progress! ${completed}/${total} completed. You're doing amazing!`,\n        color: \"text-blue-600 bg-blue-50 border-blue-200\"\n      };\n    } else if (percentage >= 50) {\n      return {\n        message: ` Keep going! ${completed}/${total} completed. You've got this!`,\n        color: \"text-orange-600 bg-orange-50 border-orange-200\"\n      };\n    } else if (completed > 0) {\n      return {\n        message: ` Good start! ${completed}/${total} completed. Every step counts!`,\n        color: \"text-purple-600 bg-purple-50 border-purple-200\"\n      };\n    } else {\n      return {\n        message: `${getTimeBasedGreeting()} Ready to start your wellness routine?`,\n        color: \"text-gray-600 bg-gray-50 border-gray-200\"\n      };\n    }\n  };\n\n  const motivationalMsg = getMotivationalMessage();\n\n  if (getTotalMedicationsForToday() === 0) {\n    return (\n      <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\n        <div className=\"text-center\">\n          <Calendar className=\"mx-auto h-12 w-12 text-gray-400\" />\n          <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No medications for today</h3>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Enjoy your medication-free day! \n          </p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Header with Progress */}\n      <div className=\"bg-white rounded-lg border border-gray-200 p-4\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <h2 className=\"text-lg font-semibold text-gray-900\">Today's Medications</h2>\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"text-sm text-gray-600\">\n              {getCompletedCount()}/{getTotalMedicationsForToday()}\n            </span>\n            <div className=\"w-16 bg-gray-200 rounded-full h-2\">\n              <div \n                className=\"bg-green-500 h-2 rounded-full transition-all duration-300\"\n                style={{ width: `${getCompletionPercentage()}%` }}\n              />\n            </div>\n          </div>\n        </div>\n        \n        {/* Motivational Message */}\n        <div className={`p-3 rounded-lg border ${motivationalMsg.color}`}>\n          <p className=\"text-sm font-medium\">{motivationalMsg.message}</p>\n        </div>\n      </div>\n\n      {/* Urgent Messages */}\n      {urgentMessages.length > 0 && (\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n          <div className=\"flex items-center space-x-2 mb-2\">\n            <AlertTriangle className=\"h-5 w-5 text-red-600\" />\n            <h3 className=\"font-medium text-red-900\">Important Alerts</h3>\n          </div>\n          <div className=\"space-y-2\">\n            {urgentMessages.map((message) => (\n              <div key={message.id} className=\"bg-white p-3 rounded border border-red-200\">\n                <h4 className=\"font-medium text-red-900 text-sm\">{message.title}</h4>\n                <p className=\"text-red-700 text-sm mt-1\">{message.message}</p>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Scheduled Reminders */}\n      {todaysReminders.length > 0 && (\n        <div className=\"space-y-3\">\n          <h3 className=\"font-medium text-gray-900 flex items-center space-x-2\">\n            <Clock className=\"h-4 w-4\" />\n            <span>Scheduled for Today</span>\n          </h3>\n          {todaysReminders.map((reminder) => {\n            const completionStatus = getDailyCompletionStatus(reminder.medication);\n            const progressText = getProgressDisplayText(\n              completionStatus.remaining,\n              completionStatus.total,\n              completionStatus.completed,\n              reminder.medication.frequency\n            );\n            \n            return (\n              <div key={reminder.id} className=\"relative\">\n                <div className=\"absolute top-2 right-2 z-10 flex flex-col items-end space-y-1\">\n                  {completionStatus.completed ? (\n                    <div className=\"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full flex items-center space-x-1\">\n                      <CheckCircle2 className=\"h-3 w-3\" />\n                      <span>All Complete</span>\n                    </div>\n                  ) : completionStatus.remaining > 0 && completionStatus.total > 0 ? (\n                    <div className=\"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full\">\n                      {progressText}\n                    </div>\n                  ) : null}\n                </div>\n                <div className={completionStatus.completed ? 'opacity-60' : ''}>\n                  <QuickMedicationLog\n                    medication={reminder.medication}\n                    reminder={{ time: reminder.time, id: reminder.id }}\n                    onAction={(action) => {\n                      if (action === 'taken') {\n                        // Refresh will happen automatically via store updates\n                      }\n                    }}\n                  />\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n\n      {/* Medications without Reminders */}\n      {medicationsWithoutReminders.length > 0 && (\n        <div className=\"space-y-3\">\n          <h3 className=\"font-medium text-gray-900 flex items-center space-x-2\">\n            <Plus className=\"h-4 w-4\" />\n            <span>As Needed / No Reminders Set</span>\n          </h3>\n          {medicationsWithoutReminders.map((medication) => {\n            const completionStatus = getDailyCompletionStatus(medication);\n            const progressText = getProgressDisplayText(\n              completionStatus.remaining,\n              completionStatus.total,\n              completionStatus.completed,\n              medication.frequency\n            );\n            \n            return (\n              <div key={medication.id} className=\"relative\">\n                <div className=\"absolute top-2 right-2 z-10 flex flex-col items-end space-y-1\">\n                  {completionStatus.completed ? (\n                    <div className=\"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full flex items-center space-x-1\">\n                      <CheckCircle2 className=\"h-3 w-3\" />\n                      <span>{medication.frequency === 'as-needed' ? 'Taken Today' : 'All Complete'}</span>\n                    </div>\n                  ) : completionStatus.remaining > 0 && completionStatus.total > 0 ? (\n                    <div className=\"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full\">\n                      {progressText}\n                    </div>\n                  ) : medication.frequency === 'as-needed' ? (\n                    <div className=\"bg-gray-100 text-gray-600 text-xs px-2 py-1 rounded-full\">\n                      As needed\n                    </div>\n                  ) : null}\n                </div>\n                <div className={completionStatus.completed ? 'opacity-60' : ''}>\n                  <QuickMedicationLog\n                    medication={medication}\n                    onAction={(action) => {\n                      if (action === 'taken') {\n                        // Refresh will happen automatically via store updates\n                      }\n                    }}\n                  />\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n\n      {/* Weekly Adherence Insight */}\n      {medications.length > 0 && (\n        <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4\">\n          <h3 className=\"font-medium text-gray-900 mb-2\"> Adherence Insight</h3>\n          <p className=\"text-sm text-gray-700\">\n            {getCompletionPercentage() >= 80 \n              ? \"Your consistency is excellent! This level of adherence supports optimal treatment outcomes.\"\n              : getCompletionPercentage() >= 60\n              ? \"Good adherence! Try setting more reminders to reach your health goals even better.\"\n              : \"Remember, consistency is key to getting the most benefit from your medications. Consider setting up more reminders.\"\n            }\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}\n","import { useMedicationStore } from '@/store';\nimport { generateId } from '@/utils/helpers';\n\n/**\n * Utility function to fix Kratom medication data structure\n * This should be called from the browser console\n */\nexport function fixKratomData() {\n  const store = useMedicationStore.getState();\n  const kratom = store.medications.find(med => med.name === 'Kratom');\n  \n  if (!kratom) {\n    console.error(' Kratom medication not found');\n    return;\n  }\n\n  console.log(' Current Kratom data:', kratom);\n\n  // Fix the data structure\n  if (kratom.useMultiplePills && kratom.pillConfigurations && kratom.pillConfigurations.length > 0) {\n    const firstPillConfig = kratom.pillConfigurations[0];\n    \n    // Create proper dose configuration with pillComponents\n    const fixedDoseConfig = {\n      id: generateId(),\n      name: 'Standard Dose',\n      description: `5 pills of ${firstPillConfig.strength}${firstPillConfig.unit} each`,\n      pillComponents: [\n        {\n          pillConfigurationId: firstPillConfig.id,\n          quantity: 5 // 5 pills of 500mg = 2500mg total\n        }\n      ],\n      totalDoseAmount: 2500,\n      unit: 'mg',\n      isActive: true\n    };\n\n    // Update the medication\n    store.updateMedication(kratom.id, {\n      doseConfigurations: [fixedDoseConfig],\n      defaultDoseConfigurationId: fixedDoseConfig.id\n    });\n\n    console.log(' Fixed Kratom data structure!');\n    console.log(' Refresh the page to see the changes');\n    return true;\n  } else {\n    console.error(' Kratom doesn\\'t have proper pill configurations');\n    return false;\n  }\n}\n\n// Make it available globally for console access\n(window as any).fixKratomData = fixKratomData;\n\n","import React from 'react';\nimport { Activity, TrendingDown, TrendingUp, Minus, Plus, X } from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { Medication, WithdrawalSymptom } from '@/types';\nimport { generateId } from '@/utils/helpers';\nimport toast from 'react-hot-toast';\n\ninterface WithdrawalSymptomTrackerProps {\n  medication: Medication;\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport function WithdrawalSymptomTracker({ medication, isOpen, onClose }: WithdrawalSymptomTrackerProps) {\n  const { updateMedication, addSmartMessage } = useMedicationStore();\n\n  const [symptoms, setSymptoms] = React.useState<Record<string, number>>({});\n  const [newSymptom, setNewSymptom] = React.useState('');\n  const [mood, setMood] = React.useState<number>(5);\n  const [notes, setNotes] = React.useState('');\n  const [isSubmitting, setIsSubmitting] = React.useState(false);\n\n  // Common withdrawal symptoms by medication category\n  const commonSymptoms = {\n    'benzodiazepine': [\n      'Anxiety', 'Panic attacks', 'Insomnia', 'Tremor', 'Sweating',\n      'Nausea', 'Headache', 'Muscle tension', 'Concentration problems',\n      'Memory issues', 'Irritability', 'Light sensitivity'\n    ],\n    'opioid': [\n      'Muscle aches', 'Runny nose', 'Nausea', 'Vomiting', 'Diarrhea',\n      'Insomnia', 'Restlessness', 'Anxiety', 'Depression', 'Cravings',\n      'Hot/cold flashes', 'Fatigue'\n    ],\n    'antidepressant': [\n      'Brain zaps', 'Dizziness', 'Nausea', 'Headache', 'Fatigue',\n      'Irritability', 'Anxiety', 'Vivid dreams', 'Flu-like symptoms',\n      'Emotional lability', 'Confusion'\n    ],\n    'stimulant': [\n      'Fatigue', 'Depression', 'Increased appetite', 'Sleep problems',\n      'Anxiety', 'Concentration problems', 'Cravings', 'Mood swings',\n      'Lack of motivation'\n    ],\n    'sleep-aid': [\n      'Rebound insomnia', 'Anxiety', 'Panic attacks', 'Sweating',\n      'Tremor', 'Nausea', 'Confusion', 'Memory problems',\n      'Muscle tension', 'Nightmares'\n    ]\n  };\n\n  const category = medication.dependencyRiskCategory;\n  const symptomList = commonSymptoms[category as keyof typeof commonSymptoms] || commonSymptoms['benzodiazepine'];\n\n  const activeWithdrawal = medication.dependencePrevention?.withdrawalHistory.find(event => !event.endDate);\n  const daysSinceStart = activeWithdrawal?.startDate \n    ? Math.floor((Date.now() - new Date(activeWithdrawal.startDate).getTime()) / (1000 * 60 * 60 * 24))\n    : 0;\n\n  React.useEffect(() => {\n    if (isOpen) {\n      // Initialize with existing symptoms from today\n      const today = new Date().toDateString();\n      const todaysSymptoms: Record<string, number> = {};\n      \n      if (activeWithdrawal?.symptoms) {\n        activeWithdrawal.symptoms.forEach(symptom => {\n          if (new Date(symptom.peak).toDateString() === today) {\n            todaysSymptoms[symptom.symptom] = symptom.severity;\n          }\n        });\n      }\n      \n      setSymptoms(todaysSymptoms);\n    }\n  }, [isOpen, activeWithdrawal]);\n\n  const updateSymptomSeverity = (symptom: string, severity: number) => {\n    setSymptoms(prev => ({\n      ...prev,\n      [symptom]: severity\n    }));\n  };\n\n  const addCustomSymptom = () => {\n    if (newSymptom.trim() && !symptoms[newSymptom.trim()]) {\n      setSymptoms(prev => ({\n        ...prev,\n        [newSymptom.trim()]: 1\n      }));\n      setNewSymptom('');\n    }\n  };\n\n  const removeSymptom = (symptom: string) => {\n    setSymptoms(prev => {\n      const updated = { ...prev };\n      delete updated[symptom];\n      return updated;\n    });\n  };\n\n  const getSymptomTrend = (symptom: string) => {\n    if (!activeWithdrawal?.symptoms) return 'stable';\n    \n    const symptomHistory = activeWithdrawal.symptoms\n      .filter(s => s.symptom === symptom)\n      .sort((a, b) => new Date(a.peak).getTime() - new Date(b.peak).getTime())\n      .slice(-3); // Last 3 entries\n    \n    if (symptomHistory.length < 2) return 'stable';\n    \n    const recent = symptomHistory[symptomHistory.length - 1].severity;\n    const previous = symptomHistory[symptomHistory.length - 2].severity;\n    \n    if (recent > previous + 1) return 'worsening';\n    if (recent < previous - 1) return 'improving';\n    return 'stable';\n  };\n\n  const getTrendIcon = (trend: string) => {\n    switch (trend) {\n      case 'improving': return <TrendingDown className=\"h-3 w-3 text-green-500\" />;\n      case 'worsening': return <TrendingUp className=\"h-3 w-3 text-red-500\" />;\n      default: return <Minus className=\"h-3 w-3 text-gray-400\" />;\n    }\n  };\n\n  const getSeverityColor = (severity: number) => {\n    if (severity <= 2) return 'text-green-600 bg-green-100';\n    if (severity <= 4) return 'text-yellow-600 bg-yellow-100';\n    if (severity <= 7) return 'text-orange-600 bg-orange-100';\n    return 'text-red-600 bg-red-100';\n  };\n\n  const getMoodColor = (mood: number) => {\n    if (mood <= 2) return 'text-red-600';\n    if (mood <= 4) return 'text-orange-600';\n    if (mood <= 6) return 'text-yellow-600';\n    if (mood <= 8) return 'text-blue-600';\n    return 'text-green-600';\n  };\n\n  const handleSubmit = async () => {\n    setIsSubmitting(true);\n    \n    try {\n      const now = new Date();\n      const newSymptoms: WithdrawalSymptom[] = Object.entries(symptoms).map(([symptom, severity]) => ({\n        symptom,\n        severity,\n        duration: 24, // Assume symptoms lasted most of the day\n        peak: now,\n        managementStrategies: [],\n        resolved: severity === 0\n      }));\n\n      // Update the active withdrawal event\n      if (activeWithdrawal && medication.dependencePrevention) {\n        const updatedWithdrawal = {\n          ...activeWithdrawal,\n          symptoms: [\n            ...activeWithdrawal.symptoms.filter(s => \n              new Date(s.peak).toDateString() !== now.toDateString()\n            ),\n            ...newSymptoms\n          ]\n        };\n\n        const updatedHistory = medication.dependencePrevention.withdrawalHistory.map(event =>\n          event.id === activeWithdrawal.id ? updatedWithdrawal : event\n        );\n\n        updateMedication(medication.id, {\n          dependencePrevention: {\n            ...medication.dependencePrevention,\n            withdrawalHistory: updatedHistory\n          }\n        });\n\n        // Generate support message based on symptoms\n        const totalSeverity = Object.values(symptoms).reduce((sum, severity) => sum + severity, 0);\n        const avgSeverity = totalSeverity / Object.keys(symptoms).length;\n\n        if (avgSeverity > 6) {\n          addSmartMessage({\n            medicationId: medication.id,\n            type: 'risk-alert',\n            priority: 'high',\n            title: 'Withdrawal Symptoms Tracked',\n            message: `Your symptoms today seem intense. Remember, this is temporary and you're doing great. Consider contacting your healthcare provider if symptoms become unbearable.`,\n            psychologicalApproach: 'empathetic-support',\n            scheduledTime: now,\n            expiresAt: new Date(now.getTime() + 12 * 60 * 60 * 1000) // 12 hours\n          });\n        } else if (avgSeverity > 3) {\n          addSmartMessage({\n            medicationId: medication.id,\n            type: 'motivation',\n            priority: 'medium',\n            title: 'Managing Withdrawal Well',\n            message: `You're tracking your symptoms - that's self-awareness and strength. Each day is progress toward feeling better.`,\n            psychologicalApproach: 'positive-reinforcement',\n            scheduledTime: now,\n            expiresAt: new Date(now.getTime() + 8 * 60 * 60 * 1000) // 8 hours\n          });\n        } else {\n          addSmartMessage({\n            medicationId: medication.id,\n            type: 'celebration',\n            priority: 'low',\n            title: 'Feeling Better!',\n            message: `Your symptoms are mild today - that's wonderful progress! You're showing real resilience.`,\n            psychologicalApproach: 'positive-reinforcement',\n            scheduledTime: now,\n            expiresAt: new Date(now.getTime() + 6 * 60 * 60 * 1000) // 6 hours\n          });\n        }\n\n        toast.success('Withdrawal symptoms logged successfully');\n        onClose();\n      }\n    } catch (error) {\n      toast.error('Failed to log symptoms');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  if (!isOpen || !activeWithdrawal) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n        \n        {/* Header */}\n        <div className=\"sticky top-0 bg-white border-b border-gray-200 px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <Activity className=\"h-6 w-6 text-orange-600\" />\n              <div>\n                <h3 className=\"text-lg font-medium text-gray-900\">\n                  Daily Withdrawal Check-in\n                </h3>\n                <p className=\"text-sm text-gray-500\">\n                  {medication.name}  Day {daysSinceStart}\n                </p>\n              </div>\n            </div>\n            <button onClick={onClose} className=\"text-gray-400 hover:text-gray-500\">\n              <X className=\"h-6 w-6\" />\n            </button>\n          </div>\n        </div>\n\n        <div className=\"px-6 py-4 space-y-6\">\n\n          {/* Overall Mood */}\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Overall Mood Today (1-10)\n            </label>\n            <div className=\"flex items-center space-x-4\">\n              <input\n                type=\"range\"\n                min=\"1\"\n                max=\"10\"\n                value={mood}\n                onChange={(e) => setMood(parseInt(e.target.value))}\n                className=\"flex-1\"\n              />\n              <span className={`text-lg font-semibold ${getMoodColor(mood)}`}>\n                {mood}/10\n              </span>\n            </div>\n            <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n              <span>Very Low</span>\n              <span>Excellent</span>\n            </div>\n          </div>\n\n          {/* Common Symptoms */}\n          <div>\n            <h4 className=\"font-medium text-gray-900 mb-4\">Common Withdrawal Symptoms</h4>\n            <div className=\"grid grid-cols-1 gap-3\">\n              {symptomList.map((symptom) => {\n                const severity = symptoms[symptom] || 0;\n                const trend = getSymptomTrend(symptom);\n                \n                return (\n                  <div key={symptom} className=\"bg-gray-50 border border-gray-200 rounded-lg p-3\">\n                    <div className=\"flex items-center justify-between mb-2\">\n                      <div className=\"flex items-center space-x-2\">\n                        <span className=\"text-sm font-medium text-gray-900\">{symptom}</span>\n                        {getTrendIcon(trend)}\n                      </div>\n                      <div className=\"flex items-center space-x-2\">\n                        {severity > 0 && (\n                          <span className={`text-xs px-2 py-1 rounded-full ${getSeverityColor(severity)}`}>\n                            {severity}/10\n                          </span>\n                        )}\n                        <button\n                          onClick={() => removeSymptom(symptom)}\n                          className=\"text-gray-400 hover:text-red-500\"\n                        >\n                          <X className=\"h-4 w-4\" />\n                        </button>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <span className=\"text-xs text-gray-500\">None</span>\n                      <input\n                        type=\"range\"\n                        min=\"0\"\n                        max=\"10\"\n                        value={severity}\n                        onChange={(e) => updateSymptomSeverity(symptom, parseInt(e.target.value))}\n                        className=\"flex-1\"\n                      />\n                      <span className=\"text-xs text-gray-500\">Severe</span>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n\n          {/* Add Custom Symptom */}\n          <div>\n            <h4 className=\"font-medium text-gray-900 mb-4\">Add Custom Symptom</h4>\n            <div className=\"flex space-x-2\">\n              <input\n                type=\"text\"\n                value={newSymptom}\n                onChange={(e) => setNewSymptom(e.target.value)}\n                placeholder=\"Enter a symptom you're experiencing\"\n                className=\"flex-1 border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n              />\n              <button\n                onClick={addCustomSymptom}\n                disabled={!newSymptom.trim() || symptoms[newSymptom.trim()]}\n                className=\"bg-orange-600 hover:bg-orange-700 disabled:opacity-50 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors\"\n              >\n                <Plus className=\"h-4 w-4\" />\n              </button>\n            </div>\n          </div>\n\n          {/* Notes */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Additional Notes (Optional)\n            </label>\n            <textarea\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              placeholder=\"How are you feeling overall? Any coping strategies that helped today?\"\n              className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n              rows={3}\n            />\n          </div>\n\n          {/* Encouragement */}\n          <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n            <h4 className=\"text-sm font-medium text-green-800 mb-2\"> You're Doing Great!</h4>\n            <p className=\"text-sm text-green-700\">\n              Tracking your symptoms shows self-awareness and commitment to your recovery. \n              Each day you monitor your progress is a step toward feeling better. \n              Remember, withdrawal symptoms are temporary, but your strength is lasting.\n            </p>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"sticky bottom-0 bg-gray-50 px-6 py-4 border-t border-gray-200\">\n          <div className=\"flex justify-end space-x-3\">\n            <button\n              onClick={onClose}\n              className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50\"\n            >\n              Cancel\n            </button>\n            \n            <button\n              onClick={handleSubmit}\n              disabled={isSubmitting || Object.keys(symptoms).length === 0}\n              className=\"px-6 py-2 text-sm font-medium text-white bg-orange-600 border border-transparent rounded-md hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              {isSubmitting ? 'Saving...' : 'Log Symptoms'}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { \n  Pill, \n  Clock, \n  AlertTriangle, \n  Plus,\n  CheckCircle,\n  XCircle,\n  Calendar as CalendarIcon,\n  MessageSquare,\n  ShieldAlert,\n  Star,\n  TrendingUp,\n  Activity,\n  Brain,\n  Heart,\n  Zap\n} from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { formatTime, getAdherenceColor, formatPillDisplayShort } from '@/utils/helpers';\nimport { TodaysMedications } from '@/components/ui/TodaysMedications';\nimport '@/utils/fixKratomData'; // Import the fix utility\nimport { WithdrawalSymptomTracker } from '@/components/ui/WithdrawalSymptomTracker';\n\nexport function Dashboard() {\n  const {\n    medications,\n    logs,\n    getTodaysReminders,\n    getTodaysLogs,\n    getMissedDoses,\n    getUpcomingRefills,\n    getMedicationAdherence,\n    markMedicationTaken,\n    markMedicationMissed,\n    smartMessages,\n    getSmartInsights,\n    getHighRiskMedications,\n    markMessageAsRead,\n    getCurrentDose,\n    addSmartMessage\n  } = useMedicationStore();\n\n  const todaysReminders = getTodaysReminders();\n  const todaysLogs = getTodaysLogs();\n  const recentMissedDoses = getMissedDoses(7);\n  const upcomingRefills = getUpcomingRefills();\n  const activeMedications = medications.filter(med => med.isActive);\n  const smartInsights = getSmartInsights();\n  const highRiskMedications = getHighRiskMedications();\n  const priorityMessages = smartMessages.filter(msg => msg.priority === 'high' || msg.priority === 'urgent');\n\n  // Enhanced dashboard data\n  const taperingMedications = activeMedications.filter(med => med.tapering?.isActive);\n  const withdrawalTrackingMedications = activeMedications.filter(med => \n    med.dependencePrevention?.withdrawalHistory.some(event => !event.endDate)\n  );\n  const cyclicDosingMedications = activeMedications.filter(med => med.cyclicDosing?.isActive);\n  const prnMedications = activeMedications.filter(med => med.frequency === 'as-needed');\n\n  // Psychological warnings for dose deviations\n  const getDoseDeviationWarnings = () => {\n    const warnings: Array<{id: string; medication: string; message: string; severity: 'warning' | 'critical'}> = [];\n    const processedLogIds = new Set(); // Track which logs we've already processed\n    \n    todaysLogs.forEach(log => {\n      // Skip if we've already processed this log\n      if (processedLogIds.has(log.id)) return;\n      processedLogIds.add(log.id);\n\n      const medication = medications.find(med => med.id === log.medicationId);\n      if (!medication) return;\n\n      // Skip warnings for first doses - check if this is the first log for this medication\n      const medicationLogs = logs.filter(l => l.medicationId === log.medicationId && l.adherence === 'taken');\n      if (medicationLogs.length <= 1) return; // First dose, no warnings\n\n      const expectedDose = getCurrentDose(medication.id);\n      let actualDose = log.dosageTaken;\n      \n      // For multiple pill medications, calculate equivalent dose from pill logs if available\n      if (medication.useMultiplePills && log.pillLogs && log.pillLogs.length > 0) {\n        actualDose = log.pillLogs.reduce((total, pillLog) => {\n          const pillConfig = medication.pillConfigurations?.find(config => \n            config.id === pillLog.pillConfigurationId\n          );\n          return total + (pillConfig ? pillConfig.strength * pillLog.quantityTaken : 0);\n        }, 0);\n      } else if (medication.useMultiplePills && log.dosageTaken) {\n        // For backward compatibility, check if this is actually a total dose amount\n        const defaultConfig = medication.doseConfigurations?.find(\n          config => config.id === medication.defaultDoseConfigurationId\n        ) || medication.doseConfigurations?.[0];\n        \n        if (defaultConfig && Math.abs(log.dosageTaken - defaultConfig.totalDoseAmount) < 0.1) {\n          actualDose = log.dosageTaken; // This is already the correct total dose\n        }\n      }\n\n      // Only check for deviations if we have meaningful dose values\n      if (expectedDose.dose <= 0 || actualDose <= 0) return;\n      \n      const deviation = ((actualDose - expectedDose.dose) / expectedDose.dose) * 100;\n      const absDeviation = Math.abs(deviation);\n      \n      // Only report significant deviations (more than 15% threshold)\n      if (absDeviation < 15) return;\n\n      // Check for tapering medications\n      if (medication.tapering?.isActive) {\n        if (deviation > 25) {\n          warnings.push({\n            id: log.id,\n            medication: medication.name,\n            message: `You took ${Math.round(deviation)}% more than your tapering schedule. This can disrupt your withdrawal plan.`,\n            severity: 'critical'\n          });\n        } else if (deviation < -25) {\n          warnings.push({\n            id: log.id,\n            medication: medication.name,\n            message: `You took ${Math.round(Math.abs(deviation))}% less than scheduled. Sudden reductions can cause withdrawal symptoms.`,\n            severity: 'critical'\n          });\n        }\n      }\n\n      // Check for high-risk medications with more stringent thresholds\n      if (medication.riskLevel === 'high' && absDeviation > 30) {\n        // Check if this is a pattern (more than one significant deviation in recent days)\n        const recentLogs = logs.filter(recentLog => \n          recentLog.medicationId === medication.id &&\n          recentLog.id !== log.id && // Don't include current log\n          new Date(recentLog.timestamp).getTime() > Date.now() - (3 * 24 * 60 * 60 * 1000) // Last 3 days\n        );\n        \n        if (recentLogs.length > 0) {\n          warnings.push({\n            id: log.id,\n            medication: medication.name,\n            message: `Significant dose variation pattern detected (${Math.round(absDeviation)}% deviation). This high-risk medication requires careful monitoring.`,\n            severity: 'warning'\n          });\n        }\n      }\n    });\n\n    return warnings;\n  };\n\n  const doseDeviationWarnings = getDoseDeviationWarnings();\n\n  // State for withdrawal tracking modal\n  const [selectedWithdrawalMedication, setSelectedWithdrawalMedication] = React.useState<Medication | null>(null);\n\n  // Debug: Check if we have any data at all\n  React.useEffect(() => {\n    console.log(' Dashboard Data Check:', {\n      totalMedications: medications.length,\n      activeMedications: activeMedications.length,\n      allMedications: medications.map(med => ({\n        id: med.id,\n        name: med.name,\n        isActive: med.isActive,\n        dosage: med.dosage,\n        unit: med.unit\n      }))\n    });\n  }, [medications.length]);\n\n\n  const stats = [\n    {\n      name: 'Active Medications',\n      value: activeMedications.length,\n      icon: Pill,\n      color: 'bg-blue-500',\n      href: '/medications',\n    },\n    {\n      name: \"Today's Reminders\",\n      value: todaysReminders.length,\n      icon: Clock,\n      color: 'bg-green-500',\n      href: '/calendar',\n    },\n    {\n      name: 'Taken Today',\n      value: todaysLogs.filter(log => log.adherence === 'taken').length,\n      icon: CheckCircle,\n      color: 'bg-green-500',\n      href: '/analytics',\n    },\n    {\n      name: 'Tapering Plans',\n      value: taperingMedications.length,\n      icon: TrendingUp,\n      color: 'bg-purple-500',\n      href: '/medications',\n      description: 'Active withdrawal schedules'\n    },\n    {\n      name: 'PRN/As-Needed',\n      value: prnMedications.length,\n      icon: Zap,\n      color: 'bg-orange-500',\n      href: '/medications',\n      description: 'Flexible dosing medications'\n    },\n    {\n      name: 'Dose Warnings',\n      value: doseDeviationWarnings.length,\n      icon: AlertTriangle,\n      color: doseDeviationWarnings.some(w => w.severity === 'critical') ? 'bg-red-500' : 'bg-yellow-500',\n      href: '/analytics',\n      description: 'Psychological safety alerts'\n    },\n  ];\n\n  const handleMedicationAction = (medicationId: string, action: 'taken' | 'missed') => {\n    if (action === 'taken') {\n      markMedicationTaken(medicationId);\n    } else {\n      markMedicationMissed(medicationId);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Page Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Dashboard</h1>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Overview of your medications and health tracking\n          </p>\n        </div>\n        <div className=\"mt-4 sm:mt-0\">\n          <Link\n            to=\"/medications\"\n            className=\"btn-primary inline-flex items-center space-x-2\"\n          >\n            <Plus className=\"h-4 w-4\" />\n            <span>Add Medication</span>\n          </Link>\n        </div>\n      </div>\n\n      {/* Stats Grid */}\n      <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3\">\n        {stats.map((stat) => (\n          <Link\n            key={stat.name}\n            to={stat.href}\n            className=\"card hover:shadow-md transition-shadow cursor-pointer\"\n          >\n            <div className=\"card-content p-5\">\n              <div className=\"flex items-center\">\n                <div className=\"flex-shrink-0\">\n                  <div className={`${stat.color} rounded-md p-3`}>\n                    <stat.icon className=\"h-6 w-6 text-white\" />\n                  </div>\n                </div>\n                <div className=\"ml-5 w-0 flex-1\">\n                  <dl>\n                    <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                      {stat.name}\n                    </dt>\n                    <dd className=\"text-lg font-medium text-gray-900\">\n                      {stat.value}\n                    </dd>\n                    {stat.description && (\n                      <dd className=\"text-xs text-gray-400 mt-1\">\n                        {stat.description}\n                      </dd>\n                    )}\n                  </dl>\n                </div>\n              </div>\n            </div>\n          </Link>\n        ))}\n      </div>\n\n      {/* Smart Messages Section */}\n      {priorityMessages.length > 0 && (\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"text-lg font-medium text-gray-900 flex items-center\">\n                <MessageSquare className=\"h-5 w-5 text-blue-500 mr-2\" />\n                Smart Health Insights\n              </h3>\n              <span className=\"badge badge-primary\">{priorityMessages.length}</span>\n            </div>\n          </div>\n          <div className=\"card-content\">\n            <div className=\"space-y-3\">\n              {priorityMessages.slice(0, 3).map((message) => (\n                <div\n                  key={message.id}\n                  className={`p-4 rounded-lg border-l-4 ${\n                    message.priority === 'urgent' ? 'border-red-500 bg-red-50' :\n                    message.priority === 'high' ? 'border-orange-500 bg-orange-50' :\n                    'border-blue-500 bg-blue-50'\n                  }`}\n                >\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-2\">\n                        {message.type === 'risk-alert' && <ShieldAlert className=\"h-4 w-4 text-red-500\" />}\n                        {message.type === 'celebration' && <Star className=\"h-4 w-4 text-yellow-500\" />}\n                        {message.type === 'motivation' && <TrendingUp className=\"h-4 w-4 text-green-500\" />}\n                        <h4 className=\"text-sm font-medium text-gray-900\">{message.title}</h4>\n                      </div>\n                      <p className=\"mt-1 text-sm text-gray-600\">{message.message}</p>\n                    </div>\n                    <button\n                      onClick={() => markMessageAsRead(message.id)}\n                      className=\"ml-4 text-xs text-gray-400 hover:text-gray-600\"\n                    >\n                      Dismiss\n                    </button>\n                  </div>\n                </div>\n              ))}\n              {priorityMessages.length > 3 && (\n                <div className=\"text-center\">\n                  <p className=\"text-sm text-gray-500\">\n                    {priorityMessages.length - 3} more insights available\n                  </p>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Dose Deviation Warnings */}\n      {doseDeviationWarnings.length > 0 && (\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"text-lg font-medium text-gray-900 flex items-center\">\n                <Brain className=\"h-5 w-5 text-red-500 mr-2\" />\n                Psychological Safety Alerts\n              </h3>\n              <span className={`badge ${doseDeviationWarnings.some(w => w.severity === 'critical') ? 'badge-danger' : 'badge-warning'}`}>\n                {doseDeviationWarnings.length}\n              </span>\n            </div>\n          </div>\n          <div className=\"card-content\">\n            <div className=\"space-y-3\">\n              {doseDeviationWarnings.map((warning) => (\n                <div\n                  key={warning.id}\n                  className={`p-4 rounded-lg border-l-4 ${\n                    warning.severity === 'critical' \n                      ? 'border-red-500 bg-red-50' \n                      : 'border-yellow-500 bg-yellow-50'\n                  }`}\n                >\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center space-x-2\">\n                        <AlertTriangle className={`h-4 w-4 ${warning.severity === 'critical' ? 'text-red-500' : 'text-yellow-500'}`} />\n                        <h4 className=\"text-sm font-medium text-gray-900\">{warning.medication}</h4>\n                      </div>\n                      <p className=\"mt-1 text-sm text-gray-600\">{warning.message}</p>\n                      <div className=\"mt-2 text-xs text-gray-500\">\n                        <strong>Remember:</strong> Consistent dosing is important for your mental and physical well-being, especially during tapering.\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Tapering Progress Section */}\n      {taperingMedications.length > 0 && (\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"text-lg font-medium text-gray-900 flex items-center\">\n                <TrendingUp className=\"h-5 w-5 text-purple-600 mr-2\" />\n                Tapering Progress\n              </h3>\n              <span className=\"badge badge-primary\">{taperingMedications.length}</span>\n            </div>\n          </div>\n          <div className=\"card-content\">\n            <div className=\"space-y-4\">\n              {taperingMedications.map((medication) => {\n                const currentDose = getCurrentDose(medication.id);\n                const originalDose = parseFloat(medication.dosage);\n                const progress = ((originalDose - currentDose.dose) / originalDose) * 100;\n                const daysElapsed = medication.tapering?.startDate \n                  ? Math.floor((Date.now() - new Date(medication.tapering.startDate).getTime()) / (1000 * 60 * 60 * 24))\n                  : 0;\n                \n                return (\n                  <div key={medication.id} className=\"bg-purple-50 border border-purple-200 rounded-lg p-4\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div\n                          className=\"w-3 h-3 rounded-full\"\n                          style={{ backgroundColor: medication.color }}\n                        />\n                        <div>\n                          <h4 className=\"font-medium text-gray-900\">{medication.name}</h4>\n                          <p className=\"text-sm text-gray-600\">\n                            {currentDose.dose} {medication.unit} (down from {originalDose} {medication.unit})\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className=\"text-sm font-medium text-purple-600\">{Math.round(progress)}% reduced</div>\n                        <div className=\"text-xs text-gray-500\">Day {daysElapsed}</div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"w-full bg-gray-200 rounded-full h-2 mb-2\">\n                      <div \n                        className=\"bg-purple-600 h-2 rounded-full transition-all duration-300\"\n                        style={{ width: `${Math.min(progress, 100)}%` }}\n                      />\n                    </div>\n                    \n                    <div className=\"flex items-center justify-between text-xs text-gray-600\">\n                      <span>Original: {originalDose} {medication.unit}</span>\n                      <span>Target: 0 {medication.unit}</span>\n                    </div>\n                    \n                    {medication.tapering?.isPaused && (\n                      <div className=\"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded text-xs text-yellow-800\">\n                         Tapering paused - Resume when ready or contact your healthcare provider\n                      </div>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Withdrawal Tracking Section */}\n      {withdrawalTrackingMedications.length > 0 && (\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"text-lg font-medium text-gray-900 flex items-center\">\n                <Activity className=\"h-5 w-5 text-orange-600 mr-2\" />\n                Active Withdrawal Monitoring\n              </h3>\n              <span className=\"badge badge-warning\">{withdrawalTrackingMedications.length}</span>\n            </div>\n          </div>\n          <div className=\"card-content\">\n            <div className=\"space-y-4\">\n              {withdrawalTrackingMedications.map((medication) => {\n                const activeWithdrawal = medication.dependencePrevention?.withdrawalHistory.find(event => !event.endDate);\n                const daysSinceStart = activeWithdrawal?.startDate \n                  ? Math.floor((Date.now() - new Date(activeWithdrawal.startDate).getTime()) / (1000 * 60 * 60 * 24))\n                  : 0;\n                \n                return (\n                  <div key={medication.id} className=\"bg-orange-50 border border-orange-200 rounded-lg p-4\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <div className=\"flex items-center space-x-3\">\n                        <div\n                          className=\"w-3 h-3 rounded-full\"\n                          style={{ backgroundColor: medication.color }}\n                        />\n                        <div>\n                          <h4 className=\"font-medium text-gray-900\">{medication.name}</h4>\n                          <p className=\"text-sm text-gray-600\">\n                            Withdrawal monitoring  Day {daysSinceStart}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <div className={`text-sm font-medium ${\n                          activeWithdrawal?.severity === 'severe' ? 'text-red-600' :\n                          activeWithdrawal?.severity === 'moderate' ? 'text-orange-600' :\n                          'text-green-600'\n                        }`}>\n                          {activeWithdrawal?.severity || 'mild'} symptoms\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"text-sm text-gray-600 mb-2\">\n                      Symptoms tracked: {activeWithdrawal?.symptoms.length || 0}\n                    </div>\n                    \n                    <button \n                      onClick={() => setSelectedWithdrawalMedication(medication)}\n                      className=\"w-full mt-2 text-sm bg-orange-100 hover:bg-orange-200 text-orange-800 px-3 py-2 rounded transition-colors\"\n                    >\n                      Log Today's Symptoms\n                    </button>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Today's Medications */}\n        <div className=\"lg:col-span-1\">\n          <TodaysMedications />\n        </div>\n\n        {/* Active Medications */}\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"text-lg font-medium text-gray-900\">Active Medications</h3>\n              <Link\n                to=\"/medications\"\n                className=\"text-sm text-primary-600 hover:text-primary-700\"\n              >\n                Manage all\n              </Link>\n            </div>\n          </div>\n          <div className=\"card-content\">\n            {activeMedications.length === 0 ? (\n              <div className=\"text-center py-6\">\n                <Pill className=\"mx-auto h-12 w-12 text-gray-400\" />\n                <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No medications yet</h3>\n                <p className=\"mt-1 text-sm text-gray-500\">\n                  Add your first medication to get started.\n                </p>\n                <div className=\"mt-4\">\n                  <Link to=\"/medications\" className=\"btn-primary\">\n                    Add Medication\n                  </Link>\n                </div>\n              </div>\n            ) : (\n              <div className=\"space-y-3\">\n                {activeMedications.slice(0, 5).map((medication) => {\n                  const adherence = getMedicationAdherence(medication.id, 7);\n                  return (\n                    <div\n                      key={medication.id}\n                      className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\"\n                    >\n                      <div className=\"flex items-center space-x-3\">\n                        <div\n                          className=\"w-3 h-3 rounded-full\"\n                          style={{ backgroundColor: medication.color }}\n                        />\n                        <div>\n                          <p className=\"text-sm font-medium text-gray-900\">\n                            {medication.name}\n                          </p>\n                          <p className=\"text-xs text-gray-500\">\n                            {medication.useMultiplePills ? formatPillDisplayShort(medication) : `${medication.dosage} ${medication.unit}`}  {medication.frequency.replace('-', ' ')}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className={`text-sm font-medium ${getAdherenceColor(adherence)}`}>\n                          {adherence}%\n                        </p>\n                        <p className=\"text-xs text-gray-500\">adherence</p>\n                      </div>\n                    </div>\n                  );\n                })}\n                {activeMedications.length > 5 && (\n                  <div className=\"text-center\">\n                    <Link\n                      to=\"/medications\"\n                      className=\"text-sm text-primary-600 hover:text-primary-700\"\n                    >\n                      View {activeMedications.length - 5} more medications\n                    </Link>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Alerts and Notifications */}\n      {(upcomingRefills.length > 0 || recentMissedDoses.length > 0 || smartInsights.length > 0) && (\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <h3 className=\"text-lg font-medium text-gray-900 flex items-center\">\n              <AlertTriangle className=\"h-5 w-5 text-yellow-500 mr-2\" />\n              Alerts & Notifications\n            </h3>\n          </div>\n          <div className=\"card-content\">\n            <div className=\"space-y-4\">\n              {/* Refill Alerts */}\n              {upcomingRefills.length > 0 && (\n                <div className=\"p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\n                  <div className=\"flex items-start\">\n                    <AlertTriangle className=\"h-5 w-5 text-yellow-600 mt-0.5\" />\n                    <div className=\"ml-3\">\n                      <h4 className=\"text-sm font-medium text-yellow-800\">\n                        Refill Reminders\n                      </h4>\n                      <div className=\"mt-2 text-sm text-yellow-700\">\n                        <ul className=\"list-disc list-inside space-y-1\">\n                          {upcomingRefills.map((med) => (\n                            <li key={med.id}>\n                              {med.name} - {med.pillsRemaining} pills remaining\n                            </li>\n                          ))}\n                        </ul>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Missed Doses */}\n              {recentMissedDoses.length > 0 && (\n                <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg\">\n                  <div className=\"flex items-start\">\n                    <XCircle className=\"h-5 w-5 text-red-600 mt-0.5\" />\n                    <div className=\"ml-3\">\n                      <h4 className=\"text-sm font-medium text-red-800\">\n                        Recent Missed Doses\n                      </h4>\n                      <p className=\"mt-1 text-sm text-red-700\">\n                        You've missed {recentMissedDoses.length} doses this week. \n                        <Link to=\"/analytics\" className=\"font-medium underline ml-1\">\n                          View details\n                        </Link>\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Smart Insights */}\n              {smartInsights.map((insight, index) => (\n                <div key={index} className={`p-4 rounded-lg border ${\n                  insight.priority === 'high' ? 'border-red-200 bg-red-50' :\n                  insight.priority === 'medium' ? 'border-yellow-200 bg-yellow-50' :\n                  'border-blue-200 bg-blue-50'\n                }`}>\n                  <div className=\"flex items-start\">\n                    {insight.type === 'risk-alert' && <ShieldAlert className=\"h-5 w-5 text-red-600 mt-0.5\" />}\n                    {insight.type === 'adherence-concern' && <AlertTriangle className=\"h-5 w-5 text-yellow-600 mt-0.5\" />}\n                    {insight.type === 'celebration' && <Star className=\"h-5 w-5 text-blue-600 mt-0.5\" />}\n                    <div className=\"ml-3\">\n                      <h4 className={`text-sm font-medium ${\n                        insight.priority === 'high' ? 'text-red-800' :\n                        insight.priority === 'medium' ? 'text-yellow-800' :\n                        'text-blue-800'\n                      }`}>\n                        {insight.title}\n                      </h4>\n                      <p className={`mt-1 text-sm ${\n                        insight.priority === 'high' ? 'text-red-700' :\n                        insight.priority === 'medium' ? 'text-yellow-700' :\n                        'text-blue-700'\n                      }`}>\n                        {insight.description}\n                      </p>\n                      {insight.medications && (\n                        <div className=\"mt-2 text-xs text-gray-600\">\n                          <strong>Medications:</strong> {insight.medications.join(', ')}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Withdrawal Symptom Tracker Modal */}\n      {selectedWithdrawalMedication && (\n        <WithdrawalSymptomTracker\n          medication={selectedWithdrawalMedication}\n          isOpen={!!selectedWithdrawalMedication}\n          onClose={() => setSelectedWithdrawalMedication(null)}\n        />\n      )}\n    </div>\n  );\n}\n","import React from 'react';\n\nvar isCheckBoxInput = (element) => element.type === 'checkbox';\n\nvar isDateObject = (value) => value instanceof Date;\n\nvar isNullOrUndefined = (value) => value == null;\n\nconst isObjectType = (value) => typeof value === 'object';\nvar isObject = (value) => !isNullOrUndefined(value) &&\n    !Array.isArray(value) &&\n    isObjectType(value) &&\n    !isDateObject(value);\n\nvar getEventValue = (event) => isObject(event) && event.target\n    ? isCheckBoxInput(event.target)\n        ? event.target.checked\n        : event.target.value\n    : event;\n\nvar getNodeParentName = (name) => name.substring(0, name.search(/\\.\\d+(\\.|$)/)) || name;\n\nvar isNameInFieldArray = (names, name) => names.has(getNodeParentName(name));\n\nvar isPlainObject = (tempObject) => {\n    const prototypeCopy = tempObject.constructor && tempObject.constructor.prototype;\n    return (isObject(prototypeCopy) && prototypeCopy.hasOwnProperty('isPrototypeOf'));\n};\n\nvar isWeb = typeof window !== 'undefined' &&\n    typeof window.HTMLElement !== 'undefined' &&\n    typeof document !== 'undefined';\n\nfunction cloneObject(data) {\n    let copy;\n    const isArray = Array.isArray(data);\n    const isFileListInstance = typeof FileList !== 'undefined' ? data instanceof FileList : false;\n    if (data instanceof Date) {\n        copy = new Date(data);\n    }\n    else if (!(isWeb && (data instanceof Blob || isFileListInstance)) &&\n        (isArray || isObject(data))) {\n        copy = isArray ? [] : Object.create(Object.getPrototypeOf(data));\n        if (!isArray && !isPlainObject(data)) {\n            copy = data;\n        }\n        else {\n            for (const key in data) {\n                if (data.hasOwnProperty(key)) {\n                    copy[key] = cloneObject(data[key]);\n                }\n            }\n        }\n    }\n    else {\n        return data;\n    }\n    return copy;\n}\n\nvar isKey = (value) => /^\\w*$/.test(value);\n\nvar isUndefined = (val) => val === undefined;\n\nvar compact = (value) => Array.isArray(value) ? value.filter(Boolean) : [];\n\nvar stringToPath = (input) => compact(input.replace(/[\"|']|\\]/g, '').split(/\\.|\\[/));\n\nvar get = (object, path, defaultValue) => {\n    if (!path || !isObject(object)) {\n        return defaultValue;\n    }\n    const result = (isKey(path) ? [path] : stringToPath(path)).reduce((result, key) => isNullOrUndefined(result) ? result : result[key], object);\n    return isUndefined(result) || result === object\n        ? isUndefined(object[path])\n            ? defaultValue\n            : object[path]\n        : result;\n};\n\nvar isBoolean = (value) => typeof value === 'boolean';\n\nvar set = (object, path, value) => {\n    let index = -1;\n    const tempPath = isKey(path) ? [path] : stringToPath(path);\n    const length = tempPath.length;\n    const lastIndex = length - 1;\n    while (++index < length) {\n        const key = tempPath[index];\n        let newValue = value;\n        if (index !== lastIndex) {\n            const objValue = object[key];\n            newValue =\n                isObject(objValue) || Array.isArray(objValue)\n                    ? objValue\n                    : !isNaN(+tempPath[index + 1])\n                        ? []\n                        : {};\n        }\n        if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n            return;\n        }\n        object[key] = newValue;\n        object = object[key];\n    }\n};\n\nconst EVENTS = {\n    BLUR: 'blur',\n    FOCUS_OUT: 'focusout',\n    CHANGE: 'change',\n};\nconst VALIDATION_MODE = {\n    onBlur: 'onBlur',\n    onChange: 'onChange',\n    onSubmit: 'onSubmit',\n    onTouched: 'onTouched',\n    all: 'all',\n};\nconst INPUT_VALIDATION_RULES = {\n    max: 'max',\n    min: 'min',\n    maxLength: 'maxLength',\n    minLength: 'minLength',\n    pattern: 'pattern',\n    required: 'required',\n    validate: 'validate',\n};\n\nconst HookFormContext = React.createContext(null);\nHookFormContext.displayName = 'HookFormContext';\n/**\n * This custom hook allows you to access the form context. useFormContext is intended to be used in deeply nested structures, where it would become inconvenient to pass the context as a prop. To be used with {@link FormProvider}.\n *\n * @remarks\n * [API](https://react-hook-form.com/docs/useformcontext)  [Demo](https://codesandbox.io/s/react-hook-form-v7-form-context-ytudi)\n *\n * @returns return all useForm methods\n *\n * @example\n * ```tsx\n * function App() {\n *   const methods = useForm();\n *   const onSubmit = data => console.log(data);\n *\n *   return (\n *     <FormProvider {...methods} >\n *       <form onSubmit={methods.handleSubmit(onSubmit)}>\n *         <NestedInput />\n *         <input type=\"submit\" />\n *       </form>\n *     </FormProvider>\n *   );\n * }\n *\n *  function NestedInput() {\n *   const { register } = useFormContext(); // retrieve all hook methods\n *   return <input {...register(\"test\")} />;\n * }\n * ```\n */\nconst useFormContext = () => React.useContext(HookFormContext);\n/**\n * A provider component that propagates the `useForm` methods to all children components via [React Context](https://reactjs.org/docs/context.html) API. To be used with {@link useFormContext}.\n *\n * @remarks\n * [API](https://react-hook-form.com/docs/useformcontext)  [Demo](https://codesandbox.io/s/react-hook-form-v7-form-context-ytudi)\n *\n * @param props - all useForm methods\n *\n * @example\n * ```tsx\n * function App() {\n *   const methods = useForm();\n *   const onSubmit = data => console.log(data);\n *\n *   return (\n *     <FormProvider {...methods} >\n *       <form onSubmit={methods.handleSubmit(onSubmit)}>\n *         <NestedInput />\n *         <input type=\"submit\" />\n *       </form>\n *     </FormProvider>\n *   );\n * }\n *\n *  function NestedInput() {\n *   const { register } = useFormContext(); // retrieve all hook methods\n *   return <input {...register(\"test\")} />;\n * }\n * ```\n */\nconst FormProvider = (props) => {\n    const { children, ...data } = props;\n    return (React.createElement(HookFormContext.Provider, { value: data }, children));\n};\n\nvar getProxyFormState = (formState, control, localProxyFormState, isRoot = true) => {\n    const result = {\n        defaultValues: control._defaultValues,\n    };\n    for (const key in formState) {\n        Object.defineProperty(result, key, {\n            get: () => {\n                const _key = key;\n                if (control._proxyFormState[_key] !== VALIDATION_MODE.all) {\n                    control._proxyFormState[_key] = !isRoot || VALIDATION_MODE.all;\n                }\n                localProxyFormState && (localProxyFormState[_key] = true);\n                return formState[_key];\n            },\n        });\n    }\n    return result;\n};\n\nconst useIsomorphicLayoutEffect = typeof window !== 'undefined' ? React.useLayoutEffect : React.useEffect;\n\n/**\n * This custom hook allows you to subscribe to each form state, and isolate the re-render at the custom hook level. It has its scope in terms of form state subscription, so it would not affect other useFormState and useForm. Using this hook can reduce the re-render impact on large and complex form application.\n *\n * @remarks\n * [API](https://react-hook-form.com/docs/useformstate)  [Demo](https://codesandbox.io/s/useformstate-75xly)\n *\n * @param props - include options on specify fields to subscribe. {@link UseFormStateReturn}\n *\n * @example\n * ```tsx\n * function App() {\n *   const { register, handleSubmit, control } = useForm({\n *     defaultValues: {\n *     firstName: \"firstName\"\n *   }});\n *   const { dirtyFields } = useFormState({\n *     control\n *   });\n *   const onSubmit = (data) => console.log(data);\n *\n *   return (\n *     <form onSubmit={handleSubmit(onSubmit)}>\n *       <input {...register(\"firstName\")} placeholder=\"First Name\" />\n *       {dirtyFields.firstName && <p>Field is dirty.</p>}\n *       <input type=\"submit\" />\n *     </form>\n *   );\n * }\n * ```\n */\nfunction useFormState(props) {\n    const methods = useFormContext();\n    const { control = methods.control, disabled, name, exact } = props || {};\n    const [formState, updateFormState] = React.useState(control._formState);\n    const _localProxyFormState = React.useRef({\n        isDirty: false,\n        isLoading: false,\n        dirtyFields: false,\n        touchedFields: false,\n        validatingFields: false,\n        isValidating: false,\n        isValid: false,\n        errors: false,\n    });\n    useIsomorphicLayoutEffect(() => control._subscribe({\n        name,\n        formState: _localProxyFormState.current,\n        exact,\n        callback: (formState) => {\n            !disabled &&\n                updateFormState({\n                    ...control._formState,\n                    ...formState,\n                });\n        },\n    }), [name, disabled, exact]);\n    React.useEffect(() => {\n        _localProxyFormState.current.isValid && control._setValid(true);\n    }, [control]);\n    return React.useMemo(() => getProxyFormState(formState, control, _localProxyFormState.current, false), [formState, control]);\n}\n\nvar isString = (value) => typeof value === 'string';\n\nvar generateWatchOutput = (names, _names, formValues, isGlobal, defaultValue) => {\n    if (isString(names)) {\n        isGlobal && _names.watch.add(names);\n        return get(formValues, names, defaultValue);\n    }\n    if (Array.isArray(names)) {\n        return names.map((fieldName) => (isGlobal && _names.watch.add(fieldName),\n            get(formValues, fieldName)));\n    }\n    isGlobal && (_names.watchAll = true);\n    return formValues;\n};\n\nvar isPrimitive = (value) => isNullOrUndefined(value) || !isObjectType(value);\n\nfunction deepEqual(object1, object2, _internal_visited = new WeakSet()) {\n    if (isPrimitive(object1) || isPrimitive(object2)) {\n        return object1 === object2;\n    }\n    if (isDateObject(object1) && isDateObject(object2)) {\n        return object1.getTime() === object2.getTime();\n    }\n    const keys1 = Object.keys(object1);\n    const keys2 = Object.keys(object2);\n    if (keys1.length !== keys2.length) {\n        return false;\n    }\n    if (_internal_visited.has(object1) || _internal_visited.has(object2)) {\n        return true;\n    }\n    _internal_visited.add(object1);\n    _internal_visited.add(object2);\n    for (const key of keys1) {\n        const val1 = object1[key];\n        if (!keys2.includes(key)) {\n            return false;\n        }\n        if (key !== 'ref') {\n            const val2 = object2[key];\n            if ((isDateObject(val1) && isDateObject(val2)) ||\n                (isObject(val1) && isObject(val2)) ||\n                (Array.isArray(val1) && Array.isArray(val2))\n                ? !deepEqual(val1, val2, _internal_visited)\n                : val1 !== val2) {\n                return false;\n            }\n        }\n    }\n    return true;\n}\n\n/**\n * Custom hook to subscribe to field change and isolate re-rendering at the component level.\n *\n * @remarks\n *\n * [API](https://react-hook-form.com/docs/usewatch)  [Demo](https://codesandbox.io/s/react-hook-form-v7-ts-usewatch-h9i5e)\n *\n * @example\n * ```tsx\n * const { control } = useForm();\n * const values = useWatch({\n *   name: \"fieldName\"\n *   control,\n * })\n * ```\n */\nfunction useWatch(props) {\n    const methods = useFormContext();\n    const { control = methods.control, name, defaultValue, disabled, exact, compute, } = props || {};\n    const _defaultValue = React.useRef(defaultValue);\n    const _compute = React.useRef(compute);\n    const _computeFormValues = React.useRef(undefined);\n    _compute.current = compute;\n    const defaultValueMemo = React.useMemo(() => control._getWatch(name, _defaultValue.current), [control, name]);\n    const [value, updateValue] = React.useState(_compute.current ? _compute.current(defaultValueMemo) : defaultValueMemo);\n    useIsomorphicLayoutEffect(() => control._subscribe({\n        name,\n        formState: {\n            values: true,\n        },\n        exact,\n        callback: (formState) => {\n            if (!disabled) {\n                const formValues = generateWatchOutput(name, control._names, formState.values || control._formValues, false, _defaultValue.current);\n                if (_compute.current) {\n                    const computedFormValues = _compute.current(formValues);\n                    if (!deepEqual(computedFormValues, _computeFormValues.current)) {\n                        updateValue(computedFormValues);\n                        _computeFormValues.current = computedFormValues;\n                    }\n                }\n                else {\n                    updateValue(formValues);\n                }\n            }\n        },\n    }), [control, disabled, name, exact]);\n    React.useEffect(() => control._removeUnmounted());\n    return value;\n}\n\n/**\n * Custom hook to work with controlled component, this function provide you with both form and field level state. Re-render is isolated at the hook level.\n *\n * @remarks\n * [API](https://react-hook-form.com/docs/usecontroller)  [Demo](https://codesandbox.io/s/usecontroller-0o8px)\n *\n * @param props - the path name to the form field value, and validation rules.\n *\n * @returns field properties, field and form state. {@link UseControllerReturn}\n *\n * @example\n * ```tsx\n * function Input(props) {\n *   const { field, fieldState, formState } = useController(props);\n *   return (\n *     <div>\n *       <input {...field} placeholder={props.name} />\n *       <p>{fieldState.isTouched && \"Touched\"}</p>\n *       <p>{formState.isSubmitted ? \"submitted\" : \"\"}</p>\n *     </div>\n *   );\n * }\n * ```\n */\nfunction useController(props) {\n    const methods = useFormContext();\n    const { name, disabled, control = methods.control, shouldUnregister, defaultValue, } = props;\n    const isArrayField = isNameInFieldArray(control._names.array, name);\n    const defaultValueMemo = React.useMemo(() => get(control._formValues, name, get(control._defaultValues, name, defaultValue)), [control, name, defaultValue]);\n    const value = useWatch({\n        control,\n        name,\n        defaultValue: defaultValueMemo,\n        exact: true,\n    });\n    const formState = useFormState({\n        control,\n        name,\n        exact: true,\n    });\n    const _props = React.useRef(props);\n    const _registerProps = React.useRef(control.register(name, {\n        ...props.rules,\n        value,\n        ...(isBoolean(props.disabled) ? { disabled: props.disabled } : {}),\n    }));\n    _props.current = props;\n    const fieldState = React.useMemo(() => Object.defineProperties({}, {\n        invalid: {\n            enumerable: true,\n            get: () => !!get(formState.errors, name),\n        },\n        isDirty: {\n            enumerable: true,\n            get: () => !!get(formState.dirtyFields, name),\n        },\n        isTouched: {\n            enumerable: true,\n            get: () => !!get(formState.touchedFields, name),\n        },\n        isValidating: {\n            enumerable: true,\n            get: () => !!get(formState.validatingFields, name),\n        },\n        error: {\n            enumerable: true,\n            get: () => get(formState.errors, name),\n        },\n    }), [formState, name]);\n    const onChange = React.useCallback((event) => _registerProps.current.onChange({\n        target: {\n            value: getEventValue(event),\n            name: name,\n        },\n        type: EVENTS.CHANGE,\n    }), [name]);\n    const onBlur = React.useCallback(() => _registerProps.current.onBlur({\n        target: {\n            value: get(control._formValues, name),\n            name: name,\n        },\n        type: EVENTS.BLUR,\n    }), [name, control._formValues]);\n    const ref = React.useCallback((elm) => {\n        const field = get(control._fields, name);\n        if (field && elm) {\n            field._f.ref = {\n                focus: () => elm.focus && elm.focus(),\n                select: () => elm.select && elm.select(),\n                setCustomValidity: (message) => elm.setCustomValidity(message),\n                reportValidity: () => elm.reportValidity(),\n            };\n        }\n    }, [control._fields, name]);\n    const field = React.useMemo(() => ({\n        name,\n        value,\n        ...(isBoolean(disabled) || formState.disabled\n            ? { disabled: formState.disabled || disabled }\n            : {}),\n        onChange,\n        onBlur,\n        ref,\n    }), [name, disabled, formState.disabled, onChange, onBlur, ref, value]);\n    React.useEffect(() => {\n        const _shouldUnregisterField = control._options.shouldUnregister || shouldUnregister;\n        control.register(name, {\n            ..._props.current.rules,\n            ...(isBoolean(_props.current.disabled)\n                ? { disabled: _props.current.disabled }\n                : {}),\n        });\n        const updateMounted = (name, value) => {\n            const field = get(control._fields, name);\n            if (field && field._f) {\n                field._f.mount = value;\n            }\n        };\n        updateMounted(name, true);\n        if (_shouldUnregisterField) {\n            const value = cloneObject(get(control._options.defaultValues, name));\n            set(control._defaultValues, name, value);\n            if (isUndefined(get(control._formValues, name))) {\n                set(control._formValues, name, value);\n            }\n        }\n        !isArrayField && control.register(name);\n        return () => {\n            (isArrayField\n                ? _shouldUnregisterField && !control._state.action\n                : _shouldUnregisterField)\n                ? control.unregister(name)\n                : updateMounted(name, false);\n        };\n    }, [name, control, isArrayField, shouldUnregister]);\n    React.useEffect(() => {\n        control._setDisabledField({\n            disabled,\n            name,\n        });\n    }, [disabled, name, control]);\n    return React.useMemo(() => ({\n        field,\n        formState,\n        fieldState,\n    }), [field, formState, fieldState]);\n}\n\n/**\n * Component based on `useController` hook to work with controlled component.\n *\n * @remarks\n * [API](https://react-hook-form.com/docs/usecontroller/controller)  [Demo](https://codesandbox.io/s/react-hook-form-v6-controller-ts-jwyzw)  [Video](https://www.youtube.com/watch?v=N2UNk_UCVyA)\n *\n * @param props - the path name to the form field value, and validation rules.\n *\n * @returns provide field handler functions, field and form state.\n *\n * @example\n * ```tsx\n * function App() {\n *   const { control } = useForm<FormValues>({\n *     defaultValues: {\n *       test: \"\"\n *     }\n *   });\n *\n *   return (\n *     <form>\n *       <Controller\n *         control={control}\n *         name=\"test\"\n *         render={({ field: { onChange, onBlur, value, ref }, formState, fieldState }) => (\n *           <>\n *             <input\n *               onChange={onChange} // send value to hook form\n *               onBlur={onBlur} // notify when input is touched\n *               value={value} // return updated value\n *               ref={ref} // set ref for focus management\n *             />\n *             <p>{formState.isSubmitted ? \"submitted\" : \"\"}</p>\n *             <p>{fieldState.isTouched ? \"touched\" : \"\"}</p>\n *           </>\n *         )}\n *       />\n *     </form>\n *   );\n * }\n * ```\n */\nconst Controller = (props) => props.render(useController(props));\n\nconst flatten = (obj) => {\n    const output = {};\n    for (const key of Object.keys(obj)) {\n        if (isObjectType(obj[key]) && obj[key] !== null) {\n            const nested = flatten(obj[key]);\n            for (const nestedKey of Object.keys(nested)) {\n                output[`${key}.${nestedKey}`] = nested[nestedKey];\n            }\n        }\n        else {\n            output[key] = obj[key];\n        }\n    }\n    return output;\n};\n\nconst POST_REQUEST = 'post';\n/**\n * Form component to manage submission.\n *\n * @param props - to setup submission detail. {@link FormProps}\n *\n * @returns form component or headless render prop.\n *\n * @example\n * ```tsx\n * function App() {\n *   const { control, formState: { errors } } = useForm();\n *\n *   return (\n *     <Form action=\"/api\" control={control}>\n *       <input {...register(\"name\")} />\n *       <p>{errors?.root?.server && 'Server error'}</p>\n *       <button>Submit</button>\n *     </Form>\n *   );\n * }\n * ```\n */\nfunction Form(props) {\n    const methods = useFormContext();\n    const [mounted, setMounted] = React.useState(false);\n    const { control = methods.control, onSubmit, children, action, method = POST_REQUEST, headers, encType, onError, render, onSuccess, validateStatus, ...rest } = props;\n    const submit = async (event) => {\n        let hasError = false;\n        let type = '';\n        await control.handleSubmit(async (data) => {\n            const formData = new FormData();\n            let formDataJson = '';\n            try {\n                formDataJson = JSON.stringify(data);\n            }\n            catch (_a) { }\n            const flattenFormValues = flatten(control._formValues);\n            for (const key in flattenFormValues) {\n                formData.append(key, flattenFormValues[key]);\n            }\n            if (onSubmit) {\n                await onSubmit({\n                    data,\n                    event,\n                    method,\n                    formData,\n                    formDataJson,\n                });\n            }\n            if (action) {\n                try {\n                    const shouldStringifySubmissionData = [\n                        headers && headers['Content-Type'],\n                        encType,\n                    ].some((value) => value && value.includes('json'));\n                    const response = await fetch(String(action), {\n                        method,\n                        headers: {\n                            ...headers,\n                            ...(encType && encType !== 'multipart/form-data'\n                                ? { 'Content-Type': encType }\n                                : {}),\n                        },\n                        body: shouldStringifySubmissionData ? formDataJson : formData,\n                    });\n                    if (response &&\n                        (validateStatus\n                            ? !validateStatus(response.status)\n                            : response.status < 200 || response.status >= 300)) {\n                        hasError = true;\n                        onError && onError({ response });\n                        type = String(response.status);\n                    }\n                    else {\n                        onSuccess && onSuccess({ response });\n                    }\n                }\n                catch (error) {\n                    hasError = true;\n                    onError && onError({ error });\n                }\n            }\n        })(event);\n        if (hasError && props.control) {\n            props.control._subjects.state.next({\n                isSubmitSuccessful: false,\n            });\n            props.control.setError('root.server', {\n                type,\n            });\n        }\n    };\n    React.useEffect(() => {\n        setMounted(true);\n    }, []);\n    return render ? (React.createElement(React.Fragment, null, render({\n        submit,\n    }))) : (React.createElement(\"form\", { noValidate: mounted, action: action, method: method, encType: encType, onSubmit: submit, ...rest }, children));\n}\n\nvar appendErrors = (name, validateAllFieldCriteria, errors, type, message) => validateAllFieldCriteria\n    ? {\n        ...errors[name],\n        types: {\n            ...(errors[name] && errors[name].types ? errors[name].types : {}),\n            [type]: message || true,\n        },\n    }\n    : {};\n\nvar convertToArrayPayload = (value) => (Array.isArray(value) ? value : [value]);\n\nvar createSubject = () => {\n    let _observers = [];\n    const next = (value) => {\n        for (const observer of _observers) {\n            observer.next && observer.next(value);\n        }\n    };\n    const subscribe = (observer) => {\n        _observers.push(observer);\n        return {\n            unsubscribe: () => {\n                _observers = _observers.filter((o) => o !== observer);\n            },\n        };\n    };\n    const unsubscribe = () => {\n        _observers = [];\n    };\n    return {\n        get observers() {\n            return _observers;\n        },\n        next,\n        subscribe,\n        unsubscribe,\n    };\n};\n\nvar isEmptyObject = (value) => isObject(value) && !Object.keys(value).length;\n\nvar isFileInput = (element) => element.type === 'file';\n\nvar isFunction = (value) => typeof value === 'function';\n\nvar isHTMLElement = (value) => {\n    if (!isWeb) {\n        return false;\n    }\n    const owner = value ? value.ownerDocument : 0;\n    return (value instanceof\n        (owner && owner.defaultView ? owner.defaultView.HTMLElement : HTMLElement));\n};\n\nvar isMultipleSelect = (element) => element.type === `select-multiple`;\n\nvar isRadioInput = (element) => element.type === 'radio';\n\nvar isRadioOrCheckbox = (ref) => isRadioInput(ref) || isCheckBoxInput(ref);\n\nvar live = (ref) => isHTMLElement(ref) && ref.isConnected;\n\nfunction baseGet(object, updatePath) {\n    const length = updatePath.slice(0, -1).length;\n    let index = 0;\n    while (index < length) {\n        object = isUndefined(object) ? index++ : object[updatePath[index++]];\n    }\n    return object;\n}\nfunction isEmptyArray(obj) {\n    for (const key in obj) {\n        if (obj.hasOwnProperty(key) && !isUndefined(obj[key])) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction unset(object, path) {\n    const paths = Array.isArray(path)\n        ? path\n        : isKey(path)\n            ? [path]\n            : stringToPath(path);\n    const childObject = paths.length === 1 ? object : baseGet(object, paths);\n    const index = paths.length - 1;\n    const key = paths[index];\n    if (childObject) {\n        delete childObject[key];\n    }\n    if (index !== 0 &&\n        ((isObject(childObject) && isEmptyObject(childObject)) ||\n            (Array.isArray(childObject) && isEmptyArray(childObject)))) {\n        unset(object, paths.slice(0, -1));\n    }\n    return object;\n}\n\nvar objectHasFunction = (data) => {\n    for (const key in data) {\n        if (isFunction(data[key])) {\n            return true;\n        }\n    }\n    return false;\n};\n\nfunction markFieldsDirty(data, fields = {}) {\n    const isParentNodeArray = Array.isArray(data);\n    if (isObject(data) || isParentNodeArray) {\n        for (const key in data) {\n            if (Array.isArray(data[key]) ||\n                (isObject(data[key]) && !objectHasFunction(data[key]))) {\n                fields[key] = Array.isArray(data[key]) ? [] : {};\n                markFieldsDirty(data[key], fields[key]);\n            }\n            else if (!isNullOrUndefined(data[key])) {\n                fields[key] = true;\n            }\n        }\n    }\n    return fields;\n}\nfunction getDirtyFieldsFromDefaultValues(data, formValues, dirtyFieldsFromValues) {\n    const isParentNodeArray = Array.isArray(data);\n    if (isObject(data) || isParentNodeArray) {\n        for (const key in data) {\n            if (Array.isArray(data[key]) ||\n                (isObject(data[key]) && !objectHasFunction(data[key]))) {\n                if (isUndefined(formValues) ||\n                    isPrimitive(dirtyFieldsFromValues[key])) {\n                    dirtyFieldsFromValues[key] = Array.isArray(data[key])\n                        ? markFieldsDirty(data[key], [])\n                        : { ...markFieldsDirty(data[key]) };\n                }\n                else {\n                    getDirtyFieldsFromDefaultValues(data[key], isNullOrUndefined(formValues) ? {} : formValues[key], dirtyFieldsFromValues[key]);\n                }\n            }\n            else {\n                dirtyFieldsFromValues[key] = !deepEqual(data[key], formValues[key]);\n            }\n        }\n    }\n    return dirtyFieldsFromValues;\n}\nvar getDirtyFields = (defaultValues, formValues) => getDirtyFieldsFromDefaultValues(defaultValues, formValues, markFieldsDirty(formValues));\n\nconst defaultResult = {\n    value: false,\n    isValid: false,\n};\nconst validResult = { value: true, isValid: true };\nvar getCheckboxValue = (options) => {\n    if (Array.isArray(options)) {\n        if (options.length > 1) {\n            const values = options\n                .filter((option) => option && option.checked && !option.disabled)\n                .map((option) => option.value);\n            return { value: values, isValid: !!values.length };\n        }\n        return options[0].checked && !options[0].disabled\n            ? // @ts-expect-error expected to work in the browser\n                options[0].attributes && !isUndefined(options[0].attributes.value)\n                    ? isUndefined(options[0].value) || options[0].value === ''\n                        ? validResult\n                        : { value: options[0].value, isValid: true }\n                    : validResult\n            : defaultResult;\n    }\n    return defaultResult;\n};\n\nvar getFieldValueAs = (value, { valueAsNumber, valueAsDate, setValueAs }) => isUndefined(value)\n    ? value\n    : valueAsNumber\n        ? value === ''\n            ? NaN\n            : value\n                ? +value\n                : value\n        : valueAsDate && isString(value)\n            ? new Date(value)\n            : setValueAs\n                ? setValueAs(value)\n                : value;\n\nconst defaultReturn = {\n    isValid: false,\n    value: null,\n};\nvar getRadioValue = (options) => Array.isArray(options)\n    ? options.reduce((previous, option) => option && option.checked && !option.disabled\n        ? {\n            isValid: true,\n            value: option.value,\n        }\n        : previous, defaultReturn)\n    : defaultReturn;\n\nfunction getFieldValue(_f) {\n    const ref = _f.ref;\n    if (isFileInput(ref)) {\n        return ref.files;\n    }\n    if (isRadioInput(ref)) {\n        return getRadioValue(_f.refs).value;\n    }\n    if (isMultipleSelect(ref)) {\n        return [...ref.selectedOptions].map(({ value }) => value);\n    }\n    if (isCheckBoxInput(ref)) {\n        return getCheckboxValue(_f.refs).value;\n    }\n    return getFieldValueAs(isUndefined(ref.value) ? _f.ref.value : ref.value, _f);\n}\n\nvar getResolverOptions = (fieldsNames, _fields, criteriaMode, shouldUseNativeValidation) => {\n    const fields = {};\n    for (const name of fieldsNames) {\n        const field = get(_fields, name);\n        field && set(fields, name, field._f);\n    }\n    return {\n        criteriaMode,\n        names: [...fieldsNames],\n        fields,\n        shouldUseNativeValidation,\n    };\n};\n\nvar isRegex = (value) => value instanceof RegExp;\n\nvar getRuleValue = (rule) => isUndefined(rule)\n    ? rule\n    : isRegex(rule)\n        ? rule.source\n        : isObject(rule)\n            ? isRegex(rule.value)\n                ? rule.value.source\n                : rule.value\n            : rule;\n\nvar getValidationModes = (mode) => ({\n    isOnSubmit: !mode || mode === VALIDATION_MODE.onSubmit,\n    isOnBlur: mode === VALIDATION_MODE.onBlur,\n    isOnChange: mode === VALIDATION_MODE.onChange,\n    isOnAll: mode === VALIDATION_MODE.all,\n    isOnTouch: mode === VALIDATION_MODE.onTouched,\n});\n\nconst ASYNC_FUNCTION = 'AsyncFunction';\nvar hasPromiseValidation = (fieldReference) => !!fieldReference &&\n    !!fieldReference.validate &&\n    !!((isFunction(fieldReference.validate) &&\n        fieldReference.validate.constructor.name === ASYNC_FUNCTION) ||\n        (isObject(fieldReference.validate) &&\n            Object.values(fieldReference.validate).find((validateFunction) => validateFunction.constructor.name === ASYNC_FUNCTION)));\n\nvar hasValidation = (options) => options.mount &&\n    (options.required ||\n        options.min ||\n        options.max ||\n        options.maxLength ||\n        options.minLength ||\n        options.pattern ||\n        options.validate);\n\nvar isWatched = (name, _names, isBlurEvent) => !isBlurEvent &&\n    (_names.watchAll ||\n        _names.watch.has(name) ||\n        [..._names.watch].some((watchName) => name.startsWith(watchName) &&\n            /^\\.\\w+/.test(name.slice(watchName.length))));\n\nconst iterateFieldsByAction = (fields, action, fieldsNames, abortEarly) => {\n    for (const key of fieldsNames || Object.keys(fields)) {\n        const field = get(fields, key);\n        if (field) {\n            const { _f, ...currentField } = field;\n            if (_f) {\n                if (_f.refs && _f.refs[0] && action(_f.refs[0], key) && !abortEarly) {\n                    return true;\n                }\n                else if (_f.ref && action(_f.ref, _f.name) && !abortEarly) {\n                    return true;\n                }\n                else {\n                    if (iterateFieldsByAction(currentField, action)) {\n                        break;\n                    }\n                }\n            }\n            else if (isObject(currentField)) {\n                if (iterateFieldsByAction(currentField, action)) {\n                    break;\n                }\n            }\n        }\n    }\n    return;\n};\n\nfunction schemaErrorLookup(errors, _fields, name) {\n    const error = get(errors, name);\n    if (error || isKey(name)) {\n        return {\n            error,\n            name,\n        };\n    }\n    const names = name.split('.');\n    while (names.length) {\n        const fieldName = names.join('.');\n        const field = get(_fields, fieldName);\n        const foundError = get(errors, fieldName);\n        if (field && !Array.isArray(field) && name !== fieldName) {\n            return { name };\n        }\n        if (foundError && foundError.type) {\n            return {\n                name: fieldName,\n                error: foundError,\n            };\n        }\n        if (foundError && foundError.root && foundError.root.type) {\n            return {\n                name: `${fieldName}.root`,\n                error: foundError.root,\n            };\n        }\n        names.pop();\n    }\n    return {\n        name,\n    };\n}\n\nvar shouldRenderFormState = (formStateData, _proxyFormState, updateFormState, isRoot) => {\n    updateFormState(formStateData);\n    const { name, ...formState } = formStateData;\n    return (isEmptyObject(formState) ||\n        Object.keys(formState).length >= Object.keys(_proxyFormState).length ||\n        Object.keys(formState).find((key) => _proxyFormState[key] ===\n            (!isRoot || VALIDATION_MODE.all)));\n};\n\nvar shouldSubscribeByName = (name, signalName, exact) => !name ||\n    !signalName ||\n    name === signalName ||\n    convertToArrayPayload(name).some((currentName) => currentName &&\n        (exact\n            ? currentName === signalName\n            : currentName.startsWith(signalName) ||\n                signalName.startsWith(currentName)));\n\nvar skipValidation = (isBlurEvent, isTouched, isSubmitted, reValidateMode, mode) => {\n    if (mode.isOnAll) {\n        return false;\n    }\n    else if (!isSubmitted && mode.isOnTouch) {\n        return !(isTouched || isBlurEvent);\n    }\n    else if (isSubmitted ? reValidateMode.isOnBlur : mode.isOnBlur) {\n        return !isBlurEvent;\n    }\n    else if (isSubmitted ? reValidateMode.isOnChange : mode.isOnChange) {\n        return isBlurEvent;\n    }\n    return true;\n};\n\nvar unsetEmptyArray = (ref, name) => !compact(get(ref, name)).length && unset(ref, name);\n\nvar updateFieldArrayRootError = (errors, error, name) => {\n    const fieldArrayErrors = convertToArrayPayload(get(errors, name));\n    set(fieldArrayErrors, 'root', error[name]);\n    set(errors, name, fieldArrayErrors);\n    return errors;\n};\n\nvar isMessage = (value) => isString(value);\n\nfunction getValidateError(result, ref, type = 'validate') {\n    if (isMessage(result) ||\n        (Array.isArray(result) && result.every(isMessage)) ||\n        (isBoolean(result) && !result)) {\n        return {\n            type,\n            message: isMessage(result) ? result : '',\n            ref,\n        };\n    }\n}\n\nvar getValueAndMessage = (validationData) => isObject(validationData) && !isRegex(validationData)\n    ? validationData\n    : {\n        value: validationData,\n        message: '',\n    };\n\nvar validateField = async (field, disabledFieldNames, formValues, validateAllFieldCriteria, shouldUseNativeValidation, isFieldArray) => {\n    const { ref, refs, required, maxLength, minLength, min, max, pattern, validate, name, valueAsNumber, mount, } = field._f;\n    const inputValue = get(formValues, name);\n    if (!mount || disabledFieldNames.has(name)) {\n        return {};\n    }\n    const inputRef = refs ? refs[0] : ref;\n    const setCustomValidity = (message) => {\n        if (shouldUseNativeValidation && inputRef.reportValidity) {\n            inputRef.setCustomValidity(isBoolean(message) ? '' : message || '');\n            inputRef.reportValidity();\n        }\n    };\n    const error = {};\n    const isRadio = isRadioInput(ref);\n    const isCheckBox = isCheckBoxInput(ref);\n    const isRadioOrCheckbox = isRadio || isCheckBox;\n    const isEmpty = ((valueAsNumber || isFileInput(ref)) &&\n        isUndefined(ref.value) &&\n        isUndefined(inputValue)) ||\n        (isHTMLElement(ref) && ref.value === '') ||\n        inputValue === '' ||\n        (Array.isArray(inputValue) && !inputValue.length);\n    const appendErrorsCurry = appendErrors.bind(null, name, validateAllFieldCriteria, error);\n    const getMinMaxMessage = (exceedMax, maxLengthMessage, minLengthMessage, maxType = INPUT_VALIDATION_RULES.maxLength, minType = INPUT_VALIDATION_RULES.minLength) => {\n        const message = exceedMax ? maxLengthMessage : minLengthMessage;\n        error[name] = {\n            type: exceedMax ? maxType : minType,\n            message,\n            ref,\n            ...appendErrorsCurry(exceedMax ? maxType : minType, message),\n        };\n    };\n    if (isFieldArray\n        ? !Array.isArray(inputValue) || !inputValue.length\n        : required &&\n            ((!isRadioOrCheckbox && (isEmpty || isNullOrUndefined(inputValue))) ||\n                (isBoolean(inputValue) && !inputValue) ||\n                (isCheckBox && !getCheckboxValue(refs).isValid) ||\n                (isRadio && !getRadioValue(refs).isValid))) {\n        const { value, message } = isMessage(required)\n            ? { value: !!required, message: required }\n            : getValueAndMessage(required);\n        if (value) {\n            error[name] = {\n                type: INPUT_VALIDATION_RULES.required,\n                message,\n                ref: inputRef,\n                ...appendErrorsCurry(INPUT_VALIDATION_RULES.required, message),\n            };\n            if (!validateAllFieldCriteria) {\n                setCustomValidity(message);\n                return error;\n            }\n        }\n    }\n    if (!isEmpty && (!isNullOrUndefined(min) || !isNullOrUndefined(max))) {\n        let exceedMax;\n        let exceedMin;\n        const maxOutput = getValueAndMessage(max);\n        const minOutput = getValueAndMessage(min);\n        if (!isNullOrUndefined(inputValue) && !isNaN(inputValue)) {\n            const valueNumber = ref.valueAsNumber ||\n                (inputValue ? +inputValue : inputValue);\n            if (!isNullOrUndefined(maxOutput.value)) {\n                exceedMax = valueNumber > maxOutput.value;\n            }\n            if (!isNullOrUndefined(minOutput.value)) {\n                exceedMin = valueNumber < minOutput.value;\n            }\n        }\n        else {\n            const valueDate = ref.valueAsDate || new Date(inputValue);\n            const convertTimeToDate = (time) => new Date(new Date().toDateString() + ' ' + time);\n            const isTime = ref.type == 'time';\n            const isWeek = ref.type == 'week';\n            if (isString(maxOutput.value) && inputValue) {\n                exceedMax = isTime\n                    ? convertTimeToDate(inputValue) > convertTimeToDate(maxOutput.value)\n                    : isWeek\n                        ? inputValue > maxOutput.value\n                        : valueDate > new Date(maxOutput.value);\n            }\n            if (isString(minOutput.value) && inputValue) {\n                exceedMin = isTime\n                    ? convertTimeToDate(inputValue) < convertTimeToDate(minOutput.value)\n                    : isWeek\n                        ? inputValue < minOutput.value\n                        : valueDate < new Date(minOutput.value);\n            }\n        }\n        if (exceedMax || exceedMin) {\n            getMinMaxMessage(!!exceedMax, maxOutput.message, minOutput.message, INPUT_VALIDATION_RULES.max, INPUT_VALIDATION_RULES.min);\n            if (!validateAllFieldCriteria) {\n                setCustomValidity(error[name].message);\n                return error;\n            }\n        }\n    }\n    if ((maxLength || minLength) &&\n        !isEmpty &&\n        (isString(inputValue) || (isFieldArray && Array.isArray(inputValue)))) {\n        const maxLengthOutput = getValueAndMessage(maxLength);\n        const minLengthOutput = getValueAndMessage(minLength);\n        const exceedMax = !isNullOrUndefined(maxLengthOutput.value) &&\n            inputValue.length > +maxLengthOutput.value;\n        const exceedMin = !isNullOrUndefined(minLengthOutput.value) &&\n            inputValue.length < +minLengthOutput.value;\n        if (exceedMax || exceedMin) {\n            getMinMaxMessage(exceedMax, maxLengthOutput.message, minLengthOutput.message);\n            if (!validateAllFieldCriteria) {\n                setCustomValidity(error[name].message);\n                return error;\n            }\n        }\n    }\n    if (pattern && !isEmpty && isString(inputValue)) {\n        const { value: patternValue, message } = getValueAndMessage(pattern);\n        if (isRegex(patternValue) && !inputValue.match(patternValue)) {\n            error[name] = {\n                type: INPUT_VALIDATION_RULES.pattern,\n                message,\n                ref,\n                ...appendErrorsCurry(INPUT_VALIDATION_RULES.pattern, message),\n            };\n            if (!validateAllFieldCriteria) {\n                setCustomValidity(message);\n                return error;\n            }\n        }\n    }\n    if (validate) {\n        if (isFunction(validate)) {\n            const result = await validate(inputValue, formValues);\n            const validateError = getValidateError(result, inputRef);\n            if (validateError) {\n                error[name] = {\n                    ...validateError,\n                    ...appendErrorsCurry(INPUT_VALIDATION_RULES.validate, validateError.message),\n                };\n                if (!validateAllFieldCriteria) {\n                    setCustomValidity(validateError.message);\n                    return error;\n                }\n            }\n        }\n        else if (isObject(validate)) {\n            let validationResult = {};\n            for (const key in validate) {\n                if (!isEmptyObject(validationResult) && !validateAllFieldCriteria) {\n                    break;\n                }\n                const validateError = getValidateError(await validate[key](inputValue, formValues), inputRef, key);\n                if (validateError) {\n                    validationResult = {\n                        ...validateError,\n                        ...appendErrorsCurry(key, validateError.message),\n                    };\n                    setCustomValidity(validateError.message);\n                    if (validateAllFieldCriteria) {\n                        error[name] = validationResult;\n                    }\n                }\n            }\n            if (!isEmptyObject(validationResult)) {\n                error[name] = {\n                    ref: inputRef,\n                    ...validationResult,\n                };\n                if (!validateAllFieldCriteria) {\n                    return error;\n                }\n            }\n        }\n    }\n    setCustomValidity(true);\n    return error;\n};\n\nconst defaultOptions = {\n    mode: VALIDATION_MODE.onSubmit,\n    reValidateMode: VALIDATION_MODE.onChange,\n    shouldFocusError: true,\n};\nfunction createFormControl(props = {}) {\n    let _options = {\n        ...defaultOptions,\n        ...props,\n    };\n    let _formState = {\n        submitCount: 0,\n        isDirty: false,\n        isReady: false,\n        isLoading: isFunction(_options.defaultValues),\n        isValidating: false,\n        isSubmitted: false,\n        isSubmitting: false,\n        isSubmitSuccessful: false,\n        isValid: false,\n        touchedFields: {},\n        dirtyFields: {},\n        validatingFields: {},\n        errors: _options.errors || {},\n        disabled: _options.disabled || false,\n    };\n    let _fields = {};\n    let _defaultValues = isObject(_options.defaultValues) || isObject(_options.values)\n        ? cloneObject(_options.defaultValues || _options.values) || {}\n        : {};\n    let _formValues = _options.shouldUnregister\n        ? {}\n        : cloneObject(_defaultValues);\n    let _state = {\n        action: false,\n        mount: false,\n        watch: false,\n    };\n    let _names = {\n        mount: new Set(),\n        disabled: new Set(),\n        unMount: new Set(),\n        array: new Set(),\n        watch: new Set(),\n    };\n    let delayErrorCallback;\n    let timer = 0;\n    const _proxyFormState = {\n        isDirty: false,\n        dirtyFields: false,\n        validatingFields: false,\n        touchedFields: false,\n        isValidating: false,\n        isValid: false,\n        errors: false,\n    };\n    let _proxySubscribeFormState = {\n        ..._proxyFormState,\n    };\n    const _subjects = {\n        array: createSubject(),\n        state: createSubject(),\n    };\n    const shouldDisplayAllAssociatedErrors = _options.criteriaMode === VALIDATION_MODE.all;\n    const debounce = (callback) => (wait) => {\n        clearTimeout(timer);\n        timer = setTimeout(callback, wait);\n    };\n    const _setValid = async (shouldUpdateValid) => {\n        if (!_options.disabled &&\n            (_proxyFormState.isValid ||\n                _proxySubscribeFormState.isValid ||\n                shouldUpdateValid)) {\n            const isValid = _options.resolver\n                ? isEmptyObject((await _runSchema()).errors)\n                : await executeBuiltInValidation(_fields, true);\n            if (isValid !== _formState.isValid) {\n                _subjects.state.next({\n                    isValid,\n                });\n            }\n        }\n    };\n    const _updateIsValidating = (names, isValidating) => {\n        if (!_options.disabled &&\n            (_proxyFormState.isValidating ||\n                _proxyFormState.validatingFields ||\n                _proxySubscribeFormState.isValidating ||\n                _proxySubscribeFormState.validatingFields)) {\n            (names || Array.from(_names.mount)).forEach((name) => {\n                if (name) {\n                    isValidating\n                        ? set(_formState.validatingFields, name, isValidating)\n                        : unset(_formState.validatingFields, name);\n                }\n            });\n            _subjects.state.next({\n                validatingFields: _formState.validatingFields,\n                isValidating: !isEmptyObject(_formState.validatingFields),\n            });\n        }\n    };\n    const _setFieldArray = (name, values = [], method, args, shouldSetValues = true, shouldUpdateFieldsAndState = true) => {\n        if (args && method && !_options.disabled) {\n            _state.action = true;\n            if (shouldUpdateFieldsAndState && Array.isArray(get(_fields, name))) {\n                const fieldValues = method(get(_fields, name), args.argA, args.argB);\n                shouldSetValues && set(_fields, name, fieldValues);\n            }\n            if (shouldUpdateFieldsAndState &&\n                Array.isArray(get(_formState.errors, name))) {\n                const errors = method(get(_formState.errors, name), args.argA, args.argB);\n                shouldSetValues && set(_formState.errors, name, errors);\n                unsetEmptyArray(_formState.errors, name);\n            }\n            if ((_proxyFormState.touchedFields ||\n                _proxySubscribeFormState.touchedFields) &&\n                shouldUpdateFieldsAndState &&\n                Array.isArray(get(_formState.touchedFields, name))) {\n                const touchedFields = method(get(_formState.touchedFields, name), args.argA, args.argB);\n                shouldSetValues && set(_formState.touchedFields, name, touchedFields);\n            }\n            if (_proxyFormState.dirtyFields || _proxySubscribeFormState.dirtyFields) {\n                _formState.dirtyFields = getDirtyFields(_defaultValues, _formValues);\n            }\n            _subjects.state.next({\n                name,\n                isDirty: _getDirty(name, values),\n                dirtyFields: _formState.dirtyFields,\n                errors: _formState.errors,\n                isValid: _formState.isValid,\n            });\n        }\n        else {\n            set(_formValues, name, values);\n        }\n    };\n    const updateErrors = (name, error) => {\n        set(_formState.errors, name, error);\n        _subjects.state.next({\n            errors: _formState.errors,\n        });\n    };\n    const _setErrors = (errors) => {\n        _formState.errors = errors;\n        _subjects.state.next({\n            errors: _formState.errors,\n            isValid: false,\n        });\n    };\n    const updateValidAndValue = (name, shouldSkipSetValueAs, value, ref) => {\n        const field = get(_fields, name);\n        if (field) {\n            const defaultValue = get(_formValues, name, isUndefined(value) ? get(_defaultValues, name) : value);\n            isUndefined(defaultValue) ||\n                (ref && ref.defaultChecked) ||\n                shouldSkipSetValueAs\n                ? set(_formValues, name, shouldSkipSetValueAs ? defaultValue : getFieldValue(field._f))\n                : setFieldValue(name, defaultValue);\n            _state.mount && _setValid();\n        }\n    };\n    const updateTouchAndDirty = (name, fieldValue, isBlurEvent, shouldDirty, shouldRender) => {\n        let shouldUpdateField = false;\n        let isPreviousDirty = false;\n        const output = {\n            name,\n        };\n        if (!_options.disabled) {\n            if (!isBlurEvent || shouldDirty) {\n                if (_proxyFormState.isDirty || _proxySubscribeFormState.isDirty) {\n                    isPreviousDirty = _formState.isDirty;\n                    _formState.isDirty = output.isDirty = _getDirty();\n                    shouldUpdateField = isPreviousDirty !== output.isDirty;\n                }\n                const isCurrentFieldPristine = deepEqual(get(_defaultValues, name), fieldValue);\n                isPreviousDirty = !!get(_formState.dirtyFields, name);\n                isCurrentFieldPristine\n                    ? unset(_formState.dirtyFields, name)\n                    : set(_formState.dirtyFields, name, true);\n                output.dirtyFields = _formState.dirtyFields;\n                shouldUpdateField =\n                    shouldUpdateField ||\n                        ((_proxyFormState.dirtyFields ||\n                            _proxySubscribeFormState.dirtyFields) &&\n                            isPreviousDirty !== !isCurrentFieldPristine);\n            }\n            if (isBlurEvent) {\n                const isPreviousFieldTouched = get(_formState.touchedFields, name);\n                if (!isPreviousFieldTouched) {\n                    set(_formState.touchedFields, name, isBlurEvent);\n                    output.touchedFields = _formState.touchedFields;\n                    shouldUpdateField =\n                        shouldUpdateField ||\n                            ((_proxyFormState.touchedFields ||\n                                _proxySubscribeFormState.touchedFields) &&\n                                isPreviousFieldTouched !== isBlurEvent);\n                }\n            }\n            shouldUpdateField && shouldRender && _subjects.state.next(output);\n        }\n        return shouldUpdateField ? output : {};\n    };\n    const shouldRenderByError = (name, isValid, error, fieldState) => {\n        const previousFieldError = get(_formState.errors, name);\n        const shouldUpdateValid = (_proxyFormState.isValid || _proxySubscribeFormState.isValid) &&\n            isBoolean(isValid) &&\n            _formState.isValid !== isValid;\n        if (_options.delayError && error) {\n            delayErrorCallback = debounce(() => updateErrors(name, error));\n            delayErrorCallback(_options.delayError);\n        }\n        else {\n            clearTimeout(timer);\n            delayErrorCallback = null;\n            error\n                ? set(_formState.errors, name, error)\n                : unset(_formState.errors, name);\n        }\n        if ((error ? !deepEqual(previousFieldError, error) : previousFieldError) ||\n            !isEmptyObject(fieldState) ||\n            shouldUpdateValid) {\n            const updatedFormState = {\n                ...fieldState,\n                ...(shouldUpdateValid && isBoolean(isValid) ? { isValid } : {}),\n                errors: _formState.errors,\n                name,\n            };\n            _formState = {\n                ..._formState,\n                ...updatedFormState,\n            };\n            _subjects.state.next(updatedFormState);\n        }\n    };\n    const _runSchema = async (name) => {\n        _updateIsValidating(name, true);\n        const result = await _options.resolver(_formValues, _options.context, getResolverOptions(name || _names.mount, _fields, _options.criteriaMode, _options.shouldUseNativeValidation));\n        _updateIsValidating(name);\n        return result;\n    };\n    const executeSchemaAndUpdateState = async (names) => {\n        const { errors } = await _runSchema(names);\n        if (names) {\n            for (const name of names) {\n                const error = get(errors, name);\n                error\n                    ? set(_formState.errors, name, error)\n                    : unset(_formState.errors, name);\n            }\n        }\n        else {\n            _formState.errors = errors;\n        }\n        return errors;\n    };\n    const executeBuiltInValidation = async (fields, shouldOnlyCheckValid, context = {\n        valid: true,\n    }) => {\n        for (const name in fields) {\n            const field = fields[name];\n            if (field) {\n                const { _f, ...fieldValue } = field;\n                if (_f) {\n                    const isFieldArrayRoot = _names.array.has(_f.name);\n                    const isPromiseFunction = field._f && hasPromiseValidation(field._f);\n                    if (isPromiseFunction && _proxyFormState.validatingFields) {\n                        _updateIsValidating([name], true);\n                    }\n                    const fieldError = await validateField(field, _names.disabled, _formValues, shouldDisplayAllAssociatedErrors, _options.shouldUseNativeValidation && !shouldOnlyCheckValid, isFieldArrayRoot);\n                    if (isPromiseFunction && _proxyFormState.validatingFields) {\n                        _updateIsValidating([name]);\n                    }\n                    if (fieldError[_f.name]) {\n                        context.valid = false;\n                        if (shouldOnlyCheckValid) {\n                            break;\n                        }\n                    }\n                    !shouldOnlyCheckValid &&\n                        (get(fieldError, _f.name)\n                            ? isFieldArrayRoot\n                                ? updateFieldArrayRootError(_formState.errors, fieldError, _f.name)\n                                : set(_formState.errors, _f.name, fieldError[_f.name])\n                            : unset(_formState.errors, _f.name));\n                }\n                !isEmptyObject(fieldValue) &&\n                    (await executeBuiltInValidation(fieldValue, shouldOnlyCheckValid, context));\n            }\n        }\n        return context.valid;\n    };\n    const _removeUnmounted = () => {\n        for (const name of _names.unMount) {\n            const field = get(_fields, name);\n            field &&\n                (field._f.refs\n                    ? field._f.refs.every((ref) => !live(ref))\n                    : !live(field._f.ref)) &&\n                unregister(name);\n        }\n        _names.unMount = new Set();\n    };\n    const _getDirty = (name, data) => !_options.disabled &&\n        (name && data && set(_formValues, name, data),\n            !deepEqual(getValues(), _defaultValues));\n    const _getWatch = (names, defaultValue, isGlobal) => generateWatchOutput(names, _names, {\n        ...(_state.mount\n            ? _formValues\n            : isUndefined(defaultValue)\n                ? _defaultValues\n                : isString(names)\n                    ? { [names]: defaultValue }\n                    : defaultValue),\n    }, isGlobal, defaultValue);\n    const _getFieldArray = (name) => compact(get(_state.mount ? _formValues : _defaultValues, name, _options.shouldUnregister ? get(_defaultValues, name, []) : []));\n    const setFieldValue = (name, value, options = {}) => {\n        const field = get(_fields, name);\n        let fieldValue = value;\n        if (field) {\n            const fieldReference = field._f;\n            if (fieldReference) {\n                !fieldReference.disabled &&\n                    set(_formValues, name, getFieldValueAs(value, fieldReference));\n                fieldValue =\n                    isHTMLElement(fieldReference.ref) && isNullOrUndefined(value)\n                        ? ''\n                        : value;\n                if (isMultipleSelect(fieldReference.ref)) {\n                    [...fieldReference.ref.options].forEach((optionRef) => (optionRef.selected = fieldValue.includes(optionRef.value)));\n                }\n                else if (fieldReference.refs) {\n                    if (isCheckBoxInput(fieldReference.ref)) {\n                        fieldReference.refs.forEach((checkboxRef) => {\n                            if (!checkboxRef.defaultChecked || !checkboxRef.disabled) {\n                                if (Array.isArray(fieldValue)) {\n                                    checkboxRef.checked = !!fieldValue.find((data) => data === checkboxRef.value);\n                                }\n                                else {\n                                    checkboxRef.checked =\n                                        fieldValue === checkboxRef.value || !!fieldValue;\n                                }\n                            }\n                        });\n                    }\n                    else {\n                        fieldReference.refs.forEach((radioRef) => (radioRef.checked = radioRef.value === fieldValue));\n                    }\n                }\n                else if (isFileInput(fieldReference.ref)) {\n                    fieldReference.ref.value = '';\n                }\n                else {\n                    fieldReference.ref.value = fieldValue;\n                    if (!fieldReference.ref.type) {\n                        _subjects.state.next({\n                            name,\n                            values: cloneObject(_formValues),\n                        });\n                    }\n                }\n            }\n        }\n        (options.shouldDirty || options.shouldTouch) &&\n            updateTouchAndDirty(name, fieldValue, options.shouldTouch, options.shouldDirty, true);\n        options.shouldValidate && trigger(name);\n    };\n    const setValues = (name, value, options) => {\n        for (const fieldKey in value) {\n            if (!value.hasOwnProperty(fieldKey)) {\n                return;\n            }\n            const fieldValue = value[fieldKey];\n            const fieldName = name + '.' + fieldKey;\n            const field = get(_fields, fieldName);\n            (_names.array.has(name) ||\n                isObject(fieldValue) ||\n                (field && !field._f)) &&\n                !isDateObject(fieldValue)\n                ? setValues(fieldName, fieldValue, options)\n                : setFieldValue(fieldName, fieldValue, options);\n        }\n    };\n    const setValue = (name, value, options = {}) => {\n        const field = get(_fields, name);\n        const isFieldArray = _names.array.has(name);\n        const cloneValue = cloneObject(value);\n        set(_formValues, name, cloneValue);\n        if (isFieldArray) {\n            _subjects.array.next({\n                name,\n                values: cloneObject(_formValues),\n            });\n            if ((_proxyFormState.isDirty ||\n                _proxyFormState.dirtyFields ||\n                _proxySubscribeFormState.isDirty ||\n                _proxySubscribeFormState.dirtyFields) &&\n                options.shouldDirty) {\n                _subjects.state.next({\n                    name,\n                    dirtyFields: getDirtyFields(_defaultValues, _formValues),\n                    isDirty: _getDirty(name, cloneValue),\n                });\n            }\n        }\n        else {\n            field && !field._f && !isNullOrUndefined(cloneValue)\n                ? setValues(name, cloneValue, options)\n                : setFieldValue(name, cloneValue, options);\n        }\n        isWatched(name, _names) && _subjects.state.next({ ..._formState, name });\n        _subjects.state.next({\n            name: _state.mount ? name : undefined,\n            values: cloneObject(_formValues),\n        });\n    };\n    const onChange = async (event) => {\n        _state.mount = true;\n        const target = event.target;\n        let name = target.name;\n        let isFieldValueUpdated = true;\n        const field = get(_fields, name);\n        const _updateIsFieldValueUpdated = (fieldValue) => {\n            isFieldValueUpdated =\n                Number.isNaN(fieldValue) ||\n                    (isDateObject(fieldValue) && isNaN(fieldValue.getTime())) ||\n                    deepEqual(fieldValue, get(_formValues, name, fieldValue));\n        };\n        const validationModeBeforeSubmit = getValidationModes(_options.mode);\n        const validationModeAfterSubmit = getValidationModes(_options.reValidateMode);\n        if (field) {\n            let error;\n            let isValid;\n            const fieldValue = target.type\n                ? getFieldValue(field._f)\n                : getEventValue(event);\n            const isBlurEvent = event.type === EVENTS.BLUR || event.type === EVENTS.FOCUS_OUT;\n            const shouldSkipValidation = (!hasValidation(field._f) &&\n                !_options.resolver &&\n                !get(_formState.errors, name) &&\n                !field._f.deps) ||\n                skipValidation(isBlurEvent, get(_formState.touchedFields, name), _formState.isSubmitted, validationModeAfterSubmit, validationModeBeforeSubmit);\n            const watched = isWatched(name, _names, isBlurEvent);\n            set(_formValues, name, fieldValue);\n            if (isBlurEvent) {\n                if (!target || !target.readOnly) {\n                    field._f.onBlur && field._f.onBlur(event);\n                    delayErrorCallback && delayErrorCallback(0);\n                }\n            }\n            else if (field._f.onChange) {\n                field._f.onChange(event);\n            }\n            const fieldState = updateTouchAndDirty(name, fieldValue, isBlurEvent);\n            const shouldRender = !isEmptyObject(fieldState) || watched;\n            !isBlurEvent &&\n                _subjects.state.next({\n                    name,\n                    type: event.type,\n                    values: cloneObject(_formValues),\n                });\n            if (shouldSkipValidation) {\n                if (_proxyFormState.isValid || _proxySubscribeFormState.isValid) {\n                    if (_options.mode === 'onBlur') {\n                        if (isBlurEvent) {\n                            _setValid();\n                        }\n                    }\n                    else if (!isBlurEvent) {\n                        _setValid();\n                    }\n                }\n                return (shouldRender &&\n                    _subjects.state.next({ name, ...(watched ? {} : fieldState) }));\n            }\n            !isBlurEvent && watched && _subjects.state.next({ ..._formState });\n            if (_options.resolver) {\n                const { errors } = await _runSchema([name]);\n                _updateIsFieldValueUpdated(fieldValue);\n                if (isFieldValueUpdated) {\n                    const previousErrorLookupResult = schemaErrorLookup(_formState.errors, _fields, name);\n                    const errorLookupResult = schemaErrorLookup(errors, _fields, previousErrorLookupResult.name || name);\n                    error = errorLookupResult.error;\n                    name = errorLookupResult.name;\n                    isValid = isEmptyObject(errors);\n                }\n            }\n            else {\n                _updateIsValidating([name], true);\n                error = (await validateField(field, _names.disabled, _formValues, shouldDisplayAllAssociatedErrors, _options.shouldUseNativeValidation))[name];\n                _updateIsValidating([name]);\n                _updateIsFieldValueUpdated(fieldValue);\n                if (isFieldValueUpdated) {\n                    if (error) {\n                        isValid = false;\n                    }\n                    else if (_proxyFormState.isValid ||\n                        _proxySubscribeFormState.isValid) {\n                        isValid = await executeBuiltInValidation(_fields, true);\n                    }\n                }\n            }\n            if (isFieldValueUpdated) {\n                field._f.deps &&\n                    trigger(field._f.deps);\n                shouldRenderByError(name, isValid, error, fieldState);\n            }\n        }\n    };\n    const _focusInput = (ref, key) => {\n        if (get(_formState.errors, key) && ref.focus) {\n            ref.focus();\n            return 1;\n        }\n        return;\n    };\n    const trigger = async (name, options = {}) => {\n        let isValid;\n        let validationResult;\n        const fieldNames = convertToArrayPayload(name);\n        if (_options.resolver) {\n            const errors = await executeSchemaAndUpdateState(isUndefined(name) ? name : fieldNames);\n            isValid = isEmptyObject(errors);\n            validationResult = name\n                ? !fieldNames.some((name) => get(errors, name))\n                : isValid;\n        }\n        else if (name) {\n            validationResult = (await Promise.all(fieldNames.map(async (fieldName) => {\n                const field = get(_fields, fieldName);\n                return await executeBuiltInValidation(field && field._f ? { [fieldName]: field } : field);\n            }))).every(Boolean);\n            !(!validationResult && !_formState.isValid) && _setValid();\n        }\n        else {\n            validationResult = isValid = await executeBuiltInValidation(_fields);\n        }\n        _subjects.state.next({\n            ...(!isString(name) ||\n                ((_proxyFormState.isValid || _proxySubscribeFormState.isValid) &&\n                    isValid !== _formState.isValid)\n                ? {}\n                : { name }),\n            ...(_options.resolver || !name ? { isValid } : {}),\n            errors: _formState.errors,\n        });\n        options.shouldFocus &&\n            !validationResult &&\n            iterateFieldsByAction(_fields, _focusInput, name ? fieldNames : _names.mount);\n        return validationResult;\n    };\n    const getValues = (fieldNames) => {\n        const values = {\n            ...(_state.mount ? _formValues : _defaultValues),\n        };\n        return isUndefined(fieldNames)\n            ? values\n            : isString(fieldNames)\n                ? get(values, fieldNames)\n                : fieldNames.map((name) => get(values, name));\n    };\n    const getFieldState = (name, formState) => ({\n        invalid: !!get((formState || _formState).errors, name),\n        isDirty: !!get((formState || _formState).dirtyFields, name),\n        error: get((formState || _formState).errors, name),\n        isValidating: !!get(_formState.validatingFields, name),\n        isTouched: !!get((formState || _formState).touchedFields, name),\n    });\n    const clearErrors = (name) => {\n        name &&\n            convertToArrayPayload(name).forEach((inputName) => unset(_formState.errors, inputName));\n        _subjects.state.next({\n            errors: name ? _formState.errors : {},\n        });\n    };\n    const setError = (name, error, options) => {\n        const ref = (get(_fields, name, { _f: {} })._f || {}).ref;\n        const currentError = get(_formState.errors, name) || {};\n        // Don't override existing error messages elsewhere in the object tree.\n        const { ref: currentRef, message, type, ...restOfErrorTree } = currentError;\n        set(_formState.errors, name, {\n            ...restOfErrorTree,\n            ...error,\n            ref,\n        });\n        _subjects.state.next({\n            name,\n            errors: _formState.errors,\n            isValid: false,\n        });\n        options && options.shouldFocus && ref && ref.focus && ref.focus();\n    };\n    const watch = (name, defaultValue) => isFunction(name)\n        ? _subjects.state.subscribe({\n            next: (payload) => 'values' in payload &&\n                name(_getWatch(undefined, defaultValue), payload),\n        })\n        : _getWatch(name, defaultValue, true);\n    const _subscribe = (props) => _subjects.state.subscribe({\n        next: (formState) => {\n            if (shouldSubscribeByName(props.name, formState.name, props.exact) &&\n                shouldRenderFormState(formState, props.formState || _proxyFormState, _setFormState, props.reRenderRoot)) {\n                props.callback({\n                    values: { ..._formValues },\n                    ..._formState,\n                    ...formState,\n                    defaultValues: _defaultValues,\n                });\n            }\n        },\n    }).unsubscribe;\n    const subscribe = (props) => {\n        _state.mount = true;\n        _proxySubscribeFormState = {\n            ..._proxySubscribeFormState,\n            ...props.formState,\n        };\n        return _subscribe({\n            ...props,\n            formState: _proxySubscribeFormState,\n        });\n    };\n    const unregister = (name, options = {}) => {\n        for (const fieldName of name ? convertToArrayPayload(name) : _names.mount) {\n            _names.mount.delete(fieldName);\n            _names.array.delete(fieldName);\n            if (!options.keepValue) {\n                unset(_fields, fieldName);\n                unset(_formValues, fieldName);\n            }\n            !options.keepError && unset(_formState.errors, fieldName);\n            !options.keepDirty && unset(_formState.dirtyFields, fieldName);\n            !options.keepTouched && unset(_formState.touchedFields, fieldName);\n            !options.keepIsValidating &&\n                unset(_formState.validatingFields, fieldName);\n            !_options.shouldUnregister &&\n                !options.keepDefaultValue &&\n                unset(_defaultValues, fieldName);\n        }\n        _subjects.state.next({\n            values: cloneObject(_formValues),\n        });\n        _subjects.state.next({\n            ..._formState,\n            ...(!options.keepDirty ? {} : { isDirty: _getDirty() }),\n        });\n        !options.keepIsValid && _setValid();\n    };\n    const _setDisabledField = ({ disabled, name, }) => {\n        if ((isBoolean(disabled) && _state.mount) ||\n            !!disabled ||\n            _names.disabled.has(name)) {\n            disabled ? _names.disabled.add(name) : _names.disabled.delete(name);\n        }\n    };\n    const register = (name, options = {}) => {\n        let field = get(_fields, name);\n        const disabledIsDefined = isBoolean(options.disabled) || isBoolean(_options.disabled);\n        set(_fields, name, {\n            ...(field || {}),\n            _f: {\n                ...(field && field._f ? field._f : { ref: { name } }),\n                name,\n                mount: true,\n                ...options,\n            },\n        });\n        _names.mount.add(name);\n        if (field) {\n            _setDisabledField({\n                disabled: isBoolean(options.disabled)\n                    ? options.disabled\n                    : _options.disabled,\n                name,\n            });\n        }\n        else {\n            updateValidAndValue(name, true, options.value);\n        }\n        return {\n            ...(disabledIsDefined\n                ? { disabled: options.disabled || _options.disabled }\n                : {}),\n            ...(_options.progressive\n                ? {\n                    required: !!options.required,\n                    min: getRuleValue(options.min),\n                    max: getRuleValue(options.max),\n                    minLength: getRuleValue(options.minLength),\n                    maxLength: getRuleValue(options.maxLength),\n                    pattern: getRuleValue(options.pattern),\n                }\n                : {}),\n            name,\n            onChange,\n            onBlur: onChange,\n            ref: (ref) => {\n                if (ref) {\n                    register(name, options);\n                    field = get(_fields, name);\n                    const fieldRef = isUndefined(ref.value)\n                        ? ref.querySelectorAll\n                            ? ref.querySelectorAll('input,select,textarea')[0] || ref\n                            : ref\n                        : ref;\n                    const radioOrCheckbox = isRadioOrCheckbox(fieldRef);\n                    const refs = field._f.refs || [];\n                    if (radioOrCheckbox\n                        ? refs.find((option) => option === fieldRef)\n                        : fieldRef === field._f.ref) {\n                        return;\n                    }\n                    set(_fields, name, {\n                        _f: {\n                            ...field._f,\n                            ...(radioOrCheckbox\n                                ? {\n                                    refs: [\n                                        ...refs.filter(live),\n                                        fieldRef,\n                                        ...(Array.isArray(get(_defaultValues, name)) ? [{}] : []),\n                                    ],\n                                    ref: { type: fieldRef.type, name },\n                                }\n                                : { ref: fieldRef }),\n                        },\n                    });\n                    updateValidAndValue(name, false, undefined, fieldRef);\n                }\n                else {\n                    field = get(_fields, name, {});\n                    if (field._f) {\n                        field._f.mount = false;\n                    }\n                    (_options.shouldUnregister || options.shouldUnregister) &&\n                        !(isNameInFieldArray(_names.array, name) && _state.action) &&\n                        _names.unMount.add(name);\n                }\n            },\n        };\n    };\n    const _focusError = () => _options.shouldFocusError &&\n        iterateFieldsByAction(_fields, _focusInput, _names.mount);\n    const _disableForm = (disabled) => {\n        if (isBoolean(disabled)) {\n            _subjects.state.next({ disabled });\n            iterateFieldsByAction(_fields, (ref, name) => {\n                const currentField = get(_fields, name);\n                if (currentField) {\n                    ref.disabled = currentField._f.disabled || disabled;\n                    if (Array.isArray(currentField._f.refs)) {\n                        currentField._f.refs.forEach((inputRef) => {\n                            inputRef.disabled = currentField._f.disabled || disabled;\n                        });\n                    }\n                }\n            }, 0, false);\n        }\n    };\n    const handleSubmit = (onValid, onInvalid) => async (e) => {\n        let onValidError = undefined;\n        if (e) {\n            e.preventDefault && e.preventDefault();\n            e.persist &&\n                e.persist();\n        }\n        let fieldValues = cloneObject(_formValues);\n        _subjects.state.next({\n            isSubmitting: true,\n        });\n        if (_options.resolver) {\n            const { errors, values } = await _runSchema();\n            _formState.errors = errors;\n            fieldValues = cloneObject(values);\n        }\n        else {\n            await executeBuiltInValidation(_fields);\n        }\n        if (_names.disabled.size) {\n            for (const name of _names.disabled) {\n                unset(fieldValues, name);\n            }\n        }\n        unset(_formState.errors, 'root');\n        if (isEmptyObject(_formState.errors)) {\n            _subjects.state.next({\n                errors: {},\n            });\n            try {\n                await onValid(fieldValues, e);\n            }\n            catch (error) {\n                onValidError = error;\n            }\n        }\n        else {\n            if (onInvalid) {\n                await onInvalid({ ..._formState.errors }, e);\n            }\n            _focusError();\n            setTimeout(_focusError);\n        }\n        _subjects.state.next({\n            isSubmitted: true,\n            isSubmitting: false,\n            isSubmitSuccessful: isEmptyObject(_formState.errors) && !onValidError,\n            submitCount: _formState.submitCount + 1,\n            errors: _formState.errors,\n        });\n        if (onValidError) {\n            throw onValidError;\n        }\n    };\n    const resetField = (name, options = {}) => {\n        if (get(_fields, name)) {\n            if (isUndefined(options.defaultValue)) {\n                setValue(name, cloneObject(get(_defaultValues, name)));\n            }\n            else {\n                setValue(name, options.defaultValue);\n                set(_defaultValues, name, cloneObject(options.defaultValue));\n            }\n            if (!options.keepTouched) {\n                unset(_formState.touchedFields, name);\n            }\n            if (!options.keepDirty) {\n                unset(_formState.dirtyFields, name);\n                _formState.isDirty = options.defaultValue\n                    ? _getDirty(name, cloneObject(get(_defaultValues, name)))\n                    : _getDirty();\n            }\n            if (!options.keepError) {\n                unset(_formState.errors, name);\n                _proxyFormState.isValid && _setValid();\n            }\n            _subjects.state.next({ ..._formState });\n        }\n    };\n    const _reset = (formValues, keepStateOptions = {}) => {\n        const updatedValues = formValues ? cloneObject(formValues) : _defaultValues;\n        const cloneUpdatedValues = cloneObject(updatedValues);\n        const isEmptyResetValues = isEmptyObject(formValues);\n        const values = isEmptyResetValues ? _defaultValues : cloneUpdatedValues;\n        if (!keepStateOptions.keepDefaultValues) {\n            _defaultValues = updatedValues;\n        }\n        if (!keepStateOptions.keepValues) {\n            if (keepStateOptions.keepDirtyValues) {\n                const fieldsToCheck = new Set([\n                    ..._names.mount,\n                    ...Object.keys(getDirtyFields(_defaultValues, _formValues)),\n                ]);\n                for (const fieldName of Array.from(fieldsToCheck)) {\n                    get(_formState.dirtyFields, fieldName)\n                        ? set(values, fieldName, get(_formValues, fieldName))\n                        : setValue(fieldName, get(values, fieldName));\n                }\n            }\n            else {\n                if (isWeb && isUndefined(formValues)) {\n                    for (const name of _names.mount) {\n                        const field = get(_fields, name);\n                        if (field && field._f) {\n                            const fieldReference = Array.isArray(field._f.refs)\n                                ? field._f.refs[0]\n                                : field._f.ref;\n                            if (isHTMLElement(fieldReference)) {\n                                const form = fieldReference.closest('form');\n                                if (form) {\n                                    form.reset();\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                }\n                if (keepStateOptions.keepFieldsRef) {\n                    for (const fieldName of _names.mount) {\n                        setValue(fieldName, get(values, fieldName));\n                    }\n                }\n                else {\n                    _fields = {};\n                }\n            }\n            _formValues = _options.shouldUnregister\n                ? keepStateOptions.keepDefaultValues\n                    ? cloneObject(_defaultValues)\n                    : {}\n                : cloneObject(values);\n            _subjects.array.next({\n                values: { ...values },\n            });\n            _subjects.state.next({\n                values: { ...values },\n            });\n        }\n        _names = {\n            mount: keepStateOptions.keepDirtyValues ? _names.mount : new Set(),\n            unMount: new Set(),\n            array: new Set(),\n            disabled: new Set(),\n            watch: new Set(),\n            watchAll: false,\n            focus: '',\n        };\n        _state.mount =\n            !_proxyFormState.isValid ||\n                !!keepStateOptions.keepIsValid ||\n                !!keepStateOptions.keepDirtyValues;\n        _state.watch = !!_options.shouldUnregister;\n        _subjects.state.next({\n            submitCount: keepStateOptions.keepSubmitCount\n                ? _formState.submitCount\n                : 0,\n            isDirty: isEmptyResetValues\n                ? false\n                : keepStateOptions.keepDirty\n                    ? _formState.isDirty\n                    : !!(keepStateOptions.keepDefaultValues &&\n                        !deepEqual(formValues, _defaultValues)),\n            isSubmitted: keepStateOptions.keepIsSubmitted\n                ? _formState.isSubmitted\n                : false,\n            dirtyFields: isEmptyResetValues\n                ? {}\n                : keepStateOptions.keepDirtyValues\n                    ? keepStateOptions.keepDefaultValues && _formValues\n                        ? getDirtyFields(_defaultValues, _formValues)\n                        : _formState.dirtyFields\n                    : keepStateOptions.keepDefaultValues && formValues\n                        ? getDirtyFields(_defaultValues, formValues)\n                        : keepStateOptions.keepDirty\n                            ? _formState.dirtyFields\n                            : {},\n            touchedFields: keepStateOptions.keepTouched\n                ? _formState.touchedFields\n                : {},\n            errors: keepStateOptions.keepErrors ? _formState.errors : {},\n            isSubmitSuccessful: keepStateOptions.keepIsSubmitSuccessful\n                ? _formState.isSubmitSuccessful\n                : false,\n            isSubmitting: false,\n            defaultValues: _defaultValues,\n        });\n    };\n    const reset = (formValues, keepStateOptions) => _reset(isFunction(formValues)\n        ? formValues(_formValues)\n        : formValues, keepStateOptions);\n    const setFocus = (name, options = {}) => {\n        const field = get(_fields, name);\n        const fieldReference = field && field._f;\n        if (fieldReference) {\n            const fieldRef = fieldReference.refs\n                ? fieldReference.refs[0]\n                : fieldReference.ref;\n            if (fieldRef.focus) {\n                fieldRef.focus();\n                options.shouldSelect &&\n                    isFunction(fieldRef.select) &&\n                    fieldRef.select();\n            }\n        }\n    };\n    const _setFormState = (updatedFormState) => {\n        _formState = {\n            ..._formState,\n            ...updatedFormState,\n        };\n    };\n    const _resetDefaultValues = () => isFunction(_options.defaultValues) &&\n        _options.defaultValues().then((values) => {\n            reset(values, _options.resetOptions);\n            _subjects.state.next({\n                isLoading: false,\n            });\n        });\n    const methods = {\n        control: {\n            register,\n            unregister,\n            getFieldState,\n            handleSubmit,\n            setError,\n            _subscribe,\n            _runSchema,\n            _focusError,\n            _getWatch,\n            _getDirty,\n            _setValid,\n            _setFieldArray,\n            _setDisabledField,\n            _setErrors,\n            _getFieldArray,\n            _reset,\n            _resetDefaultValues,\n            _removeUnmounted,\n            _disableForm,\n            _subjects,\n            _proxyFormState,\n            get _fields() {\n                return _fields;\n            },\n            get _formValues() {\n                return _formValues;\n            },\n            get _state() {\n                return _state;\n            },\n            set _state(value) {\n                _state = value;\n            },\n            get _defaultValues() {\n                return _defaultValues;\n            },\n            get _names() {\n                return _names;\n            },\n            set _names(value) {\n                _names = value;\n            },\n            get _formState() {\n                return _formState;\n            },\n            get _options() {\n                return _options;\n            },\n            set _options(value) {\n                _options = {\n                    ..._options,\n                    ...value,\n                };\n            },\n        },\n        subscribe,\n        trigger,\n        register,\n        handleSubmit,\n        watch,\n        setValue,\n        getValues,\n        reset,\n        resetField,\n        clearErrors,\n        unregister,\n        setError,\n        setFocus,\n        getFieldState,\n    };\n    return {\n        ...methods,\n        formControl: methods,\n    };\n}\n\nvar generateId = () => {\n    if (typeof crypto !== 'undefined' && crypto.randomUUID) {\n        return crypto.randomUUID();\n    }\n    const d = typeof performance === 'undefined' ? Date.now() : performance.now() * 1000;\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n        const r = (Math.random() * 16 + d) % 16 | 0;\n        return (c == 'x' ? r : (r & 0x3) | 0x8).toString(16);\n    });\n};\n\nvar getFocusFieldName = (name, index, options = {}) => options.shouldFocus || isUndefined(options.shouldFocus)\n    ? options.focusName ||\n        `${name}.${isUndefined(options.focusIndex) ? index : options.focusIndex}.`\n    : '';\n\nvar appendAt = (data, value) => [\n    ...data,\n    ...convertToArrayPayload(value),\n];\n\nvar fillEmptyArray = (value) => Array.isArray(value) ? value.map(() => undefined) : undefined;\n\nfunction insert(data, index, value) {\n    return [\n        ...data.slice(0, index),\n        ...convertToArrayPayload(value),\n        ...data.slice(index),\n    ];\n}\n\nvar moveArrayAt = (data, from, to) => {\n    if (!Array.isArray(data)) {\n        return [];\n    }\n    if (isUndefined(data[to])) {\n        data[to] = undefined;\n    }\n    data.splice(to, 0, data.splice(from, 1)[0]);\n    return data;\n};\n\nvar prependAt = (data, value) => [\n    ...convertToArrayPayload(value),\n    ...convertToArrayPayload(data),\n];\n\nfunction removeAtIndexes(data, indexes) {\n    let i = 0;\n    const temp = [...data];\n    for (const index of indexes) {\n        temp.splice(index - i, 1);\n        i++;\n    }\n    return compact(temp).length ? temp : [];\n}\nvar removeArrayAt = (data, index) => isUndefined(index)\n    ? []\n    : removeAtIndexes(data, convertToArrayPayload(index).sort((a, b) => a - b));\n\nvar swapArrayAt = (data, indexA, indexB) => {\n    [data[indexA], data[indexB]] = [data[indexB], data[indexA]];\n};\n\nvar updateAt = (fieldValues, index, value) => {\n    fieldValues[index] = value;\n    return fieldValues;\n};\n\n/**\n * A custom hook that exposes convenient methods to perform operations with a list of dynamic inputs that need to be appended, updated, removed etc.  [Demo](https://codesandbox.io/s/react-hook-form-usefieldarray-ssugn)  [Video](https://youtu.be/4MrbfGSFY2A)\n *\n * @remarks\n * [API](https://react-hook-form.com/docs/usefieldarray)  [Demo](https://codesandbox.io/s/react-hook-form-usefieldarray-ssugn)\n *\n * @param props - useFieldArray props\n *\n * @returns methods - functions to manipulate with the Field Arrays (dynamic inputs) {@link UseFieldArrayReturn}\n *\n * @example\n * ```tsx\n * function App() {\n *   const { register, control, handleSubmit, reset, trigger, setError } = useForm({\n *     defaultValues: {\n *       test: []\n *     }\n *   });\n *   const { fields, append } = useFieldArray({\n *     control,\n *     name: \"test\"\n *   });\n *\n *   return (\n *     <form onSubmit={handleSubmit(data => console.log(data))}>\n *       {fields.map((item, index) => (\n *          <input key={item.id} {...register(`test.${index}.firstName`)}  />\n *       ))}\n *       <button type=\"button\" onClick={() => append({ firstName: \"bill\" })}>\n *         append\n *       </button>\n *       <input type=\"submit\" />\n *     </form>\n *   );\n * }\n * ```\n */\nfunction useFieldArray(props) {\n    const methods = useFormContext();\n    const { control = methods.control, name, keyName = 'id', shouldUnregister, rules, } = props;\n    const [fields, setFields] = React.useState(control._getFieldArray(name));\n    const ids = React.useRef(control._getFieldArray(name).map(generateId));\n    const _fieldIds = React.useRef(fields);\n    const _actioned = React.useRef(false);\n    _fieldIds.current = fields;\n    control._names.array.add(name);\n    React.useMemo(() => rules &&\n        control.register(name, rules), [control, rules, name]);\n    useIsomorphicLayoutEffect(() => control._subjects.array.subscribe({\n        next: ({ values, name: fieldArrayName, }) => {\n            if (fieldArrayName === name || !fieldArrayName) {\n                const fieldValues = get(values, name);\n                if (Array.isArray(fieldValues)) {\n                    setFields(fieldValues);\n                    ids.current = fieldValues.map(generateId);\n                }\n            }\n        },\n    }).unsubscribe, [control, name]);\n    const updateValues = React.useCallback((updatedFieldArrayValues) => {\n        _actioned.current = true;\n        control._setFieldArray(name, updatedFieldArrayValues);\n    }, [control, name]);\n    const append = (value, options) => {\n        const appendValue = convertToArrayPayload(cloneObject(value));\n        const updatedFieldArrayValues = appendAt(control._getFieldArray(name), appendValue);\n        control._names.focus = getFocusFieldName(name, updatedFieldArrayValues.length - 1, options);\n        ids.current = appendAt(ids.current, appendValue.map(generateId));\n        updateValues(updatedFieldArrayValues);\n        setFields(updatedFieldArrayValues);\n        control._setFieldArray(name, updatedFieldArrayValues, appendAt, {\n            argA: fillEmptyArray(value),\n        });\n    };\n    const prepend = (value, options) => {\n        const prependValue = convertToArrayPayload(cloneObject(value));\n        const updatedFieldArrayValues = prependAt(control._getFieldArray(name), prependValue);\n        control._names.focus = getFocusFieldName(name, 0, options);\n        ids.current = prependAt(ids.current, prependValue.map(generateId));\n        updateValues(updatedFieldArrayValues);\n        setFields(updatedFieldArrayValues);\n        control._setFieldArray(name, updatedFieldArrayValues, prependAt, {\n            argA: fillEmptyArray(value),\n        });\n    };\n    const remove = (index) => {\n        const updatedFieldArrayValues = removeArrayAt(control._getFieldArray(name), index);\n        ids.current = removeArrayAt(ids.current, index);\n        updateValues(updatedFieldArrayValues);\n        setFields(updatedFieldArrayValues);\n        !Array.isArray(get(control._fields, name)) &&\n            set(control._fields, name, undefined);\n        control._setFieldArray(name, updatedFieldArrayValues, removeArrayAt, {\n            argA: index,\n        });\n    };\n    const insert$1 = (index, value, options) => {\n        const insertValue = convertToArrayPayload(cloneObject(value));\n        const updatedFieldArrayValues = insert(control._getFieldArray(name), index, insertValue);\n        control._names.focus = getFocusFieldName(name, index, options);\n        ids.current = insert(ids.current, index, insertValue.map(generateId));\n        updateValues(updatedFieldArrayValues);\n        setFields(updatedFieldArrayValues);\n        control._setFieldArray(name, updatedFieldArrayValues, insert, {\n            argA: index,\n            argB: fillEmptyArray(value),\n        });\n    };\n    const swap = (indexA, indexB) => {\n        const updatedFieldArrayValues = control._getFieldArray(name);\n        swapArrayAt(updatedFieldArrayValues, indexA, indexB);\n        swapArrayAt(ids.current, indexA, indexB);\n        updateValues(updatedFieldArrayValues);\n        setFields(updatedFieldArrayValues);\n        control._setFieldArray(name, updatedFieldArrayValues, swapArrayAt, {\n            argA: indexA,\n            argB: indexB,\n        }, false);\n    };\n    const move = (from, to) => {\n        const updatedFieldArrayValues = control._getFieldArray(name);\n        moveArrayAt(updatedFieldArrayValues, from, to);\n        moveArrayAt(ids.current, from, to);\n        updateValues(updatedFieldArrayValues);\n        setFields(updatedFieldArrayValues);\n        control._setFieldArray(name, updatedFieldArrayValues, moveArrayAt, {\n            argA: from,\n            argB: to,\n        }, false);\n    };\n    const update = (index, value) => {\n        const updateValue = cloneObject(value);\n        const updatedFieldArrayValues = updateAt(control._getFieldArray(name), index, updateValue);\n        ids.current = [...updatedFieldArrayValues].map((item, i) => !item || i === index ? generateId() : ids.current[i]);\n        updateValues(updatedFieldArrayValues);\n        setFields([...updatedFieldArrayValues]);\n        control._setFieldArray(name, updatedFieldArrayValues, updateAt, {\n            argA: index,\n            argB: updateValue,\n        }, true, false);\n    };\n    const replace = (value) => {\n        const updatedFieldArrayValues = convertToArrayPayload(cloneObject(value));\n        ids.current = updatedFieldArrayValues.map(generateId);\n        updateValues([...updatedFieldArrayValues]);\n        setFields([...updatedFieldArrayValues]);\n        control._setFieldArray(name, [...updatedFieldArrayValues], (data) => data, {}, true, false);\n    };\n    React.useEffect(() => {\n        control._state.action = false;\n        isWatched(name, control._names) &&\n            control._subjects.state.next({\n                ...control._formState,\n            });\n        if (_actioned.current &&\n            (!getValidationModes(control._options.mode).isOnSubmit ||\n                control._formState.isSubmitted) &&\n            !getValidationModes(control._options.reValidateMode).isOnSubmit) {\n            if (control._options.resolver) {\n                control._runSchema([name]).then((result) => {\n                    const error = get(result.errors, name);\n                    const existingError = get(control._formState.errors, name);\n                    if (existingError\n                        ? (!error && existingError.type) ||\n                            (error &&\n                                (existingError.type !== error.type ||\n                                    existingError.message !== error.message))\n                        : error && error.type) {\n                        error\n                            ? set(control._formState.errors, name, error)\n                            : unset(control._formState.errors, name);\n                        control._subjects.state.next({\n                            errors: control._formState.errors,\n                        });\n                    }\n                });\n            }\n            else {\n                const field = get(control._fields, name);\n                if (field &&\n                    field._f &&\n                    !(getValidationModes(control._options.reValidateMode).isOnSubmit &&\n                        getValidationModes(control._options.mode).isOnSubmit)) {\n                    validateField(field, control._names.disabled, control._formValues, control._options.criteriaMode === VALIDATION_MODE.all, control._options.shouldUseNativeValidation, true).then((error) => !isEmptyObject(error) &&\n                        control._subjects.state.next({\n                            errors: updateFieldArrayRootError(control._formState.errors, error, name),\n                        }));\n                }\n            }\n        }\n        control._subjects.state.next({\n            name,\n            values: cloneObject(control._formValues),\n        });\n        control._names.focus &&\n            iterateFieldsByAction(control._fields, (ref, key) => {\n                if (control._names.focus &&\n                    key.startsWith(control._names.focus) &&\n                    ref.focus) {\n                    ref.focus();\n                    return 1;\n                }\n                return;\n            });\n        control._names.focus = '';\n        control._setValid();\n        _actioned.current = false;\n    }, [fields, name, control]);\n    React.useEffect(() => {\n        !get(control._formValues, name) && control._setFieldArray(name);\n        return () => {\n            const updateMounted = (name, value) => {\n                const field = get(control._fields, name);\n                if (field && field._f) {\n                    field._f.mount = value;\n                }\n            };\n            control._options.shouldUnregister || shouldUnregister\n                ? control.unregister(name)\n                : updateMounted(name, false);\n        };\n    }, [name, control, keyName, shouldUnregister]);\n    return {\n        swap: React.useCallback(swap, [updateValues, name, control]),\n        move: React.useCallback(move, [updateValues, name, control]),\n        prepend: React.useCallback(prepend, [updateValues, name, control]),\n        append: React.useCallback(append, [updateValues, name, control]),\n        remove: React.useCallback(remove, [updateValues, name, control]),\n        insert: React.useCallback(insert$1, [updateValues, name, control]),\n        update: React.useCallback(update, [updateValues, name, control]),\n        replace: React.useCallback(replace, [updateValues, name, control]),\n        fields: React.useMemo(() => fields.map((field, index) => ({\n            ...field,\n            [keyName]: ids.current[index] || generateId(),\n        })), [fields, keyName]),\n    };\n}\n\n/**\n * Custom hook to manage the entire form.\n *\n * @remarks\n * [API](https://react-hook-form.com/docs/useform)  [Demo](https://codesandbox.io/s/react-hook-form-get-started-ts-5ksmm)  [Video](https://www.youtube.com/watch?v=RkXv4AXXC_4)\n *\n * @param props - form configuration and validation parameters.\n *\n * @returns methods - individual functions to manage the form state. {@link UseFormReturn}\n *\n * @example\n * ```tsx\n * function App() {\n *   const { register, handleSubmit, watch, formState: { errors } } = useForm();\n *   const onSubmit = data => console.log(data);\n *\n *   console.log(watch(\"example\"));\n *\n *   return (\n *     <form onSubmit={handleSubmit(onSubmit)}>\n *       <input defaultValue=\"test\" {...register(\"example\")} />\n *       <input {...register(\"exampleRequired\", { required: true })} />\n *       {errors.exampleRequired && <span>This field is required</span>}\n *       <button>Submit</button>\n *     </form>\n *   );\n * }\n * ```\n */\nfunction useForm(props = {}) {\n    const _formControl = React.useRef(undefined);\n    const _values = React.useRef(undefined);\n    const [formState, updateFormState] = React.useState({\n        isDirty: false,\n        isValidating: false,\n        isLoading: isFunction(props.defaultValues),\n        isSubmitted: false,\n        isSubmitting: false,\n        isSubmitSuccessful: false,\n        isValid: false,\n        submitCount: 0,\n        dirtyFields: {},\n        touchedFields: {},\n        validatingFields: {},\n        errors: props.errors || {},\n        disabled: props.disabled || false,\n        isReady: false,\n        defaultValues: isFunction(props.defaultValues)\n            ? undefined\n            : props.defaultValues,\n    });\n    if (!_formControl.current) {\n        if (props.formControl) {\n            _formControl.current = {\n                ...props.formControl,\n                formState,\n            };\n            if (props.defaultValues && !isFunction(props.defaultValues)) {\n                props.formControl.reset(props.defaultValues, props.resetOptions);\n            }\n        }\n        else {\n            const { formControl, ...rest } = createFormControl(props);\n            _formControl.current = {\n                ...rest,\n                formState,\n            };\n        }\n    }\n    const control = _formControl.current.control;\n    control._options = props;\n    useIsomorphicLayoutEffect(() => {\n        const sub = control._subscribe({\n            formState: control._proxyFormState,\n            callback: () => updateFormState({ ...control._formState }),\n            reRenderRoot: true,\n        });\n        updateFormState((data) => ({\n            ...data,\n            isReady: true,\n        }));\n        control._formState.isReady = true;\n        return sub;\n    }, [control]);\n    React.useEffect(() => control._disableForm(props.disabled), [control, props.disabled]);\n    React.useEffect(() => {\n        if (props.mode) {\n            control._options.mode = props.mode;\n        }\n        if (props.reValidateMode) {\n            control._options.reValidateMode = props.reValidateMode;\n        }\n    }, [control, props.mode, props.reValidateMode]);\n    React.useEffect(() => {\n        if (props.errors) {\n            control._setErrors(props.errors);\n            control._focusError();\n        }\n    }, [control, props.errors]);\n    React.useEffect(() => {\n        props.shouldUnregister &&\n            control._subjects.state.next({\n                values: control._getWatch(),\n            });\n    }, [control, props.shouldUnregister]);\n    React.useEffect(() => {\n        if (control._proxyFormState.isDirty) {\n            const isDirty = control._getDirty();\n            if (isDirty !== formState.isDirty) {\n                control._subjects.state.next({\n                    isDirty,\n                });\n            }\n        }\n    }, [control, formState.isDirty]);\n    React.useEffect(() => {\n        if (props.values && !deepEqual(props.values, _values.current)) {\n            control._reset(props.values, {\n                keepFieldsRef: true,\n                ...control._options.resetOptions,\n            });\n            _values.current = props.values;\n            updateFormState((state) => ({ ...state }));\n        }\n        else {\n            control._resetDefaultValues();\n        }\n    }, [control, props.values]);\n    React.useEffect(() => {\n        if (!control._state.mount) {\n            control._setValid();\n            control._state.mount = true;\n        }\n        if (control._state.watch) {\n            control._state.watch = false;\n            control._subjects.state.next({ ...control._formState });\n        }\n        control._removeUnmounted();\n    });\n    _formControl.current.formState = getProxyFormState(formState, control);\n    return _formControl.current;\n}\n\nexport { Controller, Form, FormProvider, appendErrors, createFormControl, get, set, useController, useFieldArray, useForm, useFormContext, useFormState, useWatch };\n//# sourceMappingURL=index.esm.mjs.map\n","import React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { X, Search, Check } from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { Medication, MedicationCategory, MedicationFrequency, MedicationUnit } from '@/types';\nimport { generateRandomColor, getDependencyRiskCategory, getRiskLevel } from '@/utils/helpers';\nimport { getMedicationSuggestions, getMedicationByName, generateTaperingPlan } from '@/services/medicationDatabase';\nimport toast from 'react-hot-toast';\n\ninterface MedicationModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  medication?: Medication | null;\n}\n\ninterface FormData {\n  name: string;\n  dosage: string;\n  unit: MedicationUnit;\n  frequency: MedicationFrequency;\n  category: MedicationCategory;\n  notes?: string;\n  sideEffects?: string;\n  interactions?: string;\n  prescribedBy?: string;\n  pharmacy?: string;\n  pillsRemaining?: number;\n  totalPills?: number;\n  refillReminder: boolean;\n  color: string;\n  startDate: string;\n  endDate?: string;\n  maxDailyDose?: number;\n  enableCyclicDosing: boolean;\n  enableTapering: boolean;\n}\n\nconst colors = [\n  '#3b82f6', '#ef4444', '#10b981', '#f59e0b', '#8b5cf6',\n  '#ec4899', '#06b6d4', '#84cc16', '#f97316', '#6366f1',\n  '#14b8a6', '#f43f5e', '#dc2626', '#059669', '#d97706'\n];\n\nexport function MedicationModal({ isOpen, onClose, medication }: MedicationModalProps) {\n  const { addMedication, updateMedication } = useMedicationStore();\n  const isEditing = !!medication;\n\n  // Autocomplete state\n  const [medicationSuggestions, setMedicationSuggestions] = React.useState<Array<{\n    name: string;\n    category: string;\n    riskLevel: string;\n    description: string;\n  }>>([]);\n  const [showSuggestions, setShowSuggestions] = React.useState(false);\n  const [selectedMedicationData, setSelectedMedicationData] = React.useState<any>(null);\n  const [taperingPlan, setTaperingPlan] = React.useState<any>(null);\n\n  const { register, handleSubmit, watch, setValue, reset, formState: { errors } } = useForm<FormData>({\n    defaultValues: {\n      name: '',\n      dosage: '',\n      unit: 'mg',\n      frequency: 'once-daily',\n      category: 'prescription',\n      notes: '',\n      sideEffects: '',\n      interactions: '',\n      prescribedBy: '',\n      pharmacy: '',\n      pillsRemaining: 0,\n      totalPills: 0,\n      refillReminder: true,\n      color: generateRandomColor(),\n      startDate: new Date().toISOString().split('T')[0],\n      endDate: '',\n      maxDailyDose: 0,\n      enableCyclicDosing: false,\n      enableTapering: false,\n    }\n  });\n\n  const selectedColor = watch('color');\n  const medicationName = watch('name');\n\n  // Handle medication search and suggestions\n  const handleMedicationSearch = (searchTerm: string) => {\n    if (searchTerm.length >= 2) {\n      const suggestions = getMedicationSuggestions(searchTerm, 8);\n      setMedicationSuggestions(suggestions);\n      setShowSuggestions(true);\n    } else {\n      setMedicationSuggestions([]);\n      setShowSuggestions(false);\n    }\n  };\n\n  const handleMedicationSelect = (suggestionName: string) => {\n    const medicationData = getMedicationByName(suggestionName);\n    if (medicationData) {\n      setValue('name', medicationData.name);\n      setValue('category', medicationData.category);\n      \n      // Set suggested dosage and unit if available\n      if (medicationData.commonDosages.length > 0) {\n        setValue('dosage', medicationData.commonDosages[0]);\n      }\n      if (medicationData.commonUnits.length > 0) {\n        setValue('unit', medicationData.commonUnits[0] as MedicationUnit);\n      }\n      if (medicationData.commonFrequencies.length > 0) {\n        setValue('frequency', medicationData.commonFrequencies[0] as MedicationFrequency);\n      }\n\n      // Set side effects and interactions\n      if (medicationData.commonSideEffects) {\n        setValue('sideEffects', medicationData.commonSideEffects.join(', '));\n      }\n      if (medicationData.commonInteractions) {\n        setValue('interactions', medicationData.commonInteractions.join(', '));\n      }\n\n      setSelectedMedicationData(medicationData);\n      setShowSuggestions(false);\n\n      // Generate tapering plan if needed\n      if (medicationData.taperingRequired) {\n        const currentDose = parseFloat(medicationData.commonDosages[0] || '0');\n        const plan = generateTaperingPlan(medicationData.name, currentDose, medicationData.commonUnits[0] || 'mg');\n        setTaperingPlan(plan);\n      } else {\n        setTaperingPlan(null);\n      }\n    }\n  };\n\n  // Watch for medication name changes to trigger search\n  React.useEffect(() => {\n    if (medicationName && !isEditing) {\n      handleMedicationSearch(medicationName);\n    } else if (!medicationName) {\n      setShowSuggestions(false);\n      setSelectedMedicationData(null);\n      setTaperingPlan(null);\n    }\n  }, [medicationName, isEditing]);\n\n  React.useEffect(() => {\n    if (isOpen) {\n      if (medication) {\n        reset({\n          name: medication.name,\n          dosage: medication.dosage,\n          unit: medication.unit,\n          frequency: medication.frequency,\n          category: medication.category,\n          notes: medication.notes || '',\n          sideEffects: medication.sideEffects?.join(', ') || '',\n          interactions: medication.interactions?.join(', ') || '',\n          prescribedBy: medication.prescribedBy || '',\n          pharmacy: medication.pharmacy || '',\n          pillsRemaining: medication.pillsRemaining || 0,\n          totalPills: medication.totalPills || 0,\n          refillReminder: medication.refillReminder || false,\n          color: medication.color,\n          startDate: medication.startDate instanceof Date ? medication.startDate.toISOString().split('T')[0] : new Date(medication.startDate).toISOString().split('T')[0],\n          endDate: medication.endDate ? (medication.endDate instanceof Date ? medication.endDate.toISOString().split('T')[0] : new Date(medication.endDate).toISOString().split('T')[0]) : '',\n          maxDailyDose: medication.maxDailyDose || 0,\n          enableCyclicDosing: !!medication.cyclicDosing,\n          enableTapering: !!medication.tapering,\n        });\n      } else {\n        reset({\n          name: '',\n          dosage: '',\n          unit: 'mg',\n          frequency: 'once-daily',\n          category: 'prescription',\n          notes: '',\n          sideEffects: '',\n          interactions: '',\n          prescribedBy: '',\n          pharmacy: '',\n          pillsRemaining: 0,\n          totalPills: 0,\n          refillReminder: true,\n          color: generateRandomColor(),\n          startDate: new Date().toISOString().split('T')[0],\n          endDate: '',\n          maxDailyDose: 0,\n          enableCyclicDosing: false,\n          enableTapering: false,\n        });\n      }\n    }\n  }, [isOpen, medication, reset]);\n\n  const onSubmit = (data: FormData) => {\n    const medicationData = {\n      name: data.name.trim(),\n      dosage: data.dosage.trim(),\n      unit: data.unit,\n      frequency: data.frequency,\n      category: data.category,\n      color: data.color,\n      notes: data.notes?.trim() || undefined,\n      sideEffects: data.sideEffects ? data.sideEffects.split(',').map(s => s.trim()).filter(Boolean) : undefined,\n      interactions: data.interactions ? data.interactions.split(',').map(s => s.trim()).filter(Boolean) : undefined,\n      prescribedBy: data.prescribedBy?.trim() || undefined,\n      pharmacy: data.pharmacy?.trim() || undefined,\n      pillsRemaining: data.pillsRemaining || undefined,\n      totalPills: data.totalPills || undefined,\n      refillReminder: data.refillReminder,\n      isCustom: true,\n      isActive: true,\n      startDate: new Date(data.startDate),\n      endDate: data.endDate ? new Date(data.endDate) : undefined,\n      maxDailyDose: data.maxDailyDose || undefined,\n    };\n\n    if (isEditing && medication) {\n      updateMedication(medication.id, medicationData);\n      toast.success('Medication updated successfully');\n    } else {\n      addMedication({\n        ...medicationData,\n        riskLevel: 'low',\n        dependencyRiskCategory: 'low-risk'\n      });\n      toast.success('Medication added successfully');\n    }\n\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n      <div className=\"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0\">\n        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" onClick={onClose} />\n        \n        <div className=\"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl\">\n          <form onSubmit={handleSubmit(onSubmit)}>\n            <div className=\"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h3 className=\"text-lg font-medium text-gray-900\">\n                  {isEditing ? 'Edit Medication' : 'Add New Medication'}\n                </h3>\n                <button\n                  type=\"button\"\n                  onClick={onClose}\n                  className=\"rounded-md bg-white text-gray-400 hover:text-gray-500\"\n                >\n                  <X className=\"h-6 w-6\" />\n                </button>\n              </div>\n\n              <div className=\"space-y-6\">\n                {/* Basic Information */}\n                <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n                  <div className=\"sm:col-span-2\">\n                    <label className=\"block text-sm font-medium text-gray-700\">\n                      Medication Name *\n                    </label>\n                    <div className=\"relative\">\n                      <div className=\"relative\">\n                        <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                        <input\n                          type=\"text\"\n                          {...register('name', { required: 'Medication name is required' })}\n                          className=\"input mt-1 pl-10\"\n                          placeholder=\"Search medications, supplements, vitamins...\"\n                          onFocus={() => medicationName && medicationName.length >= 2 && setShowSuggestions(true)}\n                          onBlur={() => setTimeout(() => setShowSuggestions(false), 200)}\n                        />\n                      </div>\n                      \n                      {/* Suggestions Dropdown */}\n                      {showSuggestions && medicationSuggestions.length > 0 && (\n                        <div className=\"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto\">\n                          {medicationSuggestions.map((suggestion, index) => (\n                            <button\n                              key={`${suggestion.name}-${index}`}\n                              type=\"button\"\n                              onClick={() => handleMedicationSelect(suggestion.name)}\n                              className=\"w-full text-left px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0\"\n                            >\n                              <div className=\"flex items-center justify-between\">\n                                <div className=\"flex-1\">\n                                  <div className=\"font-medium text-gray-900\">{suggestion.name}</div>\n                                  <div className=\"text-sm text-gray-500\">{suggestion.description}</div>\n                                </div>\n                                <div className=\"flex flex-col items-end ml-4\">\n                                  <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\n                                    suggestion.category === 'prescription' ? 'bg-blue-100 text-blue-800' :\n                                    suggestion.category === 'over-the-counter' ? 'bg-green-100 text-green-800' :\n                                    suggestion.category === 'supplement' ? 'bg-yellow-100 text-yellow-800' :\n                                    suggestion.category === 'vitamin' ? 'bg-purple-100 text-purple-800' :\n                                    suggestion.category === 'herbal' ? 'bg-green-100 text-green-800' :\n                                    'bg-gray-100 text-gray-800'\n                                  }`}>\n                                    {suggestion.category}\n                                  </span>\n                                  <span className={`mt-1 text-xs px-1 py-0.5 rounded ${\n                                    suggestion.riskLevel === 'high' ? 'bg-red-100 text-red-600' :\n                                    suggestion.riskLevel === 'moderate' ? 'bg-orange-100 text-orange-600' :\n                                    suggestion.riskLevel === 'low' ? 'bg-yellow-100 text-yellow-600' :\n                                    'bg-gray-100 text-gray-600'\n                                  }`}>\n                                    {suggestion.riskLevel} risk\n                                  </span>\n                                </div>\n                              </div>\n                            </button>\n                          ))}\n                        </div>\n                      )}\n                    </div>\n                    {errors.name && (\n                      <p className=\"mt-1 text-sm text-red-600\">{errors.name.message}</p>\n                    )}\n                    \n                    {/* Selected Medication Info */}\n                    {selectedMedicationData && (\n                      <div className=\"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n                        <div className=\"flex items-center space-x-2\">\n                          <Check className=\"h-4 w-4 text-blue-600\" />\n                          <span className=\"text-sm font-medium text-blue-900\">Medication Auto-filled</span>\n                        </div>\n                        <p className=\"text-sm text-blue-700 mt-1\">{selectedMedicationData.description}</p>\n                        {selectedMedicationData.withdrawalRisk !== 'none' && (\n                          <p className=\"text-sm text-orange-600 mt-1 font-medium\">\n                             Withdrawal Risk: {selectedMedicationData.withdrawalRisk}\n                          </p>\n                        )}\n                      </div>\n                    )}\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">\n                      Dosage *\n                    </label>\n                    <input\n                      type=\"text\"\n                      {...register('dosage', { required: 'Dosage is required' })}\n                      className=\"input mt-1\"\n                      placeholder=\"e.g., 50\"\n                    />\n                    {errors.dosage && (\n                      <p className=\"mt-1 text-sm text-red-600\">{errors.dosage.message}</p>\n                    )}\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">\n                      Unit *\n                    </label>\n                    <select {...register('unit')} className=\"input mt-1\">\n                      <option value=\"mg\">mg</option>\n                      <option value=\"g\">g</option>\n                      <option value=\"mcg\">mcg</option>\n                      <option value=\"ml\">ml</option>\n                      <option value=\"tablets\">tablets</option>\n                      <option value=\"capsules\">capsules</option>\n                      <option value=\"drops\">drops</option>\n                      <option value=\"sprays\">sprays</option>\n                      <option value=\"patches\">patches</option>\n                      <option value=\"iu\">IU</option>\n                      <option value=\"units\">units</option>\n                    </select>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">\n                      Frequency *\n                    </label>\n                    <select {...register('frequency')} className=\"input mt-1\">\n                      <option value=\"as-needed\">As needed</option>\n                      <option value=\"once-daily\">Once daily</option>\n                      <option value=\"twice-daily\">Twice daily</option>\n                      <option value=\"three-times-daily\">Three times daily</option>\n                      <option value=\"four-times-daily\">Four times daily</option>\n                      <option value=\"every-other-day\">Every other day</option>\n                      <option value=\"weekly\">Weekly</option>\n                      <option value=\"monthly\">Monthly</option>\n                      <option value=\"custom\">Custom</option>\n                    </select>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">\n                      Category *\n                    </label>\n                    <select {...register('category')} className=\"input mt-1\">\n                      <option value=\"prescription\">Prescription</option>\n                      <option value=\"over-the-counter\">Over-the-counter</option>\n                      <option value=\"supplement\">Supplement</option>\n                      <option value=\"vitamin\">Vitamin</option>\n                      <option value=\"herbal\">Herbal</option>\n                      <option value=\"injection\">Injection</option>\n                      <option value=\"topical\">Topical</option>\n                      <option value=\"emergency\">Emergency</option>\n                    </select>\n                  </div>\n                </div>\n\n                {/* Color Selection */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Color\n                  </label>\n                  <div className=\"flex items-center space-x-2\">\n                    <div\n                      className=\"w-8 h-8 rounded-full border-2 border-gray-300\"\n                      style={{ backgroundColor: selectedColor }}\n                    />\n                    <div className=\"flex flex-wrap gap-2\">\n                      {colors.map((color, index) => (\n                        <button\n                          key={`color-${index}-${color}`}\n                          type=\"button\"\n                          onClick={() => setValue('color', color)}\n                          className={`w-6 h-6 rounded-full border-2 ${\n                            selectedColor === color ? 'border-gray-900' : 'border-gray-300'\n                          }`}\n                          style={{ backgroundColor: color }}\n                        />\n                      ))}\n                    </div>\n                  </div>\n                </div>\n\n                {/* Dates */}\n                <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">\n                      Start Date *\n                    </label>\n                    <input\n                      type=\"date\"\n                      {...register('startDate', { required: 'Start date is required' })}\n                      className=\"input mt-1\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">\n                      End Date (Optional)\n                    </label>\n                    <input\n                      type=\"date\"\n                      {...register('endDate')}\n                      className=\"input mt-1\"\n                    />\n                  </div>\n                </div>\n\n                {/* Inventory Management */}\n                <div className=\"space-y-4\">\n                  <h4 className=\"text-md font-medium text-gray-900\">Inventory Management</h4>\n                  <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700\">\n                        Pills Remaining\n                      </label>\n                      <input\n                        type=\"number\"\n                        min=\"0\"\n                        {...register('pillsRemaining', { valueAsNumber: true })}\n                        className=\"input mt-1\"\n                        placeholder=\"0\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700\">\n                        Total Pills\n                      </label>\n                      <input\n                        type=\"number\"\n                        min=\"0\"\n                        {...register('totalPills', { valueAsNumber: true })}\n                        className=\"input mt-1\"\n                        placeholder=\"0\"\n                      />\n                    </div>\n                  </div>\n\n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      {...register('refillReminder')}\n                      className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                    />\n                    <label className=\"ml-2 block text-sm text-gray-900\">\n                      Enable refill reminders\n                    </label>\n                  </div>\n                </div>\n\n                {/* Additional Information */}\n                <div className=\"space-y-4\">\n                  <h4 className=\"text-md font-medium text-gray-900\">Additional Information</h4>\n                  \n                  <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700\">\n                        Prescribed By\n                      </label>\n                      <input\n                        type=\"text\"\n                        {...register('prescribedBy')}\n                        className=\"input mt-1\"\n                        placeholder=\"Doctor's name\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700\">\n                        Pharmacy\n                      </label>\n                      <input\n                        type=\"text\"\n                        {...register('pharmacy')}\n                        className=\"input mt-1\"\n                        placeholder=\"Pharmacy name\"\n                      />\n                    </div>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">\n                      Notes\n                    </label>\n                    <textarea\n                      {...register('notes')}\n                      rows={3}\n                      className=\"input mt-1\"\n                      placeholder=\"Any additional notes about this medication...\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">\n                      Side Effects (comma-separated)\n                    </label>\n                    <input\n                      type=\"text\"\n                      {...register('sideEffects')}\n                      className=\"input mt-1\"\n                      placeholder=\"e.g., nausea, headache, dizziness\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">\n                      Drug Interactions (comma-separated)\n                    </label>\n                    <input\n                      type=\"text\"\n                      {...register('interactions')}\n                      className=\"input mt-1\"\n                      placeholder=\"e.g., aspirin, warfarin\"\n                    />\n                  </div>\n                </div>\n\n                {/* Advanced Features */}\n                <div className=\"space-y-4\">\n                  <h4 className=\"text-md font-medium text-gray-900\">Advanced Features</h4>\n                  \n                  {/* Tapering Plan Display */}\n                  {taperingPlan && (\n                    <div className=\"p-4 bg-orange-50 border border-orange-200 rounded-lg\">\n                      <div className=\"flex items-center space-x-2 mb-3\">\n                        <span className=\"text-orange-600 font-medium\"> Tapering Plan Required</span>\n                      </div>\n                      <p className=\"text-sm text-orange-700 mb-3\">\n                        This medication requires gradual tapering to prevent withdrawal symptoms.\n                      </p>\n                      <div className=\"space-y-2\">\n                        <div className=\"text-sm\">\n                          <strong>Method:</strong> {taperingPlan.method}\n                        </div>\n                        <div className=\"text-sm\">\n                          <strong>Duration:</strong> {taperingPlan.totalDuration} days\n                        </div>\n                        <div className=\"text-sm\">\n                          <strong>Risk Level:</strong> {taperingPlan.riskLevel}\n                        </div>\n                        {taperingPlan.steps.length > 0 && (\n                          <details className=\"mt-2\">\n                            <summary className=\"text-sm font-medium text-orange-700 cursor-pointer\">\n                              View Tapering Schedule\n                            </summary>\n                            <div className=\"mt-2 space-y-1\">\n                              {taperingPlan.steps.slice(0, 3).map((step: any, index: number) => (\n                                <div key={index} className=\"text-xs text-orange-600 pl-4\">\n                                   {step.notes}\n                                </div>\n                              ))}\n                              {taperingPlan.steps.length > 3 && (\n                                <div className=\"text-xs text-orange-500 pl-4\">\n                                  ... and {taperingPlan.steps.length - 3} more steps\n                                </div>\n                              )}\n                            </div>\n                          </details>\n                        )}\n                        <div className=\"mt-2 p-2 bg-orange-100 rounded text-xs text-orange-800\">\n                          <strong>Important:</strong> Always consult your healthcare provider before starting any tapering schedule.\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                  \n                  {/* Risk Assessment Display */}\n                  {watch('name') && (\n                    <div className=\"p-3 bg-gray-50 rounded-lg\">\n                      <div className=\"flex items-center justify-between\">\n                        <span className=\"text-sm font-medium text-gray-700\">Risk Assessment:</span>\n                        <span className={`badge ${\n                          getRiskLevel(getDependencyRiskCategory(watch('name'))) === 'high' ? 'badge-danger' :\n                          getRiskLevel(getDependencyRiskCategory(watch('name'))) === 'moderate' ? 'badge-warning' :\n                          getRiskLevel(getDependencyRiskCategory(watch('name'))) === 'low' ? 'badge-success' :\n                          'badge-secondary'\n                        }`}>\n                          {getRiskLevel(getDependencyRiskCategory(watch('name')))} risk\n                        </span>\n                      </div>\n                      <p className=\"text-xs text-gray-500 mt-1\">\n                        Category: {getDependencyRiskCategory(watch('name')).replace('-', ' ')}\n                      </p>\n                    </div>\n                  )}\n\n                  <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700\">\n                        Maximum Daily Dose (Safety Limit)\n                      </label>\n                      <input\n                        type=\"number\"\n                        min=\"0\"\n                        step=\"0.1\"\n                        {...register('maxDailyDose', { valueAsNumber: true })}\n                        className=\"input mt-1\"\n                        placeholder=\"Optional safety limit\"\n                      />\n                      <p className=\"text-xs text-gray-500 mt-1\">\n                        Set a maximum daily dose to prevent accidental overdosing\n                      </p>\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-3\">\n                    <div className=\"flex items-center\">\n                      <input\n                        type=\"checkbox\"\n                        {...register('enableCyclicDosing')}\n                        className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                      />\n                      <label className=\"ml-2 block text-sm text-gray-900\">\n                        Enable cyclic dosing patterns\n                      </label>\n                    </div>\n                    <p className=\"text-xs text-gray-500 ml-6\">\n                      Support for on/off cycles, tapering schedules, and variable dosing\n                    </p>\n\n                    <div className=\"flex items-center\">\n                      <input\n                        type=\"checkbox\"\n                        {...register('enableTapering')}\n                        className=\"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded\"\n                      />\n                      <label className=\"ml-2 block text-sm text-gray-900\">\n                        Enable tapering schedule\n                      </label>\n                    </div>\n                    <p className=\"text-xs text-gray-500 ml-6\">\n                      Gradual dose reduction to safely discontinue medication\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6\">\n              <button\n                type=\"submit\"\n                className=\"btn-primary w-full sm:ml-3 sm:w-auto\"\n              >\n                {isEditing ? 'Update Medication' : 'Add Medication'}\n              </button>\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"btn-secondary mt-3 w-full sm:mt-0 sm:w-auto\"\n              >\n                Cancel\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { X, AlertTriangle, Calendar, TrendingDown, CheckCircle2, Clock, Heart, Settings, Brain, Lightbulb } from 'lucide-react';\nimport { generateTaperingPlan, getMedicationByName, generateEnhancedTaperingPlan, generateIntelligentTaperingRecommendation } from '@/services/medicationDatabase';\nimport { useMedicationStore } from '@/store';\nimport { Medication } from '@/types';\nimport { formatDate, calculateOptimalPillReduction, formatPillCountsForTapering, calculatePillCountsForDose } from '@/utils/helpers';\nimport toast from 'react-hot-toast';\n\ninterface TaperingPlanModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  medication: Medication;\n}\n\nexport function TaperingPlanModal({ isOpen, onClose, medication }: TaperingPlanModalProps) {\n  const { updateMedication, addSmartMessage } = useMedicationStore();\n  const [taperingPlan, setTaperingPlan] = React.useState<any>(null);\n  const [intelligentRecommendation, setIntelligentRecommendation] = React.useState<any>(null);\n  const [selectedPlan, setSelectedPlan] = React.useState<'intelligent' | 'custom' | 'advanced'>('intelligent');\n  const [customDuration, setCustomDuration] = React.useState(4);\n  const [customReduction, setCustomReduction] = React.useState(25);\n  const [customMethod, setCustomMethod] = React.useState<'linear' | 'exponential' | 'hyperbolic'>('hyperbolic');\n  const [includeStabilization, setIncludeStabilization] = React.useState(false);\n  const [showAdvanced, setShowAdvanced] = React.useState(false);\n  const [startDate, setStartDate] = React.useState(new Date().toISOString().split('T')[0]);\n  const [doctorApproval, setDoctorApproval] = React.useState(false);\n  const [understanding, setUnderstanding] = React.useState(false);\n\n  React.useEffect(() => {\n    if (isOpen && medication) {\n      const currentDose = parseFloat(medication.dosage);\n      \n      // Generate intelligent recommendation\n      const intelligent = generateIntelligentTaperingRecommendation(\n        medication.name, currentDose, medication.unit, medication\n      );\n      setIntelligentRecommendation(intelligent);\n      \n      // Generate enhanced plan with intelligent recommendations\n      const plan = generateEnhancedTaperingPlan(\n        medication.name, currentDose, medication.unit, medication\n      );\n      setTaperingPlan(plan);\n      \n      // Set custom defaults from intelligent recommendation\n      if (intelligent?.adjustedPlan) {\n        setCustomDuration(intelligent.adjustedPlan.durationWeeks);\n        setCustomReduction(intelligent.adjustedPlan.reductionPercent);\n        setCustomMethod(intelligent.adjustedPlan.method);\n      }\n    }\n  }, [isOpen, medication]);\n\n  const generateCustomPlan = () => {\n    const currentDose = parseFloat(medication.dosage);\n    \n    // Use enhanced plan generation with custom options\n    const enhancedPlan = generateEnhancedTaperingPlan(\n      medication.name, \n      currentDose, \n      medication.unit, \n      medication,\n      {\n        preferredMethod: customMethod,\n        preferredDuration: customDuration,\n        preferredReduction: customReduction,\n        includeStabilizationPeriods: includeStabilization\n      }\n    );\n    \n    return enhancedPlan || {\n      medicationName: medication.name,\n      method: customMethod,\n      totalDuration: customDuration * 7,\n      steps: [],\n      warnings: [\n        \"Custom tapering plan - consult with your healthcare provider\",\n        \"Monitor for withdrawal symptoms and adjust pace if necessary\",\n        \"Never stop abruptly if experiencing severe withdrawal symptoms\"\n      ],\n      riskLevel: 'moderate',\n      canPause: true,\n      flexibilityNotes: \"This custom schedule can be paused or slowed at any point.\"\n    };\n  };\n\n  const getDisplayPlan = () => {\n    if (selectedPlan === 'custom' || selectedPlan === 'advanced') {\n      return generateCustomPlan();\n    }\n    return taperingPlan;\n  };\n\n  const handleStartTapering = () => {\n    if (!doctorApproval || !understanding) {\n      toast.error('Please confirm doctor approval and understanding before starting');\n      return;\n    }\n\n    const plan = getDisplayPlan();\n    if (!plan) return;\n\n    // Create tapering schedule\n    const taperingSchedule = {\n      id: `tapering-${Date.now()}`,\n      startDate: new Date(startDate),\n      endDate: new Date(new Date(startDate).getTime() + plan.totalDuration * 24 * 60 * 60 * 1000),\n      initialDose: parseFloat(medication.dosage),\n      finalDose: 0,\n      taperingMethod: plan.method as 'linear' | 'exponential' | 'hyperbolic' | 'custom',\n      customSteps: plan.steps.map((step: any) => ({\n        day: step.day,\n        dosageMultiplier: step.dose / parseFloat(medication.dosage),\n        notes: step.notes\n      })),\n      isActive: true\n    };\n\n    // Update medication with tapering schedule\n    updateMedication(medication.id, {\n      tapering: {\n        ...taperingSchedule,\n        canPause: plan.canPause || false,\n        flexibilityNotes: plan.flexibilityNotes,\n        intelligentRecommendations: plan.intelligentRecommendations,\n        customizationUsed: plan.customizationUsed,\n        includeStabilizationPeriods: plan.includeStabilizationPeriods\n      }\n    });\n\n    // Add smart message about starting tapering\n    addSmartMessage({\n      medicationId: medication.id,\n      type: 'risk-alert',\n      priority: 'high',\n      title: 'Tapering Schedule Started',\n      message: `You've started a ${plan.totalDuration}-day tapering schedule for ${medication.name}. Remember to monitor for withdrawal symptoms and contact your healthcare provider if you experience any concerning effects.`,\n      psychologicalApproach: 'empathetic-support',\n      scheduledTime: new Date(),\n      expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000) // 7 days\n    });\n\n    toast.success(`Tapering plan started for ${medication.name}`);\n    onClose();\n  };\n\n  const getRiskColor = (riskLevel: string) => {\n    switch (riskLevel) {\n      case 'severe':\n        return 'text-red-700 bg-red-100 border-red-300';\n      case 'high':\n        return 'text-red-600 bg-red-50 border-red-200';\n      case 'moderate':\n        return 'text-orange-600 bg-orange-50 border-orange-200';\n      case 'low':\n        return 'text-yellow-600 bg-yellow-50 border-yellow-200';\n      default:\n        return 'text-gray-600 bg-gray-50 border-gray-200';\n    }\n  };\n\n  const plan = getDisplayPlan();\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n      <div className=\"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0\">\n        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" onClick={onClose} />\n        \n        <div className=\"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl\">\n          <div className=\"bg-white px-4 pb-4 pt-5 sm:p-6\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <div className=\"flex items-center space-x-3\">\n                <TrendingDown className=\"h-6 w-6 text-orange-600\" />\n                <h3 className=\"text-lg font-medium text-gray-900\">\n                  Tapering Plan for {medication.name}\n                </h3>\n              </div>\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"rounded-md bg-white text-gray-400 hover:text-gray-500\"\n              >\n                <X className=\"h-6 w-6\" />\n              </button>\n            </div>\n\n            <div className=\"space-y-6\">\n              {/* Warning Banner */}\n              <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg\">\n                <div className=\"flex items-start space-x-3\">\n                  <AlertTriangle className=\"h-5 w-5 text-red-600 mt-0.5 flex-shrink-0\" />\n                  <div>\n                    <h4 className=\"text-sm font-medium text-red-800\">Important Safety Information</h4>\n                    <div className=\"mt-2 text-sm text-red-700\">\n                      <ul className=\"list-disc list-inside space-y-1\">\n                        <li>Never stop this medication abruptly - serious withdrawal symptoms may occur</li>\n                        <li>This tapering plan must be supervised by your healthcare provider</li>\n                        <li>Monitor for withdrawal symptoms and contact your doctor if they become severe</li>\n                        <li>Do not adjust the schedule without medical guidance</li>\n                      </ul>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Medication Info */}\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                  <div>\n                    <span className=\"text-sm font-medium text-gray-700\">Current Dose:</span>\n                    <p className=\"text-lg font-semibold text-gray-900\">{medication.dosage} {medication.unit}</p>\n                  </div>\n                  <div>\n                    <span className=\"text-sm font-medium text-gray-700\">Risk Level:</span>\n                    <span className={`inline-flex items-center px-2 py-1 rounded text-sm font-medium ${getRiskColor(plan?.riskLevel || 'moderate')}`}>\n                      {plan?.riskLevel || 'moderate'} withdrawal risk\n                    </span>\n                  </div>\n                  <div>\n                    <span className=\"text-sm font-medium text-gray-700\">Category:</span>\n                    <p className=\"text-sm text-gray-900\">{medication.dependencyRiskCategory.replace('-', ' ')}</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Intelligent Recommendations */}\n              {intelligentRecommendation && (\n                <div className=\"bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg p-4\">\n                  <div className=\"flex items-start space-x-3\">\n                    <Brain className=\"h-5 w-5 text-blue-600 mt-0.5\" />\n                    <div className=\"flex-1\">\n                      <h4 className=\"text-sm font-medium text-blue-800\">Intelligent Tapering Analysis</h4>\n                      <p className=\"text-sm text-blue-700 mt-1\">\n                        Based on your {intelligentRecommendation.monthsOnMedication} months of {medication.name} use\n                      </p>\n                      \n                      {intelligentRecommendation.adjustmentReasons.length > 0 && (\n                        <div className=\"mt-2 space-y-1\">\n                          {intelligentRecommendation.adjustmentReasons.map((reason: string, index: number) => (\n                            <div key={index} className=\"flex items-start space-x-2\">\n                              <Lightbulb className=\"h-3 w-3 text-amber-500 mt-1 flex-shrink-0\" />\n                              <span className=\"text-xs text-blue-700\">{reason}</span>\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                      \n                      <div className=\"mt-2 grid grid-cols-3 gap-3 text-xs\">\n                        <div className=\"text-center\">\n                          <div className=\"font-medium text-blue-800\">Suggested Duration</div>\n                          <div className=\"text-blue-600\">{intelligentRecommendation.adjustedPlan.durationWeeks} weeks</div>\n                        </div>\n                        <div className=\"text-center\">\n                          <div className=\"font-medium text-blue-800\">Reduction Rate</div>\n                          <div className=\"text-blue-600\">{intelligentRecommendation.adjustedPlan.reductionPercent}%</div>\n                        </div>\n                        <div className=\"text-center\">\n                          <div className=\"font-medium text-blue-800\">Method</div>\n                          <div className=\"text-blue-600\">{intelligentRecommendation.adjustedPlan.method}</div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Plan Selection */}\n              <div className=\"space-y-4\">\n                <h4 className=\"text-md font-medium text-gray-900\">Choose Tapering Approach</h4>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-3\">\n                  <div \n                    className={`border rounded-lg p-3 cursor-pointer transition-colors ${\n                      selectedPlan === 'intelligent' ? 'border-blue-500 bg-blue-50' : 'border-gray-300 hover:border-gray-400'\n                    }`}\n                    onClick={() => setSelectedPlan('intelligent')}\n                  >\n                    <div className=\"flex items-center space-x-2 mb-2\">\n                      <input \n                        type=\"radio\" \n                        checked={selectedPlan === 'intelligent'} \n                        onChange={() => setSelectedPlan('intelligent')}\n                        className=\"text-blue-600\"\n                      />\n                      <Brain className=\"h-4 w-4 text-blue-600\" />\n                      <span className=\"font-medium text-gray-900\">Smart Plan</span>\n                    </div>\n                    <p className=\"text-sm text-gray-600\">\n                      AI-optimized schedule based on your medication history and risk factors\n                    </p>\n                    {taperingPlan && (\n                      <div className=\"mt-2 text-xs text-gray-700\">\n                        <strong>Duration:</strong> {taperingPlan.totalDuration} days<br/>\n                        <strong>Method:</strong> {taperingPlan.method === 'hyperbolic' ? 'Hyperbolic' : taperingPlan.method}\n                      </div>\n                    )}\n                  </div>\n\n                  <div \n                    className={`border rounded-lg p-3 cursor-pointer transition-colors ${\n                      selectedPlan === 'custom' ? 'border-blue-500 bg-blue-50' : 'border-gray-300 hover:border-gray-400'\n                    }`}\n                    onClick={() => setSelectedPlan('custom')}\n                  >\n                    <div className=\"flex items-center space-x-2 mb-2\">\n                      <input \n                        type=\"radio\" \n                        checked={selectedPlan === 'custom'} \n                        onChange={() => setSelectedPlan('custom')}\n                        className=\"text-blue-600\"\n                      />\n                      <Settings className=\"h-4 w-4 text-gray-600\" />\n                      <span className=\"font-medium text-gray-900\">Basic Custom</span>\n                    </div>\n                    <p className=\"text-sm text-gray-600\">\n                      Simple customization of duration and reduction rate\n                    </p>\n                  </div>\n                  \n                  <div \n                    className={`border rounded-lg p-3 cursor-pointer transition-colors ${\n                      selectedPlan === 'advanced' ? 'border-blue-500 bg-blue-50' : 'border-gray-300 hover:border-gray-400'\n                    }`}\n                    onClick={() => setSelectedPlan('advanced')}\n                  >\n                    <div className=\"flex items-center space-x-2 mb-2\">\n                      <input \n                        type=\"radio\" \n                        checked={selectedPlan === 'advanced'} \n                        onChange={() => setSelectedPlan('advanced')}\n                        className=\"text-blue-600\"\n                      />\n                      <Settings className=\"h-4 w-4 text-purple-600\" />\n                      <span className=\"font-medium text-gray-900\">Advanced</span>\n                    </div>\n                    <p className=\"text-sm text-gray-600\">\n                      Full customization with method selection and stabilization periods\n                    </p>\n                  </div>\n                </div>\n\n                {/* Custom Plan Options */}\n                {selectedPlan === 'custom' && (\n                  <div className=\"p-4 bg-blue-50 border border-blue-200 rounded-lg\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Duration (weeks)\n                        </label>\n                        <input\n                          type=\"number\"\n                          min=\"1\"\n                          max=\"52\"\n                          value={customDuration}\n                          onChange={(e) => setCustomDuration(parseInt(e.target.value))}\n                          className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm\"\n                        />\n                        {intelligentRecommendation && customDuration < intelligentRecommendation.adjustedPlan.durationWeeks && (\n                          <p className=\"text-xs text-amber-600 mt-1\">\n                             Shorter than recommended ({intelligentRecommendation.adjustedPlan.durationWeeks} weeks)\n                          </p>\n                        )}\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Reduction Rate (%)\n                        </label>\n                        <input\n                          type=\"number\"\n                          min=\"1\"\n                          max=\"50\"\n                          value={customReduction}\n                          onChange={(e) => setCustomReduction(parseInt(e.target.value))}\n                          className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm\"\n                        />\n                        {intelligentRecommendation && customReduction > intelligentRecommendation.adjustedPlan.reductionPercent && (\n                          <p className=\"text-xs text-amber-600 mt-1\">\n                             Faster than recommended ({intelligentRecommendation.adjustedPlan.reductionPercent}%)\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Advanced Plan Options */}\n                {selectedPlan === 'advanced' && (\n                  <div className=\"p-4 bg-purple-50 border border-purple-200 rounded-lg\">\n                    <div className=\"space-y-4\">\n                      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                        <div>\n                          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                            Duration (weeks)\n                          </label>\n                          <input\n                            type=\"number\"\n                            min=\"1\"\n                            max=\"52\"\n                            value={customDuration}\n                            onChange={(e) => setCustomDuration(parseInt(e.target.value))}\n                            className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm\"\n                          />\n                        </div>\n                        <div>\n                          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                            Reduction Rate (%)\n                          </label>\n                          <input\n                            type=\"number\"\n                            min=\"1\"\n                            max=\"50\"\n                            value={customReduction}\n                            onChange={(e) => setCustomReduction(parseInt(e.target.value))}\n                            className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm\"\n                          />\n                        </div>\n                        <div>\n                          <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                            Tapering Method\n                          </label>\n                          <select\n                            value={customMethod}\n                            onChange={(e) => setCustomMethod(e.target.value as 'linear' | 'exponential' | 'hyperbolic')}\n                            className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm\"\n                          >\n                            <option value=\"hyperbolic\">Hyperbolic (Recommended)</option>\n                            <option value=\"linear\">Linear</option>\n                            <option value=\"exponential\">Exponential</option>\n                          </select>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex items-center space-x-2\">\n                        <input\n                          type=\"checkbox\"\n                          id=\"stabilization\"\n                          checked={includeStabilization}\n                          onChange={(e) => setIncludeStabilization(e.target.checked)}\n                          className=\"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded\"\n                        />\n                        <label htmlFor=\"stabilization\" className=\"text-sm text-gray-700\">\n                          Include stabilization periods between reductions\n                        </label>\n                      </div>\n                      \n                      <div className=\"text-xs text-gray-600 bg-white p-2 rounded border\">\n                        <strong>Method Explanations:</strong><br/>\n                         <strong>Hyperbolic:</strong> Reduces by % of current dose (e.g., 10% of whatever you're taking now)<br/>\n                         <strong>Linear:</strong> Reduces by fixed amount each step<br/>\n                         <strong>Exponential:</strong> Larger reductions early, smaller reductions later\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n\n              {/* Tapering Schedule */}\n              {plan && (\n                <div className=\"space-y-4\">\n                  <h4 className=\"text-md font-medium text-gray-900 flex items-center space-x-2\">\n                    <Calendar className=\"h-4 w-4\" />\n                    <span>Tapering Schedule</span>\n                  </h4>\n                  \n                  <div className=\"bg-gray-50 p-4 rounded-lg\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Start Date\n                        </label>\n                        <input\n                          type=\"date\"\n                          value={startDate}\n                          onChange={(e) => setStartDate(e.target.value)}\n                          className=\"w-full border border-gray-300 rounded-md px-3 py-2 text-sm\"\n                        />\n                      </div>\n                      <div>\n                        <span className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Estimated End Date\n                        </span>\n                        <p className=\"text-sm text-gray-900 py-2\">\n                          {formatDate(new Date(new Date(startDate).getTime() + plan.totalDuration * 24 * 60 * 60 * 1000))}\n                        </p>\n                      </div>\n                    </div>\n\n                    <div className=\"space-y-3 max-h-60 overflow-y-auto\">\n                      {plan.steps.map((step: any, index: number) => (\n                        <div key={index} className=\"bg-white p-3 rounded border border-gray-200\">\n                          <div className=\"flex items-center justify-between\">\n                            <div className=\"flex items-center space-x-3\">\n                              <div className=\"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center\">\n                                <span className=\"text-sm font-medium text-blue-800\">{index + 1}</span>\n                              </div>\n                              <div>\n                                <p className=\"text-sm font-medium text-gray-900\">{step.notes}</p>\n                                <p className=\"text-xs text-gray-500\">\n                                  Day {step.day}  {formatDate(new Date(new Date(startDate).getTime() + step.day * 24 * 60 * 60 * 1000))}\n                                </p>\n                              </div>\n                            </div>\n                            <div className=\"text-right\">\n                              <p className=\"text-sm font-semibold text-gray-900\">\n                                {medication.useMultiplePills ? \n                                  formatPillCountsForTapering(\n                                    calculatePillCountsForDose(step.dose, medication), \n                                    medication\n                                  ) : \n                                  `${step.dose} ${medication.unit}`\n                                }\n                              </p>\n                              <p className=\"text-xs text-gray-500\">\n                                {Math.round((step.dose / parseFloat(medication.dosage)) * 100)}% of original\n                              </p>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Safety Warnings */}\n              {plan && (\n                <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-4\">\n                  <h4 className=\"text-sm font-medium text-orange-800 mb-2\">Safety Warnings & Guidelines</h4>\n                  <div className=\"space-y-2\">\n                    {plan.warnings.map((warning: string, index: number) => (\n                      <div key={index} className=\"flex items-start space-x-2\">\n                        <AlertTriangle className=\"h-4 w-4 text-orange-600 mt-0.5 flex-shrink-0\" />\n                        <p className=\"text-sm text-orange-700\">{warning}</p>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Confirmation Checkboxes */}\n              <div className=\"space-y-3\">\n                <h4 className=\"text-md font-medium text-gray-900\">Required Confirmations</h4>\n                \n                <div className=\"space-y-3\">\n                  <label className=\"flex items-start space-x-3\">\n                    <input\n                      type=\"checkbox\"\n                      checked={doctorApproval}\n                      onChange={(e) => setDoctorApproval(e.target.checked)}\n                      className=\"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                    />\n                    <div>\n                      <span className=\"text-sm font-medium text-gray-900\">Doctor Approval</span>\n                      <p className=\"text-sm text-gray-600\">\n                        I have discussed this tapering plan with my healthcare provider and received their approval to proceed.\n                      </p>\n                    </div>\n                  </label>\n\n                  <label className=\"flex items-start space-x-3\">\n                    <input\n                      type=\"checkbox\"\n                      checked={understanding}\n                      onChange={(e) => setUnderstanding(e.target.checked)}\n                      className=\"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                    />\n                    <div>\n                      <span className=\"text-sm font-medium text-gray-900\">Understanding & Commitment</span>\n                      <p className=\"text-sm text-gray-600\">\n                        I understand the risks of withdrawal and commit to following this schedule exactly as planned, monitoring for symptoms, and contacting my healthcare provider if problems arise.\n                      </p>\n                    </div>\n                  </label>\n                </div>\n              </div>\n\n              {/* Flexibility Information */}\n              {plan?.canPause && (\n                <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                  <div className=\"flex items-start space-x-3\">\n                    <Clock className=\"h-5 w-5 text-blue-600 mt-0.5\" />\n                    <div>\n                      <h4 className=\"text-sm font-medium text-blue-800\">Flexible Tapering Schedule</h4>\n                      <p className=\"text-sm text-blue-700 mt-1\">\n                        {plan.flexibilityNotes || \"This schedule can be paused or slowed at any point if withdrawal symptoms become problematic. Your comfort and safety always take priority over the timeline.\"}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Psychological Support Message */}\n              <div className=\"bg-purple-50 border border-purple-200 rounded-lg p-4\">\n                <div className=\"flex items-start space-x-3\">\n                  <Heart className=\"h-5 w-5 text-purple-600 mt-0.5\" />\n                  <div>\n                    <h4 className=\"text-sm font-medium text-purple-800\">You're Taking a Positive Step</h4>\n                    <p className=\"text-sm text-purple-700 mt-1\">\n                      Safely tapering off medication shows responsibility and commitment to your health. \n                      This process requires patience and support. Remember that it's normal to feel anxious \n                      about reducing medication - you're not alone, and your healthcare team is here to help.\n                    </p>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Footer */}\n          <div className=\"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6\">\n            <button\n              type=\"button\"\n              onClick={handleStartTapering}\n              disabled={!doctorApproval || !understanding}\n              className=\"w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed sm:ml-3 sm:w-auto\"\n            >\n              Start Tapering Plan\n            </button>\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"mt-3 w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto\"\n            >\n              Cancel\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { AlertTriangle, X } from 'lucide-react';\nimport { cn } from '@/utils/helpers';\n\ninterface ConfirmDialogProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onConfirm: () => void;\n  title: string;\n  message: string;\n  confirmText?: string;\n  cancelText?: string;\n  variant?: 'danger' | 'warning' | 'info';\n}\n\nexport function ConfirmDialog({\n  isOpen,\n  onClose,\n  onConfirm,\n  title,\n  message,\n  confirmText = 'Confirm',\n  cancelText = 'Cancel',\n  variant = 'danger'\n}: ConfirmDialogProps) {\n  if (!isOpen) return null;\n\n  const handleConfirm = () => {\n    onConfirm();\n    onClose();\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto mobile-safe-area\">\n      <div className=\"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0\">\n        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" onClick={onClose} />\n        \n        <div className=\"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 w-full max-w-lg mx-4 sm:mx-0\">\n          <div className=\"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4\">\n            <div className=\"sm:flex sm:items-start\">\n              <div className={cn(\n                'mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full sm:mx-0 sm:h-10 sm:w-10',\n                variant === 'danger' && 'bg-red-100',\n                variant === 'warning' && 'bg-yellow-100',\n                variant === 'info' && 'bg-blue-100'\n              )}>\n                <AlertTriangle className={cn(\n                  'h-6 w-6',\n                  variant === 'danger' && 'text-red-600',\n                  variant === 'warning' && 'text-yellow-600',\n                  variant === 'info' && 'text-blue-600'\n                )} />\n              </div>\n              <div className=\"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left flex-1\">\n                <h3 className=\"text-base font-semibold leading-6 text-gray-900\">\n                  {title}\n                </h3>\n                <div className=\"mt-2\">\n                  <p className=\"text-sm text-gray-500\">\n                    {message}\n                  </p>\n                </div>\n              </div>\n              <div className=\"absolute top-4 right-4\">\n                <button\n                  onClick={onClose}\n                  className=\"rounded-md bg-white text-gray-400 hover:text-gray-500\"\n                >\n                  <X className=\"h-5 w-5\" />\n                </button>\n              </div>\n            </div>\n          </div>\n          <div className=\"bg-gray-50 px-4 py-3 flex flex-col-reverse space-y-2 space-y-reverse sm:flex-row sm:space-y-0 sm:space-x-2 sm:px-6\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"inline-flex w-full justify-center rounded-md bg-white px-4 py-3 sm:py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 touch-target sm:w-auto\"\n            >\n              {cancelText}\n            </button>\n            <button\n              type=\"button\"\n              onClick={handleConfirm}\n              className={cn(\n                'inline-flex w-full justify-center rounded-md px-4 py-3 sm:py-2 text-sm font-semibold text-white shadow-sm touch-target sm:w-auto',\n                variant === 'danger' && 'bg-red-600 hover:bg-red-500 active:bg-red-700',\n                variant === 'warning' && 'bg-yellow-600 hover:bg-yellow-500 active:bg-yellow-700',\n                variant === 'info' && 'bg-blue-600 hover:bg-blue-500 active:bg-blue-700'\n              )}\n            >\n              {confirmText}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useState } from 'react';\nimport { Plus, Minus, Pill, Save, X } from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { PillConfiguration, DoseConfiguration, PillDoseComponent } from '@/types';\nimport { generateId } from '@/utils/helpers';\n\ninterface MultiplePillSelectorProps {\n  medicationId: string;\n  onClose: () => void;\n}\n\nexport function MultiplePillSelector({ medicationId, onClose }: MultiplePillSelectorProps) {\n  const {\n    medications,\n    addPillConfiguration,\n    addDoseConfiguration,\n    enableMultiplePills,\n    calculateTotalDoseFromPills,\n    updateMedication,\n  } = useMedicationStore();\n\n  const medication = medications.find((med) => med.id === medicationId);\n  \n  // Initialize with existing configurations if they exist, otherwise use defaults\n  const [pillConfigs, setPillConfigs] = useState<Omit<PillConfiguration, 'id'>[]>(() => {\n    if (medication?.pillConfigurations && medication.pillConfigurations.length > 0) {\n      return medication.pillConfigurations.map(config => ({\n        strength: config.strength,\n        unit: config.unit,\n        color: config.color || 'white',\n        shape: config.shape || 'round',\n        isActive: config.isActive !== false,\n        markings: config.markings || ''\n      }));\n    }\n    return [\n      {\n        strength: parseFloat(medication?.dosage || '1'),\n        unit: medication?.unit || 'mg',\n        color: 'white',\n        shape: 'round',\n        isActive: true,\n        markings: ''\n      },\n    ];\n  });\n\n  const [doseComponents, setDoseComponents] = useState<Omit<PillDoseComponent, 'pillConfigurationId'>[]>(() => {\n    if (medication?.doseConfigurations && medication.doseConfigurations.length > 0) {\n      const defaultDoseConfig = medication.doseConfigurations.find(\n        config => config.id === medication.defaultDoseConfigurationId\n      ) || medication.doseConfigurations[0];\n      \n      if (defaultDoseConfig?.pillComponents) {\n        return defaultDoseConfig.pillComponents.map(component => ({\n          quantity: component.quantity,\n          timing: 'together'\n        }));\n      }\n    }\n    return [{ quantity: 1, timing: 'together' }];\n  });\n\n  if (!medication) return null;\n\n  const addPillConfig = () => {\n    setPillConfigs([\n      ...pillConfigs,\n      {\n        strength: 1,\n        unit: medication.unit,\n        color: 'white',\n        shape: 'round',\n        isActive: true,\n      },\n    ]);\n  };\n\n  const removePillConfig = (index: number) => {\n    if (pillConfigs.length > 1) {\n      setPillConfigs(pillConfigs.filter((_, i) => i !== index));\n      // Remove corresponding dose components that reference this pill\n      setDoseComponents(doseComponents.filter((_, i) => i !== index));\n    }\n  };\n\n  const updatePillConfig = (index: number, updates: Partial<PillConfiguration>) => {\n    setPillConfigs(\n      pillConfigs.map((config, i) => (i === index ? { ...config, ...updates } : config))\n    );\n  };\n\n  const updateDoseComponent = (index: number, updates: Partial<PillDoseComponent>) => {\n    setDoseComponents(\n      doseComponents.map((component, i) => (i === index ? { ...component, ...updates } : component))\n    );\n  };\n\n  const addDoseComponent = () => {\n    if (doseComponents.length < pillConfigs.length) {\n      setDoseComponents([...doseComponents, { quantity: 1, timing: 'together' }]);\n    }\n  };\n\n  const calculateTotalDose = () => {\n    let total = 0;\n    doseComponents.forEach((component, index) => {\n      if (pillConfigs[index]) {\n        total += pillConfigs[index].strength * component.quantity;\n      }\n    });\n    return total;\n  };\n\n  const handleSave = () => {\n    // Create new pill configurations with IDs\n    const newPillConfigs = pillConfigs.map(config => ({\n      ...config,\n      id: generateId()\n    }));\n\n    // Create dose configuration with proper pill component links\n    const doseConfig: DoseConfiguration = {\n      id: generateId(),\n      name: 'Standard Dose',\n      pillComponents: doseComponents.map((component, index) => ({\n        ...component,\n        pillConfigurationId: newPillConfigs[index]?.id || generateId(),\n      })),\n      totalDoseAmount: calculateTotalDose(),\n      totalDoseUnit: medication.unit,\n      instructions: `Configured dose for ${medication.name}`,\n      isDefault: true,\n    };\n\n    // Create initial pill inventory\n    const pillInventory = newPillConfigs.map(config => ({\n      pillConfigurationId: config.id,\n      currentCount: medication.pillsRemaining || 30, // Use existing pills or default to 30\n      lastUpdated: new Date()\n    }));\n\n    // Update the medication with new configuration\n    updateMedication(medicationId, {\n      useMultiplePills: true,\n      pillConfigurations: newPillConfigs,\n      doseConfigurations: [doseConfig],\n      defaultDoseConfigurationId: doseConfig.id,\n      pillInventory: pillInventory,\n      updatedAt: new Date(),\n    });\n\n    console.log(' Multiple Pills enabled for', medication.name, {\n      pillConfigurations: newPillConfigs,\n      doseConfigurations: [doseConfig],\n      pillInventory: pillInventory\n    });\n\n    onClose();\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <div className=\"sticky top-0 bg-white border-b border-gray-200 px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <Pill className=\"h-6 w-6 text-blue-600\" />\n              <div>\n                <h3 className=\"text-lg font-medium text-gray-900\">\n                  {medication.useMultiplePills ? 'Edit' : 'Setup'} Multiple Pills for {medication.name}\n                </h3>\n                <p className=\"text-sm text-gray-500\">\n                  {medication.useMultiplePills \n                    ? 'Edit your existing pill configuration'\n                    : 'Configure different pill strengths and combinations'\n                  }\n                </p>\n              </div>\n            </div>\n            <button\n              onClick={onClose}\n              className=\"text-gray-400 hover:text-gray-500\"\n            >\n              <X className=\"h-6 w-6\" />\n            </button>\n          </div>\n        </div>\n\n        <div className=\"px-6 py-4 space-y-6\">\n          {/* Current medication info */}\n          <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n            <p className=\"text-sm font-medium text-blue-900\">Current Configuration</p>\n            <p className=\"text-sm text-blue-700\">\n              {medication.dosage} {medication.unit}  {medication.frequency.replace('-', ' ')}\n            </p>\n          </div>\n\n          {/* Pill Configurations */}\n          <div>\n            <div className=\"flex items-center justify-between mb-4\">\n              <h4 className=\"text-md font-medium text-gray-900\">Available Pill Strengths</h4>\n              <button\n                onClick={addPillConfig}\n                className=\"btn-secondary text-sm flex items-center space-x-1\"\n              >\n                <Plus className=\"h-4 w-4\" />\n                <span>Add Strength</span>\n              </button>\n            </div>\n\n            <div className=\"space-y-3\">\n              {pillConfigs.map((config, index) => (\n                <div key={index} className=\"border border-gray-200 rounded-lg p-4\">\n                  <div className=\"flex items-center justify-between mb-3\">\n                    <span className=\"text-sm font-medium text-gray-700\">\n                      Pill {index + 1}\n                    </span>\n                    {pillConfigs.length > 1 && (\n                      <button\n                        onClick={() => removePillConfig(index)}\n                        className=\"text-red-500 hover:text-red-600\"\n                      >\n                        <Minus className=\"h-4 w-4\" />\n                      </button>\n                    )}\n                  </div>\n                  \n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Strength\n                      </label>\n                      <div className=\"flex space-x-2\">\n                        <input\n                          type=\"number\"\n                          step=\"0.1\"\n                          value={config.strength}\n                          onChange={(e) =>\n                            updatePillConfig(index, { strength: parseFloat(e.target.value) })\n                          }\n                          className=\"input-field flex-1\"\n                        />\n                        <select\n                          value={config.unit}\n                          onChange={(e) =>\n                            updatePillConfig(index, { unit: e.target.value as any })\n                          }\n                          className=\"input-field w-20\"\n                        >\n                          <option value=\"mg\">mg</option>\n                          <option value=\"mcg\">mcg</option>\n                          <option value=\"g\">g</option>\n                          <option value=\"iu\">IU</option>\n                        </select>\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Color\n                      </label>\n                      <select\n                        value={config.color}\n                        onChange={(e) => updatePillConfig(index, { color: e.target.value })}\n                        className=\"input-field\"\n                      >\n                        <option value=\"white\">White</option>\n                        <option value=\"blue\">Blue</option>\n                        <option value=\"red\">Red</option>\n                        <option value=\"yellow\">Yellow</option>\n                        <option value=\"green\">Green</option>\n                        <option value=\"pink\">Pink</option>\n                        <option value=\"orange\">Orange</option>\n                      </select>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Dose Configuration */}\n          <div>\n            <div className=\"flex items-center justify-between mb-4\">\n              <h4 className=\"text-md font-medium text-gray-900\">Dose Combination</h4>\n              {doseComponents.length < pillConfigs.length && (\n                <button\n                  onClick={addDoseComponent}\n                  className=\"btn-secondary text-sm flex items-center space-x-1\"\n                >\n                  <Plus className=\"h-4 w-4\" />\n                  <span>Add Component</span>\n                </button>\n              )}\n            </div>\n\n            <div className=\"space-y-3\">\n              {doseComponents.map((component, index) => (\n                <div key={index} className=\"border border-gray-200 rounded-lg p-4\">\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <span className=\"text-sm font-medium text-gray-700\">\n                      {pillConfigs[index]?.strength} {pillConfigs[index]?.unit} pills\n                    </span>\n                    <span className=\"text-xs text-gray-500\">\n                      {pillConfigs[index]?.color}  {pillConfigs[index]?.shape}\n                    </span>\n                  </div>\n                  \n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Quantity\n                      </label>\n                      <input\n                        type=\"number\"\n                        step=\"0.5\"\n                        min=\"0.5\"\n                        value={component.quantity}\n                        onChange={(e) =>\n                          updateDoseComponent(index, { quantity: parseFloat(e.target.value) })\n                        }\n                        className=\"input-field\"\n                      />\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Timing\n                      </label>\n                      <select\n                        value={component.timing}\n                        onChange={(e) =>\n                          updateDoseComponent(index, { timing: e.target.value as any })\n                        }\n                        className=\"input-field\"\n                      >\n                        <option value=\"together\">Take together</option>\n                        <option value=\"split\">Split throughout day</option>\n                      </select>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Total Dose Preview */}\n          <div className=\"bg-green-50 border border-green-200 rounded-lg p-4\">\n            <h5 className=\"text-sm font-medium text-green-900 mb-2\">Total Dose Preview</h5>\n            <p className=\"text-lg font-semibold text-green-800\">\n              {calculateTotalDose()} {medication.unit}\n            </p>\n            <p className=\"text-sm text-green-700\">\n              {doseComponents.reduce((sum, comp) => sum + comp.quantity, 0)} total pills per dose\n            </p>\n          </div>\n        </div>\n\n        <div className=\"sticky bottom-0 bg-gray-50 px-6 py-4 border-t border-gray-200\">\n          <div className=\"flex justify-end space-x-3\">\n            <button onClick={onClose} className=\"btn-secondary\">\n              Cancel\n            </button>\n            <button onClick={handleSave} className=\"btn-primary flex items-center space-x-2\">\n              <Save className=\"h-4 w-4\" />\n              <span>{medication.useMultiplePills ? 'Update Configuration' : 'Enable Multiple Pills'}</span>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { X, AlertTriangle, FileText } from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { Medication, SideEffectReport } from '@/types';\nimport { generateId } from '@/utils/helpers';\nimport toast from 'react-hot-toast';\n\ninterface SideEffectReportModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  medication: Medication;\n}\n\nexport function SideEffectReportModal({ isOpen, onClose, medication }: SideEffectReportModalProps) {\n  const { updateMedication } = useMedicationStore();\n  \n  const [formData, setFormData] = React.useState({\n    sideEffect: '',\n    severity: 'mild' as const,\n    onset: 'gradual' as const,\n    frequency: 'occasional' as const,\n    duration: 24,\n    interference: 'none' as const,\n    bodySystem: 'other' as const,\n    description: '',\n    doctorNotified: false,\n    followUpRequired: false,\n    actionTaken: 'continued' as const,\n    relatedMedications: [] as string[]\n  });\n\n  const [currentStep, setCurrentStep] = React.useState(1);\n  const totalSteps = 4;\n\n  const commonSideEffects = {\n    neurological: ['Headache', 'Dizziness', 'Drowsiness', 'Confusion', 'Memory problems', 'Tremor'],\n    gastrointestinal: ['Nausea', 'Vomiting', 'Diarrhea', 'Constipation', 'Stomach pain', 'Loss of appetite'],\n    cardiovascular: ['Palpitations', 'Chest pain', 'Shortness of breath', 'Swelling', 'Changes in blood pressure'],\n    psychological: ['Anxiety', 'Depression', 'Mood changes', 'Irritability', 'Sleep problems', 'Cognitive issues'],\n    dermatological: ['Skin rash', 'Itching', 'Hives', 'Dry skin', 'Hair loss', 'Photosensitivity'],\n    respiratory: ['Cough', 'Difficulty breathing', 'Congestion', 'Wheezing', 'Throat irritation'],\n    other: ['Fatigue', 'Weight changes', 'Sexual dysfunction', 'Muscle pain', 'Joint pain', 'Vision changes']\n  };\n\n  const handleSubmit = () => {\n    const sideEffectReport: SideEffectReport = {\n      id: generateId(),\n      medicationId: medication.id,\n      medicationName: medication.name,\n      ...formData,\n      timestamp: new Date(),\n      resolved: false,\n      doctorNotified: false,\n      followUpRequired: false,\n      reportedDates: [new Date()]\n    };\n\n    const updatedReports = [...(medication.sideEffectReports || []), sideEffectReport];\n    \n    updateMedication(medication.id, {\n      sideEffectReports: updatedReports,\n      enhancedMonitoring: true\n    });\n\n    // Generate appropriate alerts based on severity\n    if (formData.severity === 'severe' || formData.severity === 'life-threatening') {\n      toast.error(' Severe side effect reported. Consider consulting your doctor immediately.', {\n        duration: 8000\n      });\n    } else {\n      toast.success(' Side effect report saved successfully', {\n        duration: 4000\n      });\n    }\n\n    onClose();\n    resetForm();\n  };\n\n  const resetForm = () => {\n    setFormData({\n      sideEffect: '',\n      severity: 'mild',\n      onset: 'gradual',\n      frequency: 'occasional',\n      duration: 24,\n      interference: 'none',\n      bodySystem: 'other',\n      description: '',\n      doctorNotified: false,\n      followUpRequired: false,\n      actionTaken: 'continued',\n      relatedMedications: []\n    });\n    setCurrentStep(1);\n  };\n\n  const nextStep = () => setCurrentStep(Math.min(currentStep + 1, totalSteps));\n  const prevStep = () => setCurrentStep(Math.max(currentStep - 1, 1));\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case 'mild': return 'text-green-600 bg-green-50 border-green-200';\n      case 'moderate': return 'text-yellow-600 bg-yellow-50 border-yellow-200';\n      case 'severe': return 'text-orange-600 bg-orange-50 border-orange-200';\n      case 'life-threatening': return 'text-red-600 bg-red-50 border-red-200';\n      default: return 'text-gray-600 bg-gray-50 border-gray-200';\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n        \n        {/* Header */}\n        <div className=\"sticky top-0 bg-white border-b border-gray-200 px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <AlertTriangle className=\"h-6 w-6 text-orange-600\" />\n              <div>\n                <h3 className=\"text-lg font-medium text-gray-900\">\n                  Report Side Effect\n                </h3>\n                <p className=\"text-sm text-gray-500\">\n                  {medication.name}  Step {currentStep} of {totalSteps}\n                </p>\n              </div>\n            </div>\n            <button onClick={onClose} className=\"text-gray-400 hover:text-gray-500\">\n              <X className=\"h-6 w-6\" />\n            </button>\n          </div>\n          \n          {/* Progress bar */}\n          <div className=\"mt-4 w-full bg-gray-200 rounded-full h-2\">\n            <div \n              className=\"bg-orange-600 h-2 rounded-full transition-all duration-300\"\n              style={{ width: `${(currentStep / totalSteps) * 100}%` }}\n            />\n          </div>\n        </div>\n\n        <div className=\"px-6 py-4\">\n          {/* Step 1: Side Effect & Body System */}\n          {currentStep === 1 && (\n            <div className=\"space-y-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Body System Affected\n                </label>\n                <select\n                  value={formData.bodySystem}\n                  onChange={(e) => setFormData(prev => ({ ...prev, bodySystem: e.target.value as any }))}\n                  className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n                >\n                  <option value=\"neurological\">Neurological (Brain & Nervous System)</option>\n                  <option value=\"gastrointestinal\">Gastrointestinal (Digestive System)</option>\n                  <option value=\"cardiovascular\">Cardiovascular (Heart & Circulation)</option>\n                  <option value=\"psychological\">Psychological (Mental Health)</option>\n                  <option value=\"dermatological\">Dermatological (Skin)</option>\n                  <option value=\"respiratory\">Respiratory (Breathing)</option>\n                  <option value=\"other\">Other</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Side Effect (Select or type custom)\n                </label>\n                <div className=\"space-y-2\">\n                  <input\n                    type=\"text\"\n                    value={formData.sideEffect}\n                    onChange={(e) => setFormData(prev => ({ ...prev, sideEffect: e.target.value }))}\n                    placeholder=\"Type a custom side effect or select from below\"\n                    className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n                  />\n                  \n                  <div className=\"grid grid-cols-2 gap-2 max-h-32 overflow-y-auto\">\n                    {commonSideEffects[formData.bodySystem]?.map((effect) => (\n                      <button\n                        key={effect}\n                        type=\"button\"\n                        onClick={() => setFormData(prev => ({ ...prev, sideEffect: effect }))}\n                        className={`text-left p-2 rounded border text-sm hover:bg-gray-50 ${\n                          formData.sideEffect === effect ? 'border-orange-500 bg-orange-50' : 'border-gray-200'\n                        }`}\n                      >\n                        {effect}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Step 2: Severity & Timing */}\n          {currentStep === 2 && (\n            <div className=\"space-y-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n                  Severity Level\n                </label>\n                <div className=\"space-y-2\">\n                  {[\n                    { value: 'mild', label: 'Mild', desc: 'Noticeable but not bothersome' },\n                    { value: 'moderate', label: 'Moderate', desc: 'Interferes with daily activities' },\n                    { value: 'severe', label: 'Severe', desc: 'Significantly impacts quality of life' },\n                    { value: 'life-threatening', label: 'Life-threatening', desc: 'Requires immediate medical attention' }\n                  ].map(({ value, label, desc }) => (\n                    <label key={value} className=\"flex items-start space-x-3 cursor-pointer\">\n                      <input\n                        type=\"radio\"\n                        name=\"severity\"\n                        value={value}\n                        checked={formData.severity === value}\n                        onChange={(e) => setFormData(prev => ({ ...prev, severity: e.target.value as any }))}\n                        className=\"mt-1\"\n                      />\n                      <div className=\"flex-1\">\n                        <div className={`inline-block px-3 py-1 rounded-full text-sm font-medium ${getSeverityColor(value)}`}>\n                          {label}\n                        </div>\n                        <p className=\"text-sm text-gray-500 mt-1\">{desc}</p>\n                      </div>\n                    </label>\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    When did it start?\n                  </label>\n                  <select\n                    value={formData.onset}\n                    onChange={(e) => setFormData(prev => ({ ...prev, onset: e.target.value as any }))}\n                    className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n                  >\n                    <option value=\"immediate\">Immediately (within minutes)</option>\n                    <option value=\"within-hours\">Within hours</option>\n                    <option value=\"within-days\">Within days</option>\n                    <option value=\"gradual\">Gradual onset</option>\n                  </select>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    How often?\n                  </label>\n                  <select\n                    value={formData.frequency}\n                    onChange={(e) => setFormData(prev => ({ ...prev, frequency: e.target.value as any }))}\n                    className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n                  >\n                    <option value=\"once\">Happened once</option>\n                    <option value=\"occasional\">Occasional</option>\n                    <option value=\"frequent\">Frequent</option>\n                    <option value=\"constant\">Constant</option>\n                  </select>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Step 3: Impact & Duration */}\n          {currentStep === 3 && (\n            <div className=\"space-y-6\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Duration (hours)\n                  </label>\n                  <input\n                    type=\"number\"\n                    min=\"0.5\"\n                    step=\"0.5\"\n                    value={formData.duration}\n                    onChange={(e) => setFormData(prev => ({ ...prev, duration: parseFloat(e.target.value) }))}\n                    className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Daily life interference\n                  </label>\n                  <select\n                    value={formData.interference}\n                    onChange={(e) => setFormData(prev => ({ ...prev, interference: e.target.value as any }))}\n                    className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n                  >\n                    <option value=\"none\">No interference</option>\n                    <option value=\"mild\">Mild interference</option>\n                    <option value=\"moderate\">Moderate interference</option>\n                    <option value=\"severe\">Severe interference</option>\n                  </select>\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Detailed Description\n                </label>\n                <textarea\n                  value={formData.description}\n                  onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\n                  rows={4}\n                  placeholder=\"Describe the side effect in detail, including any triggers, patterns, or additional context...\"\n                  className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n                />\n              </div>\n            </div>\n          )}\n\n          {/* Step 4: Actions & Follow-up */}\n          {currentStep === 4 && (\n            <div className=\"space-y-6\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Action taken\n                </label>\n                <select\n                  value={formData.actionTaken}\n                  onChange={(e) => setFormData(prev => ({ ...prev, actionTaken: e.target.value as any }))}\n                  className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-orange-500 focus:border-orange-500\"\n                >\n                  <option value=\"continued\">Continued medication as prescribed</option>\n                  <option value=\"reduced-dose\">Reduced dose</option>\n                  <option value=\"stopped\">Stopped medication</option>\n                  <option value=\"consulted-doctor\">Consulted doctor</option>\n                  <option value=\"added-medication\">Added medication to manage side effect</option>\n                </select>\n              </div>\n\n              <div className=\"space-y-3\">\n                <label className=\"flex items-center space-x-3\">\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.doctorNotified}\n                    onChange={(e) => setFormData(prev => ({ ...prev, doctorNotified: e.target.checked }))}\n                    className=\"rounded border-gray-300 text-orange-600 focus:ring-orange-500\"\n                  />\n                  <span className=\"text-sm text-gray-700\">Doctor has been notified</span>\n                </label>\n\n                <label className=\"flex items-center space-x-3\">\n                  <input\n                    type=\"checkbox\"\n                    checked={formData.followUpRequired}\n                    onChange={(e) => setFormData(prev => ({ ...prev, followUpRequired: e.target.checked }))}\n                    className=\"rounded border-gray-300 text-orange-600 focus:ring-orange-500\"\n                  />\n                  <span className=\"text-sm text-gray-700\">Follow-up appointment needed</span>\n                </label>\n              </div>\n\n              {formData.severity === 'severe' || formData.severity === 'life-threatening' ? (\n                <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n                  <div className=\"flex items-start space-x-3\">\n                    <AlertTriangle className=\"h-5 w-5 text-red-600 mt-0.5\" />\n                    <div>\n                      <h4 className=\"text-sm font-medium text-red-800\">Medical Attention Recommended</h4>\n                      <p className=\"text-sm text-red-700 mt-1\">\n                        The severity you've reported suggests this side effect may require immediate medical attention. \n                        Please contact your healthcare provider or seek emergency care if needed.\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              ) : null}\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"sticky bottom-0 bg-gray-50 px-6 py-4 border-t border-gray-200\">\n          <div className=\"flex justify-between\">\n            <button\n              onClick={prevStep}\n              disabled={currentStep === 1}\n              className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              Previous\n            </button>\n            \n            <div className=\"flex space-x-3\">\n              <button\n                onClick={onClose}\n                className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50\"\n              >\n                Cancel\n              </button>\n              \n              {currentStep === totalSteps ? (\n                <button\n                  onClick={handleSubmit}\n                  disabled={!formData.sideEffect.trim()}\n                  className=\"px-6 py-2 text-sm font-medium text-white bg-orange-600 border border-transparent rounded-md hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2\"\n                >\n                  <FileText className=\"h-4 w-4\" />\n                  <span>Submit Report</span>\n                </button>\n              ) : (\n                <button\n                  onClick={nextStep}\n                  disabled={currentStep === 1 && !formData.sideEffect.trim()}\n                  className=\"px-4 py-2 text-sm font-medium text-white bg-orange-600 border border-transparent rounded-md hover:bg-orange-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  Next\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { X, Activity, AlertTriangle } from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { Medication, WithdrawalEvent, WithdrawalSymptom } from '@/types';\nimport { generateId } from '@/utils/helpers';\nimport toast from 'react-hot-toast';\n\ninterface WithdrawalTrackingModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  medication: Medication;\n  event?: WithdrawalEvent; // For updating existing event\n}\n\nexport function WithdrawalTrackingModal({ isOpen, onClose, medication, event }: WithdrawalTrackingModalProps) {\n  const { updateMedication } = useMedicationStore();\n  \n  const [eventData, setEventData] = React.useState<Partial<WithdrawalEvent>>({\n    startDate: new Date(),\n    severity: 'mild',\n    symptoms: [],\n    interventions: [],\n    medicalSupervision: false,\n    successfullyCompleted: false,\n    relapsePrevention: []\n  });\n\n  const [currentSymptom, setCurrentSymptom] = React.useState({\n    symptom: '',\n    severity: 5,\n    duration: 1,\n    peak: new Date(),\n    managementStrategies: [] as string[],\n    resolved: false\n  });\n\n  const [newIntervention, setNewIntervention] = React.useState('');\n  const [newPreventionStrategy, setNewPreventionStrategy] = React.useState('');\n\n  // Common withdrawal symptoms by medication category\n  const commonSymptoms = {\n    'benzodiazepine': [\n      'Anxiety', 'Panic attacks', 'Insomnia', 'Seizures', 'Tremor', 'Sweating',\n      'Nausea', 'Vomiting', 'Hallucinations', 'Confusion', 'Muscle pain',\n      'Light/sound sensitivity', 'Memory problems', 'Concentration difficulty'\n    ],\n    'opioid': [\n      'Muscle aches', 'Runny nose', 'Excessive tearing', 'Abdominal cramping',\n      'Diarrhea', 'Nausea', 'Vomiting', 'Dilated pupils', 'Goosebumps',\n      'Insomnia', 'Restlessness', 'Anxiety', 'Depression', 'Cravings'\n    ],\n    'antidepressant': [\n      'Brain zaps', 'Dizziness', 'Nausea', 'Headache', 'Fatigue', 'Irritability',\n      'Anxiety', 'Confusion', 'Vivid dreams', 'Flu-like symptoms',\n      'Emotional lability', 'Sleep disturbances'\n    ],\n    'stimulant': [\n      'Fatigue', 'Depression', 'Increased appetite', 'Sleep problems',\n      'Anxiety', 'Concentration problems', 'Cravings', 'Mood swings',\n      'Slow thinking', 'Lack of motivation'\n    ],\n    'sleep-aid': [\n      'Rebound insomnia', 'Anxiety', 'Panic attacks', 'Sweating', 'Tremor',\n      'Nausea', 'Confusion', 'Memory problems', 'Seizures (rare)',\n      'Muscle tension', 'Nightmares'\n    ]\n  };\n\n  const managementStrategies = [\n    'Deep breathing exercises', 'Meditation', 'Progressive muscle relaxation',\n    'Light exercise', 'Hydration', 'Hot/cold therapy', 'Distraction techniques',\n    'Support group contact', 'Medical intervention', 'Rest', 'Nutritional support',\n    'Counseling session', 'Family support', 'Medication adjustment'\n  ];\n\n  React.useEffect(() => {\n    if (event) {\n      setEventData(event);\n    }\n  }, [event]);\n\n  const addSymptom = () => {\n    if (!currentSymptom.symptom.trim()) return;\n\n    const newSymptom: WithdrawalSymptom = {\n      ...currentSymptom,\n      symptom: currentSymptom.symptom.trim()\n    };\n\n    setEventData(prev => ({\n      ...prev,\n      symptoms: [...(prev.symptoms || []), newSymptom]\n    }));\n\n    setCurrentSymptom({\n      symptom: '',\n      severity: 5,\n      duration: 1,\n      peak: new Date(),\n      managementStrategies: [],\n      resolved: false\n    });\n  };\n\n  const removeSymptom = (index: number) => {\n    setEventData(prev => ({\n      ...prev,\n      symptoms: prev.symptoms?.filter((_, i) => i !== index) || []\n    }));\n  };\n\n  const updateSymptom = (index: number, updates: Partial<WithdrawalSymptom>) => {\n    setEventData(prev => ({\n      ...prev,\n      symptoms: prev.symptoms?.map((symptom, i) => \n        i === index ? { ...symptom, ...updates } : symptom\n      ) || []\n    }));\n  };\n\n  const addIntervention = () => {\n    if (!newIntervention.trim()) return;\n    \n    setEventData(prev => ({\n      ...prev,\n      interventions: [...(prev.interventions || []), newIntervention.trim()]\n    }));\n    setNewIntervention('');\n  };\n\n  const addPreventionStrategy = () => {\n    if (!newPreventionStrategy.trim()) return;\n    \n    setEventData(prev => ({\n      ...prev,\n      relapsePrevention: [...(prev.relapsePrevention || []), newPreventionStrategy.trim()]\n    }));\n    setNewPreventionStrategy('');\n  };\n\n  const handleSubmit = () => {\n    const withdrawalEvent: WithdrawalEvent = {\n      id: event?.id || generateId(),\n      ...eventData,\n      startDate: eventData.startDate!,\n      severity: eventData.severity!,\n      symptoms: eventData.symptoms!,\n      interventions: eventData.interventions!,\n      medicalSupervision: eventData.medicalSupervision!,\n      successfullyCompleted: eventData.successfullyCompleted!\n    };\n\n    const prevention = medication.dependencePrevention;\n    if (prevention) {\n      const existingEventIndex = prevention.withdrawalHistory.findIndex(e => e.id === withdrawalEvent.id);\n      const updatedHistory = existingEventIndex >= 0\n        ? prevention.withdrawalHistory.map((e, i) => i === existingEventIndex ? withdrawalEvent : e)\n        : [...prevention.withdrawalHistory, withdrawalEvent];\n\n      updateMedication(medication.id, {\n        dependencePrevention: {\n          ...prevention,\n          withdrawalHistory: updatedHistory\n        }\n      });\n    }\n\n    toast.success(event ? 'Withdrawal event updated' : 'Withdrawal tracking started');\n    onClose();\n  };\n\n  const getSeverityColor = (severity: string) => {\n    switch (severity) {\n      case 'mild': return 'text-green-600 bg-green-50 border-green-200';\n      case 'moderate': return 'text-yellow-600 bg-yellow-50 border-yellow-200';\n      case 'severe': return 'text-orange-600 bg-orange-50 border-orange-200';\n      case 'dangerous': return 'text-red-600 bg-red-50 border-red-200';\n      default: return 'text-gray-600 bg-gray-50 border-gray-200';\n    }\n  };\n\n  const getSymptomSeverityColor = (severity: number) => {\n    if (severity <= 3) return 'text-green-600';\n    if (severity <= 6) return 'text-yellow-600';\n    if (severity <= 8) return 'text-orange-600';\n    return 'text-red-600';\n  };\n\n  if (!isOpen) return null;\n\n  const category = medication.dependencyRiskCategory;\n  const symptomList = commonSymptoms[category] || commonSymptoms['benzodiazepine'];\n\n  return (\n    <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto\">\n        \n        {/* Header */}\n        <div className=\"sticky top-0 bg-white border-b border-gray-200 px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <Activity className=\"h-6 w-6 text-purple-600\" />\n              <div>\n                <h3 className=\"text-lg font-medium text-gray-900\">\n                  {event ? 'Update' : 'Track'} Withdrawal Symptoms\n                </h3>\n                <p className=\"text-sm text-gray-500\">\n                  {medication.name}  Monitor and manage withdrawal process\n                </p>\n              </div>\n            </div>\n            <button onClick={onClose} className=\"text-gray-400 hover:text-gray-500\">\n              <X className=\"h-6 w-6\" />\n            </button>\n          </div>\n        </div>\n\n        <div className=\"px-6 py-4 space-y-6\">\n          \n          {/* Basic Information */}\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Start Date\n              </label>\n              <input\n                type=\"date\"\n                value={eventData.startDate?.toISOString().split('T')[0]}\n                onChange={(e) => setEventData(prev => ({ ...prev, startDate: new Date(e.target.value) }))}\n                className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-purple-500\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                End Date (if completed)\n              </label>\n              <input\n                type=\"date\"\n                value={eventData.endDate?.toISOString().split('T')[0] || ''}\n                onChange={(e) => setEventData(prev => ({ \n                  ...prev, \n                  endDate: e.target.value ? new Date(e.target.value) : undefined \n                }))}\n                className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-purple-500\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Overall Severity\n              </label>\n              <select\n                value={eventData.severity}\n                onChange={(e) => setEventData(prev => ({ ...prev, severity: e.target.value as any }))}\n                className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-purple-500\"\n              >\n                <option value=\"mild\">Mild</option>\n                <option value=\"moderate\">Moderate</option>\n                <option value=\"severe\">Severe</option>\n                <option value=\"dangerous\">Dangerous</option>\n              </select>\n            </div>\n          </div>\n\n          {/* Status Checkboxes */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <label className=\"flex items-center space-x-3\">\n              <input\n                type=\"checkbox\"\n                checked={eventData.medicalSupervision}\n                onChange={(e) => setEventData(prev => ({ ...prev, medicalSupervision: e.target.checked }))}\n                className=\"rounded border-gray-300 text-purple-600 focus:ring-purple-500\"\n              />\n              <span className=\"text-sm text-gray-700\">Under medical supervision</span>\n            </label>\n\n            <label className=\"flex items-center space-x-3\">\n              <input\n                type=\"checkbox\"\n                checked={eventData.successfullyCompleted}\n                onChange={(e) => setEventData(prev => ({ ...prev, successfullyCompleted: e.target.checked }))}\n                className=\"rounded border-gray-300 text-purple-600 focus:ring-purple-500\"\n              />\n              <span className=\"text-sm text-gray-700\">Successfully completed</span>\n            </label>\n          </div>\n\n          {/* Add New Symptom */}\n          <div className=\"border border-gray-200 rounded-lg p-4\">\n            <h4 className=\"font-medium text-gray-900 mb-4\">Add Withdrawal Symptom</h4>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Symptom\n                </label>\n                <div className=\"space-y-2\">\n                  <input\n                    type=\"text\"\n                    value={currentSymptom.symptom}\n                    onChange={(e) => setCurrentSymptom(prev => ({ ...prev, symptom: e.target.value }))}\n                    placeholder=\"Enter custom symptom or select below\"\n                    className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-purple-500\"\n                  />\n                  \n                  <div className=\"grid grid-cols-2 gap-2 max-h-32 overflow-y-auto\">\n                    {symptomList.map((symptom) => (\n                      <button\n                        key={symptom}\n                        type=\"button\"\n                        onClick={() => setCurrentSymptom(prev => ({ ...prev, symptom }))}\n                        className={`text-left p-2 rounded border text-sm hover:bg-gray-50 ${\n                          currentSymptom.symptom === symptom ? 'border-purple-500 bg-purple-50' : 'border-gray-200'\n                        }`}\n                      >\n                        {symptom}\n                      </button>\n                    ))}\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"space-y-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Severity (1-10): {currentSymptom.severity}\n                  </label>\n                  <input\n                    type=\"range\"\n                    min=\"1\"\n                    max=\"10\"\n                    value={currentSymptom.severity}\n                    onChange={(e) => setCurrentSymptom(prev => ({ ...prev, severity: parseInt(e.target.value) }))}\n                    className=\"w-full\"\n                  />\n                  <div className=\"flex justify-between text-xs text-gray-500\">\n                    <span>Mild</span>\n                    <span>Severe</span>\n                  </div>\n                </div>\n\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Duration (hours)\n                  </label>\n                  <input\n                    type=\"number\"\n                    min=\"0.5\"\n                    step=\"0.5\"\n                    value={currentSymptom.duration}\n                    onChange={(e) => setCurrentSymptom(prev => ({ ...prev, duration: parseFloat(e.target.value) }))}\n                    className=\"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-purple-500\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"mb-4\">\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                Management Strategies (select all that apply)\n              </label>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-32 overflow-y-auto\">\n                {managementStrategies.map((strategy) => (\n                  <label key={strategy} className=\"flex items-center space-x-2 text-sm\">\n                    <input\n                      type=\"checkbox\"\n                      checked={currentSymptom.managementStrategies.includes(strategy)}\n                      onChange={(e) => {\n                        const strategies = e.target.checked\n                          ? [...currentSymptom.managementStrategies, strategy]\n                          : currentSymptom.managementStrategies.filter(s => s !== strategy);\n                        setCurrentSymptom(prev => ({ ...prev, managementStrategies: strategies }));\n                      }}\n                      className=\"rounded border-gray-300 text-purple-600 focus:ring-purple-500\"\n                    />\n                    <span>{strategy}</span>\n                  </label>\n                ))}\n              </div>\n            </div>\n\n            <button\n              onClick={addSymptom}\n              disabled={!currentSymptom.symptom.trim()}\n              className=\"px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              Add Symptom\n            </button>\n          </div>\n\n          {/* Current Symptoms List */}\n          {eventData.symptoms && eventData.symptoms.length > 0 && (\n            <div>\n              <h4 className=\"font-medium text-gray-900 mb-4\">Current Symptoms</h4>\n              <div className=\"space-y-3\">\n                {eventData.symptoms.map((symptom, index) => (\n                  <div key={index} className=\"bg-gray-50 border border-gray-200 rounded-lg p-4\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center space-x-3 mb-2\">\n                          <h5 className=\"font-medium text-gray-900\">{symptom.symptom}</h5>\n                          <span className={`text-sm font-medium ${getSymptomSeverityColor(symptom.severity)}`}>\n                            Severity: {symptom.severity}/10\n                          </span>\n                          <span className=\"text-sm text-gray-500\">\n                            Duration: {symptom.duration}h\n                          </span>\n                        </div>\n                        \n                        {symptom.managementStrategies.length > 0 && (\n                          <div className=\"mb-2\">\n                            <span className=\"text-sm text-gray-600\">Strategies: </span>\n                            <span className=\"text-sm text-gray-800\">\n                              {symptom.managementStrategies.join(', ')}\n                            </span>\n                          </div>\n                        )}\n\n                        <label className=\"flex items-center space-x-2\">\n                          <input\n                            type=\"checkbox\"\n                            checked={symptom.resolved}\n                            onChange={(e) => updateSymptom(index, { resolved: e.target.checked })}\n                            className=\"rounded border-gray-300 text-green-600 focus:ring-green-500\"\n                          />\n                          <span className=\"text-sm text-gray-700\">Resolved</span>\n                        </label>\n                      </div>\n                      \n                      <button\n                        onClick={() => removeSymptom(index)}\n                        className=\"text-red-600 hover:text-red-800\"\n                      >\n                        <X className=\"h-4 w-4\" />\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Interventions */}\n          <div>\n            <h4 className=\"font-medium text-gray-900 mb-4\">Interventions & Support</h4>\n            <div className=\"space-y-3\">\n              <div className=\"flex space-x-2\">\n                <input\n                  type=\"text\"\n                  value={newIntervention}\n                  onChange={(e) => setNewIntervention(e.target.value)}\n                  placeholder=\"Add intervention (e.g., doctor visit, support group)\"\n                  className=\"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-purple-500\"\n                />\n                <button\n                  onClick={addIntervention}\n                  disabled={!newIntervention.trim()}\n                  className=\"px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md hover:bg-purple-700 disabled:opacity-50\"\n                >\n                  Add\n                </button>\n              </div>\n              \n              {eventData.interventions && eventData.interventions.length > 0 && (\n                <div className=\"space-y-2\">\n                  {eventData.interventions.map((intervention, index) => (\n                    <div key={index} className=\"flex items-center justify-between bg-gray-50 px-3 py-2 rounded\">\n                      <span className=\"text-sm text-gray-800\">{intervention}</span>\n                      <button\n                        onClick={() => setEventData(prev => ({\n                          ...prev,\n                          interventions: prev.interventions?.filter((_, i) => i !== index) || []\n                        }))}\n                        className=\"text-red-600 hover:text-red-800\"\n                      >\n                        <X className=\"h-4 w-4\" />\n                      </button>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Relapse Prevention */}\n          <div>\n            <h4 className=\"font-medium text-gray-900 mb-4\">Relapse Prevention Strategies</h4>\n            <div className=\"space-y-3\">\n              <div className=\"flex space-x-2\">\n                <input\n                  type=\"text\"\n                  value={newPreventionStrategy}\n                  onChange={(e) => setNewPreventionStrategy(e.target.value)}\n                  placeholder=\"Add prevention strategy (e.g., stress management, therapy)\"\n                  className=\"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-purple-500\"\n                />\n                <button\n                  onClick={addPreventionStrategy}\n                  disabled={!newPreventionStrategy.trim()}\n                  className=\"px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md hover:bg-purple-700 disabled:opacity-50\"\n                >\n                  Add\n                </button>\n              </div>\n              \n              {eventData.relapsePrevention && eventData.relapsePrevention.length > 0 && (\n                <div className=\"space-y-2\">\n                  {eventData.relapsePrevention.map((strategy, index) => (\n                    <div key={index} className=\"flex items-center justify-between bg-gray-50 px-3 py-2 rounded\">\n                      <span className=\"text-sm text-gray-800\">{strategy}</span>\n                      <button\n                        onClick={() => setEventData(prev => ({\n                          ...prev,\n                          relapsePrevention: prev.relapsePrevention?.filter((_, i) => i !== index) || []\n                        }))}\n                        className=\"text-red-600 hover:text-red-800\"\n                      >\n                        <X className=\"h-4 w-4\" />\n                      </button>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Warning for dangerous withdrawal */}\n          {eventData.severity === 'dangerous' && (\n            <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\n              <div className=\"flex items-start space-x-3\">\n                <AlertTriangle className=\"h-5 w-5 text-red-600 mt-0.5\" />\n                <div>\n                  <h4 className=\"text-sm font-medium text-red-800\">Dangerous Withdrawal Warning</h4>\n                  <p className=\"text-sm text-red-700 mt-1\">\n                    Dangerous withdrawal symptoms require immediate medical attention. If experiencing seizures, \n                    severe confusion, or other life-threatening symptoms, seek emergency medical care immediately.\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"sticky bottom-0 bg-gray-50 px-6 py-4 border-t border-gray-200\">\n          <div className=\"flex justify-end space-x-3\">\n            <button\n              onClick={onClose}\n              className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50\"\n            >\n              Cancel\n            </button>\n            \n            <button\n              onClick={handleSubmit}\n              className=\"px-6 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md hover:bg-purple-700 flex items-center space-x-2\"\n            >\n              <Activity className=\"h-4 w-4\" />\n              <span>{event ? 'Update' : 'Start'} Tracking</span>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { X, Shield, ShieldAlert, AlertTriangle, Clock, TrendingUp, Activity, Brain, Calendar, CheckCircle, XCircle } from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { Medication, DependencePrevention, DependenceAlert } from '@/types';\nimport { DependencePreventionService } from '@/services/dependencePreventionService';\nimport { formatDate, formatTime } from '@/utils/helpers';\nimport toast from 'react-hot-toast';\n\ninterface DependencyPreventionModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  medication: Medication;\n}\n\nexport function DependencyPreventionModal({ isOpen, onClose, medication }: DependencyPreventionModalProps) {\n  const { updateMedication, addSmartMessage, logs } = useMedicationStore();\n  const [activeTab, setActiveTab] = React.useState<'overview' | 'alerts' | 'timeline' | 'recommendations'>('overview');\n  \n  // Get or initialize dependency prevention data\n  const dependencyPrevention = React.useMemo(() => {\n    if (medication.dependencePrevention) {\n      return medication.dependencePrevention;\n    }\n    return DependencePreventionService.initializePrevention(medication);\n  }, [medication]);\n\n  // Get usage patterns from medication logs\n  const usagePatterns = React.useMemo(() => {\n    const medicationLogs = logs.filter(log => log.medicationId === medication.id);\n    return medicationLogs.slice(-30).map(log => ({\n      date: log.timestamp,\n      doseTaken: log.dosage || parseFloat(medication.dosage),\n      selfAdjustment: log.dosage !== parseFloat(medication.dosage),\n      cravingLevel: log.adherenceDetails?.cravingLevel,\n      anxietyBeforeDose: log.adherenceDetails?.anxietyBeforeDose,\n      effectivenessRating: log.adherenceDetails?.effectivenessRating,\n      sideEffects: log.adherenceDetails?.sideEffects || []\n    }));\n  }, [logs, medication.id, medication.dosage]);\n\n  // Calculate current risk assessment\n  const currentAssessment = React.useMemo(() => {\n    return DependencePreventionService.assessCurrentRisk(medication, usagePatterns);\n  }, [medication, usagePatterns]);\n\n  // Get tapering recommendation\n  const taperingRecommendation = React.useMemo(() => {\n    return DependencePreventionService.generateTaperingRecommendation(medication);\n  }, [medication]);\n\n  const unacknowledgedAlerts = currentAssessment.alerts.filter(alert => !alert.acknowledged);\n  const acknowledgedAlerts = currentAssessment.alerts.filter(alert => alert.acknowledged);\n\n  const handleAcknowledgeAlert = (alertId: string) => {\n    const updatedAlerts = currentAssessment.alerts.map(alert =>\n      alert.id === alertId ? { ...alert, acknowledged: true } : alert\n    );\n\n    updateMedication(medication.id, {\n      dependencePrevention: {\n        ...currentAssessment,\n        alerts: updatedAlerts\n      }\n    });\n\n    toast.success('Alert acknowledged');\n  };\n\n  const handleUpdatePreventionData = () => {\n    updateMedication(medication.id, {\n      dependencePrevention: {\n        ...currentAssessment,\n        lastUpdated: new Date()\n      }\n    });\n\n    addSmartMessage({\n      medicationId: medication.id,\n      type: 'risk-alert',\n      priority: currentAssessment.riskLevel === 'very-high' ? 'urgent' : 'high',\n      title: 'Dependency Prevention Assessment Updated',\n      message: `Risk level: ${currentAssessment.riskLevel}. ${currentAssessment.taperingRecommended ? 'Tapering is recommended.' : 'Continue monitoring usage patterns.'}`,\n      psychologicalApproach: 'informative-support',\n      scheduledTime: new Date()\n    });\n\n    toast.success('Dependency prevention data updated');\n  };\n\n  const getRiskColor = (riskLevel: string) => {\n    switch (riskLevel) {\n      case 'very-high': return 'text-red-700 bg-red-100 border-red-300';\n      case 'high': return 'text-red-600 bg-red-50 border-red-200';\n      case 'moderate': return 'text-orange-600 bg-orange-50 border-orange-200';\n      case 'low': return 'text-green-600 bg-green-50 border-green-200';\n      default: return 'text-gray-600 bg-gray-50 border-gray-200';\n    }\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'critical': return 'text-red-700 bg-red-100 border-red-300';\n      case 'high': return 'text-orange-600 bg-orange-50 border-orange-200';\n      case 'medium': return 'text-yellow-600 bg-yellow-50 border-yellow-200';\n      default: return 'text-blue-600 bg-blue-50 border-blue-200';\n    }\n  };\n\n  const getCurrentDuration = () => {\n    const now = new Date();\n    const start = new Date(medication.startDate);\n    return Math.floor((now.getTime() - start.getTime()) / (1000 * 60 * 60 * 24));\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-y-auto\">\n        \n        {/* Header */}\n        <div className=\"sticky top-0 bg-white border-b border-gray-200 px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-3\">\n              <Shield className=\"h-6 w-6 text-blue-600\" />\n              <div>\n                <h3 className=\"text-lg font-medium text-gray-900\">\n                  Dependency Prevention Dashboard\n                </h3>\n                <p className=\"text-sm text-gray-500\">\n                  {medication.name}  {medication.dependencyRiskCategory.replace('-', ' ')} category\n                </p>\n              </div>\n            </div>\n            <button onClick={onClose} className=\"text-gray-400 hover:text-gray-500\">\n              <X className=\"h-6 w-6\" />\n            </button>\n          </div>\n\n          {/* Tab Navigation */}\n          <div className=\"mt-4 border-b border-gray-200\">\n            <nav className=\"-mb-px flex space-x-8\">\n              {[\n                { id: 'overview', label: 'Overview', icon: Activity },\n                { id: 'alerts', label: 'Alerts', icon: AlertTriangle, badge: unacknowledgedAlerts.length },\n                { id: 'timeline', label: 'Timeline', icon: Clock },\n                { id: 'recommendations', label: 'Recommendations', icon: Brain }\n              ].map(({ id, label, icon: Icon, badge }) => (\n                <button\n                  key={id}\n                  onClick={() => setActiveTab(id as any)}\n                  className={`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ${\n                    activeTab === id\n                      ? 'border-blue-500 text-blue-600'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                  }`}\n                >\n                  <Icon className=\"h-4 w-4\" />\n                  <span>{label}</span>\n                  {badge && badge > 0 && (\n                    <span className=\"bg-red-100 text-red-800 text-xs rounded-full px-2 py-0.5\">\n                      {badge}\n                    </span>\n                  )}\n                </button>\n              ))}\n            </nav>\n          </div>\n        </div>\n\n        <div className=\"px-6 py-4\">\n          {/* Overview Tab */}\n          {activeTab === 'overview' && (\n            <div className=\"space-y-6\">\n              {/* Current Status */}\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <div className=\"bg-gray-50 p-4 rounded-lg\">\n                  <div className=\"flex items-center space-x-2 mb-2\">\n                    <Shield className=\"h-5 w-5 text-blue-600\" />\n                    <span className=\"font-medium text-gray-900\">Current Risk Level</span>\n                  </div>\n                  <div className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${getRiskColor(currentAssessment.riskLevel)}`}>\n                    {currentAssessment.riskLevel.replace('-', ' ').toUpperCase()}\n                  </div>\n                </div>\n\n                <div className=\"bg-gray-50 p-4 rounded-lg\">\n                  <div className=\"flex items-center space-x-2 mb-2\">\n                    <Calendar className=\"h-5 w-5 text-green-600\" />\n                    <span className=\"font-medium text-gray-900\">Duration</span>\n                  </div>\n                  <div className=\"text-lg font-semibold text-gray-900\">\n                    {getCurrentDuration()} days\n                  </div>\n                  <div className=\"text-sm text-gray-500\">\n                    Recommended max: {currentAssessment.recommendedMaxDuration} days\n                  </div>\n                </div>\n\n                <div className=\"bg-gray-50 p-4 rounded-lg\">\n                  <div className=\"flex items-center space-x-2 mb-2\">\n                    <TrendingUp className=\"h-5 w-5 text-orange-600\" />\n                    <span className=\"font-medium text-gray-900\">Tapering Status</span>\n                  </div>\n                  <div className={`text-sm font-medium ${\n                    currentAssessment.taperingRecommended ? 'text-orange-600' : 'text-green-600'\n                  }`}>\n                    {currentAssessment.taperingRecommended \n                      ? `${currentAssessment.taperingUrgency.replace('-', ' ')} recommended`\n                      : 'Not needed'\n                    }\n                  </div>\n                </div>\n              </div>\n\n              {/* Risk Factors */}\n              <div className=\"bg-white border border-gray-200 rounded-lg p-4\">\n                <h4 className=\"font-medium text-gray-900 mb-3\">Risk Assessment Factors</h4>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <span className=\"text-sm font-medium text-gray-700\">Medication Category:</span>\n                    <p className=\"text-sm text-gray-900\">{medication.dependencyRiskCategory.replace('-', ' ')}</p>\n                  </div>\n                  <div>\n                    <span className=\"text-sm font-medium text-gray-700\">Dependence Type:</span>\n                    <p className=\"text-sm text-gray-900\">{currentAssessment.dependenceType}</p>\n                  </div>\n                  <div>\n                    <span className=\"text-sm font-medium text-gray-700\">Usage Patterns Analyzed:</span>\n                    <p className=\"text-sm text-gray-900\">{usagePatterns.length} entries</p>\n                  </div>\n                  <div>\n                    <span className=\"text-sm font-medium text-gray-700\">Doctor Review Required:</span>\n                    <p className={`text-sm font-medium ${currentAssessment.doctorReviewRequired ? 'text-orange-600' : 'text-green-600'}`}>\n                      {currentAssessment.doctorReviewRequired ? 'Yes' : 'No'}\n                    </p>\n                  </div>\n                </div>\n              </div>\n\n              {/* Educational Resources */}\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n                <h4 className=\"font-medium text-blue-900 mb-3\">Educational Resources</h4>\n                <div className=\"space-y-2\">\n                  {currentAssessment.educationalResources.map((resource, index) => (\n                    <div key={index} className=\"flex items-start space-x-2\">\n                      <Brain className=\"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0\" />\n                      <span className=\"text-sm text-blue-800\">{resource}</span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Alerts Tab */}\n          {activeTab === 'alerts' && (\n            <div className=\"space-y-6\">\n              {/* Unacknowledged Alerts */}\n              {unacknowledgedAlerts.length > 0 && (\n                <div>\n                  <h4 className=\"font-medium text-gray-900 mb-4 flex items-center space-x-2\">\n                    <AlertTriangle className=\"h-5 w-5 text-red-500\" />\n                    <span>Active Alerts ({unacknowledgedAlerts.length})</span>\n                  </h4>\n                  <div className=\"space-y-3\">\n                    {unacknowledgedAlerts.map((alert) => (\n                      <div key={alert.id} className={`border rounded-lg p-4 ${getPriorityColor(alert.priority)}`}>\n                        <div className=\"flex items-start justify-between\">\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center space-x-2 mb-2\">\n                              <span className=\"font-medium\">{alert.type.replace('-', ' ').toUpperCase()}</span>\n                              <span className={`px-2 py-1 rounded text-xs font-medium ${getPriorityColor(alert.priority)}`}>\n                                {alert.priority}\n                              </span>\n                            </div>\n                            <p className=\"text-sm mb-2\">{alert.message}</p>\n                            <div className=\"text-xs text-gray-600\">\n                              <span>Triggered: {formatDate(alert.timestamp)} at {formatTime(alert.timestamp)}</span>\n                              <span className=\"ml-4\">Source: {alert.trigger}</span>\n                            </div>\n                          </div>\n                          <button\n                            onClick={() => handleAcknowledgeAlert(alert.id)}\n                            className=\"ml-4 px-3 py-1 text-sm bg-white border border-gray-300 rounded hover:bg-gray-50\"\n                          >\n                            Acknowledge\n                          </button>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {/* Acknowledged Alerts */}\n              {acknowledgedAlerts.length > 0 && (\n                <div>\n                  <h4 className=\"font-medium text-gray-900 mb-4 flex items-center space-x-2\">\n                    <CheckCircle className=\"h-5 w-5 text-green-500\" />\n                    <span>Acknowledged Alerts ({acknowledgedAlerts.length})</span>\n                  </h4>\n                  <div className=\"space-y-3\">\n                    {acknowledgedAlerts.slice(0, 5).map((alert) => (\n                      <div key={alert.id} className=\"border border-gray-200 bg-gray-50 rounded-lg p-4\">\n                        <div className=\"flex items-start space-x-3\">\n                          <CheckCircle className=\"h-4 w-4 text-green-500 mt-0.5\" />\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center space-x-2 mb-1\">\n                              <span className=\"text-sm font-medium text-gray-700\">{alert.type.replace('-', ' ')}</span>\n                              <span className=\"text-xs text-gray-500\">{alert.priority}</span>\n                            </div>\n                            <p className=\"text-sm text-gray-600\">{alert.message}</p>\n                            <div className=\"text-xs text-gray-500 mt-1\">\n                              {formatDate(alert.timestamp)}\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              )}\n\n              {currentAssessment.alerts.length === 0 && (\n                <div className=\"text-center py-8\">\n                  <CheckCircle className=\"mx-auto h-12 w-12 text-green-500\" />\n                  <h3 className=\"mt-4 text-lg font-medium text-gray-900\">No Alerts</h3>\n                  <p className=\"mt-1 text-sm text-gray-500\">\n                    All dependency prevention indicators are within normal ranges.\n                  </p>\n                </div>\n              )}\n            </div>\n          )}\n\n          {/* Timeline Tab */}\n          {activeTab === 'timeline' && (\n            <div className=\"space-y-6\">\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <h4 className=\"font-medium text-gray-900 mb-3\">Medication Timeline</h4>\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center space-x-4\">\n                    <div className=\"w-3 h-3 bg-green-500 rounded-full\"></div>\n                    <div>\n                      <div className=\"text-sm font-medium text-gray-900\">Started Medication</div>\n                      <div className=\"text-xs text-gray-500\">{formatDate(medication.startDate)}</div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-center space-x-4\">\n                    <div className=\"w-3 h-3 bg-blue-500 rounded-full\"></div>\n                    <div>\n                      <div className=\"text-sm font-medium text-gray-900\">Reached Review Period</div>\n                      <div className=\"text-xs text-gray-500\">\n                        {getCurrentDuration()} days (Review every {currentAssessment.reviewFrequency} days)\n                      </div>\n                    </div>\n                  </div>\n\n                  {getCurrentDuration() > currentAssessment.recommendedMaxDuration && (\n                    <div className=\"flex items-center space-x-4\">\n                      <div className=\"w-3 h-3 bg-orange-500 rounded-full\"></div>\n                      <div>\n                        <div className=\"text-sm font-medium text-gray-900\">Exceeded Recommended Duration</div>\n                        <div className=\"text-xs text-gray-500\">\n                          {getCurrentDuration() - currentAssessment.recommendedMaxDuration} days over recommended\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {currentAssessment.alerts.map((alert) => (\n                    <div key={alert.id} className=\"flex items-center space-x-4\">\n                      <div className={`w-3 h-3 rounded-full ${\n                        alert.priority === 'critical' ? 'bg-red-500' :\n                        alert.priority === 'high' ? 'bg-orange-500' :\n                        'bg-yellow-500'\n                      }`}></div>\n                      <div>\n                        <div className=\"text-sm font-medium text-gray-900\">Alert: {alert.type.replace('-', ' ')}</div>\n                        <div className=\"text-xs text-gray-500\">{formatDate(alert.timestamp)}</div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Recommendations Tab */}\n          {activeTab === 'recommendations' && (\n            <div className=\"space-y-6\">\n              {/* Tapering Recommendation */}\n              <div className=\"border border-gray-200 rounded-lg p-4\">\n                <h4 className=\"font-medium text-gray-900 mb-3 flex items-center space-x-2\">\n                  <TrendingUp className=\"h-5 w-5 text-blue-600\" />\n                  <span>Tapering Assessment</span>\n                </h4>\n                \n                {taperingRecommendation.recommended ? (\n                  <div className=\"space-y-4\">\n                    <div className=\"bg-orange-50 border border-orange-200 rounded-lg p-3\">\n                      <p className=\"text-sm text-orange-800 font-medium\">Tapering is recommended for this medication.</p>\n                      {taperingRecommendation.schedule && (\n                        <div className=\"mt-2 text-sm text-orange-700\">\n                          <p><strong>Duration:</strong> {taperingRecommendation.schedule.totalDuration} weeks</p>\n                          <p><strong>Reduction Rate:</strong> {taperingRecommendation.schedule.reductionRate}% per step</p>\n                        </div>\n                      )}\n                    </div>\n                    \n                    <div className=\"space-y-2\">\n                      <h5 className=\"font-medium text-gray-900\">Warnings & Precautions:</h5>\n                      {taperingRecommendation.warnings.map((warning, index) => (\n                        <div key={index} className=\"flex items-start space-x-2\">\n                          <AlertTriangle className=\"h-4 w-4 text-orange-500 mt-0.5 flex-shrink-0\" />\n                          <span className=\"text-sm text-gray-700\">{warning}</span>\n                        </div>\n                      ))}\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <h5 className=\"font-medium text-gray-900\">Monitoring Requirements:</h5>\n                      {taperingRecommendation.monitoring.map((item, index) => (\n                        <div key={index} className=\"flex items-start space-x-2\">\n                          <Activity className=\"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0\" />\n                          <span className=\"text-sm text-gray-700\">{item}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"bg-green-50 border border-green-200 rounded-lg p-3\">\n                    <p className=\"text-sm text-green-800\">Tapering is not currently recommended for this medication.</p>\n                    <p className=\"text-sm text-green-700 mt-1\">Continue regular monitoring and follow-up with your healthcare provider.</p>\n                  </div>\n                )}\n              </div>\n\n              {/* General Recommendations */}\n              <div className=\"border border-gray-200 rounded-lg p-4\">\n                <h4 className=\"font-medium text-gray-900 mb-3\">General Recommendations</h4>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-start space-x-3\">\n                    <Clock className=\"h-4 w-4 text-blue-500 mt-0.5\" />\n                    <div>\n                      <p className=\"text-sm font-medium text-gray-900\">Regular Monitoring</p>\n                      <p className=\"text-sm text-gray-600\">\n                        Review dependency risk every {currentAssessment.reviewFrequency} days with usage pattern analysis.\n                      </p>\n                    </div>\n                  </div>\n\n                  {currentAssessment.doctorReviewRequired && (\n                    <div className=\"flex items-start space-x-3\">\n                      <AlertTriangle className=\"h-4 w-4 text-orange-500 mt-0.5\" />\n                      <div>\n                        <p className=\"text-sm font-medium text-gray-900\">Doctor Review Required</p>\n                        <p className=\"text-sm text-gray-600\">\n                          Schedule an appointment with your healthcare provider to discuss your medication plan.\n                        </p>\n                      </div>\n                    </div>\n                  )}\n\n                  <div className=\"flex items-start space-x-3\">\n                    <Brain className=\"h-4 w-4 text-purple-500 mt-0.5\" />\n                    <div>\n                      <p className=\"text-sm font-medium text-gray-900\">Educational Resources</p>\n                      <p className=\"text-sm text-gray-600\">\n                        Review the educational materials in the Overview tab to better understand your medication.\n                      </p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"sticky bottom-0 bg-gray-50 px-6 py-4 border-t border-gray-200\">\n          <div className=\"flex justify-between items-center\">\n            <div className=\"text-sm text-gray-500\">\n              Last updated: {formatDate(currentAssessment.lastUpdated)}\n            </div>\n            <div className=\"flex space-x-3\">\n              <button\n                onClick={onClose}\n                className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50\"\n              >\n                Close\n              </button>\n              <button\n                onClick={handleUpdatePreventionData}\n                className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700\"\n              >\n                Update Assessment\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { \n  Plus, \n  Search, \n  Filter, \n  Edit2, \n  Trash2, \n  Clock,\n  AlertCircle,\n  CheckCircle2,\n  MoreVertical,\n  Shield,\n  ShieldAlert,\n  Activity,\n  TrendingDown,\n  Calendar,\n  Pause,\n  Play,\n  Coffee,\n  Pill\n} from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { MedicationModal } from '@/components/modals/MedicationModal';\nimport { TaperingPlanModal } from '@/components/modals/TaperingPlanModal';\nimport { ConfirmDialog } from '@/components/ui/ConfirmDialog';\nimport { MultiplePillSelector } from '@/components/ui/MultiplePillSelector';\nimport { SideEffectReportModal } from '@/components/modals/SideEffectReportModal';\nimport { WithdrawalTrackingModal } from '@/components/modals/WithdrawalTrackingModal';\nimport { DependencyPreventionModal } from '@/components/modals/DependencyPreventionModal';\nimport { formatFrequency, formatDosage, cn, filterMedicationsBySearch, formatPillDisplay, formatPillDisplayShort } from '@/utils/helpers';\nimport { getMedicationByName } from '@/services/medicationDatabase';\nimport { Medication, MedicationCategory } from '@/types';\nimport toast from 'react-hot-toast';\n\nexport function Medications() {\n  const {\n    medications,\n    deleteMedication,\n    toggleMedicationActive,\n    getMedicationAdherence,\n    getCurrentDose,\n    pauseTaperingSchedule,\n    resumeTaperingSchedule,\n    adjustTaperingSchedule,\n    // getHighRiskMedications,\n    updateRiskAssessment\n  } = useMedicationStore();\n\n  const [isModalOpen, setIsModalOpen] = React.useState(false);\n  const [editingMedication, setEditingMedication] = React.useState<Medication | null>(null);\n  const [searchTerm, setSearchTerm] = React.useState('');\n  const [selectedCategory, setSelectedCategory] = React.useState<MedicationCategory | 'all'>('all');\n  const [confirmDelete, setConfirmDelete] = React.useState<string | null>(null);\n  const [taperingModalOpen, setTaperingModalOpen] = React.useState(false);\n  const [taperingMedication, setTaperingMedication] = React.useState<Medication | null>(null);\n  const [pauseModalOpen, setPauseModalOpen] = React.useState(false);\n  const [pauseMedication, setPauseMedication] = React.useState<Medication | null>(null);\n  const [multiplePillsModalOpen, setMultiplePillsModalOpen] = React.useState(false);\n  const [multiplePillsMedication, setMultiplePillsMedication] = React.useState<string | null>(null);\n  const [sideEffectModalOpen, setSideEffectModalOpen] = React.useState(false);\n  const [sideEffectMedication, setSideEffectMedication] = React.useState<Medication | null>(null);\n  const [withdrawalModalOpen, setWithdrawalModalOpen] = React.useState(false);\n  const [withdrawalMedication, setWithdrawalMedication] = React.useState<Medication | null>(null);\n  const [dependencyModalOpen, setDependencyModalOpen] = React.useState(false);\n  const [dependencyMedication, setDependencyMedication] = React.useState<Medication | null>(null);\n\n  const filteredMedications = React.useMemo(() => {\n    let filtered = medications;\n\n    // Filter by search term\n    if (searchTerm) {\n      filtered = filterMedicationsBySearch(filtered, searchTerm);\n    }\n\n    // Filter by category\n    if (selectedCategory !== 'all') {\n      filtered = filtered.filter(med => med.category === selectedCategory);\n    }\n\n    return filtered.sort((a, b) => a.name.localeCompare(b.name));\n  }, [medications, searchTerm, selectedCategory]);\n\n  const activeMedications = filteredMedications.filter(med => med.isActive);\n  const inactiveMedications = filteredMedications.filter(med => !med.isActive);\n\n  const handleAddMedication = () => {\n    setEditingMedication(null);\n    setIsModalOpen(true);\n  };\n\n  const handleEditMedication = (medication: Medication) => {\n    setEditingMedication(medication);\n    setIsModalOpen(true);\n  };\n\n  const handleDeleteMedication = (id: string) => {\n    deleteMedication(id);\n    setConfirmDelete(null);\n  };\n\n  const handleToggleActive = (id: string) => {\n    toggleMedicationActive(id);\n  };\n\n  const handleOpenTaperingPlan = (medication: Medication) => {\n    setTaperingMedication(medication);\n    setTaperingModalOpen(true);\n  };\n\n  const handlePauseTapering = (medication: Medication) => {\n    setPauseMedication(medication);\n    setPauseModalOpen(true);\n  };\n\n  const handleConfirmPause = (severity: 'mild' | 'moderate' | 'severe') => {\n    if (pauseMedication) {\n      pauseTaperingSchedule(pauseMedication.id, severity);\n      setPauseModalOpen(false);\n      setPauseMedication(null);\n      toast.success(`Tapering paused for ${pauseMedication.name}. Take time to stabilize.`);\n    }\n  };\n\n  const handleOpenMultiplePills = (medicationId: string) => {\n    setMultiplePillsMedication(medicationId);\n    setMultiplePillsModalOpen(true);\n  };\n\n  const handleCloseMultiplePills = () => {\n    setMultiplePillsModalOpen(false);\n    setMultiplePillsMedication(null);\n  };\n\n  const handleOpenSideEffect = (medication: Medication) => {\n    setSideEffectMedication(medication);\n    setSideEffectModalOpen(true);\n  };\n\n  const handleCloseSideEffect = () => {\n    setSideEffectModalOpen(false);\n    setSideEffectMedication(null);\n  };\n\n  const handleOpenWithdrawal = (medication: Medication) => {\n    setWithdrawalMedication(medication);\n    setWithdrawalModalOpen(true);\n  };\n\n  const handleCloseWithdrawal = () => {\n    setWithdrawalModalOpen(false);\n    setWithdrawalMedication(null);\n  };\n\n  const handleOpenDependency = (medication: Medication) => {\n    setDependencyMedication(medication);\n    setDependencyModalOpen(true);\n  };\n\n  const handleCloseDependency = () => {\n    setDependencyModalOpen(false);\n    setDependencyMedication(null);\n  };\n\n  const handleResumeTapering = (medicationId: string) => {\n    resumeTaperingSchedule(medicationId);\n    toast.success('Tapering schedule resumed');\n  };\n\n  const MedicationCard = ({ medication }: { medication: Medication }) => {\n    const adherence = getMedicationAdherence(medication.id, 7);\n    const [showActions, setShowActions] = React.useState(false);\n    const currentDose = getCurrentDose(medication.id);\n    \n    const getRiskIcon = (riskLevel: string) => {\n      switch (riskLevel) {\n        case 'high':\n          return <ShieldAlert className=\"h-4 w-4 text-red-500\" />;\n        case 'moderate':\n          return <AlertCircle className=\"h-4 w-4 text-yellow-500\" />;\n        case 'low':\n          return <Shield className=\"h-4 w-4 text-blue-500\" />;\n        default:\n          return <Shield className=\"h-4 w-4 text-green-500\" />;\n      }\n    };\n\n    const getRiskColor = (riskLevel: string) => {\n      switch (riskLevel) {\n        case 'high':\n          return 'text-red-600 bg-red-50 border-red-200';\n        case 'moderate':\n          return 'text-yellow-600 bg-yellow-50 border-yellow-200';\n        case 'low':\n          return 'text-blue-600 bg-blue-50 border-blue-200';\n        default:\n          return 'text-green-600 bg-green-50 border-green-200';\n      }\n    };\n\n    return (\n      <div className=\"card hover:shadow-md transition-shadow\">\n        <div className=\"card-content p-4\">\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex items-start space-x-3 flex-1\">\n              <div\n                className=\"w-4 h-4 rounded-full mt-1 flex-shrink-0\"\n                style={{ backgroundColor: medication.color }}\n              />\n              <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-center space-x-2 flex-wrap gap-y-1\">\n                  <h3 className=\"text-lg font-medium text-gray-900 truncate\">\n                    {medication.name}\n                  </h3>\n                  {!medication.isActive && (\n                    <span className=\"badge bg-gray-100 text-gray-600\">\n                      Inactive\n                    </span>\n                  )}\n                  <span className={cn(\n                    'badge',\n                    medication.category === 'prescription' ? 'badge-primary' :\n                    medication.category === 'over-the-counter' ? 'badge-success' :\n                    medication.category === 'supplement' ? 'badge-warning' :\n                    'badge-secondary'\n                  )}>\n                    {medication.category.replace('-', ' ')}\n                  </span>\n                  {/* Risk Level Indicator */}\n                  <div className={cn('flex items-center space-x-1 px-2 py-1 rounded-md border text-xs font-medium', getRiskColor(medication.riskLevel))}>\n                    {getRiskIcon(medication.riskLevel)}\n                    <span>{medication.riskLevel} risk</span>\n                  </div>\n                </div>\n                \n                <div className=\"mt-1 space-y-1\">\n                  <p className=\"text-sm text-gray-600\">\n                    <strong>Dosage:</strong> {medication.useMultiplePills ? formatPillDisplay(medication) : formatDosage(medication.dosage, medication.unit)}\n                  </p>\n                  <p className=\"text-sm text-gray-600\">\n                    <strong>Frequency:</strong> {formatFrequency(medication.frequency)}\n                  </p>\n                  {/* Current Dose Information (Cyclic/Tapering) */}\n                  {currentDose.phase !== 'maintenance' && (\n                    <div className=\"flex items-center space-x-1 text-sm\">\n                      <Activity className=\"h-3 w-3 text-blue-500\" />\n                      <span className=\"text-blue-600 font-medium\">\n                        Current: {currentDose.dose} {medication.unit} ({currentDose.phase})\n                      </span>\n                      {currentDose.message && (\n                        <span className=\"text-gray-500 text-xs\"> {currentDose.message}</span>\n                      )}\n                    </div>\n                  )}\n                  {medication.tapering && (\n                    <div className=\"flex items-center space-x-1 text-sm\">\n                      <TrendingDown className=\"h-3 w-3 text-orange-500\" />\n                      <span className=\"text-orange-600 font-medium\">Tapering schedule active</span>\n                    </div>\n                  )}\n                  {medication.notes && (\n                    <p className=\"text-sm text-gray-500 line-clamp-2\">\n                      <strong>Notes:</strong> {medication.notes}\n                    </p>\n                  )}\n                </div>\n\n                {medication.isActive && (\n                  <div className=\"mt-3 flex items-center space-x-4\">\n                    <div className=\"flex items-center space-x-1\">\n                      <CheckCircle2 className=\"h-4 w-4 text-green-500\" />\n                      <span className=\"text-sm text-gray-600\">\n                        {adherence}% adherence (7 days)\n                      </span>\n                    </div>\n                    {(() => {\n                      // Calculate current pill count from inventory or fallback to pillsRemaining\n                      let totalPills = 0;\n                      if (medication.pillInventory && medication.pillInventory.length > 0) {\n                        totalPills = medication.pillInventory.reduce((sum, item) => sum + item.currentCount, 0);\n                      } else if (medication.pillsRemaining !== undefined) {\n                        totalPills = medication.pillsRemaining;\n                      }\n                      \n                      return totalPills > 0 ? (\n                        <div className=\"flex items-center space-x-1\">\n                          <Clock className=\"h-4 w-4 text-blue-500\" />\n                          <span className=\"text-sm text-gray-600\">\n                            {totalPills} pills left\n                          </span>\n                        </div>\n                      ) : null;\n                    })()}\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"relative\">\n              <button\n                onClick={() => setShowActions(!showActions)}\n                className=\"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100\"\n              >\n                <MoreVertical className=\"h-4 w-4\" />\n              </button>\n              \n              {showActions && (\n                <div className=\"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-10 border border-gray-200\">\n                  <div className=\"py-1\">\n                    <button\n                      onClick={() => {\n                        handleEditMedication(medication);\n                        setShowActions(false);\n                      }}\n                      className=\"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"\n                    >\n                      <Edit2 className=\"h-4 w-4 mr-2\" />\n                      Edit\n                    </button>\n                    <button\n                      onClick={() => {\n                        handleToggleActive(medication.id);\n                        setShowActions(false);\n                      }}\n                      className=\"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"\n                    >\n                      {medication.isActive ? (\n                        <>\n                          <AlertCircle className=\"h-4 w-4 mr-2\" />\n                          Deactivate\n                        </>\n                      ) : (\n                        <>\n                          <CheckCircle2 className=\"h-4 w-4 mr-2\" />\n                          Activate\n                        </>\n                      )}\n                    </button>\n                    {(medication.riskLevel === 'high' || medication.riskLevel === 'moderate') && (\n                      <button\n                        onClick={() => {\n                          updateRiskAssessment(medication.id);\n                          setShowActions(false);\n                        }}\n                        className=\"flex items-center w-full px-4 py-2 text-sm text-orange-600 hover:bg-orange-50\"\n                      >\n                        <ShieldAlert className=\"h-4 w-4 mr-2\" />\n                        Assess Risk\n                      </button>\n                    )}\n                    {medication.dependencyRiskCategory !== 'low-risk' && (\n                      <button\n                        onClick={() => {\n                          handleOpenDependency(medication);\n                          setShowActions(false);\n                        }}\n                        className=\"flex items-center w-full px-4 py-2 text-sm text-blue-600 hover:bg-blue-50\"\n                      >\n                        <Shield className=\"h-4 w-4 mr-2\" />\n                        Dependency Dashboard\n                      </button>\n                    )}\n                    {(() => {\n                      const medicationData = getMedicationByName(medication.name);\n                      const isTapering = medication.tapering?.isActive;\n                      const isPaused = medication.tapering?.isPaused;\n                      \n                      // Enhanced visibility: Show tapering options for more medications\n                      if (!medicationData?.taperingRequired && !isTapering) {\n                        // Show setup option for high-risk medications even if not flagged as requiring tapering\n                        if (medication.riskLevel === 'high' || medication.riskLevel === 'moderate') {\n                          return (\n                            <button\n                              onClick={() => {\n                                handleOpenTaperingPlan(medication);\n                                setShowActions(false);\n                              }}\n                              className=\"flex items-center w-full px-4 py-2 text-sm text-blue-600 hover:bg-blue-50\"\n                            >\n                              <Coffee className=\"h-4 w-4 mr-2\" />\n                              Setup Break Option\n                            </button>\n                          );\n                        }\n                        return null;\n                      }\n                      \n                      if (isTapering && isPaused) {\n                        return (\n                          <button\n                            onClick={() => {\n                              handleResumeTapering(medication.id);\n                              setShowActions(false);\n                            }}\n                            className=\"flex items-center w-full px-4 py-2 text-sm text-green-600 hover:bg-green-50\"\n                          >\n                            <Play className=\"h-4 w-4 mr-2\" />\n                            Resume Tapering\n                          </button>\n                        );\n                      }\n                      \n                      if (isTapering && !isPaused) {\n                        return (\n                          <button\n                            onClick={() => {\n                              handlePauseTapering(medication);\n                              setShowActions(false);\n                            }}\n                            className=\"flex items-center w-full px-4 py-2 text-sm text-orange-600 hover:bg-orange-50\"\n                          >\n                            <Coffee className=\"h-4 w-4 mr-2\" />\n                            Take a Break\n                          </button>\n                        );\n                      }\n                      \n                      return (\n                        <button\n                          onClick={() => {\n                            handleOpenTaperingPlan(medication);\n                            setShowActions(false);\n                          }}\n                          className=\"flex items-center w-full px-4 py-2 text-sm text-purple-600 hover:bg-purple-50\"\n                        >\n                          <Calendar className=\"h-4 w-4 mr-2\" />\n                          Create Tapering Plan\n                        </button>\n                      );\n                    })()}\n                    {/* Multiple Pills Option */}\n                    {!medication.useMultiplePills && (\n                      <button\n                        onClick={() => {\n                          handleOpenMultiplePills(medication.id);\n                          setShowActions(false);\n                        }}\n                        className=\"flex items-center w-full px-4 py-2 text-sm text-indigo-600 hover:bg-indigo-50\"\n                      >\n                        <div className=\"flex items-center mr-2\">\n                          <Pill className=\"h-3 w-3\" />\n                          <Pill className=\"h-3 w-3 -ml-1\" />\n                        </div>\n                        Multiple Pills Setup\n                      </button>\n                    )}\n                    {medication.useMultiplePills && (\n                      <button\n                        onClick={() => {\n                          handleOpenMultiplePills(medication.id);\n                          setShowActions(false);\n                        }}\n                        className=\"flex items-center w-full px-4 py-2 text-sm text-green-600 hover:bg-green-50\"\n                      >\n                        <div className=\"flex items-center mr-2\">\n                          <Pill className=\"h-3 w-3\" />\n                          <Pill className=\"h-3 w-3 -ml-1\" />\n                        </div>\n                        Edit Multiple Pills Setup\n                        <span className=\"ml-auto text-xs text-green-500\"></span>\n                      </button>\n                    )}\n                    \n                    <button\n                      onClick={() => {\n                        handleOpenSideEffect(medication);\n                        setShowActions(false);\n                      }}\n                      className=\"flex items-center w-full px-4 py-2 text-sm text-orange-600 hover:bg-orange-50\"\n                    >\n                      <AlertCircle className=\"h-4 w-4 mr-2\" />\n                      Report Side Effect\n                    </button>\n\n                    {medication.dependencyRiskCategory !== 'low-risk' && (\n                      <button\n                        onClick={() => {\n                          handleOpenWithdrawal(medication);\n                          setShowActions(false);\n                        }}\n                        className=\"flex items-center w-full px-4 py-2 text-sm text-purple-600 hover:bg-purple-50\"\n                      >\n                        <Activity className=\"h-4 w-4 mr-2\" />\n                        Track Withdrawal\n                      </button>\n                    )}\n                    <button\n                      onClick={() => {\n                        setConfirmDelete(medication.id);\n                        setShowActions(false);\n                      }}\n                      className=\"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50\"\n                    >\n                      <Trash2 className=\"h-4 w-4 mr-2\" />\n                      Delete\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Page Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Medications</h1>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Manage your medications and prescriptions\n          </p>\n        </div>\n        <div className=\"mt-4 sm:mt-0\">\n          <button\n            onClick={handleAddMedication}\n            className=\"btn-primary inline-flex items-center space-x-2\"\n          >\n            <Plus className=\"h-4 w-4\" />\n            <span>Add Medication</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Filters and Search */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4\">\n        <div className=\"relative flex-1 max-w-md\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n          <input\n            type=\"text\"\n            placeholder=\"Search medications...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"input pl-10\"\n          />\n        </div>\n        \n        <div className=\"flex items-center space-x-2\">\n          <Filter className=\"h-4 w-4 text-gray-400\" />\n          <select\n            value={selectedCategory}\n            onChange={(e) => setSelectedCategory(e.target.value as MedicationCategory | 'all')}\n            className=\"input w-auto\"\n          >\n            <option value=\"all\">All Categories</option>\n            <option value=\"prescription\">Prescription</option>\n            <option value=\"over-the-counter\">Over-the-counter</option>\n            <option value=\"supplement\">Supplement</option>\n            <option value=\"vitamin\">Vitamin</option>\n            <option value=\"herbal\">Herbal</option>\n            <option value=\"injection\">Injection</option>\n            <option value=\"topical\">Topical</option>\n            <option value=\"emergency\">Emergency</option>\n          </select>\n        </div>\n      </div>\n\n      {/* Medications List */}\n      {filteredMedications.length === 0 ? (\n        <div className=\"text-center py-12\">\n          <div className=\"mx-auto h-24 w-24 text-gray-400\">\n            <svg fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1} d=\"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 7.172V5L8 4z\" />\n            </svg>\n          </div>\n          <h3 className=\"mt-4 text-lg font-medium text-gray-900\">\n            {searchTerm || selectedCategory !== 'all' ? 'No medications found' : 'No medications yet'}\n          </h3>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            {searchTerm || selectedCategory !== 'all' \n              ? 'Try adjusting your search or filter criteria.'\n              : 'Get started by adding your first medication.'\n            }\n          </p>\n          {!searchTerm && selectedCategory === 'all' && (\n            <div className=\"mt-6\">\n              <button onClick={handleAddMedication} className=\"btn-primary\">\n                Add Your First Medication\n              </button>\n            </div>\n          )}\n        </div>\n      ) : (\n        <div className=\"space-y-6\">\n          {/* Active Medications */}\n          {activeMedications.length > 0 && (\n            <div>\n              <h2 className=\"text-lg font-medium text-gray-900 mb-4\">\n                Active Medications ({activeMedications.length})\n              </h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {activeMedications.map((medication) => (\n                  <MedicationCard key={medication.id} medication={medication} />\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Inactive Medications */}\n          {inactiveMedications.length > 0 && (\n            <div>\n              <h2 className=\"text-lg font-medium text-gray-900 mb-4\">\n                Inactive Medications ({inactiveMedications.length})\n              </h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {inactiveMedications.map((medication) => (\n                  <MedicationCard key={medication.id} medication={medication} />\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Medication Modal */}\n      <MedicationModal\n        isOpen={isModalOpen}\n        onClose={() => setIsModalOpen(false)}\n        medication={editingMedication}\n      />\n\n      {/* Delete Confirmation */}\n      <ConfirmDialog\n        isOpen={!!confirmDelete}\n        onClose={() => setConfirmDelete(null)}\n        onConfirm={() => confirmDelete && handleDeleteMedication(confirmDelete)}\n        title=\"Delete Medication\"\n        message=\"Are you sure you want to delete this medication? This action cannot be undone and will remove all associated logs and reminders.\"\n        confirmText=\"Delete\"\n        cancelText=\"Cancel\"\n        variant=\"danger\"\n      />\n\n      {/* Tapering Plan Modal */}\n      {taperingMedication && (\n        <TaperingPlanModal\n          isOpen={taperingModalOpen}\n          onClose={() => {\n            setTaperingModalOpen(false);\n            setTaperingMedication(null);\n          }}\n          medication={taperingMedication}\n        />\n      )}\n\n      {/* Pause Tapering Modal */}\n      {pauseModalOpen && pauseMedication && (\n        <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n          <div className=\"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0\">\n            <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" onClick={() => setPauseModalOpen(false)} />\n            \n            <div className=\"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg\">\n              <div className=\"bg-white px-4 pb-4 pt-5 sm:p-6\">\n                <div className=\"flex items-center space-x-3 mb-4\">\n                  <Coffee className=\"h-6 w-6 text-orange-600\" />\n                  <h3 className=\"text-lg font-medium text-gray-900\">\n                    Take a Break from Tapering\n                  </h3>\n                </div>\n                \n                <p className=\"text-sm text-gray-600 mb-4\">\n                  Pausing your tapering schedule for {pauseMedication.name} is completely normal and safe. \n                  How are you feeling with withdrawal symptoms?\n                </p>\n                \n                <div className=\"space-y-3\">\n                  <button\n                    onClick={() => handleConfirmPause('mild')}\n                    className=\"w-full p-3 text-left border border-gray-200 rounded-lg hover:bg-green-50 hover:border-green-300\"\n                  >\n                    <div className=\"font-medium text-green-800\">Mild symptoms</div>\n                    <div className=\"text-sm text-green-600\">Suggested break: 3-6 days</div>\n                  </button>\n                  \n                  <button\n                    onClick={() => handleConfirmPause('moderate')}\n                    className=\"w-full p-3 text-left border border-gray-200 rounded-lg hover:bg-orange-50 hover:border-orange-300\"\n                  >\n                    <div className=\"font-medium text-orange-800\">Moderate symptoms</div>\n                    <div className=\"text-sm text-orange-600\">Suggested break: 1-2 weeks</div>\n                  </button>\n                  \n                  <button\n                    onClick={() => handleConfirmPause('severe')}\n                    className=\"w-full p-3 text-left border border-gray-200 rounded-lg hover:bg-red-50 hover:border-red-300\"\n                  >\n                    <div className=\"font-medium text-red-800\">Severe symptoms</div>\n                    <div className=\"text-sm text-red-600\">Suggested break: 2-4 weeks</div>\n                  </button>\n                </div>\n                \n                <div className=\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n                  <p className=\"text-sm text-blue-700\">\n                    <strong>Remember:</strong> Taking breaks during tapering is encouraged and safe. \n                    Your schedule will automatically extend to account for the pause time.\n                  </p>\n                </div>\n              </div>\n              \n              <div className=\"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6\">\n                <button\n                  type=\"button\"\n                  onClick={() => setPauseModalOpen(false)}\n                  className=\"w-full justify-center rounded-md bg-gray-200 px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm hover:bg-gray-300 sm:ml-3 sm:w-auto\"\n                >\n                  Cancel\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Multiple Pills Setup Modal */}\n      {multiplePillsModalOpen && multiplePillsMedication && (\n        <MultiplePillSelector\n          medicationId={multiplePillsMedication}\n          onClose={handleCloseMultiplePills}\n        />\n      )}\n\n      {sideEffectModalOpen && sideEffectMedication && (\n        <SideEffectReportModal\n          isOpen={sideEffectModalOpen}\n          onClose={handleCloseSideEffect}\n          medication={sideEffectMedication}\n        />\n      )}\n\n      {withdrawalModalOpen && withdrawalMedication && (\n        <WithdrawalTrackingModal\n          isOpen={withdrawalModalOpen}\n          onClose={handleCloseWithdrawal}\n          medication={withdrawalMedication}\n        />\n      )}\n\n      {dependencyModalOpen && dependencyMedication && (\n        <DependencyPreventionModal\n          isOpen={dependencyModalOpen}\n          onClose={handleCloseDependency}\n          medication={dependencyMedication}\n        />\n      )}\n    </div>\n  );\n}\n","import { \n  PersonalMedicationTracking,\n  PersonalUsagePattern,\n  MedicationAlert,\n  RefillPrediction,\n  RefillTracking,\n  PersonalStockRecommendation\n} from '@/types/enhanced-inventory';\nimport { Medication, MedicationLog } from '@/types';\n\nexport class PersonalMedicationTracker {\n  \n  /**\n   * Analyzes your personal usage patterns from medication logs\n   */\n  static analyzePersonalUsage(\n    medication: Medication,\n    logs: MedicationLog[],\n    timeframeDays: number = 30\n  ): PersonalUsagePattern {\n    const cutoffDate = new Date(Date.now() - timeframeDays * 24 * 60 * 60 * 1000);\n    const recentLogs = logs.filter(log => \n      log.medicationId === medication.id && \n      new Date(log.timestamp) >= cutoffDate &&\n      log.adherence === 'taken'\n    );\n\n    if (recentLogs.length < 3) {\n      // Use scheduled frequency as baseline for new medications\n      const scheduledFrequency = this.getScheduledFrequency(medication);\n      return {\n        medicationId: medication.id,\n        averageDailyUse: scheduledFrequency,\n        usageConsistency: 'unpredictable',\n        recentTrend: 'stable',\n        adherenceRate: recentLogs.length > 0 ? 75 : 0, // Conservative estimate\n        lastAnalyzed: new Date(),\n        typicalMonthlyUse: scheduledFrequency * 30\n      };\n    }\n\n    // Calculate daily usage\n    const dailyUsages = this.calculateDailyUsages(recentLogs, timeframeDays);\n    const averageDailyUse = dailyUsages.reduce((sum, val) => sum + val, 0) / dailyUsages.length;\n    \n    // Calculate consistency \n    const variance = dailyUsages.reduce((sum, val) => sum + Math.pow(val - averageDailyUse, 2), 0) / dailyUsages.length;\n    const standardDeviation = Math.sqrt(variance);\n    const coefficientOfVariation = standardDeviation / averageDailyUse;\n    \n    let usageConsistency: 'very-consistent' | 'mostly-consistent' | 'variable' | 'unpredictable';\n    if (coefficientOfVariation < 0.1) usageConsistency = 'very-consistent';\n    else if (coefficientOfVariation < 0.25) usageConsistency = 'mostly-consistent';\n    else if (coefficientOfVariation < 0.5) usageConsistency = 'variable';\n    else usageConsistency = 'unpredictable';\n\n    // Determine trend\n    const firstHalf = dailyUsages.slice(0, Math.floor(dailyUsages.length / 2));\n    const secondHalf = dailyUsages.slice(Math.floor(dailyUsages.length / 2));\n    const firstAvg = firstHalf.reduce((sum, val) => sum + val, 0) / firstHalf.length;\n    const secondAvg = secondHalf.reduce((sum, val) => sum + val, 0) / secondHalf.length;\n    \n    let recentTrend: 'increasing' | 'decreasing' | 'stable' = 'stable';\n    const trendThreshold = averageDailyUse * 0.15; // 15% threshold\n    if (secondAvg > firstAvg + trendThreshold) recentTrend = 'increasing';\n    else if (secondAvg < firstAvg - trendThreshold) recentTrend = 'decreasing';\n\n    // Calculate adherence rate\n    const totalExpectedDoses = this.calculateExpectedDoses(medication, timeframeDays);\n    const adherenceRate = totalExpectedDoses > 0 ? Math.min(100, (recentLogs.length / totalExpectedDoses) * 100) : 100;\n\n    return {\n      medicationId: medication.id,\n      averageDailyUse,\n      usageConsistency,\n      recentTrend,\n      adherenceRate,\n      lastAnalyzed: new Date(),\n      typicalMonthlyUse: averageDailyUse * 30\n    };\n  }\n\n  /**\n   * Predicts when you'll need to refill based on your usage\n   */\n  static predictRefillNeeds(\n    medication: Medication,\n    currentPillCount: number,\n    usagePattern: PersonalUsagePattern,\n    tracking: PersonalMedicationTracking\n  ): RefillPrediction {\n    const baseUsage = usagePattern.averageDailyUse;\n    const adherenceAdjustedUsage = baseUsage * (usagePattern.adherenceRate / 100);\n    \n    // Account for trend\n    let adjustedUsage = adherenceAdjustedUsage;\n    if (usagePattern.recentTrend === 'increasing') {\n      adjustedUsage *= 1.1; // 10% increase\n    } else if (usagePattern.recentTrend === 'decreasing') {\n      adjustedUsage *= 0.9; // 10% decrease\n    }\n\n    // Calculate when you'll run out\n    const daysUntilEmpty = currentPillCount / adjustedUsage;\n    const estimatedEmptyDate = new Date(Date.now() + daysUntilEmpty * 24 * 60 * 60 * 1000);\n    \n    // Calculate when you should refill (considering refill time and buffer)\n    const bufferDays = tracking.reminderDaysAdvance + tracking.typicalRefillDays;\n    const suggestedRefillDate = new Date(estimatedEmptyDate.getTime() - bufferDays * 24 * 60 * 60 * 1000);\n    \n    // Calculate confidence based on usage consistency\n    let confidence: 'high' | 'medium' | 'low';\n    if (usagePattern.usageConsistency === 'very-consistent') confidence = 'high';\n    else if (usagePattern.usageConsistency === 'mostly-consistent') confidence = 'medium';\n    else confidence = 'low';\n\n    // Generate reasoning\n    let reasoning = `Based on your ${usagePattern.usageConsistency.replace('-', ' ')} usage`;\n    if (usagePattern.recentTrend !== 'stable') {\n      reasoning += ` and ${usagePattern.recentTrend} trend`;\n    }\n\n    // Generate alternative scenarios\n    const optimisticUsage = adjustedUsage * 0.8; // 20% less usage\n    const pessimisticUsage = adjustedUsage * 1.2; // 20% more usage\n    \n    const optimisticEmpty = new Date(Date.now() + (currentPillCount / optimisticUsage) * 24 * 60 * 60 * 1000);\n    const pessimisticEmpty = new Date(Date.now() + (currentPillCount / pessimisticUsage) * 24 * 60 * 60 * 1000);\n    \n    const optimisticRefill = new Date(optimisticEmpty.getTime() - bufferDays * 24 * 60 * 60 * 1000);\n    const pessimisticRefill = new Date(pessimisticEmpty.getTime() - bufferDays * 24 * 60 * 60 * 1000);\n\n    return {\n      medicationId: medication.id,\n      currentPillCount,\n      averageDailyUse: adjustedUsage,\n      estimatedEmptyDate,\n      suggestedRefillDate,\n      confidence,\n      reasoning,\n      scenarios: {\n        ifUsageIncreases: { emptyDate: pessimisticEmpty, refillDate: pessimisticRefill },\n        ifUsageDecreases: { emptyDate: optimisticEmpty, refillDate: optimisticRefill }\n      }\n    };\n  }\n\n  /**\n   * Generates realistic alerts about your medication supply (prevents false positives)\n   */\n  static generateMedicationAlerts(\n    medication: Medication,\n    currentPillCount: number,\n    prediction: RefillPrediction,\n    tracking: PersonalMedicationTracking,\n    activeRefills: RefillTracking[]\n  ): MedicationAlert[] {\n    const alerts: MedicationAlert[] = [];\n    const now = new Date();\n    const daysUntilEmpty = (prediction.estimatedEmptyDate.getTime() - now.getTime()) / (24 * 60 * 60 * 1000);\n    \n    // Don't generate alerts for medications with unrealistic supply (prevents false positives)\n    if (currentPillCount <= 0 || daysUntilEmpty > 365) {\n      return alerts; // No alerts for empty inventory or >1 year supply\n    }\n\n    // Check for active refills\n    const hasActiveRefill = activeRefills.some(refill => \n      refill.medicationId === medication.id && \n      ['requested', 'processing', 'ready'].includes(refill.status)\n    );\n\n    // Only alert if there's a meaningful shortage with realistic thresholds\n    const urgentThreshold = Math.max(2, tracking.emergencyDeliveryThreshold || 2);\n    const lowThreshold = Math.max(tracking.minimumDaysSupply, urgentThreshold + 1);\n    const refillThreshold = Math.max(lowThreshold + tracking.reminderDaysAdvance, 7);\n\n    // Almost out (urgent - within emergency threshold)\n    if (daysUntilEmpty <= urgentThreshold && currentPillCount < prediction.averageDailyUse * urgentThreshold && !hasActiveRefill) {\n      alerts.push({\n        id: `almost-out-${medication.id}-${Date.now()}`,\n        medicationId: medication.id,\n        type: 'almost_out',\n        priority: 'urgent',\n        message: `You're almost out of ${medication.name}! Only ${Math.ceil(daysUntilEmpty)} days left.`,\n        daysRemaining: daysUntilEmpty,\n        suggestion: 'Contact your pharmacy immediately or visit urgent care',\n        createdAt: now\n      });\n    }\n    \n    // Running low (but not urgent)\n    else if (daysUntilEmpty <= lowThreshold && daysUntilEmpty > urgentThreshold && !hasActiveRefill) {\n      alerts.push({\n        id: `running-low-${medication.id}-${Date.now()}`,\n        medicationId: medication.id,\n        type: 'running_low',\n        priority: 'important',\n        message: `Running low on ${medication.name} - ${Math.ceil(daysUntilEmpty)} days remaining`,\n        daysRemaining: daysUntilEmpty,\n        suggestion: 'Time to request a refill',\n        createdAt: now\n      });\n    }\n    \n    // Time to refill (proactive reminder)\n    else if (daysUntilEmpty <= refillThreshold && daysUntilEmpty > lowThreshold && !hasActiveRefill) {\n      // Only suggest refill if prediction confidence is reasonable\n      if (prediction.confidence !== 'low') {\n        alerts.push({\n          id: `time-to-refill-${medication.id}-${Date.now()}`,\n          medicationId: medication.id,\n          type: 'time_to_refill',\n          priority: 'reminder',\n          message: `Good time to refill ${medication.name}`,\n          daysRemaining: daysUntilEmpty,\n          suggestion: `Request refill (you have about ${Math.ceil(daysUntilEmpty)} days left)`,\n          createdAt: now\n        });\n      }\n    }\n\n    // Check for overdue refills\n    const overdueRefills = activeRefills.filter(refill =>\n      refill.medicationId === medication.id &&\n      refill.expectedDate < now &&\n      !refill.actualDate &&\n      refill.status !== 'ready'\n    );\n\n    if (overdueRefills.length > 0) {\n      const oldestOverdue = overdueRefills.sort((a, b) => \n        a.expectedDate.getTime() - b.expectedDate.getTime()\n      )[0];\n      \n      const delayDays = Math.ceil((now.getTime() - oldestOverdue.expectedDate.getTime()) / (24 * 60 * 60 * 1000));\n      \n      alerts.push({\n        id: `overdue-${medication.id}-${Date.now()}`,\n        medicationId: medication.id,\n        type: 'refill_overdue',\n        priority: delayDays > 3 ? 'important' : 'reminder',\n        message: `Your ${medication.name} refill is ${delayDays} days overdue`,\n        daysRemaining: daysUntilEmpty,\n        suggestion: 'Check with your pharmacy about the status',\n        createdAt: now\n      });\n    }\n\n    return alerts;\n  }\n\n  /**\n   * Provides simple recommendations for your medication supply\n   */\n  static getPersonalStockRecommendation(\n    medication: Medication,\n    usagePattern: PersonalUsagePattern,\n    tracking: PersonalMedicationTracking,\n    currentPillCount: number\n  ): PersonalStockRecommendation {\n    const dailyUse = usagePattern.averageDailyUse;\n    const daysSupply = currentPillCount / dailyUse;\n    \n    // Calculate recommended minimum based on usage consistency and refill time\n    let recommendedMinimumPills = Math.ceil(dailyUse * (tracking.minimumDaysSupply + tracking.typicalRefillDays));\n    \n    // Adjust based on usage consistency\n    if (usagePattern.usageConsistency === 'unpredictable') {\n      recommendedMinimumPills *= 1.2; // 20% more for unpredictable usage\n    } else if (usagePattern.usageConsistency === 'variable') {\n      recommendedMinimumPills *= 1.1; // 10% more for variable usage\n    }\n    \n    // Determine current level\n    let currentLevel: 'too_low' | 'adequate' | 'good' | 'more_than_needed';\n    if (daysSupply < tracking.minimumDaysSupply) currentLevel = 'too_low';\n    else if (daysSupply < recommendedMinimumPills / dailyUse) currentLevel = 'adequate';\n    else if (daysSupply < 90) currentLevel = 'good';\n    else currentLevel = 'more_than_needed';\n    \n    // Generate suggestions\n    const suggestions: string[] = [];\n    if (currentLevel === 'too_low') {\n      suggestions.push('Refill as soon as possible');\n      suggestions.push('Consider asking for a larger supply next time');\n    } else if (currentLevel === 'adequate') {\n      suggestions.push('You have enough for now, but plan your next refill');\n    } else if (currentLevel === 'good') {\n      suggestions.push('Good supply level - you can refill when convenient');\n    } else {\n      suggestions.push('You have more than needed - no rush to refill');\n      suggestions.push('Check expiration dates on older pills');\n    }\n    \n    // Add consistency-based suggestions\n    if (usagePattern.usageConsistency === 'unpredictable') {\n      suggestions.push('Consider keeping extra supply due to variable usage');\n    }\n    \n    let reasonForRecommendation = `Based on your ${usagePattern.usageConsistency.replace('-', ' ')} usage pattern`;\n    if (usagePattern.recentTrend !== 'stable') {\n      reasonForRecommendation += ` and ${usagePattern.recentTrend} trend`;\n    }\n\n    return {\n      medicationId: medication.id,\n      recommendedMinimumPills: Math.ceil(recommendedMinimumPills),\n      reasonForRecommendation,\n      currentLevel,\n      suggestions,\n      lastCalculated: new Date()\n    };\n  }\n\n  // Helper methods\n  private static calculateDailyUsages(logs: MedicationLog[], days: number): number[] {\n    const dailyMap = new Map<string, number>();\n    \n    logs.forEach(log => {\n      const date = new Date(log.timestamp).toDateString();\n      dailyMap.set(date, (dailyMap.get(date) || 0) + (log.dosageTaken || 0));\n    });\n    \n    return Array.from(dailyMap.values());\n  }\n\n  private static calculateExpectedDoses(medication: Medication, days: number): number {\n    // Simple calculation based on frequency\n    const timesPerDay = medication.timesPerDay || 1;\n    return days * timesPerDay;\n  }\n\n  private static getScheduledFrequency(medication: Medication): number {\n    // Calculate expected daily pill usage based on medication schedule\n    const timesPerDay = medication.timesPerDay || 1;\n    \n    // For multiple pill medications, calculate based on dose configurations\n    if (medication.useMultiplePills && medication.doseConfigurations) {\n      const defaultDose = medication.doseConfigurations.find(dose => dose.isDefault) || medication.doseConfigurations[0];\n      if (defaultDose) {\n        const pillsPerDose = defaultDose.pillComponents.reduce((sum, comp) => sum + comp.quantity, 0);\n        return pillsPerDose * timesPerDay;\n      }\n    }\n    \n    // For traditional dosage medications\n    const dosageAmount = parseFloat(medication.dosage) || 1;\n    const unitStrength = 1; // Assume 1 pill per dose for traditional medications\n    return (dosageAmount / unitStrength) * timesPerDay;\n  }\n}\n","import { \n  PharmacyInfo,\n  PersonalMedicationTracking,\n  PersonalUsagePattern,\n  MedicationAlert,\n  RefillPrediction\n} from '@/types/enhanced-inventory';\nimport { Medication, MedicationLog } from '@/types';\nimport { PersonalMedicationTracker } from './enhancedInventoryService';\n\nexport class PersonalRefillService {\n  \n  /**\n   * Analyzes your medication usage and provides helpful insights\n   */\n  static analyzePersonalMedicationNeeds(\n    medications: Medication[],\n    logs: MedicationLog[],\n    trackingSettings: PersonalMedicationTracking[]\n  ): {\n    usagePatterns: PersonalUsagePattern[];\n    refillPredictions: RefillPrediction[];\n    alerts: MedicationAlert[];\n    recommendations: string[];\n  } {\n    const usagePatterns: PersonalUsagePattern[] = [];\n    const refillPredictions: RefillPrediction[] = [];\n    const alerts: MedicationAlert[] = [];\n    const recommendations: string[] = [];\n\n    for (const medication of medications.filter(med => med.isActive)) {\n      // Analyze your usage pattern\n      const pattern = PersonalMedicationTracker.analyzePersonalUsage(medication, logs);\n      usagePatterns.push(pattern);\n\n      // Get your tracking settings\n      const tracking = trackingSettings.find(ts => ts.medicationId === medication.id) || \n        this.createDefaultTracking(medication);\n\n      // Calculate current pill count\n      const currentPillCount = this.calculateCurrentPillCount(medication);\n\n      // Generate refill prediction\n      const prediction = PersonalMedicationTracker.predictRefillNeeds(\n        medication, currentPillCount, pattern, tracking\n      );\n      refillPredictions.push(prediction);\n\n      // Generate alerts\n      const medicationAlerts = PersonalMedicationTracker.generateMedicationAlerts(\n        medication, currentPillCount, prediction, tracking, []\n      );\n      alerts.push(...medicationAlerts);\n\n      // Generate recommendations based on your usage\n      const medRecommendations = this.generatePersonalRecommendations(\n        medication, pattern, prediction, tracking\n      );\n      recommendations.push(...medRecommendations);\n    }\n\n    // Add general recommendations\n    recommendations.push(...this.generateGeneralRecommendations(usagePatterns, refillPredictions));\n\n    return { usagePatterns, refillPredictions, alerts, recommendations };\n  }\n\n  /**\n   * Helps you plan when to refill your medications\n   */\n  static generatePersonalRefillSchedule(\n    medications: Medication[],\n    predictions: RefillPrediction[]\n  ): {\n    urgentRefills: { medication: Medication; refillBy: Date; reason: string }[];\n    upcomingRefills: { medication: Medication; suggestedDate: Date; confidence: string }[];\n    coordinationOpportunities: { medications: Medication[]; bestDate: Date; reason: string }[];\n  } {\n    const urgentRefills: { medication: Medication; refillBy: Date; reason: string }[] = [];\n    const upcomingRefills: { medication: Medication; suggestedDate: Date; confidence: string }[] = [];\n    const coordinationOpportunities: { medications: Medication[]; bestDate: Date; reason: string }[] = [];\n\n    const now = new Date();\n\n    for (const prediction of predictions) {\n      const medication = medications.find(med => med.id === prediction.medicationId);\n      if (!medication) continue;\n\n      const daysUntilRefill = (prediction.suggestedRefillDate.getTime() - now.getTime()) / (24 * 60 * 60 * 1000);\n\n      if (daysUntilRefill <= 0) {\n        urgentRefills.push({\n          medication,\n          refillBy: prediction.suggestedRefillDate,\n          reason: daysUntilRefill <= -3 ? 'Overdue for refill' : 'Should refill now'\n        });\n      } else if (daysUntilRefill <= 14) {\n        upcomingRefills.push({\n          medication,\n          suggestedDate: prediction.suggestedRefillDate,\n          confidence: prediction.confidence\n        });\n      }\n    }\n\n    // Find coordination opportunities (medications from same pharmacy)\n    const pharmacyGroups = this.groupMedicationsByPharmacy(medications, pharmacyPreferences);\n    for (const [pharmacy, meds] of pharmacyGroups.entries()) {\n      if (meds.length > 1) {\n        const medsNeedingRefill = meds.filter(med => {\n          const pred = predictions.find(p => p.medicationId === med.id);\n          return pred && (pred.suggestedRefillDate.getTime() - now.getTime()) / (24 * 60 * 60 * 1000) <= 30;\n        });\n\n        if (medsNeedingRefill.length > 1) {\n          const latestRefillDate = new Date(Math.max(...medsNeedingRefill.map(med => {\n            const pred = predictions.find(p => p.medicationId === med.id);\n            return pred ? pred.suggestedRefillDate.getTime() : 0;\n          })));\n\n          coordinationOpportunities.push({\n            medications: medsNeedingRefill,\n            bestDate: latestRefillDate,\n            reason: 'Coordinate refills to save trips to pharmacy'\n          });\n        }\n      }\n    }\n\n    return { urgentRefills, upcomingRefills, coordinationOpportunities };\n  }\n\n  /**\n   * Predicts when user will need to refill based on usage patterns\n   */\n  static predictOptimalRefillTiming(\n    medication: Medication,\n    logs: MedicationLog[],\n    currentStock: number,\n    userPreferences: {\n      preferredDaysOfAdvance: number;\n      allowAutoRefill: boolean;\n      pharmacyPreference: string;\n    }\n  ): {\n    optimalOrderDate: Date;\n    alternatives: { date: Date; pros: string[]; cons: string[] }[];\n    riskFactors: string[];\n    confidence: number;\n  } {\n    // Analyze recent consumption\n    const recentLogs = logs.filter(log => \n      log.medicationId === medication.id &&\n      new Date(log.timestamp).getTime() > Date.now() - (30 * 24 * 60 * 60 * 1000)\n    );\n\n    const averageDailyConsumption = this.calculateAverageDailyConsumption(recentLogs);\n    const consumptionVariability = this.calculateConsumptionVariability(recentLogs);\n    \n    // Calculate basic run-out date\n    const daysUntilRunOut = currentStock / averageDailyConsumption;\n    const baseRunOutDate = new Date(Date.now() + daysUntilRunOut * 24 * 60 * 60 * 1000);\n    \n    // Account for user preferences\n    const optimalOrderDate = new Date(\n      baseRunOutDate.getTime() - userPreferences.preferredDaysOfAdvance * 24 * 60 * 60 * 1000\n    );\n\n    // Generate alternatives\n    const alternatives = [\n      {\n        date: new Date(optimalOrderDate.getTime() - 7 * 24 * 60 * 60 * 1000),\n        pros: ['Extra safety buffer', 'Avoid weekend delays'],\n        cons: ['Earlier expense', 'More inventory to manage']\n      },\n      {\n        date: new Date(optimalOrderDate.getTime() + 3 * 24 * 60 * 60 * 1000),\n        pros: ['Delayed expense', 'Less inventory'],\n        cons: ['Higher stockout risk', 'Less flexibility']\n      }\n    ];\n\n    // Identify risk factors\n    const riskFactors: string[] = [];\n    if (consumptionVariability > 0.3) {\n      riskFactors.push('High consumption variability detected');\n    }\n    if (medication.frequency === 'as-needed') {\n      riskFactors.push('PRN medication - unpredictable usage');\n    }\n    if (medication.riskLevel === 'high') {\n      riskFactors.push('High-risk medication - stockouts could be serious');\n    }\n\n    // Calculate confidence based on data quality and variability\n    const confidence = Math.max(30, Math.min(95, \n      100 - (consumptionVariability * 50) - (recentLogs.length < 10 ? 20 : 0)\n    ));\n\n    return {\n      optimalOrderDate,\n      alternatives,\n      riskFactors,\n      confidence\n    };\n  }\n\n  // Helper methods\n  private static createDefaultTracking(medication: Medication): PersonalMedicationTracking {\n    return {\n      medicationId: medication.id,\n      typicalRefillDays: 2, // 2 days to get refill\n      reminderDaysAdvance: 7, // remind 7 days before running out\n      minimumDaysSupply: 5, // keep at least 5 days on hand\n      refillReminderEnabled: true,\n      preferredPharmacy: medication.pharmacy,\n      preferredDeliveryMethod: 'pickup',\n      allowBackupDeliveryMethods: true,\n      emergencyDeliveryThreshold: 2\n    };\n  }\n\n  private static calculateCurrentPillCount(medication: Medication): number {\n    if (medication.pillInventory && medication.pillInventory.length > 0) {\n      return medication.pillInventory.reduce((total, item) => total + item.currentCount, 0);\n    }\n    return medication.pillsRemaining || 30; // Default fallback\n  }\n\n  private static generatePersonalRecommendations(\n    medication: Medication,\n    pattern: PersonalUsagePattern,\n    prediction: RefillPrediction,\n    tracking: PersonalMedicationTracking\n  ): string[] {\n    const recommendations: string[] = [];\n\n    // Adherence suggestions\n    if (pattern.adherenceRate < 80) {\n      recommendations.push(\n        `Consider setting more reminders for ${medication.name} - you're taking it ${Math.round(pattern.adherenceRate)}% of the time`\n      );\n    }\n\n    // Usage pattern suggestions\n    if (pattern.usageConsistency === 'unpredictable') {\n      recommendations.push(\n        `Your ${medication.name} usage varies a lot - consider keeping extra supply on hand`\n      );\n    }\n\n    // Timing recommendations\n    const daysUntilRefill = (prediction.suggestedRefillDate.getTime() - Date.now()) / (24 * 60 * 60 * 1000);\n    if (daysUntilRefill <= 3 && daysUntilRefill >= 0) {\n      recommendations.push(\n        `Good time to refill ${medication.name} in the next ${Math.ceil(daysUntilRefill)} days`\n      );\n    }\n\n    // Supply suggestions\n    if (tracking.minimumDaysSupply < 7) {\n      recommendations.push(\n        `Consider keeping at least a week's supply of ${medication.name} to avoid running out`\n      );\n    }\n\n    return recommendations;\n  }\n\n  private static generateGeneralRecommendations(\n    patterns: PersonalUsagePattern[],\n    predictions: RefillPrediction[]\n  ): string[] {\n    const recommendations: string[] = [];\n\n    // Overall adherence\n    const avgAdherence = patterns.reduce((sum, p) => sum + p.adherenceRate, 0) / patterns.length;\n    if (avgAdherence < 85) {\n      recommendations.push(\n        'Overall medication adherence could be improved - consider using more reminders or a pill organizer'\n      );\n    }\n\n    // Coordination opportunities\n    const refillsThisWeek = predictions.filter(p => {\n      const daysUntil = (p.suggestedRefillDate.getTime() - Date.now()) / (24 * 60 * 60 * 1000);\n      return daysUntil >= 0 && daysUntil <= 7;\n    });\n\n    if (refillsThisWeek.length > 2) {\n      recommendations.push(\n        `You have ${refillsThisWeek.length} refills due this week - consider getting them all at once`\n      );\n    }\n\n    return recommendations;\n  }\n\n  private static groupMedicationsByPharmacy(\n    medications: Medication[],\n    pharmacyPreferences: PharmacyInfo[]\n  ): Map<string, Medication[]> {\n    const groups = new Map<string, Medication[]>();\n\n    for (const medication of medications) {\n      const pharmacy = medication.pharmacy || 'Unknown';\n      if (!groups.has(pharmacy)) {\n        groups.set(pharmacy, []);\n      }\n      groups.get(pharmacy)!.push(medication);\n    }\n\n    return groups;\n  }\n\n  private static calculateAverageDailyConsumption(logs: MedicationLog[]): number {\n    if (logs.length === 0) return 1;\n\n    const takenLogs = logs.filter(log => log.adherence === 'taken');\n    const totalConsumption = takenLogs.reduce((sum, log) => sum + (log.dosageTaken || 0), 0);\n    const daysCovered = Math.max(1, logs.length / 2); // Rough estimate\n\n    return totalConsumption / daysCovered;\n  }\n\n  private static calculateConsumptionVariability(logs: MedicationLog[]): number {\n    if (logs.length < 3) return 0;\n\n    const dailyConsumptions = this.getDailyConsumptions(logs);\n    const average = dailyConsumptions.reduce((sum, val) => sum + val, 0) / dailyConsumptions.length;\n    const variance = dailyConsumptions.reduce((sum, val) => sum + Math.pow(val - average, 2), 0) / dailyConsumptions.length;\n    \n    return Math.sqrt(variance) / average; // Coefficient of variation\n  }\n\n  private static getDailyConsumptions(logs: MedicationLog[]): number[] {\n    const dailyMap = new Map<string, number>();\n    \n    logs.filter(log => log.adherence === 'taken').forEach(log => {\n      const date = new Date(log.timestamp).toDateString();\n      dailyMap.set(date, (dailyMap.get(date) || 0) + (log.dosageTaken || 0));\n    });\n    \n    return Array.from(dailyMap.values());\n  }\n}\n","import { useState, useEffect } from 'react';\nimport { X, Plus, Trash2, Package, MapPin, Star } from 'lucide-react';\nimport { PharmacyInfo, PersonalMedicationTracking } from '@/types/enhanced-inventory';\nimport { Medication } from '@/types';\nimport { generateId } from '@/utils/helpers';\n\ninterface InventoryConfigModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  medications: Medication[];\n  onSave: (pharmacies: PharmacyInfo[], trackingSettings: PersonalMedicationTracking[]) => void;\n  existingPharmacies?: PharmacyInfo[];\n  existingTracking?: PersonalMedicationTracking[];\n}\n\nexport function InventoryConfigModal({\n  isOpen,\n  onClose,\n  medications,\n  onSave,\n  existingPharmacies = [],\n  existingTracking = []\n}: InventoryConfigModalProps) {\n  const [pharmacies, setPharmacies] = useState<PharmacyInfo[]>(existingPharmacies);\n  const [trackingSettings, setTrackingSettings] = useState<PersonalMedicationTracking[]>(existingTracking);\n  const [activeTab, setActiveTab] = useState<'pharmacies' | 'medications'>('pharmacies');\n\n  // Initialize tracking settings for medications that don't have them\n  useEffect(() => {\n    const medicationsWithoutTracking = medications.filter(med => \n      med.isActive && !trackingSettings.find(ts => ts.medicationId === med.id)\n    );\n\n    if (medicationsWithoutTracking.length > 0) {\n      const newTrackingSettings = medicationsWithoutTracking.map(med => createDefaultTracking(med));\n      setTrackingSettings(prev => [...prev, ...newTrackingSettings]);\n    }\n  }, [medications, trackingSettings]);\n\n  const createDefaultTracking = (medication: Medication): PersonalMedicationTracking => ({\n    medicationId: medication.id,\n    preferredPharmacy: pharmacies.find(p => p.isPreferred)?.id,\n    typicalRefillDays: 2,\n    reminderDaysAdvance: 7,\n    minimumDaysSupply: 3,\n    refillReminderEnabled: true,\n    preferredDeliveryMethod: 'pickup',\n    allowBackupDeliveryMethods: true,\n    emergencyDeliveryThreshold: 2\n  });\n\n  const addPharmacy = () => {\n    const newPharmacy: PharmacyInfo = {\n      id: generateId(),\n      name: '',\n      typicalRefillTime: 1,\n      isPreferred: pharmacies.length === 0, // First pharmacy is preferred by default\n      deliveryOptions: {\n        pickup: { enabled: true, avgTime: 0.5 },\n        standardDelivery: { enabled: false, avgTime: 2 },\n        expeditedDelivery: { enabled: false, avgTime: 1 },\n        sameDay: { enabled: false, avgTime: 0.25, cutoffTime: '14:00' }\n      },\n      deliveryReliability: 'good'\n    };\n    setPharmacies([...pharmacies, newPharmacy]);\n  };\n\n  const updatePharmacy = (id: string, updates: Partial<PharmacyInfo>) => {\n    setPharmacies(pharmacies.map(p => p.id === id ? { ...p, ...updates } : p));\n  };\n\n  const removePharmacy = (id: string) => {\n    setPharmacies(pharmacies.filter(p => p.id !== id));\n    // Update tracking settings that reference this pharmacy\n    setTrackingSettings(trackingSettings.map(ts => ({\n      ...ts,\n      preferredPharmacy: ts.preferredPharmacy === id ? undefined : ts.preferredPharmacy,\n      backupPharmacy: ts.backupPharmacy === id ? undefined : ts.backupPharmacy\n    })));\n  };\n\n  const updateTracking = (medicationId: string, updates: Partial<PersonalMedicationTracking>) => {\n    setTrackingSettings(trackingSettings.map(ts => \n      ts.medicationId === medicationId ? { ...ts, ...updates } : ts\n    ));\n  };\n\n  const handleSave = () => {\n    onSave(pharmacies, trackingSettings);\n    onClose();\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden\">\n        <div className=\"flex items-center justify-between p-6 border-b\">\n          <h2 className=\"text-xl font-semibold text-gray-900\">Inventory Configuration</h2>\n          <button\n            onClick={onClose}\n            className=\"text-gray-400 hover:text-gray-600 transition-colors\"\n          >\n            <X className=\"h-6 w-6\" />\n          </button>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"border-b\">\n          <div className=\"flex space-x-0\">\n            <button\n              onClick={() => setActiveTab('pharmacies')}\n              className={`px-6 py-3 font-medium transition-colors border-b-2 ${\n                activeTab === 'pharmacies'\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700'\n              }`}\n            >\n              <div className=\"flex items-center space-x-2\">\n                <MapPin className=\"h-4 w-4\" />\n                <span>Pharmacies & Delivery</span>\n              </div>\n            </button>\n            <button\n              onClick={() => setActiveTab('medications')}\n              className={`px-6 py-3 font-medium transition-colors border-b-2 ${\n                activeTab === 'medications'\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700'\n              }`}\n            >\n              <div className=\"flex items-center space-x-2\">\n                <Package className=\"h-4 w-4\" />\n                <span>Medication Settings</span>\n              </div>\n            </button>\n          </div>\n        </div>\n\n        <div className=\"p-6 overflow-y-auto max-h-[60vh]\">\n          {activeTab === 'pharmacies' && (\n            <div className=\"space-y-6\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-lg font-medium text-gray-900\">Your Pharmacies</h3>\n                <button\n                  onClick={addPharmacy}\n                  className=\"btn-primary flex items-center space-x-2\"\n                >\n                  <Plus className=\"h-4 w-4\" />\n                  <span>Add Pharmacy</span>\n                </button>\n              </div>\n\n              {pharmacies.map((pharmacy) => (\n                <div key={pharmacy.id} className=\"border rounded-lg p-4 space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center space-x-3\">\n                      <input\n                        type=\"text\"\n                        placeholder=\"Pharmacy name\"\n                        value={pharmacy.name}\n                        onChange={(e) => updatePharmacy(pharmacy.id, { name: e.target.value })}\n                        className=\"font-medium text-lg border-0 bg-transparent focus:outline-none focus:ring-0 p-0\"\n                      />\n                      {pharmacy.isPreferred && (\n                        <Star className=\"h-5 w-5 text-yellow-500 fill-current\" />\n                      )}\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <button\n                        onClick={() => updatePharmacy(pharmacy.id, { isPreferred: !pharmacy.isPreferred })}\n                        className={`text-sm px-3 py-1 rounded ${\n                          pharmacy.isPreferred\n                            ? 'bg-yellow-100 text-yellow-800'\n                            : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n                        }`}\n                      >\n                        {pharmacy.isPreferred ? 'Preferred' : 'Set as Preferred'}\n                      </button>\n                      <button\n                        onClick={() => removePharmacy(pharmacy.id)}\n                        className=\"text-red-600 hover:text-red-800\"\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </button>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Address\n                      </label>\n                      <input\n                        type=\"text\"\n                        value={pharmacy.address || ''}\n                        onChange={(e) => updatePharmacy(pharmacy.id, { address: e.target.value })}\n                        className=\"input\"\n                        placeholder=\"123 Main St, City, State\"\n                      />\n                    </div>\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                        Phone\n                      </label>\n                      <input\n                        type=\"tel\"\n                        value={pharmacy.phone || ''}\n                        onChange={(e) => updatePharmacy(pharmacy.id, { phone: e.target.value })}\n                        className=\"input\"\n                        placeholder=\"(555) 123-4567\"\n                      />\n                    </div>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                      Delivery Options\n                    </label>\n                    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4\">\n                      {Object.entries(pharmacy.deliveryOptions).map(([method, config]) => (\n                        <div key={method} className=\"border rounded p-3\">\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <label className=\"flex items-center space-x-2\">\n                              <input\n                                type=\"checkbox\"\n                                checked={config.enabled}\n                                onChange={(e) => updatePharmacy(pharmacy.id, {\n                                  deliveryOptions: {\n                                    ...pharmacy.deliveryOptions,\n                                    [method]: { ...config, enabled: e.target.checked }\n                                  }\n                                })}\n                                className=\"rounded text-blue-600\"\n                              />\n                              <span className=\"text-sm font-medium capitalize\">\n                                {method.replace(/([A-Z])/g, ' $1').toLowerCase()}\n                              </span>\n                            </label>\n                          </div>\n                          {config.enabled && (\n                            <div className=\"space-y-2\">\n                              <div>\n                                <label className=\"block text-xs text-gray-500\">\n                                  Avg Time ({method === 'sameDay' ? 'hours' : 'days'})\n                                </label>\n                                <input\n                                  type=\"number\"\n                                  step=\"0.25\"\n                                  min=\"0\"\n                                  value={config.avgTime}\n                                  onChange={(e) => updatePharmacy(pharmacy.id, {\n                                    deliveryOptions: {\n                                      ...pharmacy.deliveryOptions,\n                                      [method]: { ...config, avgTime: parseFloat(e.target.value) || 0 }\n                                    }\n                                  })}\n                                  className=\"input text-sm\"\n                                />\n                              </div>\n                              {('cost' in config) && (\n                                <div>\n                                  <label className=\"block text-xs text-gray-500\">Cost ($)</label>\n                                  <input\n                                    type=\"number\"\n                                    step=\"0.01\"\n                                    min=\"0\"\n                                    value={('cost' in config && config.cost) || ''}\n                                    onChange={(e) => updatePharmacy(pharmacy.id, {\n                                      deliveryOptions: {\n                                        ...pharmacy.deliveryOptions,\n                                        [method]: { ...config, cost: parseFloat(e.target.value) || 0 }\n                                      }\n                                    })}\n                                    className=\"input text-sm\"\n                                    placeholder=\"0.00\"\n                                  />\n                                </div>\n                              )}\n                            </div>\n                          )}\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                      Delivery Reliability\n                    </label>\n                    <select\n                      value={pharmacy.deliveryReliability}\n                      onChange={(e) => updatePharmacy(pharmacy.id, { \n                        deliveryReliability: e.target.value as 'excellent' | 'good' | 'fair' | 'poor'\n                      })}\n                      className=\"input\"\n                    >\n                      <option value=\"excellent\">Excellent - Always on time</option>\n                      <option value=\"good\">Good - Usually on time</option>\n                      <option value=\"fair\">Fair - Sometimes delayed</option>\n                      <option value=\"poor\">Poor - Often delayed</option>\n                    </select>\n                  </div>\n                </div>\n              ))}\n\n              {pharmacies.length === 0 && (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <Package className=\"h-12 w-12 mx-auto mb-3 text-gray-300\" />\n                  <p>No pharmacies configured yet.</p>\n                  <p className=\"text-sm\">Add a pharmacy to start tracking deliveries.</p>\n                </div>\n              )}\n            </div>\n          )}\n\n          {activeTab === 'medications' && (\n            <div className=\"space-y-6\">\n              <h3 className=\"text-lg font-medium text-gray-900\">Medication Tracking Settings</h3>\n              \n              {medications.filter(med => med.isActive).map((medication) => {\n                const tracking = trackingSettings.find(ts => ts.medicationId === medication.id);\n                if (!tracking) return null;\n\n                return (\n                  <div key={medication.id} className=\"border rounded-lg p-4 space-y-4\">\n                    <h4 className=\"font-medium text-gray-900\">{medication.name}</h4>\n                    \n                    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Preferred Pharmacy\n                        </label>\n                        <select\n                          value={tracking.preferredPharmacy || ''}\n                          onChange={(e) => updateTracking(medication.id, { preferredPharmacy: e.target.value || undefined })}\n                          className=\"input\"\n                        >\n                          <option value=\"\">No preference</option>\n                          {pharmacies.map(pharmacy => (\n                            <option key={pharmacy.id} value={pharmacy.id}>\n                              {pharmacy.name}\n                            </option>\n                          ))}\n                        </select>\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Preferred Delivery Method\n                        </label>\n                        <select\n                          value={tracking.preferredDeliveryMethod}\n                          onChange={(e) => updateTracking(medication.id, { \n                            preferredDeliveryMethod: e.target.value as any \n                          })}\n                          className=\"input\"\n                        >\n                          <option value=\"pickup\">Pickup</option>\n                          <option value=\"standardDelivery\">Standard Delivery</option>\n                          <option value=\"expeditedDelivery\">Expedited Delivery</option>\n                          <option value=\"sameDay\">Same Day</option>\n                        </select>\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Reminder Days in Advance\n                        </label>\n                        <input\n                          type=\"number\"\n                          min=\"1\"\n                          max=\"30\"\n                          value={tracking.reminderDaysAdvance}\n                          onChange={(e) => updateTracking(medication.id, { \n                            reminderDaysAdvance: parseInt(e.target.value) || 7 \n                          })}\n                          className=\"input\"\n                        />\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Minimum Days Supply\n                        </label>\n                        <input\n                          type=\"number\"\n                          min=\"1\"\n                          max=\"30\"\n                          value={tracking.minimumDaysSupply}\n                          onChange={(e) => updateTracking(medication.id, { \n                            minimumDaysSupply: parseInt(e.target.value) || 3 \n                          })}\n                          className=\"input\"\n                        />\n                      </div>\n\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Emergency Delivery Threshold\n                        </label>\n                        <input\n                          type=\"number\"\n                          min=\"0\"\n                          max=\"7\"\n                          value={tracking.emergencyDeliveryThreshold}\n                          onChange={(e) => updateTracking(medication.id, { \n                            emergencyDeliveryThreshold: parseInt(e.target.value) || 2 \n                          })}\n                          className=\"input\"\n                        />\n                        <p className=\"text-xs text-gray-500 mt-1\">\n                          Days remaining to trigger emergency delivery options\n                        </p>\n                      </div>\n\n                      <div className=\"flex items-center\">\n                        <label className=\"flex items-center space-x-2\">\n                          <input\n                            type=\"checkbox\"\n                            checked={tracking.allowBackupDeliveryMethods}\n                            onChange={(e) => updateTracking(medication.id, { \n                              allowBackupDeliveryMethods: e.target.checked \n                            })}\n                            className=\"rounded text-blue-600\"\n                          />\n                          <span className=\"text-sm\">Allow backup delivery methods</span>\n                        </label>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          )}\n        </div>\n\n        <div className=\"flex justify-end space-x-3 p-6 border-t bg-gray-50\">\n          <button\n            onClick={onClose}\n            className=\"btn-secondary\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={handleSave}\n            className=\"btn-primary\"\n          >\n            Save Configuration\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { \n  Package, \n  TrendingUp, \n  AlertTriangle, \n  ShoppingCart,\n  Calendar,\n  BarChart3,\n  Settings\n} from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { PersonalRefillService } from '@/services/smartRefillService';\nimport { formatDate } from '@/utils/helpers';\nimport { InventoryConfigModal } from '@/components/modals/InventoryConfigModal';\nimport { PharmacyInfo, PersonalMedicationTracking } from '@/types/enhanced-inventory';\n\ninterface InventoryInsight {\n  type: 'info' | 'warning' | 'success' | 'error';\n  title: string;\n  message: string;\n  action?: string;\n}\n\nexport function PersonalMedicationDashboard() {\n  const { medications, logs } = useMedicationStore();\n  const [insights, setInsights] = useState<InventoryInsight[]>([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isConfigModalOpen, setIsConfigModalOpen] = useState(false);\n  const [pharmacies, setPharmacies] = useState<PharmacyInfo[]>([]);\n  const [trackingSettings, setTrackingSettings] = useState<PersonalMedicationTracking[]>([]);\n\n  useEffect(() => {\n    // Load saved configuration\n    try {\n      const savedPharmacies = localStorage.getItem('medication-pharmacies');\n      const savedTracking = localStorage.getItem('medication-tracking');\n      \n      if (savedPharmacies) {\n        setPharmacies(JSON.parse(savedPharmacies));\n      }\n      if (savedTracking) {\n        setTrackingSettings(JSON.parse(savedTracking));\n      }\n    } catch (error) {\n      console.error('Error loading inventory config:', error);\n    }\n\n    analyzeInventoryStatus();\n  }, [medications, logs]);\n\n  const analyzeInventoryStatus = async () => {\n    setIsLoading(true);\n    \n    try {\n      // Filter to only medications that have trackable inventory\n      const trackableMedications = medications.filter(med => {\n        // Has inventory or legacy pill count\n        const hasInventory = (med.pillInventory && med.pillInventory.length > 0) || \n                            (med.pillsRemaining !== undefined && med.pillsRemaining > 0);\n        return med.isActive && hasInventory;\n      });\n\n      if (trackableMedications.length === 0) {\n        setInsights([{\n          type: 'info',\n          title: 'No Trackable Medications',\n          message: 'Enable \"Multiple Pills\" on your medications to start tracking inventory.',\n          action: 'Go to Medications page'\n        }]);\n        setIsLoading(false);\n        return;\n      }\n\n      // Analyze your medication needs with filtered medications\n      const analysis = PersonalRefillService.analyzePersonalMedicationNeeds(\n        trackableMedications,\n        logs.filter(log => trackableMedications.some(med => med.id === log.medicationId)),\n        trackingSettings // Use saved tracking settings\n      );\n\n      // Generate insights based on analysis\n      const newInsights: InventoryInsight[] = [];\n\n      // Only show meaningful alerts\n      analysis.alerts.filter(alert => alert.daysRemaining >= 0).forEach(alert => {\n        newInsights.push({\n          type: alert.priority === 'urgent' ? 'error' : alert.priority === 'important' ? 'warning' : 'info',\n          title: alert.type.replace('_', ' ').replace(/\\b\\w/g, l => l.toUpperCase()),\n          message: alert.message,\n          action: alert.suggestion\n        });\n      });\n\n      // Show meaningful recommendations only\n      const meaningfulRecommendations = analysis.recommendations.filter(rec => \n        !rec.includes('No medications') && !rec.includes('error')\n      );\n      \n      meaningfulRecommendations.slice(0, 3).forEach(rec => {\n        newInsights.push({\n          type: 'info',\n          title: 'Personal Insight',\n          message: rec\n        });\n      });\n\n      // Only show refill schedule if there are actual predictions\n      const validPredictions = analysis.refillPredictions.filter(pred => \n        pred.confidence !== 'low' && pred.currentPillCount > 0\n      );\n\n      if (validPredictions.length > 0) {\n        const refillSchedule = PersonalRefillService.generatePersonalRefillSchedule(\n          trackableMedications,\n          validPredictions\n        );\n\n        // Add urgent refills as insights\n        refillSchedule.urgentRefills.forEach(refill => {\n          newInsights.push({\n            type: 'error',\n            title: 'Urgent Refill Needed',\n            message: `${refill.medication.name} - ${refill.reason}`,\n            action: 'Get refill by ' + formatDate(refill.refillBy)\n          });\n        });\n\n        // Add coordination opportunities\n        refillSchedule.coordinationOpportunities.forEach(opportunity => {\n          newInsights.push({\n            type: 'success',\n            title: 'Coordination Opportunity',\n            message: `${opportunity.reason} for ${opportunity.medications.map(m => m.name).join(', ')}`,\n            action: 'Plan refills for ' + formatDate(opportunity.bestDate)\n          });\n        });\n      }\n\n      // Add current inventory summary\n      const totalMedications = trackableMedications.length;\n      const medicationsWithLowStock = trackableMedications.filter(med => {\n        const currentCount = (med.pillInventory?.reduce((sum, item) => sum + item.currentCount, 0) || med.pillsRemaining || 0);\n        return currentCount <= 7; // Less than a week supply\n      }).length;\n\n      if (medicationsWithLowStock > 0) {\n        newInsights.unshift({\n          type: 'warning',\n          title: 'Inventory Summary',\n          message: `${medicationsWithLowStock} of ${totalMedications} medications running low (7 days supply)`,\n          action: 'Review inventory below'\n        });\n      } else {\n        newInsights.unshift({\n          type: 'success',\n          title: 'Inventory Status',\n          message: `All ${totalMedications} tracked medications have adequate supply`,\n          action: 'View details below'\n        });\n      }\n\n      setInsights(newInsights);\n    } catch (error) {\n      console.error('Error analyzing inventory:', error);\n      setInsights([{\n        type: 'error',\n        title: 'Analysis Error',\n        message: 'Unable to analyze inventory status. Please try again.'\n      }]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const getInsightIcon = (type: string) => {\n    switch (type) {\n      case 'error': return <AlertTriangle className=\"h-4 w-4 text-red-500\" />;\n      case 'warning': return <AlertTriangle className=\"h-4 w-4 text-orange-500\" />;\n      case 'success': return <TrendingUp className=\"h-4 w-4 text-green-500\" />;\n      default: return <Package className=\"h-4 w-4 text-blue-500\" />;\n    }\n  };\n\n  const getInsightBorderColor = (type: string) => {\n    switch (type) {\n      case 'error': return 'border-red-200 bg-red-50';\n      case 'warning': return 'border-orange-200 bg-orange-50';\n      case 'success': return 'border-green-200 bg-green-50';\n      default: return 'border-blue-200 bg-blue-50';\n    }\n  };\n\n  const handleInsightAction = (insight: InventoryInsight) => {\n    console.log(' Handling insight action:', insight);\n    \n    // Handle different insight actions\n    if (insight.action?.includes('Go to Medications')) {\n      window.location.href = '/medications';\n    } else if (insight.action?.includes('Get refill')) {\n      // Show refill reminder\n      alert(` Reminder: ${insight.message}\\n\\nAction: ${insight.action}`);\n    } else if (insight.action?.includes('Plan refills')) {\n      // Show coordination opportunity\n      alert(` Coordination Opportunity: ${insight.message}\\n\\nAction: ${insight.action}`);\n    } else if (insight.action?.includes('Review inventory')) {\n      // Scroll to medication details (if they exist)\n      const medicationSection = document.querySelector('[data-testid=\"medication-details\"]');\n      if (medicationSection) {\n        medicationSection.scrollIntoView({ behavior: 'smooth' });\n      }\n    } else if (insight.action?.includes('View details')) {\n      // Show detailed breakdown\n      alert(` Inventory Status: ${insight.message}\\n\\nYour medications have adequate supply. Keep up the good work!`);\n    } else {\n      // Generic action\n      alert(` ${insight.title}: ${insight.message}`);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\n        <div className=\"animate-pulse\">\n          <div className=\"flex items-center space-x-2 mb-4\">\n            <div className=\"h-5 w-5 bg-gray-300 rounded\"></div>\n            <div className=\"h-4 w-32 bg-gray-300 rounded\"></div>\n          </div>\n          <div className=\"space-y-3\">\n            {[1, 2, 3].map(i => (\n              <div key={i} className=\"h-16 bg-gray-200 rounded\"></div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center space-x-3\">\n            <BarChart3 className=\"h-6 w-6 text-blue-600\" />\n            <div>\n            <h2 className=\"text-lg font-semibold text-gray-900\">Personal Medication Tracker</h2>\n            <p className=\"text-sm text-gray-600\">\n              Smart insights for your medication supply\n            </p>\n            </div>\n          </div>\n          <button \n            onClick={() => setIsConfigModalOpen(true)}\n            className=\"flex items-center space-x-2 px-4 py-2 bg-blue-50 text-blue-700 rounded-lg hover:bg-blue-100 transition-colors\"\n          >\n            <Settings className=\"h-4 w-4\" />\n            <span>Configure</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Quick Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div className=\"bg-white rounded-lg border border-gray-200 p-4\">\n          <div className=\"flex items-center space-x-3\">\n            <Package className=\"h-8 w-8 text-blue-500\" />\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">Active Medications</p>\n              <p className=\"text-2xl font-bold text-gray-900\">\n                {medications.filter(med => med.isActive).length}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg border border-gray-200 p-4\">\n          <div className=\"flex items-center space-x-3\">\n            <AlertTriangle className=\"h-8 w-8 text-orange-500\" />\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">Alerts</p>\n              <p className=\"text-2xl font-bold text-gray-900\">\n                {insights.filter(i => i.type === 'error' || i.type === 'warning').length}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg border border-gray-200 p-4\">\n          <div className=\"flex items-center space-x-3\">\n            <ShoppingCart className=\"h-8 w-8 text-green-500\" />\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">Refills Due</p>\n              <p className=\"text-2xl font-bold text-gray-900\">\n                {insights.filter(i => i.title === 'Urgent Refill').length}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-lg border border-gray-200 p-4\">\n          <div className=\"flex items-center space-x-3\">\n            <TrendingUp className=\"h-8 w-8 text-purple-500\" />\n            <div>\n              <p className=\"text-sm font-medium text-gray-600\">Tips</p>\n              <p className=\"text-2xl font-bold text-gray-900\">\n                {insights.filter(i => i.type === 'success').length}\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Insights Feed */}\n      <div className=\"bg-white rounded-lg border border-gray-200\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <h3 className=\"text-lg font-medium text-gray-900\">Personal Insights & Recommendations</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">\n            Based on your usage patterns and current supply\n          </p>\n        </div>\n\n        <div className=\"p-6\">\n          {insights.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <Package className=\"mx-auto h-12 w-12 text-gray-400\" />\n              <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No insights yet</h3>\n              <p className=\"mt-1 text-sm text-gray-500\">\n                Start tracking your medications to get helpful insights about your supply.\n              </p>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              {insights.map((insight, index) => (\n                <div \n                  key={index}\n                  className={`border rounded-lg p-4 ${getInsightBorderColor(insight.type)}`}\n                >\n                  <div className=\"flex items-start space-x-3\">\n                    {getInsightIcon(insight.type)}\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm font-medium text-gray-900\">\n                        {insight.title}\n                      </p>\n                      <p className=\"text-sm text-gray-700 mt-1\">\n                        {insight.message}\n                      </p>\n                      {insight.action && (\n                        <button \n                          onClick={() => handleInsightAction(insight)}\n                          className=\"mt-2 text-sm font-medium text-blue-600 hover:text-blue-500 transition-colors\"\n                        >\n                          {insight.action} \n                        </button>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Future Predictions */}\n      <div className=\"bg-white rounded-lg border border-gray-200\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <h3 className=\"text-lg font-medium text-gray-900\">Your Refill Calendar</h3>\n          <p className=\"text-sm text-gray-600 mt-1\">\n            When you'll likely need refills based on your usage\n          </p>\n        </div>\n\n        <div className=\"p-6\">\n          <div className=\"text-center py-8\">\n            <Calendar className=\"mx-auto h-12 w-12 text-gray-400\" />\n            <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Refill calendar coming soon</h3>\n            <p className=\"mt-1 text-sm text-gray-500\">\n              We're building a calendar to help you plan your refills ahead of time.\n            </p>\n          </div>\n        </div>\n      </div>\n\n      {/* Configuration Modal */}\n      <InventoryConfigModal\n        isOpen={isConfigModalOpen}\n        onClose={() => setIsConfigModalOpen(false)}\n        medications={medications}\n        onSave={handleConfigSave}\n        existingPharmacies={pharmacies}\n        existingTracking={trackingSettings}\n      />\n    </div>\n  );\n\n  function handleConfigSave(newPharmacies: PharmacyInfo[], newTrackingSettings: PersonalMedicationTracking[]) {\n    setPharmacies(newPharmacies);\n    setTrackingSettings(newTrackingSettings);\n    \n    // Store in localStorage for persistence (in a real app, this would go to a database)\n    localStorage.setItem('medication-pharmacies', JSON.stringify(newPharmacies));\n    localStorage.setItem('medication-tracking', JSON.stringify(newTrackingSettings));\n    \n    // Refresh the analysis with new settings\n    analyzeInventoryStatus();\n  }\n}\n","import { PersonalMedicationDashboard } from '@/components/ui/EnhancedInventoryDashboard';\n\nexport function Inventory() {\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Medication Inventory</h1>\n        <p className=\"text-gray-600 mt-1\">\n          Track your medication supply and get intelligent refill recommendations\n        </p>\n      </div>\n      \n      <PersonalMedicationDashboard />\n    </div>\n  );\n}\n","import React from 'react';\nimport { \n  ChevronLeft, \n  ChevronRight, \n  Calendar as CalendarIcon,\n  Clock,\n  CheckCircle2,\n  XCircle,\n  AlertTriangle,\n} from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { formatTime, formatDate, isSameDay, formatPillDisplayShort } from '@/utils/helpers';\nimport { CalendarEvent, AdherenceStatus } from '@/types';\nimport { format, addDays, startOfWeek, endOfWeek, eachDayOfInterval, isSameMonth, isToday } from 'date-fns';\n\nexport function Calendar() {\n  const {\n    medications,\n    logs,\n    reminders,\n    markMedicationTaken,\n    markMedicationMissed\n  } = useMedicationStore();\n\n  const [selectedDate, setSelectedDate] = React.useState(new Date());\n  const [viewMode, setViewMode] = React.useState<'week' | 'month'>('week');\n  const [selectedMedication, setSelectedMedication] = React.useState<string | 'all'>('all');\n\n  // Generate calendar events\n  const generateCalendarEvents = React.useCallback((): CalendarEvent[] => {\n    const events: CalendarEvent[] = [];\n    const activeMedications = medications.filter(med => med.isActive);\n\n    // Add logged medications as events\n    logs.forEach(log => {\n      const medication = medications.find(med => med.id === log.medicationId);\n      if (medication) {\n          events.push({\n            id: log.id,\n            medicationId: log.medicationId,\n            medicationName: medication.name,\n            dosageInfo: medication.useMultiplePills ? formatPillDisplayShort(medication) : `${medication.dosage} ${medication.unit}`,\n            time: formatTime(new Date(log.timestamp)),\n            type: log.adherence === 'taken' ? 'taken' : 'missed',\n            status: log.adherence,\n            date: new Date(log.timestamp),\n          });\n      }\n    });\n\n    // Add reminders as upcoming events\n    const today = new Date();\n    const endDate = viewMode === 'week' ? addDays(today, 7) : addDays(today, 30);\n    \n    for (let date = today; date <= endDate; date = addDays(date, 1)) {\n      const dayName = format(date, 'EEEE').toLowerCase();\n      \n      reminders.forEach(reminder => {\n        const medication = activeMedications.find(med => med.id === reminder.medicationId);\n        if (medication && reminder.isActive && reminder.days.includes(dayName as any)) {\n          // Check if this reminder was already logged\n          const existingLog = logs.find(log => \n            log.medicationId === reminder.medicationId && \n            isSameDay(new Date(log.timestamp), date)\n          );\n\n          if (!existingLog) {\n            events.push({\n              id: `${reminder.id}-${format(date, 'yyyy-MM-dd')}`,\n              medicationId: reminder.medicationId,\n              medicationName: medication.name,\n              dosageInfo: medication.useMultiplePills ? formatPillDisplayShort(medication) : `${medication.dosage} ${medication.unit}`,\n              time: reminder.time,\n              type: 'reminder',\n              status: 'upcoming',\n              date,\n            });\n          }\n        }\n      });\n    }\n\n    return events.sort((a, b) => a.date.getTime() - b.date.getTime());\n  }, [medications, logs, reminders, viewMode]);\n\n  const calendarEvents = generateCalendarEvents();\n\n  // Filter events by selected medication\n  const filteredEvents = selectedMedication === 'all' \n    ? calendarEvents \n    : calendarEvents.filter(event => event.medicationId === selectedMedication);\n\n  // Get events for selected date\n  const selectedDateEvents = filteredEvents.filter(event => \n    isSameDay(event.date, selectedDate)\n  );\n\n  // Generate calendar grid for month view\n  const monthDays = React.useMemo(() => {\n    const start = startOfWeek(new Date(selectedDate.getFullYear(), selectedDate.getMonth(), 1));\n    const end = endOfWeek(new Date(selectedDate.getFullYear(), selectedDate.getMonth() + 1, 0));\n    return eachDayOfInterval({ start, end });\n  }, [selectedDate]);\n\n  // Generate week days for week view\n  const weekDays = React.useMemo(() => {\n    const start = startOfWeek(selectedDate);\n    const end = endOfWeek(selectedDate);\n    return eachDayOfInterval({ start, end });\n  }, [selectedDate]);\n\n  const handleDateSelect = (date: Date) => {\n    setSelectedDate(date);\n  };\n\n  const handleMedicationAction = (medicationId: string, action: 'taken' | 'missed') => {\n    if (action === 'taken') {\n      markMedicationTaken(medicationId);\n    } else {\n      markMedicationMissed(medicationId);\n    }\n  };\n\n  const navigateCalendar = (direction: 'prev' | 'next') => {\n    if (viewMode === 'week') {\n      setSelectedDate(prev => addDays(prev, direction === 'next' ? 7 : -7));\n    } else {\n      setSelectedDate(prev => new Date(prev.getFullYear(), prev.getMonth() + (direction === 'next' ? 1 : -1), 1));\n    }\n  };\n\n  const EventIcon = ({ status }: { status: AdherenceStatus | 'upcoming' }) => {\n    switch (status) {\n      case 'taken':\n        return <CheckCircle2 className=\"h-4 w-4 text-green-500\" />;\n      case 'missed':\n        return <XCircle className=\"h-4 w-4 text-red-500\" />;\n      case 'upcoming':\n        return <Clock className=\"h-4 w-4 text-blue-500\" />;\n      default:\n        return <AlertTriangle className=\"h-4 w-4 text-yellow-500\" />;\n    }\n  };\n\n  const CalendarDay = ({ date, isCurrentMonth = true }: { date: Date; isCurrentMonth?: boolean }) => {\n    const dayEvents = filteredEvents.filter(event => isSameDay(event.date, date));\n    const isSelected = isSameDay(date, selectedDate);\n    const isCurrentDay = isToday(date);\n\n    return (\n      <button\n        onClick={() => handleDateSelect(date)}\n        className={`\n          p-2 h-20 w-full border border-gray-200 text-left hover:bg-gray-50 transition-colors\n          ${isSelected ? 'bg-blue-50 border-blue-200' : ''}\n          ${isCurrentDay ? 'bg-yellow-50' : ''}\n          ${!isCurrentMonth ? 'text-gray-400 bg-gray-50' : ''}\n        `}\n      >\n        <div className=\"font-medium text-sm mb-1\">\n          {format(date, 'd')}\n        </div>\n        <div className=\"space-y-1\">\n          {dayEvents.slice(0, 2).map((event) => (\n            <div\n              key={event.id}\n              className=\"flex items-center space-x-1 text-xs\"\n            >\n              <EventIcon status={event.status} />\n              <span className=\"truncate\">{event.medicationName}</span>\n            </div>\n          ))}\n          {dayEvents.length > 2 && (\n            <div className=\"text-xs text-gray-500\">\n              +{dayEvents.length - 2} more\n            </div>\n          )}\n        </div>\n      </button>\n    );\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Page Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Calendar</h1>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            View and manage your medication schedule\n          </p>\n        </div>\n        <div className=\"mt-4 sm:mt-0 flex items-center space-x-3\">\n          <select\n            value={selectedMedication}\n            onChange={(e) => setSelectedMedication(e.target.value)}\n            className=\"input\"\n          >\n            <option value=\"all\">All Medications</option>\n            {medications.filter(med => med.isActive).map(med => (\n              <option key={med.id} value={med.id}>{med.name}</option>\n            ))}\n          </select>\n          <div className=\"flex rounded-md shadow-sm\">\n            <button\n              onClick={() => setViewMode('week')}\n              className={`px-3 py-2 text-sm font-medium rounded-l-md border ${\n                viewMode === 'week' \n                  ? 'bg-primary-600 text-white border-primary-600' \n                  : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'\n              }`}\n            >\n              Week\n            </button>\n            <button\n              onClick={() => setViewMode('month')}\n              className={`px-3 py-2 text-sm font-medium rounded-r-md border-t border-r border-b ${\n                viewMode === 'month' \n                  ? 'bg-primary-600 text-white border-primary-600' \n                  : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'\n              }`}\n            >\n              Month\n            </button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        {/* Calendar Grid */}\n        <div className=\"lg:col-span-2\">\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-lg font-medium text-gray-900\">\n                  {format(selectedDate, 'MMMM yyyy')}\n                </h3>\n                <div className=\"flex items-center space-x-2\">\n                  <button\n                    onClick={() => navigateCalendar('prev')}\n                    className=\"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100\"\n                  >\n                    <ChevronLeft className=\"h-5 w-5\" />\n                  </button>\n                  <button\n                    onClick={() => setSelectedDate(new Date())}\n                    className=\"px-3 py-1 text-sm font-medium text-primary-600 hover:text-primary-700\"\n                  >\n                    Today\n                  </button>\n                  <button\n                    onClick={() => navigateCalendar('next')}\n                    className=\"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100\"\n                  >\n                    <ChevronRight className=\"h-5 w-5\" />\n                  </button>\n                </div>\n              </div>\n            </div>\n            <div className=\"card-content p-0\">\n              {viewMode === 'month' ? (\n                <div>\n                  {/* Calendar Header */}\n                  <div className=\"grid grid-cols-7 border-b border-gray-200\">\n                    {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (\n                      <div key={day} className=\"p-3 text-center text-sm font-medium text-gray-700 border-r border-gray-200 last:border-r-0\">\n                        {day}\n                      </div>\n                    ))}\n                  </div>\n                  {/* Calendar Body */}\n                  <div className=\"grid grid-cols-7\">\n                    {monthDays.map((date, index) => (\n                      <CalendarDay\n                        key={index}\n                        date={date}\n                        isCurrentMonth={isSameMonth(date, selectedDate)}\n                      />\n                    ))}\n                  </div>\n                </div>\n              ) : (\n                <div>\n                  {/* Week Header */}\n                  <div className=\"grid grid-cols-7 border-b border-gray-200\">\n                    {weekDays.map(date => (\n                      <div key={date.toISOString()} className=\"p-3 text-center border-r border-gray-200 last:border-r-0\">\n                        <div className=\"text-sm font-medium text-gray-700\">\n                          {format(date, 'EEE')}\n                        </div>\n                        <div className={`text-lg font-semibold mt-1 ${\n                          isToday(date) ? 'text-primary-600' : 'text-gray-900'\n                        }`}>\n                          {format(date, 'd')}\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                  {/* Week Body */}\n                  <div className=\"grid grid-cols-7 min-h-[300px]\">\n                    {weekDays.map(date => (\n                      <CalendarDay key={date.toISOString()} date={date} />\n                    ))}\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n\n        {/* Selected Date Events */}\n        <div>\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <h3 className=\"text-lg font-medium text-gray-900\">\n                {formatDate(selectedDate, 'EEEE, MMM d')}\n              </h3>\n            </div>\n            <div className=\"card-content\">\n              {selectedDateEvents.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <CalendarIcon className=\"mx-auto h-12 w-12 text-gray-400\" />\n                  <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No events</h3>\n                  <p className=\"mt-1 text-sm text-gray-500\">\n                    No medications scheduled for this day.\n                  </p>\n                </div>\n              ) : (\n                <div className=\"space-y-3\">\n                  {selectedDateEvents.map((event) => (\n                    <div\n                      key={event.id}\n                      className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\"\n                    >\n                      <div className=\"flex items-center space-x-3\">\n                        <EventIcon status={event.status} />\n                        <div>\n                          <p className=\"text-sm font-medium text-gray-900\">\n                            {event.medicationName}\n                          </p>\n                          <p className=\"text-xs text-gray-500\">\n                            {(event as any).dosageInfo}  {event.time}\n                          </p>\n                        </div>\n                      </div>\n                      {event.status === 'upcoming' && (\n                        <div className=\"flex space-x-2\">\n                          <button\n                            onClick={() => handleMedicationAction(event.medicationId, 'taken')}\n                            className=\"btn-success text-xs px-2 py-1\"\n                          >\n                            Take\n                          </button>\n                          <button\n                            onClick={() => handleMedicationAction(event.medicationId, 'missed')}\n                            className=\"btn-secondary text-xs px-2 py-1\"\n                          >\n                            Skip\n                          </button>\n                        </div>\n                      )}\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n\n          {/* Legend */}\n          <div className=\"card mt-4\">\n            <div className=\"card-header\">\n              <h3 className=\"text-sm font-medium text-gray-900\">Legend</h3>\n            </div>\n            <div className=\"card-content\">\n              <div className=\"space-y-2\">\n                <div className=\"flex items-center space-x-2\">\n                  <CheckCircle2 className=\"h-4 w-4 text-green-500\" />\n                  <span className=\"text-sm text-gray-700\">Taken</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <XCircle className=\"h-4 w-4 text-red-500\" />\n                  <span className=\"text-sm text-gray-700\">Missed</span>\n                </div>\n                <div className=\"flex items-center space-x-2\">\n                  <Clock className=\"h-4 w-4 text-blue-500\" />\n                  <span className=\"text-sm text-gray-700\">Upcoming</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { AlertTriangle } from 'lucide-react';\n\ninterface ErrorBoundaryState {\n  hasError: boolean;\n  error?: Error;\n}\n\ninterface ErrorBoundaryProps {\n  children: React.ReactNode;\n  fallback?: React.ReactNode;\n  onError?: (error: Error, errorInfo: React.ErrorInfo) => void;\n}\n\nexport class ErrorBoundary extends React.Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  constructor(props: ErrorBoundaryProps) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error: Error): ErrorBoundaryState {\n    return { hasError: true, error };\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\n    \n    if (this.props.onError) {\n      this.props.onError(error, errorInfo);\n    }\n  }\n\n  render() {\n    if (this.state.hasError) {\n      if (this.props.fallback) {\n        return this.props.fallback;\n      }\n\n      return (\n        <div className=\"flex flex-col items-center justify-center p-8 text-center bg-red-50 rounded-lg border border-red-200\">\n          <AlertTriangle className=\"h-12 w-12 text-red-500 mb-4\" />\n          <h3 className=\"text-lg font-semibold text-red-800 mb-2\">\n            Something went wrong\n          </h3>\n          <p className=\"text-red-600 mb-4\">\n            We encountered an error while displaying this content.\n          </p>\n          <button\n            onClick={() => this.setState({ hasError: false, error: undefined })}\n            className=\"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors\"\n          >\n            Try Again\n          </button>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n\n// Functional component wrapper for easier use\nexport function ChartErrorBoundary({ children }: { children: React.ReactNode }) {\n  return (\n    <ErrorBoundary\n      fallback={\n        <div className=\"flex items-center justify-center h-[300px] text-gray-500 bg-gray-50 rounded-lg border border-gray-200\">\n          <div className=\"text-center\">\n            <AlertTriangle className=\"h-8 w-8 mx-auto mb-2 text-gray-400\" />\n            <p>Unable to display chart</p>\n            <p className=\"text-sm text-gray-400\">Chart data may be invalid</p>\n          </div>\n        </div>\n      }\n      onError={(error) => {\n        console.error('Chart error:', error);\n      }}\n    >\n      {children}\n    </ErrorBoundary>\n  );\n}\n","import React from 'react';\nimport { \n  TrendingUp, \n  TrendingDown, \n  Calendar,\n  Clock,\n  BarChart3,\n  Download,\n  RefreshCw,\n  Activity,\n  AlertTriangle,\n  Shield,\n  Heart\n} from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { getAdherenceColor, calculateAdherence } from '@/utils/helpers';\nimport { AdherenceReport } from '@/types';\nimport { \n  LineChart, \n  Line, \n  XAxis, \n  YAxis, \n  CartesianGrid, \n  Tooltip, \n  ResponsiveContainer,\n  BarChart,\n  Bar,\n  PieChart,\n  Pie,\n  Cell\n} from 'recharts';\nimport { ChartErrorBoundary } from '@/components/ui/ErrorBoundary';\nimport { subDays, format, eachDayOfInterval, isSameDay } from 'date-fns';\n\nexport function Analytics() {\n  const {\n    medications,\n    logs,\n  } = useMedicationStore();\n\n  const [dateRange, setDateRange] = React.useState<'7d' | '30d' | '90d'>('30d');\n  const [selectedMedication, setSelectedMedication] = React.useState<string | 'all'>('all');\n  const [activeTab, setActiveTab] = React.useState<'adherence' | 'withdrawal' | 'side-effects' | 'risk'>('adherence');\n\n  const activeMedications = medications.filter(med => med.isActive);\n\n  // Calculate adherence data\n  const adherenceData = React.useMemo(() => {\n    const days = dateRange === '7d' ? 7 : dateRange === '30d' ? 30 : 90;\n    const endDate = new Date();\n    const startDate = subDays(endDate, days - 1);\n    \n    return eachDayOfInterval({ start: startDate, end: endDate }).map(date => {\n      const dayLogs = logs.filter(log => {\n        try {\n          const logDate = new Date(log.timestamp);\n          return logDate instanceof Date && !isNaN(logDate.getTime()) && isSameDay(logDate, date);\n        } catch {\n          return false;\n        }\n      });\n      \n      const takenCount = dayLogs.filter(log => log.adherence === 'taken').length;\n      const missedCount = dayLogs.filter(log => log.adherence === 'missed').length;\n      const totalCount = takenCount + missedCount;\n      \n      const adherencePercent = totalCount > 0 ? Math.round((takenCount / totalCount) * 100) : 0;\n      \n      // Ensure all values are valid numbers and within expected ranges\n      const safeAdherence = Number.isFinite(adherencePercent) && adherencePercent >= 0 && adherencePercent <= 100 ? adherencePercent : 0;\n      const safeTaken = Number.isFinite(takenCount) && takenCount >= 0 ? takenCount : 0;\n      const safeMissed = Number.isFinite(missedCount) && missedCount >= 0 ? missedCount : 0;\n      \n      return {\n        date: format(date, 'MMM dd'),\n        fullDate: date,\n        taken: safeTaken,\n        missed: safeMissed,\n        adherence: safeAdherence,\n      };\n    });\n  }, [logs, dateRange]);\n\n  // Calculate medication-specific adherence\n  const medicationAdherence: AdherenceReport[] = React.useMemo(() => {\n    const days = dateRange === '7d' ? 7 : dateRange === '30d' ? 30 : 90;\n    \n    return activeMedications.map(medication => {\n      const medicationLogs = logs.filter(log => {\n        try {\n          const logDate = new Date(log.timestamp);\n          return log.medicationId === medication.id &&\n                 logDate instanceof Date && \n                 !isNaN(logDate.getTime()) &&\n                 logDate >= subDays(new Date(), days);\n        } catch {\n          return false;\n        }\n      });\n      \n      const takenDoses = medicationLogs.filter(log => log.adherence === 'taken').length;\n      const totalDoses = medicationLogs.length;\n      const missedDoses = Math.max(0, totalDoses - takenDoses);\n      const adherencePercentage = calculateAdherence(takenDoses, totalDoses);\n      \n      // Ensure all values are valid numbers\n      const safeTotalDoses = Number.isFinite(totalDoses) ? totalDoses : 0;\n      const safeTakenDoses = Number.isFinite(takenDoses) ? takenDoses : 0;\n      const safeMissedDoses = Number.isFinite(missedDoses) ? missedDoses : 0;\n      const safeAdherencePercentage = Number.isFinite(adherencePercentage) ? adherencePercentage : 0;\n      \n      return {\n        medicationId: medication.id,\n        medicationName: medication.name,\n        totalDoses: safeTotalDoses,\n        takenDoses: safeTakenDoses,\n        missedDoses: safeMissedDoses,\n        adherencePercentage: safeAdherencePercentage,\n        period: {\n          start: subDays(new Date(), days),\n          end: new Date(),\n        },\n      };\n    }).sort((a, b) => (b.adherencePercentage || 0) - (a.adherencePercentage || 0));\n  }, [activeMedications, logs, dateRange]);\n\n  // Calculate overall stats\n  const overallStats = React.useMemo(() => {\n    const days = dateRange === '7d' ? 7 : dateRange === '30d' ? 30 : 90;\n    const recentLogs = logs.filter(log => {\n      try {\n        const logDate = new Date(log.timestamp);\n        return logDate instanceof Date && \n               !isNaN(logDate.getTime()) &&\n               logDate >= subDays(new Date(), days);\n      } catch {\n        return false;\n      }\n    });\n    \n    const takenCount = recentLogs.filter(log => log.adherence === 'taken').length;\n    const missedCount = recentLogs.filter(log => log.adherence === 'missed').length;\n    const totalCount = takenCount + missedCount;\n    \n    const overallAdherence = calculateAdherence(takenCount, totalCount);\n    const avgDailyMeds = days > 0 ? Math.round(totalCount / days * 10) / 10 : 0;\n    \n    // Calculate trend (compare with previous period)\n    const previousPeriodLogs = logs.filter(log => {\n      try {\n        const logDate = new Date(log.timestamp);\n        const startPrevious = subDays(new Date(), days * 2);\n        const endPrevious = subDays(new Date(), days);\n        return logDate instanceof Date && \n               !isNaN(logDate.getTime()) &&\n               logDate >= startPrevious && \n               logDate < endPrevious;\n      } catch {\n        return false;\n      }\n    });\n    const previousTaken = previousPeriodLogs.filter(log => log.adherence === 'taken').length;\n    const previousTotal = previousPeriodLogs.length;\n    const previousAdherence = calculateAdherence(previousTaken, previousTotal);\n    const trend = overallAdherence - previousAdherence;\n    \n    // Ensure all values are valid numbers\n    const safeOverallAdherence = Number.isFinite(overallAdherence) ? overallAdherence : 0;\n    const safeTotalCount = Number.isFinite(totalCount) ? totalCount : 0;\n    const safeTakenCount = Number.isFinite(takenCount) ? takenCount : 0;\n    const safeMissedCount = Number.isFinite(missedCount) ? missedCount : 0;\n    const safeAvgDailyMeds = Number.isFinite(avgDailyMeds) ? avgDailyMeds : 0;\n    const safeTrend = Number.isFinite(trend) ? trend : 0;\n    \n    return {\n      overallAdherence: safeOverallAdherence,\n      totalDoses: safeTotalCount,\n      takenDoses: safeTakenCount,\n      missedDoses: safeMissedCount,\n      avgDailyMeds: safeAvgDailyMeds,\n      trend: safeTrend,\n    };\n  }, [logs, dateRange]);\n\n  // Prepare chart data for adherence by medication\n  const medicationChartData = medicationAdherence.slice(0, 10).map(report => {\n    // Ensure all values are valid numbers for chart\n    const safeAdherence = Number.isFinite(report.adherencePercentage) && !isNaN(report.adherencePercentage) ? report.adherencePercentage : 0;\n    const safeTaken = Number.isFinite(report.takenDoses) && !isNaN(report.takenDoses) ? report.takenDoses : 0;\n    const safeMissed = Number.isFinite(report.missedDoses) && !isNaN(report.missedDoses) ? report.missedDoses : 0;\n    \n    return {\n      name: report.medicationName && report.medicationName.length > 15 \n        ? report.medicationName.substring(0, 15) + '...' \n        : report.medicationName || 'Unknown',\n      adherence: Math.max(0, Math.min(100, safeAdherence)), // Clamp between 0-100\n      taken: Math.max(0, safeTaken),\n      missed: Math.max(0, safeMissed),\n    };\n  }).filter(item => item.name && item.name !== 'Unknown'); // Filter out invalid entries\n\n  // Prepare pie chart data for adherence distribution\n  const adherenceDistribution = [\n    { \n      name: 'Taken', \n      value: Number.isFinite(overallStats.takenDoses) && !isNaN(overallStats.takenDoses) ? Math.max(0, overallStats.takenDoses) : 0, \n      color: '#10b981' \n    },\n    { \n      name: 'Missed', \n      value: Number.isFinite(overallStats.missedDoses) && !isNaN(overallStats.missedDoses) ? Math.max(0, overallStats.missedDoses) : 0, \n      color: '#ef4444' \n    },\n  ].filter(item => Number.isFinite(item.value) && item.value > 0);\n\n  // Calculate withdrawal progress data\n  const withdrawalProgressData = React.useMemo(() => {\n    const medicationsWithWithdrawal = medications.filter(med => \n      med.dependencePrevention?.withdrawalHistory && med.dependencePrevention.withdrawalHistory.length > 0\n    );\n\n    return medicationsWithWithdrawal.map(medication => {\n      const withdrawalHistory = medication.dependencePrevention!.withdrawalHistory;\n      const activeWithdrawals = withdrawalHistory.filter(event => !event.successfullyCompleted);\n      const completedWithdrawals = withdrawalHistory.filter(event => event.successfullyCompleted);\n      \n      // Calculate current withdrawal progress\n      let currentProgress = null;\n      if (activeWithdrawals.length > 0) {\n        const currentEvent = activeWithdrawals[activeWithdrawals.length - 1];\n        const daysSinceStart = Math.floor((new Date().getTime() - new Date(currentEvent.startDate).getTime()) / (1000 * 60 * 60 * 24));\n        const resolvedSymptoms = currentEvent.symptoms.filter(s => s.resolved).length;\n        const totalSymptoms = currentEvent.symptoms.length;\n        const progressPercent = totalSymptoms > 0 ? Math.round((resolvedSymptoms / totalSymptoms) * 100) : 0;\n        \n        currentProgress = {\n          daysSinceStart,\n          progressPercent,\n          severity: currentEvent.severity,\n          symptomCount: totalSymptoms,\n          resolvedCount: resolvedSymptoms\n        };\n      }\n\n      return {\n        medicationName: medication.name,\n        medicationId: medication.id,\n        activeWithdrawals: activeWithdrawals.length,\n        completedWithdrawals: completedWithdrawals.length,\n        currentProgress,\n        totalEvents: withdrawalHistory.length\n      };\n    });\n  }, [medications]);\n\n  // Calculate side effect trends data\n  const sideEffectTrendsData = React.useMemo(() => {\n    const days = dateRange === '7d' ? 7 : dateRange === '30d' ? 30 : 90;\n    const endDate = new Date();\n    const startDate = subDays(endDate, days - 1);\n\n    // Get all side effect reports within date range\n    const allSideEffects = medications.flatMap(medication => \n      (medication.sideEffectReports || []).filter(report => {\n        const reportDate = new Date(report.timestamp);\n        return reportDate >= startDate && reportDate <= endDate;\n      }).map(report => ({\n        ...report,\n        medicationName: medication.name,\n        medicationId: medication.id\n      }))\n    );\n\n    // Group by severity\n    const severityGroups = allSideEffects.reduce((acc, report) => {\n      acc[report.severity] = (acc[report.severity] || 0) + 1;\n      return acc;\n    }, {} as Record<string, number>);\n\n    // Group by body system\n    const bodySystemGroups = allSideEffects.reduce((acc, report) => {\n      acc[report.bodySystem] = (acc[report.bodySystem] || 0) + 1;\n      return acc;\n    }, {} as Record<string, number>);\n\n    // Daily side effect counts\n    const dailySideEffects = eachDayOfInterval({ start: startDate, end: endDate }).map(date => {\n      const dayReports = allSideEffects.filter(report => \n        isSameDay(new Date(report.timestamp), date)\n      );\n      \n      return {\n        date: format(date, 'MMM dd'),\n        fullDate: date,\n        total: dayReports.length,\n        mild: dayReports.filter(r => r.severity === 'mild').length,\n        moderate: dayReports.filter(r => r.severity === 'moderate').length,\n        severe: dayReports.filter(r => r.severity === 'severe').length,\n        lifeThreatening: dayReports.filter(r => r.severity === 'life-threatening').length\n      };\n    });\n\n    // Most common side effects\n    const commonSideEffects = allSideEffects.reduce((acc, report) => {\n      acc[report.sideEffect] = (acc[report.sideEffect] || 0) + 1;\n      return acc;\n    }, {} as Record<string, number>);\n\n    const topSideEffects = Object.entries(commonSideEffects)\n      .sort(([,a], [,b]) => b - a)\n      .slice(0, 10)\n      .map(([name, count]) => ({ name, count }));\n\n    return {\n      totalReports: allSideEffects.length,\n      severityDistribution: Object.entries(severityGroups).map(([severity, count]) => ({\n        severity,\n        count,\n        percentage: Math.round((count / allSideEffects.length) * 100)\n      })),\n      bodySystemDistribution: Object.entries(bodySystemGroups).map(([system, count]) => ({\n        system,\n        count,\n        percentage: Math.round((count / allSideEffects.length) * 100)\n      })),\n      dailyTrends: dailySideEffects,\n      topSideEffects,\n      recentReports: allSideEffects.slice(-5).reverse()\n    };\n  }, [medications, dateRange]);\n\n  // Calculate dependency risk analytics\n  const dependencyRiskData = React.useMemo(() => {\n    const riskDistribution = medications.reduce((acc, medication) => {\n      if (medication.isActive) {\n        acc[medication.riskLevel] = (acc[medication.riskLevel] || 0) + 1;\n      }\n      return acc;\n    }, {} as Record<string, number>);\n\n    const medicationsWithPrevention = medications.filter(med => \n      med.dependencePrevention && med.isActive\n    );\n\n    const alertCounts = medicationsWithPrevention.reduce((acc, medication) => {\n      const alerts = medication.dependencePrevention?.alerts || [];\n      const unacknowledged = alerts.filter(alert => !alert.acknowledged).length;\n      const total = alerts.length;\n      \n      return {\n        total: acc.total + total,\n        unacknowledged: acc.unacknowledged + unacknowledged,\n        acknowledged: acc.acknowledged + (total - unacknowledged)\n      };\n    }, { total: 0, unacknowledged: 0, acknowledged: 0 });\n\n    const taperingRecommendations = medicationsWithPrevention.filter(med => \n      med.dependencePrevention?.taperingRecommended\n    ).length;\n\n    return {\n      riskDistribution: Object.entries(riskDistribution).map(([risk, count]) => ({\n        risk,\n        count,\n        percentage: Math.round((count / activeMedications.length) * 100)\n      })),\n      alertCounts,\n      taperingRecommendations,\n      totalMonitored: medicationsWithPrevention.length\n    };\n  }, [medications, activeMedications.length]);\n\n  const handleExportData = () => {\n    // This would implement data export functionality\n    console.log('Exporting analytics data...');\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Page Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Analytics</h1>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Track your medication adherence and progress\n          </p>\n        </div>\n        <div className=\"mt-4 sm:mt-0 flex items-center space-x-3\">\n          <select\n            value={selectedMedication}\n            onChange={(e) => setSelectedMedication(e.target.value)}\n            className=\"input\"\n          >\n            <option value=\"all\">All Medications</option>\n            {activeMedications.map(med => (\n              <option key={med.id} value={med.id}>{med.name}</option>\n            ))}\n          </select>\n          <select\n            value={dateRange}\n            onChange={(e) => setDateRange(e.target.value as '7d' | '30d' | '90d')}\n            className=\"input\"\n          >\n            <option value=\"7d\">Last 7 days</option>\n            <option value=\"30d\">Last 30 days</option>\n            <option value=\"90d\">Last 90 days</option>\n          </select>\n          <button\n            onClick={handleExportData}\n            className=\"btn-secondary inline-flex items-center space-x-2\"\n          >\n            <Download className=\"h-4 w-4\" />\n            <span>Export</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Tab Navigation */}\n      <div className=\"border-b border-gray-200\">\n        <nav className=\"-mb-px flex space-x-8\">\n          {[\n            { id: 'adherence', label: 'Adherence', icon: TrendingUp },\n            { id: 'withdrawal', label: 'Withdrawal Progress', icon: Activity },\n            { id: 'side-effects', label: 'Side Effects', icon: AlertTriangle },\n            { id: 'risk', label: 'Risk Assessment', icon: Shield }\n          ].map(({ id, label, icon: Icon }) => (\n            <button\n              key={id}\n              onClick={() => setActiveTab(id as any)}\n              className={`flex items-center space-x-2 py-3 px-1 border-b-2 font-medium text-sm ${\n                activeTab === id\n                  ? 'border-blue-500 text-blue-600'\n                  : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n              }`}\n            >\n              <Icon className=\"h-4 w-4\" />\n              <span>{label}</span>\n            </button>\n          ))}\n        </nav>\n      </div>\n\n      {/* Adherence Tab */}\n      {activeTab === 'adherence' && (\n        <div className=\"space-y-6\">\n          {/* Stats Overview */}\n      <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\">\n        <div className=\"card\">\n          <div className=\"card-content p-5\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <div className=\"w-8 h-8 bg-green-100 rounded-md flex items-center justify-center\">\n                  <TrendingUp className=\"h-5 w-5 text-green-600\" />\n                </div>\n              </div>\n              <div className=\"ml-5 w-0 flex-1\">\n                <dl>\n                  <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                    Overall Adherence\n                  </dt>\n                    <dd className=\"flex items-baseline\">\n                    <div className={`text-2xl font-semibold ${getAdherenceColor(overallStats.overallAdherence)}`}>\n                      {Number.isFinite(overallStats.overallAdherence) ? overallStats.overallAdherence : 0}%\n                    </div>\n                    {Number.isFinite(overallStats.trend) && overallStats.trend !== 0 && (\n                      <div className={`ml-2 flex items-baseline text-sm font-semibold ${\n                        overallStats.trend > 0 ? 'text-green-600' : 'text-red-600'\n                      }`}>\n                        {overallStats.trend > 0 ? (\n                          <TrendingUp className=\"self-center flex-shrink-0 h-4 w-4\" />\n                        ) : (\n                          <TrendingDown className=\"self-center flex-shrink-0 h-4 w-4\" />\n                        )}\n                        <span className=\"sr-only\">\n                          {overallStats.trend > 0 ? 'Increased' : 'Decreased'} by\n                        </span>\n                        {Math.abs(overallStats.trend)}%\n                      </div>\n                    )}\n                  </dd>\n                </dl>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"card\">\n          <div className=\"card-content p-5\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <div className=\"w-8 h-8 bg-blue-100 rounded-md flex items-center justify-center\">\n                  <Calendar className=\"h-5 w-5 text-blue-600\" />\n                </div>\n              </div>\n              <div className=\"ml-5 w-0 flex-1\">\n                <dl>\n                  <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                    Total Doses\n                  </dt>\n                  <dd className=\"text-2xl font-semibold text-gray-900\">\n                    {Number.isFinite(overallStats.totalDoses) ? overallStats.totalDoses : 0}\n                  </dd>\n                </dl>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"card\">\n          <div className=\"card-content p-5\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <div className=\"w-8 h-8 bg-green-100 rounded-md flex items-center justify-center\">\n                  <Clock className=\"h-5 w-5 text-green-600\" />\n                </div>\n              </div>\n              <div className=\"ml-5 w-0 flex-1\">\n                <dl>\n                  <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                    Doses Taken\n                  </dt>\n                  <dd className=\"text-2xl font-semibold text-green-600\">\n                    {Number.isFinite(overallStats.takenDoses) ? overallStats.takenDoses : 0}\n                  </dd>\n                </dl>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"card\">\n          <div className=\"card-content p-5\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <div className=\"w-8 h-8 bg-red-100 rounded-md flex items-center justify-center\">\n                  <RefreshCw className=\"h-5 w-5 text-red-600\" />\n                </div>\n              </div>\n              <div className=\"ml-5 w-0 flex-1\">\n                <dl>\n                  <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                    Doses Missed\n                  </dt>\n                  <dd className=\"text-2xl font-semibold text-red-600\">\n                    {Number.isFinite(overallStats.missedDoses) ? overallStats.missedDoses : 0}\n                  </dd>\n                </dl>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Adherence Trend Chart */}\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <h3 className=\"text-lg font-medium text-gray-900\">Adherence Trend</h3>\n          </div>\n          <div className=\"card-content\">\n            {adherenceData.length > 0 && adherenceData.some(d => Number.isFinite(d.adherence)) ? (\n              <ChartErrorBoundary>\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <LineChart data={adherenceData.filter(d => Number.isFinite(d.adherence) && Number.isFinite(d.taken) && Number.isFinite(d.missed))}>\n                    <CartesianGrid strokeDasharray=\"3 3\" />\n                    <XAxis dataKey=\"date\" />\n                    <YAxis domain={[0, 100]} />\n                    <Tooltip \n                      formatter={(value, name) => [\n                        `${value}${name === 'adherence' ? '%' : ''}`, \n                        name === 'adherence' ? 'Adherence' : name === 'taken' ? 'Taken' : 'Missed'\n                      ]}\n                    />\n                    <Line \n                      type=\"monotone\" \n                      dataKey=\"adherence\" \n                      stroke=\"#3b82f6\" \n                      strokeWidth={2}\n                      dot={{ fill: '#3b82f6', strokeWidth: 2, r: 4 }}\n                    />\n                  </LineChart>\n                </ResponsiveContainer>\n              </ChartErrorBoundary>\n            ) : (\n              <div className=\"flex items-center justify-center h-[300px] text-gray-500\">\n                No data available for the selected time period\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Adherence Distribution */}\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <h3 className=\"text-lg font-medium text-gray-900\">Adherence Distribution</h3>\n          </div>\n          <div className=\"card-content\">\n            {adherenceDistribution.length > 0 ? (\n              <ChartErrorBoundary>\n                <ResponsiveContainer width=\"100%\" height={300}>\n                  <PieChart>\n                    <Pie\n                      data={adherenceDistribution}\n                      cx=\"50%\"\n                      cy=\"50%\"\n                      labelLine={false}\n                      label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}\n                      outerRadius={80}\n                      fill=\"#8884d8\"\n                      dataKey=\"value\"\n                    >\n                      {adherenceDistribution.map((entry, index) => (\n                        <Cell key={`cell-${index}`} fill={entry.color} />\n                      ))}\n                    </Pie>\n                    <Tooltip />\n                  </PieChart>\n                </ResponsiveContainer>\n              </ChartErrorBoundary>\n            ) : (\n              <div className=\"flex items-center justify-center h-[300px] text-gray-500\">\n                No medication data available\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Medication Adherence Chart */}\n      {medicationChartData.length > 0 && (\n        <div className=\"card\">\n          <div className=\"card-header\">\n            <h3 className=\"text-lg font-medium text-gray-900\">Adherence by Medication</h3>\n          </div>\n          <div className=\"card-content\">\n            <ChartErrorBoundary>\n              <ResponsiveContainer width=\"100%\" height={400}>\n                <BarChart data={medicationChartData} layout=\"horizontal\">\n                  <CartesianGrid strokeDasharray=\"3 3\" />\n                  <XAxis \n                    type=\"number\" \n                    domain={[0, 100]}\n                    tickFormatter={(value) => Number.isFinite(value) && !isNaN(value) ? `${Math.round(value)}%` : '0%'}\n                  />\n                  <YAxis \n                    dataKey=\"name\" \n                    type=\"category\" \n                    width={120}\n                    tickFormatter={(value) => value || 'Unknown'}\n                  />\n                  <Tooltip \n                    formatter={(value, name) => {\n                      const safeValue = Number.isFinite(value) && !isNaN(value) ? Math.round(Number(value)) : 0;\n                      return [\n                        `${safeValue}${name === 'adherence' ? '%' : ''}`, \n                        name === 'adherence' ? 'Adherence' : name === 'taken' ? 'Taken' : 'Missed'\n                      ];\n                    }}\n                  />\n                  <Bar \n                    dataKey=\"adherence\" \n                    fill=\"#3b82f6\"\n                    isAnimationActive={false}\n                  />\n                </BarChart>\n              </ResponsiveContainer>\n            </ChartErrorBoundary>\n          </div>\n        </div>\n      )}\n\n      {/* Detailed Medication Reports */}\n      <div className=\"card\">\n        <div className=\"card-header\">\n          <h3 className=\"text-lg font-medium text-gray-900\">Medication Reports</h3>\n        </div>\n        <div className=\"card-content\">\n          {medicationAdherence.length === 0 ? (\n            <div className=\"text-center py-8\">\n              <BarChart3 className=\"mx-auto h-12 w-12 text-gray-400\" />\n              <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No data available</h3>\n              <p className=\"mt-1 text-sm text-gray-500\">\n                Start logging your medications to see analytics.\n              </p>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <table className=\"min-w-full divide-y divide-gray-200\">\n                <thead className=\"bg-gray-50\">\n                  <tr>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Medication\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Adherence\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Taken\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Missed\n                    </th>\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                      Total\n                    </th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200\">\n                  {medicationAdherence.map((report) => (\n                    <tr key={report.medicationId}>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                        {report.medicationName}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\n                        <div className=\"flex items-center\">\n                          <span className={`text-sm font-medium ${getAdherenceColor(report.adherencePercentage)}`}>\n                            {Number.isFinite(report.adherencePercentage) ? report.adherencePercentage : 0}%\n                          </span>\n                          <div className=\"ml-2 w-16 bg-gray-200 rounded-full h-2\">\n                            <div\n                              className={`h-2 rounded-full ${\n                                report.adherencePercentage >= 90 ? 'bg-green-600' :\n                                report.adherencePercentage >= 75 ? 'bg-yellow-600' :\n                                report.adherencePercentage >= 50 ? 'bg-orange-600' :\n                                'bg-red-600'\n                              }`}\n                              style={{ width: `${Number.isFinite(report.adherencePercentage) ? Math.max(0, Math.min(100, report.adherencePercentage)) : 0}%` }}\n                            />\n                          </div>\n                        </div>\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-green-600\">\n                        {Number.isFinite(report.takenDoses) ? report.takenDoses : 0}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-red-600\">\n                        {Number.isFinite(report.missedDoses) ? report.missedDoses : 0}\n                      </td>\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\n                        {Number.isFinite(report.totalDoses) ? report.totalDoses : 0}\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </div>\n      </div>\n        </div>\n      )}\n\n      {/* Withdrawal Progress Tab */}\n      {activeTab === 'withdrawal' && (\n        <div className=\"space-y-6\">\n          {withdrawalProgressData.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <Activity className=\"mx-auto h-12 w-12 text-gray-400\" />\n              <h3 className=\"mt-4 text-lg font-medium text-gray-900\">No Withdrawal Tracking Data</h3>\n              <p className=\"mt-1 text-sm text-gray-500\">\n                Start tracking withdrawal symptoms to see progress analytics here.\n              </p>\n            </div>\n          ) : (\n            <>\n              {/* Withdrawal Overview Cards */}\n              <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\">\n                <div className=\"card\">\n                  <div className=\"card-content p-5\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0\">\n                        <div className=\"w-8 h-8 bg-purple-100 rounded-md flex items-center justify-center\">\n                          <Activity className=\"h-5 w-5 text-purple-600\" />\n                        </div>\n                      </div>\n                      <div className=\"ml-5 w-0 flex-1\">\n                        <dl>\n                          <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                            Active Withdrawals\n                          </dt>\n                          <dd className=\"text-lg font-medium text-gray-900\">\n                            {withdrawalProgressData.reduce((sum, data) => sum + data.activeWithdrawals, 0)}\n                          </dd>\n                        </dl>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"card\">\n                  <div className=\"card-content p-5\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0\">\n                        <div className=\"w-8 h-8 bg-green-100 rounded-md flex items-center justify-center\">\n                          <Activity className=\"h-5 w-5 text-green-600\" />\n                        </div>\n                      </div>\n                      <div className=\"ml-5 w-0 flex-1\">\n                        <dl>\n                          <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                            Completed Withdrawals\n                          </dt>\n                          <dd className=\"text-lg font-medium text-gray-900\">\n                            {withdrawalProgressData.reduce((sum, data) => sum + data.completedWithdrawals, 0)}\n                          </dd>\n                        </dl>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"card\">\n                  <div className=\"card-content p-5\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0\">\n                        <div className=\"w-8 h-8 bg-blue-100 rounded-md flex items-center justify-center\">\n                          <Heart className=\"h-5 w-5 text-blue-600\" />\n                        </div>\n                      </div>\n                      <div className=\"ml-5 w-0 flex-1\">\n                        <dl>\n                          <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                            Medications Tracked\n                          </dt>\n                          <dd className=\"text-lg font-medium text-gray-900\">\n                            {withdrawalProgressData.length}\n                          </dd>\n                        </dl>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"card\">\n                  <div className=\"card-content p-5\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0\">\n                        <div className=\"w-8 h-8 bg-orange-100 rounded-md flex items-center justify-center\">\n                          <Clock className=\"h-5 w-5 text-orange-600\" />\n                        </div>\n                      </div>\n                      <div className=\"ml-5 w-0 flex-1\">\n                        <dl>\n                          <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                            Avg Progress\n                          </dt>\n                          <dd className=\"text-lg font-medium text-gray-900\">\n                            {withdrawalProgressData.filter(d => d.currentProgress).length > 0\n                              ? Math.round(\n                                  withdrawalProgressData\n                                    .filter(d => d.currentProgress)\n                                    .reduce((sum, d) => sum + d.currentProgress!.progressPercent, 0) /\n                                  withdrawalProgressData.filter(d => d.currentProgress).length\n                                )\n                              : 0}%\n                          </dd>\n                        </dl>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Withdrawal Progress Details */}\n              <div className=\"card\">\n                <div className=\"card-header\">\n                  <h3 className=\"text-lg font-medium text-gray-900\">Withdrawal Progress by Medication</h3>\n                </div>\n                <div className=\"card-content\">\n                  <div className=\"space-y-4\">\n                    {withdrawalProgressData.map((data) => (\n                      <div key={data.medicationId} className=\"border border-gray-200 rounded-lg p-4\">\n                        <div className=\"flex items-center justify-between mb-3\">\n                          <h4 className=\"font-medium text-gray-900\">{data.medicationName}</h4>\n                          <div className=\"flex items-center space-x-4 text-sm text-gray-500\">\n                            <span>Active: {data.activeWithdrawals}</span>\n                            <span>Completed: {data.completedWithdrawals}</span>\n                          </div>\n                        </div>\n                        \n                        {data.currentProgress && (\n                          <div className=\"bg-gray-50 p-3 rounded\">\n                            <div className=\"flex items-center justify-between mb-2\">\n                              <span className=\"text-sm font-medium text-gray-700\">Current Withdrawal Progress</span>\n                              <span className=\"text-sm text-gray-600\">{data.currentProgress.daysSinceStart} days</span>\n                            </div>\n                            <div className=\"w-full bg-gray-200 rounded-full h-2 mb-2\">\n                              <div\n                                className={`h-2 rounded-full ${\n                                  data.currentProgress.progressPercent >= 75 ? 'bg-green-500' :\n                                  data.currentProgress.progressPercent >= 50 ? 'bg-yellow-500' :\n                                  data.currentProgress.progressPercent >= 25 ? 'bg-orange-500' :\n                                  'bg-red-500'\n                                }`}\n                                style={{ width: `${data.currentProgress.progressPercent}%` }}\n                              />\n                            </div>\n                            <div className=\"flex justify-between text-xs text-gray-600\">\n                              <span>{data.currentProgress.resolvedCount}/{data.currentProgress.symptomCount} symptoms resolved</span>\n                              <span>{data.currentProgress.progressPercent}% complete</span>\n                            </div>\n                            <div className=\"mt-2\">\n                              <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${\n                                data.currentProgress.severity === 'mild' ? 'bg-green-100 text-green-800' :\n                                data.currentProgress.severity === 'moderate' ? 'bg-yellow-100 text-yellow-800' :\n                                data.currentProgress.severity === 'severe' ? 'bg-orange-100 text-orange-800' :\n                                'bg-red-100 text-red-800'\n                              }`}>\n                                {data.currentProgress.severity} severity\n                              </span>\n                            </div>\n                          </div>\n                        )}\n                        \n                        {!data.currentProgress && data.completedWithdrawals > 0 && (\n                          <div className=\"bg-green-50 p-3 rounded\">\n                            <div className=\"flex items-center space-x-2\">\n                              <Activity className=\"h-4 w-4 text-green-600\" />\n                              <span className=\"text-sm text-green-800\">\n                                {data.completedWithdrawals} successful withdrawal{data.completedWithdrawals !== 1 ? 's' : ''} completed\n                              </span>\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      )}\n\n      {/* Side Effects Tab */}\n      {activeTab === 'side-effects' && (\n        <div className=\"space-y-6\">\n          {sideEffectTrendsData.totalReports === 0 ? (\n            <div className=\"text-center py-12\">\n              <AlertTriangle className=\"mx-auto h-12 w-12 text-gray-400\" />\n              <h3 className=\"mt-4 text-lg font-medium text-gray-900\">No Side Effect Reports</h3>\n              <p className=\"mt-1 text-sm text-gray-500\">\n                Report side effects to see trend analysis here.\n              </p>\n            </div>\n          ) : (\n            <>\n              {/* Side Effects Overview */}\n              <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\">\n                <div className=\"card\">\n                  <div className=\"card-content p-5\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0\">\n                        <div className=\"w-8 h-8 bg-orange-100 rounded-md flex items-center justify-center\">\n                          <AlertTriangle className=\"h-5 w-5 text-orange-600\" />\n                        </div>\n                      </div>\n                      <div className=\"ml-5 w-0 flex-1\">\n                        <dl>\n                          <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                            Total Reports\n                          </dt>\n                          <dd className=\"text-lg font-medium text-gray-900\">\n                            {sideEffectTrendsData.totalReports}\n                          </dd>\n                        </dl>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"card\">\n                  <div className=\"card-content p-5\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0\">\n                        <div className=\"w-8 h-8 bg-red-100 rounded-md flex items-center justify-center\">\n                          <AlertTriangle className=\"h-5 w-5 text-red-600\" />\n                        </div>\n                      </div>\n                      <div className=\"ml-5 w-0 flex-1\">\n                        <dl>\n                          <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                            Severe Reports\n                          </dt>\n                          <dd className=\"text-lg font-medium text-gray-900\">\n                            {sideEffectTrendsData.severityDistribution.find(s => s.severity === 'severe')?.count || 0}\n                          </dd>\n                        </dl>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"card\">\n                  <div className=\"card-content p-5\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0\">\n                        <div className=\"w-8 h-8 bg-blue-100 rounded-md flex items-center justify-center\">\n                          <BarChart3 className=\"h-5 w-5 text-blue-600\" />\n                        </div>\n                      </div>\n                      <div className=\"ml-5 w-0 flex-1\">\n                        <dl>\n                          <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                            Most Common\n                          </dt>\n                          <dd className=\"text-lg font-medium text-gray-900\">\n                            {sideEffectTrendsData.topSideEffects[0]?.name || 'None'}\n                          </dd>\n                        </dl>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"card\">\n                  <div className=\"card-content p-5\">\n                    <div className=\"flex items-center\">\n                      <div className=\"flex-shrink-0\">\n                        <div className=\"w-8 h-8 bg-purple-100 rounded-md flex items-center justify-center\">\n                          <Heart className=\"h-5 w-5 text-purple-600\" />\n                        </div>\n                      </div>\n                      <div className=\"ml-5 w-0 flex-1\">\n                        <dl>\n                          <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                            Avg Daily\n                          </dt>\n                          <dd className=\"text-lg font-medium text-gray-900\">\n                            {Math.round(sideEffectTrendsData.totalReports / (dateRange === '7d' ? 7 : dateRange === '30d' ? 30 : 90) * 10) / 10}\n                          </dd>\n                        </dl>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Side Effects Trends Chart */}\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                <div className=\"card\">\n                  <div className=\"card-header\">\n                    <h3 className=\"text-lg font-medium text-gray-900\">Daily Side Effect Reports</h3>\n                  </div>\n                  <div className=\"card-content\">\n                    <ChartErrorBoundary>\n                      <ResponsiveContainer width=\"100%\" height={300}>\n                        <LineChart data={sideEffectTrendsData.dailyTrends}>\n                          <CartesianGrid strokeDasharray=\"3 3\" />\n                          <XAxis dataKey=\"date\" />\n                          <YAxis />\n                          <Tooltip />\n                          <Line type=\"monotone\" dataKey=\"total\" stroke=\"#f59e0b\" strokeWidth={2} />\n                          <Line type=\"monotone\" dataKey=\"severe\" stroke=\"#ef4444\" strokeWidth={2} />\n                        </LineChart>\n                      </ResponsiveContainer>\n                    </ChartErrorBoundary>\n                  </div>\n                </div>\n\n                <div className=\"card\">\n                  <div className=\"card-header\">\n                    <h3 className=\"text-lg font-medium text-gray-900\">Severity Distribution</h3>\n                  </div>\n                  <div className=\"card-content\">\n                    <ChartErrorBoundary>\n                      <ResponsiveContainer width=\"100%\" height={300}>\n                        <PieChart>\n                          <Pie\n                            data={sideEffectTrendsData.severityDistribution.map(item => ({\n                              name: item.severity,\n                              value: item.count,\n                              fill: item.severity === 'mild' ? '#10b981' :\n                                    item.severity === 'moderate' ? '#f59e0b' :\n                                    item.severity === 'severe' ? '#ef4444' : '#dc2626'\n                            }))}\n                            cx=\"50%\"\n                            cy=\"50%\"\n                            outerRadius={80}\n                            dataKey=\"value\"\n                            label={({ name, value }) => `${name}: ${value}`}\n                          />\n                          <Tooltip />\n                        </PieChart>\n                      </ResponsiveContainer>\n                    </ChartErrorBoundary>\n                  </div>\n                </div>\n              </div>\n\n              {/* Top Side Effects */}\n              <div className=\"card\">\n                <div className=\"card-header\">\n                  <h3 className=\"text-lg font-medium text-gray-900\">Most Common Side Effects</h3>\n                </div>\n                <div className=\"card-content\">\n                  <div className=\"space-y-3\">\n                    {sideEffectTrendsData.topSideEffects.map((effect, index) => (\n                      <div key={effect.name} className=\"flex items-center justify-between p-3 bg-gray-50 rounded\">\n                        <div className=\"flex items-center space-x-3\">\n                          <span className=\"w-6 h-6 bg-orange-100 text-orange-800 rounded-full flex items-center justify-center text-xs font-medium\">\n                            {index + 1}\n                          </span>\n                          <span className=\"font-medium text-gray-900\">{effect.name}</span>\n                        </div>\n                        <span className=\"text-sm text-gray-600\">{effect.count} reports</span>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      )}\n\n      {/* Risk Assessment Tab */}\n      {activeTab === 'risk' && (\n        <div className=\"space-y-6\">\n          {/* Risk Overview */}\n          <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\">\n            <div className=\"card\">\n              <div className=\"card-content p-5\">\n                <div className=\"flex items-center\">\n                  <div className=\"flex-shrink-0\">\n                    <div className=\"w-8 h-8 bg-blue-100 rounded-md flex items-center justify-center\">\n                      <Shield className=\"h-5 w-5 text-blue-600\" />\n                    </div>\n                  </div>\n                  <div className=\"ml-5 w-0 flex-1\">\n                    <dl>\n                      <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                        Monitored Meds\n                      </dt>\n                      <dd className=\"text-lg font-medium text-gray-900\">\n                        {dependencyRiskData.totalMonitored}\n                      </dd>\n                    </dl>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"card\">\n              <div className=\"card-content p-5\">\n                <div className=\"flex items-center\">\n                  <div className=\"flex-shrink-0\">\n                    <div className=\"w-8 h-8 bg-orange-100 rounded-md flex items-center justify-center\">\n                      <AlertTriangle className=\"h-5 w-5 text-orange-600\" />\n                    </div>\n                  </div>\n                  <div className=\"ml-5 w-0 flex-1\">\n                    <dl>\n                      <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                        Active Alerts\n                      </dt>\n                      <dd className=\"text-lg font-medium text-gray-900\">\n                        {dependencyRiskData.alertCounts.unacknowledged}\n                      </dd>\n                    </dl>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"card\">\n              <div className=\"card-content p-5\">\n                <div className=\"flex items-center\">\n                  <div className=\"flex-shrink-0\">\n                    <div className=\"w-8 h-8 bg-purple-100 rounded-md flex items-center justify-center\">\n                      <TrendingDown className=\"h-5 w-5 text-purple-600\" />\n                    </div>\n                  </div>\n                  <div className=\"ml-5 w-0 flex-1\">\n                    <dl>\n                      <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                        Tapering Recommended\n                      </dt>\n                      <dd className=\"text-lg font-medium text-gray-900\">\n                        {dependencyRiskData.taperingRecommendations}\n                      </dd>\n                    </dl>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"card\">\n              <div className=\"card-content p-5\">\n                <div className=\"flex items-center\">\n                  <div className=\"flex-shrink-0\">\n                    <div className=\"w-8 h-8 bg-red-100 rounded-md flex items-center justify-center\">\n                      <Shield className=\"h-5 w-5 text-red-600\" />\n                    </div>\n                  </div>\n                  <div className=\"ml-5 w-0 flex-1\">\n                    <dl>\n                      <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                        High Risk Meds\n                      </dt>\n                      <dd className=\"text-lg font-medium text-gray-900\">\n                        {dependencyRiskData.riskDistribution.find(r => r.risk === 'high')?.count || 0}\n                      </dd>\n                    </dl>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Risk Distribution Chart */}\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            <div className=\"card\">\n              <div className=\"card-header\">\n                <h3 className=\"text-lg font-medium text-gray-900\">Risk Level Distribution</h3>\n              </div>\n              <div className=\"card-content\">\n                <ChartErrorBoundary>\n                  <ResponsiveContainer width=\"100%\" height={300}>\n                    <PieChart>\n                      <Pie\n                        data={dependencyRiskData.riskDistribution.map(item => ({\n                          name: item.risk,\n                          value: item.count,\n                          fill: item.risk === 'low' ? '#10b981' :\n                                item.risk === 'moderate' ? '#f59e0b' :\n                                item.risk === 'high' ? '#ef4444' : '#dc2626'\n                        }))}\n                        cx=\"50%\"\n                        cy=\"50%\"\n                        outerRadius={80}\n                        dataKey=\"value\"\n                        label={({ name, value }) => `${name}: ${value}`}\n                      />\n                      <Tooltip />\n                    </PieChart>\n                  </ResponsiveContainer>\n                </ChartErrorBoundary>\n              </div>\n            </div>\n\n            <div className=\"card\">\n              <div className=\"card-header\">\n                <h3 className=\"text-lg font-medium text-gray-900\">Alert Status</h3>\n              </div>\n              <div className=\"card-content\">\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between p-3 bg-red-50 rounded\">\n                    <span className=\"text-sm font-medium text-red-800\">Unacknowledged Alerts</span>\n                    <span className=\"text-lg font-bold text-red-900\">{dependencyRiskData.alertCounts.unacknowledged}</span>\n                  </div>\n                  <div className=\"flex items-center justify-between p-3 bg-green-50 rounded\">\n                    <span className=\"text-sm font-medium text-green-800\">Acknowledged Alerts</span>\n                    <span className=\"text-lg font-bold text-green-900\">{dependencyRiskData.alertCounts.acknowledged}</span>\n                  </div>\n                  <div className=\"flex items-center justify-between p-3 bg-gray-50 rounded\">\n                    <span className=\"text-sm font-medium text-gray-800\">Total Alerts</span>\n                    <span className=\"text-lg font-bold text-gray-900\">{dependencyRiskData.alertCounts.total}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n","import React from 'react';\nimport { \n  X, \n  Download, \n  FileText, \n  Database,\n  Settings as SettingsIcon\n} from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { downloadFile } from '@/utils/helpers';\nimport toast from 'react-hot-toast';\n\ninterface ExportModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport function ExportModal({ isOpen, onClose }: ExportModalProps) {\n  const { \n    exportDataWithOptions, \n    exportToCSV,\n    exportToPDF \n  } = useMedicationStore();\n\n  const [exportOptions, setExportOptions] = React.useState({\n    format: 'json' as 'json' | 'csv' | 'pdf',\n    includeMedications: true,\n    includeLogs: true,\n    includeReminders: true,\n    includeProfile: true,\n    includePersonalInfo: true,\n    includeAdvancedFeatures: false,\n    dateRange: {\n      enabled: false,\n      start: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000), // 30 days ago\n      end: new Date()\n    }\n  });\n\n  const [isExporting, setIsExporting] = React.useState(false);\n\n  const handleExport = async () => {\n    setIsExporting(true);\n    try {\n      let data: string;\n      let filename: string;\n      let mimeType: string;\n\n      const dateStr = new Date().toISOString().split('T')[0];\n\n      switch (exportOptions.format) {\n        case 'json':\n          data = await exportDataWithOptions({\n            ...exportOptions,\n            dateRange: exportOptions.dateRange.enabled ? exportOptions.dateRange : undefined\n          });\n          filename = `medtrack-export-${dateStr}.json`;\n          mimeType = 'application/json';\n          break;\n\n        case 'csv':\n          data = exportToCSV('all', exportOptions.dateRange.enabled ? exportOptions.dateRange : undefined);\n          filename = `medtrack-export-${dateStr}.csv`;\n          mimeType = 'text/csv';\n          break;\n\n        case 'pdf':\n          data = await exportToPDF(exportOptions);\n          filename = `medtrack-export-${dateStr}.json`; // PDF would be .pdf in real implementation\n          mimeType = 'application/json';\n          break;\n\n        default:\n          throw new Error('Invalid export format');\n      }\n\n      downloadFile(data, filename, mimeType);\n      toast.success(`Data exported as ${exportOptions.format.toUpperCase()} successfully`);\n      onClose();\n    } catch (error) {\n      toast.error('Failed to export data');\n      console.error('Export error:', error);\n    } finally {\n      setIsExporting(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 mobile-safe-area\">\n      <div className=\"bg-white rounded-lg max-w-2xl w-full mobile-modal overflow-y-auto mobile-scroll\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <div className=\"flex items-center space-x-3\">\n            <Download className=\"h-6 w-6 text-blue-600\" />\n            <h3 className=\"text-lg font-medium text-gray-900\">Export Data</h3>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\n          >\n            <X className=\"h-5 w-5\" />\n          </button>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          {/* Export Format */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">Export Format</label>\n            <div className=\"grid grid-cols-3 gap-3\">\n              {[\n                { value: 'json', label: 'JSON', icon: Database, description: 'Complete data with metadata' },\n                { value: 'csv', label: 'CSV', icon: FileText, description: 'Spreadsheet compatible' },\n                { value: 'pdf', label: 'PDF', icon: FileText, description: 'Formatted report (Coming soon)' }\n              ].map((format) => (\n                <button\n                  key={format.value}\n                  onClick={() => setExportOptions(prev => ({ ...prev, format: format.value as any }))}\n                  className={`p-4 rounded-lg border-2 transition-all ${\n                    exportOptions.format === format.value\n                      ? 'border-blue-500 bg-blue-50'\n                      : 'border-gray-200 hover:border-gray-300'\n                  }`}\n                  disabled={format.value === 'pdf'}\n                >\n                  <format.icon className={`h-6 w-6 mx-auto mb-2 ${\n                    exportOptions.format === format.value ? 'text-blue-600' : 'text-gray-400'\n                  }`} />\n                  <div className=\"text-sm font-medium text-gray-900\">{format.label}</div>\n                  <div className=\"text-xs text-gray-500 mt-1\">{format.description}</div>\n                </button>\n              ))}\n            </div>\n          </div>\n\n          {/* Data Selection */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">Data to Include</label>\n            <div className=\"space-y-3\">\n              {[\n                { key: 'includeMedications', label: 'Medications', description: 'All medication records and details' },\n                { key: 'includeLogs', label: 'Medication Logs', description: 'Dosage history and adherence data' },\n                { key: 'includeReminders', label: 'Reminders', description: 'Notification schedules and settings' },\n                { key: 'includeProfile', label: 'Health Profile', description: 'Personal health information' },\n                { key: 'includeAdvancedFeatures', label: 'Advanced Features', description: 'Smart messages, risk assessments, etc.' }\n              ].map((item) => (\n                <label key={item.key} className=\"flex items-start space-x-3\">\n                  <input\n                    type=\"checkbox\"\n                    checked={exportOptions[item.key as keyof typeof exportOptions] as boolean}\n                    onChange={(e) => setExportOptions(prev => ({ \n                      ...prev, \n                      [item.key]: e.target.checked \n                    }))}\n                    className=\"mt-1 h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n                  />\n                  <div className=\"flex-1\">\n                    <div className=\"text-sm font-medium text-gray-900\">{item.label}</div>\n                    <div className=\"text-xs text-gray-500\">{item.description}</div>\n                  </div>\n                </label>\n              ))}\n            </div>\n          </div>\n\n          {/* Date Range */}\n          <div>\n            <label className=\"flex items-center space-x-3 mb-3\">\n              <input\n                type=\"checkbox\"\n                checked={exportOptions.dateRange.enabled}\n                onChange={(e) => setExportOptions(prev => ({ \n                  ...prev, \n                  dateRange: { ...prev.dateRange, enabled: e.target.checked }\n                }))}\n                className=\"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n              />\n              <span className=\"text-sm font-medium text-gray-700\">Filter by Date Range</span>\n            </label>\n            \n            {exportOptions.dateRange.enabled && (\n              <div className=\"grid grid-cols-2 gap-4 ml-7\">\n                <div>\n                  <label className=\"block text-xs font-medium text-gray-600 mb-1\">Start Date</label>\n                  <input\n                    type=\"date\"\n                    value={exportOptions.dateRange.start.toISOString().split('T')[0]}\n                    onChange={(e) => setExportOptions(prev => ({ \n                      ...prev, \n                      dateRange: { ...prev.dateRange, start: new Date(e.target.value) }\n                    }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-xs font-medium text-gray-600 mb-1\">End Date</label>\n                  <input\n                    type=\"date\"\n                    value={exportOptions.dateRange.end.toISOString().split('T')[0]}\n                    onChange={(e) => setExportOptions(prev => ({ \n                      ...prev, \n                      dateRange: { ...prev.dateRange, end: new Date(e.target.value) }\n                    }))}\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-blue-500 focus:border-blue-500\"\n                  />\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Privacy Notice */}\n          {exportOptions.includeProfile && exportOptions.includePersonalInfo && (\n            <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4\">\n              <div className=\"flex\">\n                <SettingsIcon className=\"h-5 w-5 text-amber-400 flex-shrink-0 mt-0.5\" />\n                <div className=\"ml-3\">\n                  <h4 className=\"text-sm font-medium text-amber-800\">Privacy Notice</h4>\n                  <p className=\"text-sm text-amber-700 mt-1\">\n                    Your export will include personal health information. Please handle the exported file securely.\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50\">\n          <button\n            onClick={onClose}\n            className=\"btn-secondary\"\n          >\n            Cancel\n          </button>\n          <button\n            onClick={handleExport}\n            disabled={isExporting}\n            className=\"btn-primary inline-flex items-center space-x-2\"\n          >\n            {isExporting ? (\n              <>\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                <span>Exporting...</span>\n              </>\n            ) : (\n              <>\n                <Download className=\"h-4 w-4\" />\n                <span>Export Data</span>\n              </>\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { \n  X, \n  Upload, \n  AlertTriangle, \n  CheckCircle, \n  FileText,\n  AlertCircle,\n  Loader\n} from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport toast from 'react-hot-toast';\n\ninterface ImportModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport function ImportModal({ isOpen, onClose }: ImportModalProps) {\n  const { importDataWithValidation, validateImportData } = useMedicationStore();\n\n  const [file, setFile] = React.useState<File | null>(null);\n  const [importData, setImportData] = React.useState<any>(null);\n  const [validation, setValidation] = React.useState<{\n    isValid: boolean;\n    errors: string[];\n    warnings: string[];\n  } | null>(null);\n  const [isImporting, setIsImporting] = React.useState(false);\n  const [isValidating, setIsValidating] = React.useState(false);\n  const [importResult, setImportResult] = React.useState<{\n    success: boolean;\n    errors: string[];\n    warnings: string[];\n  } | null>(null);\n\n  const fileInputRef = React.useRef<HTMLInputElement>(null);\n\n  const handleFileSelect = async (event: React.ChangeEvent<HTMLInputElement>) => {\n    const selectedFile = event.target.files?.[0];\n    if (!selectedFile) return;\n\n    setFile(selectedFile);\n    setImportData(null);\n    setValidation(null);\n    setImportResult(null);\n\n    if (!selectedFile.name.endsWith('.json')) {\n      setValidation({\n        isValid: false,\n        errors: ['Only JSON files are supported for import'],\n        warnings: []\n      });\n      return;\n    }\n\n    setIsValidating(true);\n    const reader = new FileReader();\n    \n    reader.onload = async (e) => {\n      try {\n        const jsonData = JSON.parse(e.target?.result as string);\n        setImportData(jsonData);\n        \n        // Validate the data\n        const validationResult = validateImportData(jsonData);\n        setValidation(validationResult);\n      } catch (error) {\n        setValidation({\n          isValid: false,\n          errors: ['Invalid JSON file format'],\n          warnings: []\n        });\n      } finally {\n        setIsValidating(false);\n      }\n    };\n\n    reader.onerror = () => {\n      setValidation({\n        isValid: false,\n        errors: ['Failed to read file'],\n        warnings: []\n      });\n      setIsValidating(false);\n    };\n\n    reader.readAsText(selectedFile);\n  };\n\n  const handleImport = async () => {\n    if (!importData || !validation?.isValid) return;\n\n    setIsImporting(true);\n    try {\n      const result = await importDataWithValidation(importData, 'json');\n      setImportResult(result);\n      \n      if (result.success) {\n        toast.success('Data imported successfully');\n        setTimeout(() => {\n          onClose();\n        }, 2000);\n      } else {\n        toast.error('Import failed with errors');\n      }\n    } catch (error) {\n      setImportResult({\n        success: false,\n        errors: ['Unexpected error during import'],\n        warnings: []\n      });\n      toast.error('Import failed');\n    } finally {\n      setIsImporting(false);\n    }\n  };\n\n  const handleClose = () => {\n    setFile(null);\n    setImportData(null);\n    setValidation(null);\n    setImportResult(null);\n    setIsImporting(false);\n    setIsValidating(false);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n    onClose();\n  };\n\n  const getDataSummary = () => {\n    if (!importData) return null;\n\n    const summary = {\n      medications: importData.medications?.length || 0,\n      logs: importData.logs?.length || 0,\n      reminders: importData.reminders?.length || 0,\n      hasProfile: !!importData.userProfile,\n      version: importData.exportMetadata?.version || 'Unknown'\n    };\n\n    return summary;\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 mobile-safe-area\">\n      <div className=\"bg-white rounded-lg max-w-2xl w-full mobile-modal overflow-y-auto mobile-scroll\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200\">\n          <div className=\"flex items-center space-x-3\">\n            <Upload className=\"h-6 w-6 text-blue-600\" />\n            <h3 className=\"text-lg font-medium text-gray-900\">Import Data</h3>\n          </div>\n          <button\n            onClick={handleClose}\n            className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors\"\n          >\n            <X className=\"h-5 w-5\" />\n          </button>\n        </div>\n\n        <div className=\"p-6 space-y-6\">\n          {/* File Selection */}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-3\">\n              Select Data File\n            </label>\n            <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\">\n              <input\n                ref={fileInputRef}\n                type=\"file\"\n                accept=\".json\"\n                onChange={handleFileSelect}\n                className=\"hidden\"\n                id=\"import-file\"\n              />\n              <label\n                htmlFor=\"import-file\"\n                className=\"cursor-pointer flex flex-col items-center space-y-2\"\n              >\n                <FileText className=\"h-8 w-8 text-gray-400\" />\n                <span className=\"text-sm text-gray-600\">\n                  {file ? file.name : 'Click to select a JSON file'}\n                </span>\n                <span className=\"text-xs text-gray-500\">\n                  Only MedTrack JSON export files are supported\n                </span>\n              </label>\n            </div>\n          </div>\n\n          {/* Validation Status */}\n          {isValidating && (\n            <div className=\"flex items-center space-x-3 p-4 bg-blue-50 rounded-lg\">\n              <Loader className=\"h-5 w-5 text-blue-600 animate-spin\" />\n              <span className=\"text-sm text-blue-800\">Validating file...</span>\n            </div>\n          )}\n\n          {/* Validation Results */}\n          {validation && !isValidating && (\n            <div className={`p-4 rounded-lg ${\n              validation.isValid ? 'bg-green-50' : 'bg-red-50'\n            }`}>\n              <div className=\"flex items-start space-x-3\">\n                {validation.isValid ? (\n                  <CheckCircle className=\"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5\" />\n                ) : (\n                  <AlertTriangle className=\"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5\" />\n                )}\n                <div className=\"flex-1\">\n                  <h4 className={`text-sm font-medium ${\n                    validation.isValid ? 'text-green-800' : 'text-red-800'\n                  }`}>\n                    {validation.isValid ? 'File is valid and ready to import' : 'File validation failed'}\n                  </h4>\n                  \n                  {validation.errors.length > 0 && (\n                    <div className=\"mt-2\">\n                      <p className=\"text-sm text-red-700 font-medium\">Errors:</p>\n                      <ul className=\"text-sm text-red-600 list-disc list-inside mt-1\">\n                        {validation.errors.map((error, index) => (\n                          <li key={index}>{error}</li>\n                        ))}\n                      </ul>\n                    </div>\n                  )}\n                  \n                  {validation.warnings.length > 0 && (\n                    <div className=\"mt-2\">\n                      <p className=\"text-sm text-amber-700 font-medium\">Warnings:</p>\n                      <ul className=\"text-sm text-amber-600 list-disc list-inside mt-1\">\n                        {validation.warnings.map((warning, index) => (\n                          <li key={index}>{warning}</li>\n                        ))}\n                      </ul>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Data Summary */}\n          {validation?.isValid && !isValidating && (\n            <div className=\"bg-gray-50 rounded-lg p-4\">\n              <h4 className=\"text-sm font-medium text-gray-900 mb-3\">Import Summary</h4>\n              {(() => {\n                const summary = getDataSummary();\n                if (!summary) return null;\n                \n                return (\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div className=\"space-y-2\">\n                      <div className=\"flex justify-between text-sm\">\n                        <span className=\"text-gray-600\">Medications:</span>\n                        <span className=\"font-medium\">{summary.medications}</span>\n                      </div>\n                      <div className=\"flex justify-between text-sm\">\n                        <span className=\"text-gray-600\">Medication Logs:</span>\n                        <span className=\"font-medium\">{summary.logs}</span>\n                      </div>\n                    </div>\n                    <div className=\"space-y-2\">\n                      <div className=\"flex justify-between text-sm\">\n                        <span className=\"text-gray-600\">Reminders:</span>\n                        <span className=\"font-medium\">{summary.reminders}</span>\n                      </div>\n                      <div className=\"flex justify-between text-sm\">\n                        <span className=\"text-gray-600\">Health Profile:</span>\n                        <span className=\"font-medium\">{summary.hasProfile ? 'Yes' : 'No'}</span>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })()}\n            </div>\n          )}\n\n          {/* Import Result */}\n          {importResult && (\n            <div className={`p-4 rounded-lg ${\n              importResult.success ? 'bg-green-50' : 'bg-red-50'\n            }`}>\n              <div className=\"flex items-start space-x-3\">\n                {importResult.success ? (\n                  <CheckCircle className=\"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5\" />\n                ) : (\n                  <AlertCircle className=\"h-5 w-5 text-red-600 flex-shrink-0 mt-0.5\" />\n                )}\n                <div className=\"flex-1\">\n                  <h4 className={`text-sm font-medium ${\n                    importResult.success ? 'text-green-800' : 'text-red-800'\n                  }`}>\n                    {importResult.success ? 'Data imported successfully!' : 'Import failed'}\n                  </h4>\n                  \n                  {importResult.errors.length > 0 && (\n                    <div className=\"mt-2\">\n                      <ul className=\"text-sm text-red-600 list-disc list-inside\">\n                        {importResult.errors.map((error, index) => (\n                          <li key={index}>{error}</li>\n                        ))}\n                      </ul>\n                    </div>\n                  )}\n                  \n                  {importResult.warnings.length > 0 && (\n                    <div className=\"mt-2\">\n                      <ul className=\"text-sm text-amber-600 list-disc list-inside\">\n                        {importResult.warnings.map((warning, index) => (\n                          <li key={index}>{warning}</li>\n                        ))}\n                      </ul>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Important Notice */}\n          {!importResult && (\n            <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4\">\n              <div className=\"flex\">\n                <AlertTriangle className=\"h-5 w-5 text-amber-400 flex-shrink-0 mt-0.5\" />\n                <div className=\"ml-3\">\n                  <h4 className=\"text-sm font-medium text-amber-800\">Important</h4>\n                  <p className=\"text-sm text-amber-700 mt-1\">\n                    Importing data will add to your existing records. A backup of your current data will be created automatically before import.\n                  </p>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Footer */}\n        <div className=\"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50\">\n          <button\n            onClick={handleClose}\n            className=\"btn-secondary\"\n          >\n            {importResult?.success ? 'Close' : 'Cancel'}\n          </button>\n          {!importResult && (\n            <button\n              onClick={handleImport}\n              disabled={!validation?.isValid || isImporting}\n              className=\"btn-primary inline-flex items-center space-x-2\"\n            >\n              {isImporting ? (\n                <>\n                  <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\n                  <span>Importing...</span>\n                </>\n              ) : (\n                <>\n                  <Upload className=\"h-4 w-4\" />\n                  <span>Import Data</span>\n                </>\n              )}\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n\n","import React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { \n  User, \n  Bell, \n  // Shield, // DISABLED - no longer needed\n  Download, \n  Upload,\n  Trash2,\n  Save,\n  AlertTriangle,\n  // Eye, // DISABLED - no longer needed\n  // UserCheck, // DISABLED - no longer needed\n  // CheckCircle // DISABLED - no longer needed\n} from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { UserProfile } from '@/types';\n// import { AnonymousReportingPreferences } from '@/types'; // DISABLED\nimport { ConfirmDialog } from '@/components/ui/ConfirmDialog';\nimport { ExportModal } from '@/components/ui/ExportModal';\nimport { ImportModal } from '@/components/ui/ImportModal';\n// import { PrivacyDashboardModal } from '@/components/modals/PrivacyDashboardModal'; // DISABLED\n// import { ConsentManagementModal } from '@/components/modals/ConsentManagementModal'; // DISABLED  \n// import { anonymousReportingService } from '@/services/anonymousReportingService'; // DISABLED\n// import { generateCSV, downloadFile } from '@/utils/helpers';\nimport toast from 'react-hot-toast';\n\nexport function Settings() {\n  const { \n    userProfile, \n    updateProfile, \n    createProfile, \n    clearAllData\n    // exportData, \n    // importData,\n    // medications,\n    // logs,\n    // backupData\n  } = useMedicationStore();\n\n  const [activeTab, setActiveTab] = React.useState<'profile' | 'notifications' | 'data'>('profile');\n  const [showClearDataDialog, setShowClearDataDialog] = React.useState(false);\n  const [showExportModal, setShowExportModal] = React.useState(false);\n  const [showImportModal, setShowImportModal] = React.useState(false);\n  // const [showPrivacyDashboard, setShowPrivacyDashboard] = React.useState(false); // DISABLED\n  // const [showConsentModal, setShowConsentModal] = React.useState(false); // DISABLED\n  // const [anonymousReportingPrefs, setAnonymousReportingPrefs] = React.useState<AnonymousReportingPreferences | null>(null); // DISABLED\n  // const fileInputRef = React.useRef<HTMLInputElement>(null);\n\n  // Load anonymous reporting preferences on component mount\n  // React.useEffect(() => { // DISABLED\n  //   loadAnonymousReportingPreferences();\n  // }, []);\n\n  // const loadAnonymousReportingPreferences = async () => { // DISABLED\n  //   try {\n  //     const prefs = await anonymousReportingService.getConsentStatus();\n  //     setAnonymousReportingPrefs(prefs);\n  //   } catch (error) {\n  //     console.error('Error loading anonymous reporting preferences:', error);\n  //   }\n  // };\n\n  const { register, handleSubmit, formState: { errors } } = useForm({\n    defaultValues: {\n      name: userProfile?.name || '',\n      dateOfBirth: userProfile?.dateOfBirth?.toISOString().split('T')[0] || '',\n      allergies: userProfile?.allergies?.join(', ') || '',\n      conditions: userProfile?.conditions?.join(', ') || '',\n      emergencyContactName: userProfile?.emergencyContact?.name || '',\n      emergencyContactRelationship: userProfile?.emergencyContact?.relationship || '',\n      emergencyContactPhone: userProfile?.emergencyContact?.phone || '',\n      emergencyContactEmail: userProfile?.emergencyContact?.email || '',\n      theme: userProfile?.preferences?.theme || 'system',\n      pushNotifications: userProfile?.preferences?.notifications?.push ?? true,\n      soundNotifications: userProfile?.preferences?.notifications?.sound ?? true,\n      vibrationNotifications: userProfile?.preferences?.notifications?.vibration ?? true,\n      reminderAdvance: userProfile?.preferences?.notifications?.reminderAdvance ?? 15,\n      // shareData: userProfile?.preferences?.privacy?.shareData ?? false, // DISABLED\n      // analytics: userProfile?.preferences?.privacy?.analytics ?? true, // DISABLED\n      timeFormat: userProfile?.preferences?.display?.timeFormat || '12h',\n      dateFormat: userProfile?.preferences?.display?.dateFormat || 'MM/DD/YYYY',\n      defaultView: userProfile?.preferences?.display?.defaultView || 'dashboard',\n    }\n  });\n\n  const onSubmit = (data: any) => {\n    const profileData: Partial<UserProfile> = {\n      name: data.name.trim(),\n      dateOfBirth: data.dateOfBirth ? new Date(data.dateOfBirth) : undefined,\n      allergies: data.allergies ? data.allergies.split(',').map((s: string) => s.trim()).filter(Boolean) : undefined,\n      conditions: data.conditions ? data.conditions.split(',').map((s: string) => s.trim()).filter(Boolean) : undefined,\n      emergencyContact: (data.emergencyContactName || data.emergencyContactPhone) ? {\n        name: data.emergencyContactName,\n        relationship: data.emergencyContactRelationship,\n        phone: data.emergencyContactPhone,\n        email: data.emergencyContactEmail || undefined,\n      } : undefined,\n      preferences: {\n        theme: data.theme,\n        notifications: {\n          push: data.pushNotifications,\n          sound: data.soundNotifications,\n          vibration: data.vibrationNotifications,\n          reminderAdvance: data.reminderAdvance,\n        },\n        // privacy: { // DISABLED\n        //   shareData: data.shareData,\n        //   analytics: data.analytics,\n        //   anonymousReporting: anonymousReportingPrefs || {\n        //     enabled: false,\n        //     consentGiven: false,\n        //     dataTypesAllowed: [],\n        //     privacyLevel: 'minimal',\n        //     granularControls: {\n        //       includeAdherence: false,\n        //       includeSideEffects: false,\n        //       includeMedicationPatterns: false,\n        //       includeRiskAssessments: false,\n        //       allowTemporalAnalysis: false,\n        //       allowDemographicAnalysis: false\n        //     }\n        //   }\n        // },\n        display: {\n          timeFormat: data.timeFormat,\n          dateFormat: data.dateFormat,\n          defaultView: data.defaultView,\n        },\n      },\n    };\n\n    if (userProfile) {\n      updateProfile(profileData);\n    } else {\n      createProfile({\n        ...profileData,\n        name: profileData.name!,\n        preferences: profileData.preferences!,\n      });\n    }\n\n    toast.success('Settings updated successfully');\n  };\n\n  // const handleConsentUpdated = (preferences: AnonymousReportingPreferences) => { // DISABLED\n  //   setAnonymousReportingPrefs(preferences);\n  //   toast.success('Anonymous reporting preferences updated');\n  // };\n\n  // const handleExportData = () => {\n  //   try {\n  //     const data = exportData();\n  //     const jsonData = JSON.stringify(data, null, 2);\n  //     downloadFile(jsonData, `medtrack-export-${new Date().toISOString().split('T')[0]}.json`, 'application/json');\n  //     toast.success('Data exported successfully');\n  //   } catch (error) {\n  //     toast.error('Failed to export data');\n  //   }\n  // };\n\n  // const handleExportCSV = () => {\n  //   try {\n  //     const csvData = generateCSV(logs, ['timestamp', 'medicationId', 'dosageTaken', 'adherence']);\n  //     downloadFile(csvData, `medtrack-logs-${new Date().toISOString().split('T')[0]}.csv`, 'text/csv');\n  //     toast.success('CSV exported successfully');\n  //   } catch (error) {\n  //     toast.error('Failed to export CSV');\n  //   }\n  // };\n\n  // const handleImportData = (event: React.ChangeEvent<HTMLInputElement>) => {\n  //   const file = event.target.files?.[0];\n  //   if (!file) return;\n\n  //   const reader = new FileReader();\n  //   reader.onload = (e) => {\n  //     try {\n  //       const content = e.target?.result as string;\n  //       const data = JSON.parse(content);\n  //       importData(data);\n  //       toast.success('Data imported successfully');\n  //     } catch (error) {\n  //       toast.error('Failed to import data');\n  //     }\n  //   };\n  //   reader.readAsText(file);\n  // };\n\n  const handleClearData = () => {\n    clearAllData();\n    setShowClearDataDialog(false);\n    toast.success('All data cleared');\n  };\n\n  const tabs = [\n    { id: 'profile', label: 'Profile', icon: User },\n    { id: 'notifications', label: 'Notifications', icon: Bell },\n    // { id: 'privacy', label: 'Privacy', icon: Shield }, // DISABLED\n    { id: 'data', label: 'Data', icon: Download },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <div className=\"max-w-4xl mx-auto p-6\">\n        <div className=\"bg-white rounded-lg shadow\">\n          {/* Header */}\n          <div className=\"px-6 py-4 border-b border-gray-200\">\n            <h1 className=\"text-2xl font-bold text-gray-900\">Settings</h1>\n            <p className=\"text-gray-600\">Manage your account and application preferences</p>\n          </div>\n\n          {/* Tab Navigation */}\n          <div className=\"border-b border-gray-200\">\n            <nav className=\"flex space-x-8 px-6\">\n              {tabs.map((tab) => (\n                <button\n                  key={tab.id}\n                  onClick={() => setActiveTab(tab.id as any)}\n                  className={`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm ${\n                    activeTab === tab.id\n                      ? 'border-blue-500 text-blue-600'\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                  }`}\n                >\n                  <tab.icon className=\"w-4 h-4\" />\n                  <span>{tab.label}</span>\n                </button>\n              ))}\n            </nav>\n          </div>\n\n          {/* Content */}\n          <form onSubmit={handleSubmit(onSubmit)} className=\"p-6\">\n            {/* Profile Tab */}\n            {activeTab === 'profile' && (\n              <div className=\"space-y-6\">\n                <div>\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Personal Information</h3>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Full Name\n                      </label>\n                      <input\n                        type=\"text\"\n                        {...register('name', { required: 'Name is required' })}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      />\n                      {errors.name && (\n                        <p className=\"text-red-600 text-sm mt-1\">{errors.name.message}</p>\n                      )}\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Date of Birth\n                      </label>\n                      <input\n                        type=\"date\"\n                        {...register('dateOfBirth')}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Allergies\n                      </label>\n                      <input\n                        type=\"text\"\n                        placeholder=\"Separate with commas\"\n                        {...register('allergies')}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Medical Conditions\n                      </label>\n                      <input\n                        type=\"text\"\n                        placeholder=\"Separate with commas\"\n                        {...register('conditions')}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      />\n                    </div>\n                  </div>\n                </div>\n\n                <div>\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Emergency Contact</h3>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Contact Name\n                      </label>\n                      <input\n                        type=\"text\"\n                        {...register('emergencyContactName')}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Relationship\n                      </label>\n                      <input\n                        type=\"text\"\n                        {...register('emergencyContactRelationship')}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Phone Number\n                      </label>\n                      <input\n                        type=\"tel\"\n                        {...register('emergencyContactPhone')}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      />\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Email\n                      </label>\n                      <input\n                        type=\"email\"\n                        {...register('emergencyContactEmail')}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      />\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Notifications Tab */}\n            {activeTab === 'notifications' && (\n              <div className=\"space-y-6\">\n                <div>\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Notification Settings</h3>\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-center space-x-3\">\n                      <input\n                        type=\"checkbox\"\n                        id=\"pushNotifications\"\n                        {...register('pushNotifications')}\n                        className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n                      />\n                      <label htmlFor=\"pushNotifications\" className=\"text-sm text-gray-700\">\n                        Enable push notifications\n                      </label>\n                    </div>\n\n                    <div className=\"flex items-center space-x-3\">\n                      <input\n                        type=\"checkbox\"\n                        id=\"soundNotifications\"\n                        {...register('soundNotifications')}\n                        className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n                      />\n                      <label htmlFor=\"soundNotifications\" className=\"text-sm text-gray-700\">\n                        Play sound for notifications\n                      </label>\n                    </div>\n\n                    <div className=\"flex items-center space-x-3\">\n                      <input\n                        type=\"checkbox\"\n                        id=\"vibrationNotifications\"\n                        {...register('vibrationNotifications')}\n                        className=\"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500\"\n                      />\n                      <label htmlFor=\"vibrationNotifications\" className=\"text-sm text-gray-700\">\n                        Enable vibration for notifications\n                      </label>\n                    </div>\n\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                        Reminder advance time (minutes)\n                      </label>\n                      <select\n                        {...register('reminderAdvance')}\n                        className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n                      >\n                        <option value={5}>5 minutes</option>\n                        <option value={10}>10 minutes</option>\n                        <option value={15}>15 minutes</option>\n                        <option value={30}>30 minutes</option>\n                        <option value={60}>1 hour</option>\n                      </select>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Privacy Tab - DISABLED - Completely removed to prevent parsing errors */}\n\n            {/* Data Tab */}\n            {activeTab === 'data' && (\n              <div className=\"space-y-6\">\n                <div>\n                  <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Data Management</h3>\n                  \n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setShowExportModal(true)}\n                      className=\"flex items-center justify-center space-x-2 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 transition-colors\"\n                    >\n                      <Download className=\"w-5 h-5 text-gray-600\" />\n                      <span>Export Data</span>\n                    </button>\n\n                    <button\n                      type=\"button\"\n                      onClick={() => setShowImportModal(true)}\n                      className=\"flex items-center justify-center space-x-2 p-4 border-2 border-dashed border-gray-300 rounded-lg hover:border-gray-400 transition-colors\"\n                    >\n                      <Upload className=\"w-5 h-5 text-gray-600\" />\n                      <span>Import Data</span>\n                    </button>\n                  </div>\n\n                  <div className=\"mt-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\n                    <div className=\"flex items-start space-x-3\">\n                      <AlertTriangle className=\"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0\" />\n                      <div>\n                        <h4 className=\"font-medium text-red-900 mb-2\">Danger Zone</h4>\n                        <p className=\"text-sm text-red-700 mb-3\">\n                          This will permanently delete all your data including medications, logs, and settings.\n                        </p>\n                        <button\n                          type=\"button\"\n                          onClick={() => setShowClearDataDialog(true)}\n                          className=\"flex items-center space-x-2 px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                          <span>Clear All Data</span>\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            {/* Save Button */}\n            <div className=\"flex justify-end pt-6 border-t border-gray-200\">\n              <button\n                type=\"submit\"\n                className=\"flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n              >\n                <Save className=\"w-4 h-4\" />\n                <span>Save Settings</span>\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n\n      {/* Modals */}\n      <ConfirmDialog\n        isOpen={showClearDataDialog}\n        onClose={() => setShowClearDataDialog(false)}\n        onConfirm={handleClearData}\n        title=\"Clear All Data\"\n        message=\"Are you sure you want to delete all your data? This action cannot be undone.\"\n        confirmText=\"Clear All Data\"\n      />\n\n      <ExportModal\n        isOpen={showExportModal}\n        onClose={() => setShowExportModal(false)}\n      />\n\n      <ImportModal\n        isOpen={showImportModal}\n        onClose={() => setShowImportModal(false)}\n      />\n\n      {/* Privacy Dashboard Modal - DISABLED */}\n      {/* <PrivacyDashboardModal\n        isOpen={showPrivacyDashboard}\n        onClose={() => setShowPrivacyDashboard(false)}\n        title=\"Privacy Dashboard\"\n        onManageConsent={() => {\n          setShowPrivacyDashboard(false);\n          setShowConsentModal(true);\n        }}\n      /> */}\n\n      {/* Consent Management Modal - DISABLED */}\n      {/* <ConsentManagementModal\n        isOpen={showConsentModal}\n        onClose={() => setShowConsentModal(false)}\n        title=\"Manage Data Sharing Consent\"\n        onConsentUpdated={handleConsentUpdated}\n      /> */}\n    </div>\n  );\n}","import React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { X, Bell, Clock, Calendar } from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { Reminder, DayOfWeek } from '@/types';\nimport toast from 'react-hot-toast';\n\ninterface ReminderModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  reminder?: Reminder | null;\n}\n\ninterface FormData {\n  medicationId: string;\n  time: string;\n  days: DayOfWeek[];\n  isActive: boolean;\n  customMessage?: string;\n  notificationSound: boolean;\n}\n\nconst DAYS_OF_WEEK: { value: DayOfWeek; label: string }[] = [\n  { value: 'monday', label: 'Monday' },\n  { value: 'tuesday', label: 'Tuesday' },\n  { value: 'wednesday', label: 'Wednesday' },\n  { value: 'thursday', label: 'Thursday' },\n  { value: 'friday', label: 'Friday' },\n  { value: 'saturday', label: 'Saturday' },\n  { value: 'sunday', label: 'Sunday' },\n];\n\nexport function ReminderModal({ isOpen, onClose, reminder }: ReminderModalProps) {\n  const { \n    medications, \n    addReminder, \n    updateReminder,\n    generateContextualMessage \n  } = useMedicationStore();\n  \n  const isEditing = !!reminder;\n  const activeMedications = medications.filter(med => med.isActive);\n\n  const { register, handleSubmit, watch, setValue, reset, formState: { errors } } = useForm<FormData>({\n    defaultValues: {\n      medicationId: '',\n      time: '08:00',\n      days: [],\n      isActive: true,\n      customMessage: '',\n      notificationSound: true,\n    }\n  });\n\n  const selectedDays = watch('days') || [];\n  const selectedMedicationId = watch('medicationId');\n  const selectedMedication = medications.find(med => med.id === selectedMedicationId);\n\n  React.useEffect(() => {\n    if (isOpen) {\n      if (reminder) {\n        reset({\n          medicationId: reminder.medicationId,\n          time: reminder.time,\n          days: reminder.days,\n          isActive: reminder.isActive,\n          customMessage: reminder.customMessage || '',\n          notificationSound: reminder.notificationSound || true,\n        });\n      } else {\n        reset({\n          medicationId: '',\n          time: '08:00',\n          days: [],\n          isActive: true,\n          customMessage: '',\n          notificationSound: true,\n        });\n      }\n    }\n  }, [isOpen, reminder, reset]);\n\n  const handleDayToggle = (day: DayOfWeek) => {\n    const currentDays = selectedDays;\n    const newDays = currentDays.includes(day)\n      ? currentDays.filter(d => d !== day)\n      : [...currentDays, day];\n    setValue('days', newDays);\n  };\n\n  const setQuickSchedule = (schedule: 'daily' | 'weekdays' | 'weekends') => {\n    switch (schedule) {\n      case 'daily':\n        setValue('days', ['monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday', 'sunday']);\n        break;\n      case 'weekdays':\n        setValue('days', ['monday', 'tuesday', 'wednesday', 'thursday', 'friday']);\n        break;\n      case 'weekends':\n        setValue('days', ['saturday', 'sunday']);\n        break;\n    }\n  };\n\n  const onSubmit = (data: FormData) => {\n    if (data.days.length === 0) {\n      toast.error('Please select at least one day');\n      return;\n    }\n\n    const reminderData = {\n      medicationId: data.medicationId,\n      time: data.time,\n      days: data.days,\n      isActive: data.isActive,\n      customMessage: data.customMessage?.trim() || undefined,\n      notificationSound: data.notificationSound,\n    };\n\n    if (isEditing && reminder) {\n      updateReminder(reminder.id, reminderData);\n      toast.success('Reminder updated successfully');\n      \n      // Generate motivational message for reminder updates\n      generateContextualMessage(data.medicationId, 'motivation');\n    } else {\n      addReminder(reminderData);\n      toast.success('Reminder created successfully');\n      \n      // Generate celebratory message for new reminders\n      const medication = medications.find(med => med.id === data.medicationId);\n      if (medication) {\n        generateContextualMessage(data.medicationId, 'celebration');\n      }\n    }\n\n    onClose();\n  };\n\n  const getFrequencyText = () => {\n    if (selectedDays.length === 0) return 'No days selected';\n    if (selectedDays.length === 7) return 'Daily';\n    if (selectedDays.length === 5 && !selectedDays.includes('saturday') && !selectedDays.includes('sunday')) {\n      return 'Weekdays only';\n    }\n    if (selectedDays.length === 2 && selectedDays.includes('saturday') && selectedDays.includes('sunday')) {\n      return 'Weekends only';\n    }\n    return `${selectedDays.length} days per week`;\n  };\n\n  const getPsychologicalMessage = () => {\n    if (!selectedMedication) return null;\n    \n    if (selectedMedication.riskLevel === 'high') {\n      return {\n        message: \"Setting reminders for high-priority medications helps ensure consistent treatment and prevents complications.\",\n        color: \"bg-red-50 border-red-200 text-red-700\"\n      };\n    }\n    \n    if (selectedMedication.category === 'vitamin' || selectedMedication.category === 'supplement') {\n      return {\n        message: \"Regular reminders help build healthy habits and maximize the benefits of your wellness routine.\",\n        color: \"bg-green-50 border-green-200 text-green-700\"\n      };\n    }\n    \n    return {\n      message: \"Consistent medication timing improves effectiveness and helps you build a healthy routine.\",\n      color: \"bg-blue-50 border-blue-200 text-blue-700\"\n    };\n  };\n\n  const psychMessage = getPsychologicalMessage();\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n      <div className=\"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0\">\n        <div className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\" onClick={onClose} />\n        \n        <div className=\"relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg\">\n          <form onSubmit={handleSubmit(onSubmit)}>\n            <div className=\"bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <div className=\"flex items-center space-x-3\">\n                  <Bell className=\"h-6 w-6 text-blue-600\" />\n                  <h3 className=\"text-lg font-medium text-gray-900\">\n                    {isEditing ? 'Edit Reminder' : 'Create New Reminder'}\n                  </h3>\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={onClose}\n                  className=\"rounded-md bg-white text-gray-400 hover:text-gray-500\"\n                >\n                  <X className=\"h-6 w-6\" />\n                </button>\n              </div>\n\n              <div className=\"space-y-6\">\n                {/* Medication Selection */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Medication *\n                  </label>\n                  <select\n                    {...register('medicationId', { required: 'Please select a medication' })}\n                    className=\"input w-full\"\n                  >\n                    <option value=\"\">Select a medication...</option>\n                    {activeMedications.map((medication) => (\n                      <option key={medication.id} value={medication.id}>\n                        {medication.name} - {medication.dosage} {medication.unit}\n                      </option>\n                    ))}\n                  </select>\n                  {errors.medicationId && (\n                    <p className=\"mt-1 text-sm text-red-600\">{errors.medicationId.message}</p>\n                  )}\n                </div>\n\n                {/* Psychological Message */}\n                {psychMessage && (\n                  <div className={`p-3 rounded-lg border ${psychMessage.color}`}>\n                    <p className=\"text-sm font-medium\">{psychMessage.message}</p>\n                  </div>\n                )}\n\n                {/* Time Selection */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Reminder Time *\n                  </label>\n                  <div className=\"relative\">\n                    <Clock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n                    <input\n                      type=\"time\"\n                      {...register('time', { required: 'Please select a time' })}\n                      className=\"input pl-10 w-full\"\n                    />\n                  </div>\n                  {errors.time && (\n                    <p className=\"mt-1 text-sm text-red-600\">{errors.time.message}</p>\n                  )}\n                </div>\n\n                {/* Quick Schedule Buttons */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Quick Schedule\n                  </label>\n                  <div className=\"grid grid-cols-3 gap-2\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setQuickSchedule('daily')}\n                      className=\"btn-secondary text-sm py-2\"\n                    >\n                      Daily\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setQuickSchedule('weekdays')}\n                      className=\"btn-secondary text-sm py-2\"\n                    >\n                      Weekdays\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setQuickSchedule('weekends')}\n                      className=\"btn-secondary text-sm py-2\"\n                    >\n                      Weekends\n                    </button>\n                  </div>\n                </div>\n\n                {/* Days Selection */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Days of Week *\n                  </label>\n                  <div className=\"space-y-2\">\n                    {DAYS_OF_WEEK.map((day) => (\n                      <label key={day.value} className=\"flex items-center\">\n                        <input\n                          type=\"checkbox\"\n                          checked={selectedDays.includes(day.value)}\n                          onChange={() => handleDayToggle(day.value)}\n                          className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                        />\n                        <span className=\"ml-2 text-sm text-gray-700\">{day.label}</span>\n                      </label>\n                    ))}\n                  </div>\n                  <p className=\"mt-1 text-sm text-gray-500\">\n                    Selected: {getFrequencyText()}\n                  </p>\n                  {selectedDays.length === 0 && (\n                    <p className=\"mt-1 text-sm text-red-600\">Please select at least one day</p>\n                  )}\n                </div>\n\n                {/* Custom Message */}\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    Custom Message (Optional)\n                  </label>\n                  <textarea\n                    {...register('customMessage')}\n                    rows={3}\n                    className=\"input w-full\"\n                    placeholder=\"Add a personal reminder message...\"\n                  />\n                  <p className=\"mt-1 text-xs text-gray-500\">\n                    This message will be shown with your reminder notification\n                  </p>\n                </div>\n\n                {/* Options */}\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      {...register('notificationSound')}\n                      className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                    />\n                    <label className=\"ml-2 block text-sm text-gray-900\">\n                      Play notification sound\n                    </label>\n                  </div>\n\n                  <div className=\"flex items-center\">\n                    <input\n                      type=\"checkbox\"\n                      {...register('isActive')}\n                      className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\n                    />\n                    <label className=\"ml-2 block text-sm text-gray-900\">\n                      Reminder is active\n                    </label>\n                  </div>\n                </div>\n\n                {/* Preview */}\n                {selectedMedication && selectedDays.length > 0 && (\n                  <div className=\"bg-gray-50 p-4 rounded-lg\">\n                    <h4 className=\"text-sm font-medium text-gray-900 mb-2\">Reminder Preview</h4>\n                    <div className=\"flex items-center space-x-3\">\n                      <div\n                        className=\"w-3 h-3 rounded-full\"\n                        style={{ backgroundColor: selectedMedication.color }}\n                      />\n                      <div>\n                        <p className=\"text-sm font-medium text-gray-900\">\n                          {selectedMedication.name}\n                        </p>\n                        <p className=\"text-xs text-gray-600\">\n                          {watch('time')}  {getFrequencyText()}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            <div className=\"bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6\">\n              <button\n                type=\"submit\"\n                className=\"w-full justify-center rounded-md bg-blue-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 sm:ml-3 sm:w-auto\"\n              >\n                {isEditing ? 'Update Reminder' : 'Create Reminder'}\n              </button>\n              <button\n                type=\"button\"\n                onClick={onClose}\n                className=\"mt-3 w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto\"\n              >\n                Cancel\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { Medication, MedicationLog, Reminder } from '@/types';\nimport { generateId } from '@/utils/helpers';\n\ninterface AdherencePattern {\n  medicationId: string;\n  medicationName: string;\n  adherencePercentage: number;\n  consecutiveMissedDoses: number;\n  frequentMissTimeSlots: string[];\n  missedDosePattern: 'random' | 'morning' | 'evening' | 'weekend' | 'weekday' | 'daily';\n  riskLevel: 'low' | 'moderate' | 'high' | 'critical';\n  predictedMissRisk: number; // Percentage likelihood of missing next dose\n  recommendations: AdherenceRecommendation[];\n}\n\ninterface AdherenceRecommendation {\n  type: 'reminder-adjustment' | 'behavioral-intervention' | 'scheduling-change' | 'education' | 'medical-review';\n  priority: 'low' | 'medium' | 'high' | 'urgent';\n  message: string;\n  actionable: boolean;\n  details?: string;\n}\n\ninterface SmartNotification {\n  id: string;\n  medicationId: string;\n  type: 'predictive-reminder' | 'adherence-support' | 'pattern-alert' | 'encouragement';\n  title: string;\n  message: string;\n  priority: 'low' | 'medium' | 'high';\n  scheduledTime: Date;\n  triggered: boolean;\n  context?: {\n    missedCount?: number;\n    pattern?: string;\n    riskScore?: number;\n  };\n}\n\nexport class SmartAdherenceService {\n  \n  /**\n   * Analyze adherence patterns for all medications\n   */\n  static analyzeAdherencePatterns(\n    medications: Medication[], \n    logs: MedicationLog[], \n    daysToAnalyze: number = 30\n  ): AdherencePattern[] {\n    const cutoffDate = new Date();\n    cutoffDate.setDate(cutoffDate.getDate() - daysToAnalyze);\n\n    return medications\n      .filter(med => med.isActive)\n      .map(medication => {\n        const medicationLogs = logs.filter(log => \n          log.medicationId === medication.id &&\n          new Date(log.timestamp) >= cutoffDate\n        );\n\n        return this.analyzeMedicationPattern(medication, medicationLogs);\n      })\n      .filter(pattern => pattern.adherencePercentage < 100 || pattern.riskLevel !== 'low');\n  }\n\n  /**\n   * Analyze patterns for a specific medication\n   */\n  private static analyzeMedicationPattern(medication: Medication, logs: MedicationLog[]): AdherencePattern {\n    const takenLogs = logs.filter(log => log.adherence === 'taken');\n    const missedLogs = logs.filter(log => log.adherence === 'missed');\n    \n    const adherencePercentage = logs.length > 0 \n      ? Math.round((takenLogs.length / logs.length) * 100) \n      : 100;\n\n    // Analyze consecutive missed doses\n    const consecutiveMissedDoses = this.calculateConsecutiveMissedDoses(logs);\n\n    // Analyze missed dose timing patterns\n    const missedDosePattern = this.detectMissedDosePattern(missedLogs);\n    const frequentMissTimeSlots = this.getFrequentMissTimeSlots(missedLogs);\n\n    // Calculate risk level\n    const riskLevel = this.calculateAdherenceRiskLevel(\n      adherencePercentage, \n      consecutiveMissedDoses, \n      missedLogs.length,\n      medication.riskLevel\n    );\n\n    // Predict likelihood of missing next dose\n    const predictedMissRisk = this.predictMissRisk(logs, medication);\n\n    // Generate personalized recommendations\n    const recommendations = this.generateRecommendations(\n      adherencePercentage,\n      missedDosePattern,\n      consecutiveMissedDoses,\n      frequentMissTimeSlots,\n      medication\n    );\n\n    return {\n      medicationId: medication.id,\n      medicationName: medication.name,\n      adherencePercentage,\n      consecutiveMissedDoses,\n      frequentMissTimeSlots,\n      missedDosePattern,\n      riskLevel,\n      predictedMissRisk,\n      recommendations\n    };\n  }\n\n  /**\n   * Calculate consecutive missed doses\n   */\n  private static calculateConsecutiveMissedDoses(logs: MedicationLog[]): number {\n    if (logs.length === 0) return 0;\n\n    const sortedLogs = logs.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime());\n    let consecutiveMissed = 0;\n\n    for (const log of sortedLogs) {\n      if (log.adherence === 'missed') {\n        consecutiveMissed++;\n      } else {\n        break;\n      }\n    }\n\n    return consecutiveMissed;\n  }\n\n  /**\n   * Detect patterns in missed doses\n   */\n  private static detectMissedDosePattern(missedLogs: MedicationLog[]): AdherencePattern['missedDosePattern'] {\n    if (missedLogs.length === 0) return 'random';\n\n    const patterns = {\n      morning: 0,\n      evening: 0,\n      weekend: 0,\n      weekday: 0\n    };\n\n    missedLogs.forEach(log => {\n      const logDate = new Date(log.timestamp);\n      const hour = logDate.getHours();\n      const dayOfWeek = logDate.getDay();\n\n      // Morning/evening analysis\n      if (hour >= 6 && hour < 12) patterns.morning++;\n      if (hour >= 18 && hour < 24) patterns.evening++;\n\n      // Weekend/weekday analysis\n      if (dayOfWeek === 0 || dayOfWeek === 6) patterns.weekend++;\n      else patterns.weekday++;\n    });\n\n    const total = missedLogs.length;\n    \n    // If 70% or more of misses fall into a category, it's a pattern\n    if (patterns.morning / total >= 0.7) return 'morning';\n    if (patterns.evening / total >= 0.7) return 'evening';\n    if (patterns.weekend / total >= 0.7) return 'weekend';\n    if (patterns.weekday / total >= 0.7) return 'weekday';\n    if (total >= 3) return 'daily'; // High frequency of missing\n\n    return 'random';\n  }\n\n  /**\n   * Get time slots with frequent misses\n   */\n  private static getFrequentMissTimeSlots(missedLogs: MedicationLog[]): string[] {\n    const timeSlots: Record<string, number> = {};\n\n    missedLogs.forEach(log => {\n      const hour = new Date(log.timestamp).getHours();\n      const timeSlot = \n        hour >= 6 && hour < 12 ? 'Morning (6AM-12PM)' :\n        hour >= 12 && hour < 18 ? 'Afternoon (12PM-6PM)' :\n        hour >= 18 && hour < 24 ? 'Evening (6PM-12AM)' :\n        'Night (12AM-6AM)';\n      \n      timeSlots[timeSlot] = (timeSlots[timeSlot] || 0) + 1;\n    });\n\n    // Return time slots with more than 30% of missed doses\n    const threshold = Math.max(1, Math.ceil(missedLogs.length * 0.3));\n    return Object.entries(timeSlots)\n      .filter(([, count]) => count >= threshold)\n      .map(([slot]) => slot);\n  }\n\n  /**\n   * Calculate adherence risk level\n   */\n  private static calculateAdherenceRiskLevel(\n    adherencePercentage: number,\n    consecutiveMissed: number,\n    totalMissed: number,\n    medicationRiskLevel: string\n  ): AdherencePattern['riskLevel'] {\n    let riskScore = 0;\n\n    // Adherence percentage impact\n    if (adherencePercentage < 50) riskScore += 40;\n    else if (adherencePercentage < 70) riskScore += 25;\n    else if (adherencePercentage < 85) riskScore += 15;\n\n    // Consecutive missed doses impact\n    if (consecutiveMissed >= 5) riskScore += 30;\n    else if (consecutiveMissed >= 3) riskScore += 20;\n    else if (consecutiveMissed >= 2) riskScore += 10;\n\n    // Total missed doses impact\n    if (totalMissed >= 10) riskScore += 20;\n    else if (totalMissed >= 5) riskScore += 10;\n\n    // Medication risk level multiplier\n    if (medicationRiskLevel === 'high') riskScore *= 1.5;\n    else if (medicationRiskLevel === 'moderate') riskScore *= 1.2;\n\n    if (riskScore >= 70) return 'critical';\n    if (riskScore >= 45) return 'high';\n    if (riskScore >= 20) return 'moderate';\n    return 'low';\n  }\n\n  /**\n   * Predict risk of missing next dose\n   */\n  private static predictMissRisk(logs: MedicationLog[], medication: Medication): number {\n    if (logs.length === 0) return 10; // Base risk for new medications\n\n    const recentLogs = logs.slice(-14); // Last 14 logs\n    const missedCount = recentLogs.filter(log => log.adherence === 'missed').length;\n    const recentAdherence = recentLogs.length > 0 \n      ? (recentLogs.length - missedCount) / recentLogs.length \n      : 1;\n\n    // Base risk from recent adherence\n    let riskPercentage = (1 - recentAdherence) * 100;\n\n    // Adjust for consecutive missed doses\n    const consecutiveMissed = this.calculateConsecutiveMissedDoses(logs);\n    if (consecutiveMissed > 0) {\n      riskPercentage += consecutiveMissed * 15; // 15% additional risk per consecutive miss\n    }\n\n    // Adjust for medication risk level\n    if (medication.riskLevel === 'high') riskPercentage *= 1.3;\n    else if (medication.riskLevel === 'moderate') riskPercentage *= 1.1;\n\n    // Time since last dose\n    if (logs.length > 0) {\n      const lastLog = logs[logs.length - 1];\n      const hoursSinceLastDose = (Date.now() - new Date(lastLog.timestamp).getTime()) / (1000 * 60 * 60);\n      \n      if (hoursSinceLastDose > 48) riskPercentage += 20; // High risk if no recent logs\n      else if (hoursSinceLastDose > 24) riskPercentage += 10;\n    }\n\n    return Math.min(95, Math.max(5, Math.round(riskPercentage)));\n  }\n\n  /**\n   * Generate personalized recommendations\n   */\n  private static generateRecommendations(\n    adherencePercentage: number,\n    pattern: AdherencePattern['missedDosePattern'],\n    consecutiveMissed: number,\n    frequentMissTimeSlots: string[],\n    medication: Medication\n  ): AdherenceRecommendation[] {\n    const recommendations: AdherenceRecommendation[] = [];\n\n    // Critical adherence issues\n    if (adherencePercentage < 50) {\n      recommendations.push({\n        type: 'medical-review',\n        priority: 'urgent',\n        message: 'Urgent: Schedule immediate appointment with healthcare provider',\n        actionable: true,\n        details: 'Adherence below 50% significantly reduces medication effectiveness and may pose health risks.'\n      });\n    }\n\n    // Consecutive missed doses\n    if (consecutiveMissed >= 3) {\n      recommendations.push({\n        type: 'behavioral-intervention',\n        priority: 'high',\n        message: 'Consider using a pill organizer or medication app with alarms',\n        actionable: true,\n        details: `You've missed ${consecutiveMissed} consecutive doses. Breaking this pattern is crucial.`\n      });\n    }\n\n    // Pattern-specific recommendations\n    switch (pattern) {\n      case 'morning':\n        recommendations.push({\n          type: 'reminder-adjustment',\n          priority: 'medium',\n          message: 'Move morning reminders earlier or add an evening dose if approved by doctor',\n          actionable: true,\n          details: 'Morning doses are frequently missed. Consider adjusting your schedule.'\n        });\n        break;\n      \n      case 'evening':\n        recommendations.push({\n          type: 'reminder-adjustment',\n          priority: 'medium',\n          message: 'Set multiple evening reminders or take with dinner',\n          actionable: true,\n          details: 'Evening doses are often forgotten. Link to a consistent evening routine.'\n        });\n        break;\n      \n      case 'weekend':\n        recommendations.push({\n          type: 'scheduling-change',\n          priority: 'medium',\n          message: 'Set stronger weekend reminders and maintain weekday schedule',\n          actionable: true,\n          details: 'Weekend routine disruption affects medication adherence.'\n        });\n        break;\n      \n      case 'weekday':\n        recommendations.push({\n          type: 'scheduling-change',\n          priority: 'medium',\n          message: 'Consider taking medication at home before work or during lunch',\n          actionable: true,\n          details: 'Weekday schedule may be interfering with medication timing.'\n        });\n        break;\n    }\n\n    // Time-specific recommendations\n    if (frequentMissTimeSlots.length > 0) {\n      recommendations.push({\n        type: 'reminder-adjustment',\n        priority: 'medium',\n        message: `Add extra reminders during ${frequentMissTimeSlots.join(' and ')}`,\n        actionable: true,\n        details: 'These time periods show frequent missed doses.'\n      });\n    }\n\n    // High-risk medication specific\n    if (medication.riskLevel === 'high' && adherencePercentage < 90) {\n      recommendations.push({\n        type: 'education',\n        priority: 'high',\n        message: 'Review importance of consistent dosing for this high-risk medication',\n        actionable: true,\n        details: 'This medication requires high adherence to prevent serious complications.'\n      });\n    }\n\n    // General low adherence\n    if (adherencePercentage < 80 && adherencePercentage >= 50) {\n      recommendations.push({\n        type: 'behavioral-intervention',\n        priority: 'medium',\n        message: 'Consider habit stacking - link medication to an existing daily routine',\n        actionable: true,\n        details: 'Connecting medication to established habits improves consistency.'\n      });\n    }\n\n    return recommendations;\n  }\n\n  /**\n   * Generate smart notifications based on patterns\n   */\n  static generateSmartNotifications(\n    patterns: AdherencePattern[],\n    medications: Medication[],\n    reminders: Reminder[]\n  ): SmartNotification[] {\n    const notifications: SmartNotification[] = [];\n    const now = new Date();\n\n    patterns.forEach(pattern => {\n      const medication = medications.find(med => med.id === pattern.medicationId);\n      if (!medication) return;\n\n      // High miss risk prediction\n      if (pattern.predictedMissRisk > 70) {\n        notifications.push({\n          id: generateId(),\n          medicationId: pattern.medicationId,\n          type: 'predictive-reminder',\n          title: 'High Risk of Missing Dose',\n          message: `${pattern.medicationName}: ${pattern.predictedMissRisk}% chance of missing next dose. Extra attention needed!`,\n          priority: 'high',\n          scheduledTime: new Date(now.getTime() + 30 * 60 * 1000), // 30 minutes from now\n          triggered: false,\n          context: {\n            riskScore: pattern.predictedMissRisk,\n            pattern: pattern.missedDosePattern\n          }\n        });\n      }\n\n      // Consecutive missed doses\n      if (pattern.consecutiveMissedDoses >= 2) {\n        notifications.push({\n          id: generateId(),\n          medicationId: pattern.medicationId,\n          type: 'adherence-support',\n          title: 'Missed Dose Pattern Detected',\n          message: `You've missed ${pattern.consecutiveMissedDoses} doses of ${pattern.medicationName} in a row. Let's get back on track!`,\n          priority: pattern.consecutiveMissedDoses >= 3 ? 'high' : 'medium',\n          scheduledTime: now,\n          triggered: false,\n          context: {\n            missedCount: pattern.consecutiveMissedDoses\n          }\n        });\n      }\n\n      // Pattern alerts\n      if (pattern.missedDosePattern !== 'random') {\n        notifications.push({\n          id: generateId(),\n          medicationId: pattern.medicationId,\n          type: 'pattern-alert',\n          title: 'Medication Pattern Identified',\n          message: `You tend to miss ${pattern.medicationName} doses in the ${pattern.missedDosePattern}. Would you like to adjust your reminders?`,\n          priority: 'medium',\n          scheduledTime: new Date(now.getTime() + 60 * 60 * 1000), // 1 hour from now\n          triggered: false,\n          context: {\n            pattern: pattern.missedDosePattern\n          }\n        });\n      }\n\n      // Encouragement for good adherence\n      if (pattern.adherencePercentage >= 90 && pattern.adherencePercentage < 100) {\n        notifications.push({\n          id: generateId(),\n          medicationId: pattern.medicationId,\n          type: 'encouragement',\n          title: 'Great Adherence!',\n          message: `${pattern.adherencePercentage}% adherence for ${pattern.medicationName}. You're doing excellent - keep it up!`,\n          priority: 'low',\n          scheduledTime: new Date(now.getTime() + 4 * 60 * 60 * 1000), // 4 hours from now\n          triggered: false\n        });\n      }\n    });\n\n    return notifications;\n  }\n\n  /**\n   * Get adherence insights summary\n   */\n  static getAdherenceInsights(patterns: AdherencePattern[]): {\n    overallRisk: 'low' | 'moderate' | 'high' | 'critical';\n    totalMedications: number;\n    medicationsAtRisk: number;\n    avgAdherence: number;\n    topRecommendations: AdherenceRecommendation[];\n    urgentActions: number;\n  } {\n    if (patterns.length === 0) {\n      return {\n        overallRisk: 'low',\n        totalMedications: 0,\n        medicationsAtRisk: 0,\n        avgAdherence: 100,\n        topRecommendations: [],\n        urgentActions: 0\n      };\n    }\n\n    const avgAdherence = Math.round(\n      patterns.reduce((sum, p) => sum + p.adherencePercentage, 0) / patterns.length\n    );\n\n    const medicationsAtRisk = patterns.filter(p => p.riskLevel !== 'low').length;\n    \n    const riskCounts = patterns.reduce((acc, p) => {\n      acc[p.riskLevel]++;\n      return acc;\n    }, { low: 0, moderate: 0, high: 0, critical: 0 });\n\n    let overallRisk: 'low' | 'moderate' | 'high' | 'critical' = 'low';\n    if (riskCounts.critical > 0) overallRisk = 'critical';\n    else if (riskCounts.high > 0) overallRisk = 'high';\n    else if (riskCounts.moderate > 0) overallRisk = 'moderate';\n\n    // Collect all recommendations and prioritize\n    const allRecommendations = patterns.flatMap(p => p.recommendations);\n    const topRecommendations = allRecommendations\n      .filter(r => r.priority === 'urgent' || r.priority === 'high')\n      .slice(0, 5);\n\n    const urgentActions = allRecommendations.filter(r => r.priority === 'urgent').length;\n\n    return {\n      overallRisk,\n      totalMedications: patterns.length,\n      medicationsAtRisk,\n      avgAdherence,\n      topRecommendations,\n      urgentActions\n    };\n  }\n}\n","import React from 'react';\nimport { \n  Plus, \n  Bell, \n  Clock, \n  Edit2, \n  Trash2, \n  ToggleLeft, \n  ToggleRight,\n  Calendar,\n  Brain,\n  AlertTriangle,\n  TrendingUp,\n  Target,\n  Shield,\n  Lightbulb,\n  CheckCircle,\n  XCircle\n} from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { ReminderModal } from '@/components/modals/ReminderModal';\nimport { ConfirmDialog } from '@/components/ui/ConfirmDialog';\nimport { formatTime, cn } from '@/utils/helpers';\nimport { Reminder, DayOfWeek } from '@/types';\nimport { SmartAdherenceService } from '@/services/smartAdherenceService';\nimport toast from 'react-hot-toast';\n\nexport function Reminders() {\n  const {\n    reminders,\n    medications,\n    logs,\n    // addReminder,\n    // updateReminder,\n    deleteReminder,\n    toggleReminderActive,\n    snoozeReminder\n  } = useMedicationStore();\n\n  const [isModalOpen, setIsModalOpen] = React.useState(false);\n  const [editingReminder, setEditingReminder] = React.useState<Reminder | null>(null);\n  const [confirmDelete, setConfirmDelete] = React.useState<string | null>(null);\n  const [showInsights, setShowInsights] = React.useState(true);\n\n  const activeMedications = medications.filter(med => med.isActive);\n  const activeReminders = reminders.filter(reminder => reminder.isActive);\n  const inactiveReminders = reminders.filter(reminder => !reminder.isActive);\n\n  // Smart adherence analysis\n  const adherencePatterns = React.useMemo(() => {\n    return SmartAdherenceService.analyzeAdherencePatterns(medications, logs, 30);\n  }, [medications, logs]);\n\n  const adherenceInsights = React.useMemo(() => {\n    return SmartAdherenceService.getAdherenceInsights(adherencePatterns);\n  }, [adherencePatterns]);\n\n  const smartNotifications = React.useMemo(() => {\n    return SmartAdherenceService.generateSmartNotifications(adherencePatterns, medications, reminders);\n  }, [adherencePatterns, medications, reminders]);\n\n  const getReminderMedication = (medicationId: string) => {\n    return medications.find(med => med.id === medicationId);\n  };\n\n  const handleAddReminder = () => {\n    setEditingReminder(null);\n    setIsModalOpen(true);\n  };\n\n  const handleEditReminder = (reminder: Reminder) => {\n    setEditingReminder(reminder);\n    setIsModalOpen(true);\n  };\n\n  const handleDeleteReminder = (id: string) => {\n    deleteReminder(id);\n    setConfirmDelete(null);\n    toast.success('Reminder deleted successfully');\n  };\n\n  const handleToggleActive = (id: string) => {\n    toggleReminderActive(id);\n    toast.success('Reminder status updated');\n  };\n\n  const handleSnooze = (id: string, minutes: number) => {\n    snoozeReminder(id, minutes);\n    toast.success(`Reminder snoozed for ${minutes} minutes`);\n  };\n\n  const formatDays = (days: DayOfWeek[]) => {\n    const dayMap = {\n      'monday': 'Mon',\n      'tuesday': 'Tue',\n      'wednesday': 'Wed',\n      'thursday': 'Thu',\n      'friday': 'Fri',\n      'saturday': 'Sat',\n      'sunday': 'Sun'\n    };\n    \n    if (days.length === 7) return 'Daily';\n    if (days.length === 5 && !days.includes('saturday') && !days.includes('sunday')) return 'Weekdays';\n    if (days.length === 2 && days.includes('saturday') && days.includes('sunday')) return 'Weekends';\n    \n    return days.map(day => dayMap[day]).join(', ');\n  };\n\n  const ReminderCard = ({ reminder }: { reminder: Reminder }) => {\n    const medication = getReminderMedication(reminder.medicationId);\n    if (!medication) return null;\n\n    return (\n      <div className=\"card\">\n        <div className=\"card-content p-6\">\n          <div className=\"flex items-start justify-between\">\n            <div className=\"flex items-start space-x-4\">\n              <div className={`p-3 rounded-lg ${reminder.isActive ? 'bg-blue-100' : 'bg-gray-100'}`}>\n                <Bell className={`h-6 w-6 ${reminder.isActive ? 'text-blue-600' : 'text-gray-400'}`} />\n              </div>\n              \n              <div className=\"flex-1\">\n                <div className=\"flex items-center space-x-3\">\n                  <h3 className=\"text-lg font-semibold text-gray-900\">{medication.name}</h3>\n                  <span \n                    className=\"h-3 w-3 rounded-full\" \n                    style={{ backgroundColor: medication.color }}\n                  />\n                </div>\n                \n                <div className=\"mt-2 space-y-2\">\n                  <div className=\"flex items-center space-x-2 text-sm text-gray-600\">\n                    <Clock className=\"h-4 w-4\" />\n                    <span>{reminder.time}</span>\n                  </div>\n                  \n                  <div className=\"flex items-center space-x-2 text-sm text-gray-600\">\n                    <Calendar className=\"h-4 w-4\" />\n                    <span>{formatDays(reminder.days)}</span>\n                  </div>\n                  \n                  {reminder.customMessage && (\n                    <p className=\"text-sm text-gray-500 italic\">\"{reminder.customMessage}\"</p>\n                  )}\n                  \n                  {reminder.snoozeUntil && new Date(reminder.snoozeUntil) > new Date() && (\n                    <div className=\"inline-flex items-center px-2 py-1 rounded-full text-xs bg-yellow-100 text-yellow-800\">\n                      Snoozed until {formatTime(new Date(reminder.snoozeUntil))}\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n            \n            <div className=\"flex items-center space-x-2\">\n              <button\n                onClick={() => handleToggleActive(reminder.id)}\n                className={cn(\n                  'p-2 rounded-lg transition-colors',\n                  reminder.isActive \n                    ? 'text-green-600 hover:bg-green-50' \n                    : 'text-gray-400 hover:bg-gray-50'\n                )}\n                title={reminder.isActive ? 'Disable reminder' : 'Enable reminder'}\n              >\n                {reminder.isActive ? (\n                  <ToggleRight className=\"h-5 w-5\" />\n                ) : (\n                  <ToggleLeft className=\"h-5 w-5\" />\n                )}\n              </button>\n              \n              <button\n                onClick={() => handleEditReminder(reminder)}\n                className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-50 rounded-lg transition-colors\"\n                title=\"Edit reminder\"\n              >\n                <Edit2 className=\"h-4 w-4\" />\n              </button>\n              \n              <button\n                onClick={() => setConfirmDelete(reminder.id)}\n                className=\"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n                title=\"Delete reminder\"\n              >\n                <Trash2 className=\"h-4 w-4\" />\n              </button>\n            </div>\n          </div>\n          \n          {reminder.isActive && (\n            <div className=\"mt-4 pt-4 border-t border-gray-200\">\n              <div className=\"flex items-center space-x-2\">\n                <span className=\"text-sm text-gray-500\">Quick snooze:</span>\n                <button\n                  onClick={() => handleSnooze(reminder.id, 15)}\n                  className=\"px-3 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded-md transition-colors\"\n                >\n                  15m\n                </button>\n                <button\n                  onClick={() => handleSnooze(reminder.id, 30)}\n                  className=\"px-3 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded-md transition-colors\"\n                >\n                  30m\n                </button>\n                <button\n                  onClick={() => handleSnooze(reminder.id, 60)}\n                  className=\"px-3 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded-md transition-colors\"\n                >\n                  1h\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Page Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Reminders</h1>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Manage your medication reminders and notifications\n          </p>\n        </div>\n        <div className=\"mt-4 sm:mt-0\">\n          <button\n            onClick={handleAddReminder}\n            disabled={activeMedications.length === 0}\n            className=\"btn-primary inline-flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            <Plus className=\"h-4 w-4\" />\n            <span>Add Reminder</span>\n          </button>\n        </div>\n      </div>\n\n      {/* Smart Adherence Insights */}\n      {adherencePatterns.length > 0 && showInsights && (\n        <div className=\"space-y-4\">\n          {/* Insights Overview */}\n          <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4\">\n            <div className=\"card\">\n              <div className=\"card-content p-4\">\n                <div className=\"flex items-center\">\n                  <div className=\"flex-shrink-0\">\n                    <div className={`w-8 h-8 rounded-md flex items-center justify-center ${\n                      adherenceInsights.overallRisk === 'critical' ? 'bg-red-100' :\n                      adherenceInsights.overallRisk === 'high' ? 'bg-orange-100' :\n                      adherenceInsights.overallRisk === 'moderate' ? 'bg-yellow-100' :\n                      'bg-green-100'\n                    }`}>\n                      <Shield className={`h-5 w-5 ${\n                        adherenceInsights.overallRisk === 'critical' ? 'text-red-600' :\n                        adherenceInsights.overallRisk === 'high' ? 'text-orange-600' :\n                        adherenceInsights.overallRisk === 'moderate' ? 'text-yellow-600' :\n                        'text-green-600'\n                      }`} />\n                    </div>\n                  </div>\n                  <div className=\"ml-4 w-0 flex-1\">\n                    <dl>\n                      <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                        Adherence Risk\n                      </dt>\n                      <dd className={`text-lg font-medium ${\n                        adherenceInsights.overallRisk === 'critical' ? 'text-red-600' :\n                        adherenceInsights.overallRisk === 'high' ? 'text-orange-600' :\n                        adherenceInsights.overallRisk === 'moderate' ? 'text-yellow-600' :\n                        'text-green-600'\n                      }`}>\n                        {adherenceInsights.overallRisk.charAt(0).toUpperCase() + adherenceInsights.overallRisk.slice(1)}\n                      </dd>\n                    </dl>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"card\">\n              <div className=\"card-content p-4\">\n                <div className=\"flex items-center\">\n                  <div className=\"flex-shrink-0\">\n                    <div className=\"w-8 h-8 bg-blue-100 rounded-md flex items-center justify-center\">\n                      <Target className=\"h-5 w-5 text-blue-600\" />\n                    </div>\n                  </div>\n                  <div className=\"ml-4 w-0 flex-1\">\n                    <dl>\n                      <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                        Avg Adherence\n                      </dt>\n                      <dd className=\"text-lg font-medium text-gray-900\">\n                        {adherenceInsights.avgAdherence}%\n                      </dd>\n                    </dl>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"card\">\n              <div className=\"card-content p-4\">\n                <div className=\"flex items-center\">\n                  <div className=\"flex-shrink-0\">\n                    <div className=\"w-8 h-8 bg-orange-100 rounded-md flex items-center justify-center\">\n                      <AlertTriangle className=\"h-5 w-5 text-orange-600\" />\n                    </div>\n                  </div>\n                  <div className=\"ml-4 w-0 flex-1\">\n                    <dl>\n                      <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                        At Risk Meds\n                      </dt>\n                      <dd className=\"text-lg font-medium text-gray-900\">\n                        {adherenceInsights.medicationsAtRisk}\n                      </dd>\n                    </dl>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"card\">\n              <div className=\"card-content p-4\">\n                <div className=\"flex items-center\">\n                  <div className=\"flex-shrink-0\">\n                    <div className=\"w-8 h-8 bg-red-100 rounded-md flex items-center justify-center\">\n                      <XCircle className=\"h-5 w-5 text-red-600\" />\n                    </div>\n                  </div>\n                  <div className=\"ml-4 w-0 flex-1\">\n                    <dl>\n                      <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                        Urgent Actions\n                      </dt>\n                      <dd className=\"text-lg font-medium text-gray-900\">\n                        {adherenceInsights.urgentActions}\n                      </dd>\n                    </dl>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Smart Notifications */}\n          {smartNotifications.length > 0 && (\n            <div className=\"card\">\n              <div className=\"card-header\">\n                <div className=\"flex items-center justify-between\">\n                  <h3 className=\"text-lg font-medium text-gray-900 flex items-center space-x-2\">\n                    <Brain className=\"h-5 w-5 text-purple-600\" />\n                    <span>Smart Adherence Insights</span>\n                  </h3>\n                  <button\n                    onClick={() => setShowInsights(false)}\n                    className=\"text-sm text-gray-500 hover:text-gray-700\"\n                  >\n                    Hide\n                  </button>\n                </div>\n              </div>\n              <div className=\"card-content\">\n                <div className=\"space-y-3\">\n                  {smartNotifications.slice(0, 3).map((notification) => (\n                    <div\n                      key={notification.id}\n                      className={`p-4 rounded-lg border-l-4 ${\n                        notification.priority === 'high' ? 'border-red-500 bg-red-50' :\n                        notification.priority === 'medium' ? 'border-orange-500 bg-orange-50' :\n                        'border-blue-500 bg-blue-50'\n                      }`}\n                    >\n                      <div className=\"flex items-start space-x-3\">\n                        {notification.type === 'predictive-reminder' && <AlertTriangle className=\"h-5 w-5 text-red-500 mt-0.5\" />}\n                        {notification.type === 'adherence-support' && <TrendingUp className=\"h-5 w-5 text-orange-500 mt-0.5\" />}\n                        {notification.type === 'pattern-alert' && <Brain className=\"h-5 w-5 text-blue-500 mt-0.5\" />}\n                        {notification.type === 'encouragement' && <CheckCircle className=\"h-5 w-5 text-green-500 mt-0.5\" />}\n                        \n                        <div className=\"flex-1\">\n                          <h4 className={`text-sm font-medium ${\n                            notification.priority === 'high' ? 'text-red-800' :\n                            notification.priority === 'medium' ? 'text-orange-800' :\n                            'text-blue-800'\n                          }`}>\n                            {notification.title}\n                          </h4>\n                          <p className={`mt-1 text-sm ${\n                            notification.priority === 'high' ? 'text-red-700' :\n                            notification.priority === 'medium' ? 'text-orange-700' :\n                            'text-blue-700'\n                          }`}>\n                            {notification.message}\n                          </p>\n                          {notification.context && (\n                            <div className=\"mt-2 text-xs text-gray-600\">\n                              {notification.context.riskScore && `Risk Score: ${notification.context.riskScore}%`}\n                              {notification.context.missedCount && `Consecutive Missed: ${notification.context.missedCount}`}\n                              {notification.context.pattern && `Pattern: ${notification.context.pattern}`}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                  \n                  {smartNotifications.length > 3 && (\n                    <div className=\"text-center\">\n                      <p className=\"text-sm text-gray-500\">\n                        {smartNotifications.length - 3} more insights available\n                      </p>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Personalized Recommendations */}\n          {adherenceInsights.topRecommendations.length > 0 && (\n            <div className=\"card\">\n              <div className=\"card-header\">\n                <h3 className=\"text-lg font-medium text-gray-900 flex items-center space-x-2\">\n                  <Lightbulb className=\"h-5 w-5 text-yellow-600\" />\n                  <span>Personalized Recommendations</span>\n                </h3>\n              </div>\n              <div className=\"card-content\">\n                <div className=\"space-y-3\">\n                  {adherenceInsights.topRecommendations.map((recommendation, index) => (\n                    <div\n                      key={index}\n                      className={`p-3 rounded border-l-4 ${\n                        recommendation.priority === 'urgent' ? 'border-red-500 bg-red-50' :\n                        recommendation.priority === 'high' ? 'border-orange-500 bg-orange-50' :\n                        'border-blue-500 bg-blue-50'\n                      }`}\n                    >\n                      <div className=\"flex items-start space-x-3\">\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center space-x-2\">\n                            <span className={`px-2 py-1 rounded text-xs font-medium ${\n                              recommendation.priority === 'urgent' ? 'bg-red-100 text-red-800' :\n                              recommendation.priority === 'high' ? 'bg-orange-100 text-orange-800' :\n                              'bg-blue-100 text-blue-800'\n                            }`}>\n                              {recommendation.type.replace('-', ' ')}\n                            </span>\n                            <span className={`px-2 py-1 rounded text-xs font-medium ${\n                              recommendation.priority === 'urgent' ? 'bg-red-200 text-red-900' :\n                              recommendation.priority === 'high' ? 'bg-orange-200 text-orange-900' :\n                              'bg-blue-200 text-blue-900'\n                            }`}>\n                              {recommendation.priority}\n                            </span>\n                          </div>\n                          <p className={`mt-2 text-sm font-medium ${\n                            recommendation.priority === 'urgent' ? 'text-red-800' :\n                            recommendation.priority === 'high' ? 'text-orange-800' :\n                            'text-blue-800'\n                          }`}>\n                            {recommendation.message}\n                          </p>\n                          {recommendation.details && (\n                            <p className={`mt-1 text-xs ${\n                              recommendation.priority === 'urgent' ? 'text-red-600' :\n                              recommendation.priority === 'high' ? 'text-orange-600' :\n                              'text-blue-600'\n                            }`}>\n                              {recommendation.details}\n                            </p>\n                          )}\n                        </div>\n                        {recommendation.actionable && (\n                          <CheckCircle className=\"h-4 w-4 text-green-500 mt-1\" />\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Medication-Specific Patterns */}\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <h3 className=\"text-lg font-medium text-gray-900\">Medication Adherence Patterns</h3>\n            </div>\n            <div className=\"card-content\">\n              <div className=\"space-y-4\">\n                {adherencePatterns.map((pattern) => (\n                  <div key={pattern.medicationId} className=\"border border-gray-200 rounded-lg p-4\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <h4 className=\"font-medium text-gray-900\">{pattern.medicationName}</h4>\n                      <div className=\"flex items-center space-x-2\">\n                        <span className={`px-2 py-1 rounded text-xs font-medium ${\n                          pattern.adherencePercentage >= 95 ? 'bg-green-100 text-green-800' :\n                          pattern.adherencePercentage >= 85 ? 'bg-yellow-100 text-yellow-800' :\n                          pattern.adherencePercentage >= 70 ? 'bg-orange-100 text-orange-800' :\n                          'bg-red-100 text-red-800'\n                        }`}>\n                          {pattern.adherencePercentage}% adherence\n                        </span>\n                        <span className={`px-2 py-1 rounded text-xs font-medium ${\n                          pattern.riskLevel === 'critical' ? 'bg-red-100 text-red-800' :\n                          pattern.riskLevel === 'high' ? 'bg-orange-100 text-orange-800' :\n                          pattern.riskLevel === 'moderate' ? 'bg-yellow-100 text-yellow-800' :\n                          'bg-green-100 text-green-800'\n                        }`}>\n                          {pattern.riskLevel} risk\n                        </span>\n                      </div>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n                      <div>\n                        <span className=\"font-medium text-gray-700\">Miss Pattern:</span>\n                        <span className=\"ml-2 text-gray-600\">{pattern.missedDosePattern}</span>\n                      </div>\n                      <div>\n                        <span className=\"font-medium text-gray-700\">Miss Risk:</span>\n                        <span className={`ml-2 font-medium ${\n                          pattern.predictedMissRisk >= 70 ? 'text-red-600' :\n                          pattern.predictedMissRisk >= 40 ? 'text-orange-600' :\n                          'text-green-600'\n                        }`}>\n                          {pattern.predictedMissRisk}%\n                        </span>\n                      </div>\n                      {pattern.consecutiveMissedDoses > 0 && (\n                        <div>\n                          <span className=\"font-medium text-gray-700\">Consecutive Missed:</span>\n                          <span className=\"ml-2 text-red-600 font-medium\">{pattern.consecutiveMissedDoses}</span>\n                        </div>\n                      )}\n                      {pattern.frequentMissTimeSlots.length > 0 && (\n                        <div>\n                          <span className=\"font-medium text-gray-700\">Problem Times:</span>\n                          <span className=\"ml-2 text-gray-600\">{pattern.frequentMissTimeSlots.join(', ')}</span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Show insights toggle when hidden */}\n      {adherencePatterns.length > 0 && !showInsights && (\n        <div className=\"card\">\n          <div className=\"card-content p-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-2\">\n                <Brain className=\"h-5 w-5 text-purple-600\" />\n                <span className=\"text-sm font-medium text-gray-900\">Smart Adherence Insights Available</span>\n              </div>\n              <button\n                onClick={() => setShowInsights(true)}\n                className=\"px-3 py-1 text-sm bg-purple-100 text-purple-700 rounded hover:bg-purple-200\"\n              >\n                Show Insights\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Empty State */}\n      {activeMedications.length === 0 && (\n        <div className=\"text-center py-12\">\n          <Bell className=\"mx-auto h-12 w-12 text-gray-400\" />\n          <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No active medications</h3>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Add some medications first to create reminders.\n          </p>\n        </div>\n      )}\n\n      {reminders.length === 0 && activeMedications.length > 0 && (\n        <div className=\"text-center py-12\">\n          <Bell className=\"mx-auto h-12 w-12 text-gray-400\" />\n          <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No reminders yet</h3>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Create your first reminder to stay on track with your medications.\n          </p>\n          <div className=\"mt-6\">\n            <button\n              onClick={handleAddReminder}\n              className=\"btn-primary inline-flex items-center space-x-2\"\n            >\n              <Plus className=\"h-4 w-4\" />\n              <span>Add First Reminder</span>\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Active Reminders */}\n      {activeReminders.length > 0 && (\n        <div>\n          <h2 className=\"text-lg font-medium text-gray-900 mb-4\">\n            Active Reminders ({activeReminders.length})\n          </h2>\n          <div className=\"space-y-4\">\n            {activeReminders.map((reminder) => (\n              <ReminderCard key={reminder.id} reminder={reminder} />\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Inactive Reminders */}\n      {inactiveReminders.length > 0 && (\n        <div>\n          <h2 className=\"text-lg font-medium text-gray-900 mb-4\">\n            Inactive Reminders ({inactiveReminders.length})\n          </h2>\n          <div className=\"space-y-4\">\n            {inactiveReminders.map((reminder) => (\n              <ReminderCard key={reminder.id} reminder={reminder} />\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Reminder Modal */}\n      <ReminderModal\n        isOpen={isModalOpen}\n        onClose={() => {\n          setIsModalOpen(false);\n          setEditingReminder(null);\n        }}\n        reminder={editingReminder}\n      />\n\n      {/* Confirm Delete Dialog */}\n      <ConfirmDialog\n        isOpen={!!confirmDelete}\n        onClose={() => setConfirmDelete(null)}\n        onConfirm={() => confirmDelete && handleDeleteReminder(confirmDelete)}\n        title=\"Delete Reminder\"\n        message=\"Are you sure you want to delete this reminder? This action cannot be undone.\"\n        confirmText=\"Delete\"\n      />\n    </div>\n  );\n}\n","import React from 'react';\nimport { \n  FileText, \n  Download, \n  Calendar, \n  BarChart3,\n  AlertTriangle,\n  CheckCircle,\n  XCircle,\n  Pill\n} from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { formatDate, generateCSV, downloadFile } from '@/utils/helpers';\nimport { AdherenceReport, SideEffectReport } from '@/types';\nimport toast from 'react-hot-toast';\n\nexport function Reports() {\n  const {\n    medications,\n    logs,\n    getMissedDoses\n  } = useMedicationStore();\n\n  const [selectedReport, setSelectedReport] = React.useState<'adherence' | 'side-effects' | 'summary'>('adherence');\n  const [dateRange, setDateRange] = React.useState({\n    start: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000), // 30 days ago\n    end: new Date()\n  });\n\n  // Generate adherence report\n  const generateAdherenceReport = (): AdherenceReport[] => {\n    return medications.map(medication => {\n      const medicationLogs = logs.filter(log => \n        log.medicationId === medication.id &&\n        new Date(log.timestamp) >= dateRange.start &&\n        new Date(log.timestamp) <= dateRange.end\n      );\n\n      const totalDoses = medicationLogs.length;\n      const takenDoses = medicationLogs.filter(log => log.adherence === 'taken').length;\n      const missedDoses = medicationLogs.filter(log => log.adherence === 'missed').length;\n\n      return {\n        medicationId: medication.id,\n        medicationName: medication.name,\n        totalDoses,\n        takenDoses,\n        missedDoses,\n        adherencePercentage: totalDoses > 0 ? Math.round((takenDoses / totalDoses) * 100) : 0,\n        period: {\n          start: dateRange.start,\n          end: dateRange.end\n        }\n      };\n    }).filter(report => report.totalDoses > 0);\n  };\n\n  // Generate side effects report\n  const generateSideEffectsReport = (): SideEffectReport[] => {\n    const sideEffectsMap = new Map<string, { medication: string; effect: string; dates: Date[] }>();\n\n    logs.forEach(log => {\n      const medication = medications.find(med => med.id === log.medicationId);\n      if (!medication || !log.sideEffectsReported) return;\n\n      log.sideEffectsReported.forEach(effect => {\n        const key = `${medication.name}-${effect}`;\n        if (!sideEffectsMap.has(key)) {\n          sideEffectsMap.set(key, {\n            medication: medication.name,\n            effect,\n            dates: []\n          });\n        }\n        sideEffectsMap.get(key)!.dates.push(new Date(log.timestamp));\n      });\n    });\n\n    return Array.from(sideEffectsMap.entries()).map(([, data]) => ({\n      medicationId: medications.find(med => med.name === data.medication)?.id || '',\n      medicationName: data.medication,\n      sideEffect: data.effect,\n      frequency: data.dates.length,\n      severity: 'mild' as const, // Would need more data to determine actual severity\n      reportedDates: data.dates\n    }));\n  };\n\n  const adherenceReports = generateAdherenceReport();\n  const sideEffectsReports = generateSideEffectsReport();\n\n  // Summary statistics\n  const totalMedications = medications.filter(med => med.isActive).length;\n  const overallAdherence = adherenceReports.length > 0 \n    ? Math.round(adherenceReports.reduce((sum, report) => sum + report.adherencePercentage, 0) / adherenceReports.length)\n    : 0;\n  const missedDosesCount = getMissedDoses(30).length;\n  const totalSideEffects = sideEffectsReports.reduce((sum, report) => sum + report.frequency, 0);\n\n  const handleExportAdherenceCSV = () => {\n    if (adherenceReports.length === 0) {\n      toast.error('No adherence data available for the selected period');\n      return;\n    }\n\n    const csvData = generateCSV(adherenceReports.map(report => ({\n      medication: report.medicationName,\n      total_doses: report.totalDoses,\n      taken_doses: report.takenDoses,\n      missed_doses: report.missedDoses,\n      adherence_percentage: report.adherencePercentage,\n      period_start: formatDate(report.period.start),\n      period_end: formatDate(report.period.end)\n    })));\n\n    downloadFile(\n      csvData,\n      `adherence-report-${formatDate(new Date(), 'yyyy-MM-dd')}.csv`,\n      'text/csv'\n    );\n    toast.success('Adherence report exported successfully');\n  };\n\n  const handleExportSideEffectsCSV = () => {\n    if (sideEffectsReports.length === 0) {\n      toast.error('No side effects data available');\n      return;\n    }\n\n    const csvData = generateCSV(sideEffectsReports.map(report => ({\n      medication: report.medicationName,\n      side_effect: report.sideEffect,\n      frequency: report.frequency,\n      severity: report.severity,\n      first_reported: formatDate(report.reportedDates[0]),\n      last_reported: formatDate(report.reportedDates[report.reportedDates.length - 1])\n    })));\n\n    downloadFile(\n      csvData,\n      `side-effects-report-${formatDate(new Date(), 'yyyy-MM-dd')}.csv`,\n      'text/csv'\n    );\n    toast.success('Side effects report exported successfully');\n  };\n\n  const handleExportSummaryPDF = () => {\n    // For now, export as JSON - PDF generation would require additional library\n    const summaryData = {\n      generatedDate: new Date(),\n      dateRange,\n      summary: {\n        totalMedications,\n        overallAdherence,\n        missedDoses: missedDosesCount,\n        totalSideEffects\n      },\n      adherenceData: adherenceReports,\n      sideEffectsData: sideEffectsReports\n    };\n\n    downloadFile(\n      JSON.stringify(summaryData, null, 2),\n      `summary-report-${formatDate(new Date(), 'yyyy-MM-dd')}.json`,\n      'application/json'\n    );\n    toast.success('Summary report exported as JSON');\n  };\n\n  const ReportTab = ({ name, icon: Icon, isActive, onClick }: {\n    name: string;\n    icon: any;\n    isActive: boolean;\n    onClick: () => void;\n  }) => (\n    <button\n      onClick={onClick}\n      className={`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${\n        isActive\n          ? 'bg-blue-100 text-blue-700 border border-blue-200'\n          : 'text-gray-600 hover:bg-gray-100'\n      }`}\n    >\n      <Icon className=\"h-4 w-4\" />\n      <span>{name}</span>\n    </button>\n  );\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Page Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">Reports</h1>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            Generate and export detailed medication reports\n          </p>\n        </div>\n        <div className=\"mt-4 sm:mt-0 flex items-center space-x-3\">\n          <input\n            type=\"date\"\n            value={dateRange.start.toISOString().split('T')[0]}\n            onChange={(e) => setDateRange(prev => ({ ...prev, start: new Date(e.target.value) }))}\n            className=\"px-3 py-2 border border-gray-300 rounded-md text-sm\"\n          />\n          <span className=\"text-gray-500\">to</span>\n          <input\n            type=\"date\"\n            value={dateRange.end.toISOString().split('T')[0]}\n            onChange={(e) => setDateRange(prev => ({ ...prev, end: new Date(e.target.value) }))}\n            className=\"px-3 py-2 border border-gray-300 rounded-md text-sm\"\n          />\n        </div>\n      </div>\n\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\">\n        <div className=\"card\">\n          <div className=\"card-content p-5\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <div className=\"bg-blue-500 rounded-md p-3\">\n                  <Pill className=\"h-6 w-6 text-white\" />\n                </div>\n              </div>\n              <div className=\"ml-5 w-0 flex-1\">\n                <dl>\n                  <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                    Active Medications\n                  </dt>\n                  <dd className=\"text-lg font-medium text-gray-900\">\n                    {totalMedications}\n                  </dd>\n                </dl>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"card\">\n          <div className=\"card-content p-5\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <div className=\"bg-green-500 rounded-md p-3\">\n                  <CheckCircle className=\"h-6 w-6 text-white\" />\n                </div>\n              </div>\n              <div className=\"ml-5 w-0 flex-1\">\n                <dl>\n                  <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                    Overall Adherence\n                  </dt>\n                  <dd className=\"text-lg font-medium text-gray-900\">\n                    {overallAdherence}%\n                  </dd>\n                </dl>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"card\">\n          <div className=\"card-content p-5\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <div className=\"bg-red-500 rounded-md p-3\">\n                  <XCircle className=\"h-6 w-6 text-white\" />\n                </div>\n              </div>\n              <div className=\"ml-5 w-0 flex-1\">\n                <dl>\n                  <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                    Missed Doses (30d)\n                  </dt>\n                  <dd className=\"text-lg font-medium text-gray-900\">\n                    {missedDosesCount}\n                  </dd>\n                </dl>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"card\">\n          <div className=\"card-content p-5\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <div className=\"bg-orange-500 rounded-md p-3\">\n                  <AlertTriangle className=\"h-6 w-6 text-white\" />\n                </div>\n              </div>\n              <div className=\"ml-5 w-0 flex-1\">\n                <dl>\n                  <dt className=\"text-sm font-medium text-gray-500 truncate\">\n                    Side Effects\n                  </dt>\n                  <dd className=\"text-lg font-medium text-gray-900\">\n                    {totalSideEffects}\n                  </dd>\n                </dl>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Report Tabs */}\n      <div className=\"flex space-x-2\">\n        <ReportTab\n          name=\"Adherence\"\n          icon={BarChart3}\n          isActive={selectedReport === 'adherence'}\n          onClick={() => setSelectedReport('adherence')}\n        />\n        <ReportTab\n          name=\"Side Effects\"\n          icon={AlertTriangle}\n          isActive={selectedReport === 'side-effects'}\n          onClick={() => setSelectedReport('side-effects')}\n        />\n        <ReportTab\n          name=\"Summary\"\n          icon={FileText}\n          isActive={selectedReport === 'summary'}\n          onClick={() => setSelectedReport('summary')}\n        />\n      </div>\n\n      {/* Report Content */}\n      <div className=\"card\">\n        <div className=\"card-content\">\n          {selectedReport === 'adherence' && (\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h3 className=\"text-lg font-medium text-gray-900\">Adherence Report</h3>\n                <button\n                  onClick={handleExportAdherenceCSV}\n                  className=\"btn-secondary inline-flex items-center space-x-2\"\n                >\n                  <Download className=\"h-4 w-4\" />\n                  <span>Export CSV</span>\n                </button>\n              </div>\n\n              {adherenceReports.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <BarChart3 className=\"mx-auto h-12 w-12 text-gray-400\" />\n                  <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No data available</h3>\n                  <p className=\"mt-1 text-sm text-gray-500\">\n                    No medication logs found for the selected date range.\n                  </p>\n                </div>\n              ) : (\n                <div className=\"overflow-hidden\">\n                  <table className=\"min-w-full divide-y divide-gray-200\">\n                    <thead className=\"bg-gray-50\">\n                      <tr>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Medication\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Total Doses\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Taken\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Missed\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Adherence\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\n                      {adherenceReports.map((report) => (\n                        <tr key={report.medicationId}>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                            {report.medicationName}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                            {report.totalDoses}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-green-600\">\n                            {report.takenDoses}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-red-600\">\n                            {report.missedDoses}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm\">\n                            <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\n                              report.adherencePercentage >= 90 \n                                ? 'bg-green-100 text-green-800'\n                                : report.adherencePercentage >= 75\n                                ? 'bg-yellow-100 text-yellow-800'\n                                : 'bg-red-100 text-red-800'\n                            }`}>\n                              {report.adherencePercentage}%\n                            </span>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n            </div>\n          )}\n\n          {selectedReport === 'side-effects' && (\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h3 className=\"text-lg font-medium text-gray-900\">Side Effects Report</h3>\n                <button\n                  onClick={handleExportSideEffectsCSV}\n                  className=\"btn-secondary inline-flex items-center space-x-2\"\n                >\n                  <Download className=\"h-4 w-4\" />\n                  <span>Export CSV</span>\n                </button>\n              </div>\n\n              {sideEffectsReports.length === 0 ? (\n                <div className=\"text-center py-8\">\n                  <AlertTriangle className=\"mx-auto h-12 w-12 text-gray-400\" />\n                  <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No side effects reported</h3>\n                  <p className=\"mt-1 text-sm text-gray-500\">\n                    No side effects have been logged for your medications.\n                  </p>\n                </div>\n              ) : (\n                <div className=\"overflow-hidden\">\n                  <table className=\"min-w-full divide-y divide-gray-200\">\n                    <thead className=\"bg-gray-50\">\n                      <tr>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Medication\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Side Effect\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Frequency\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          First Reported\n                        </th>\n                        <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                          Last Reported\n                        </th>\n                      </tr>\n                    </thead>\n                    <tbody className=\"bg-white divide-y divide-gray-200\">\n                      {sideEffectsReports.map((report, index) => (\n                        <tr key={index}>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\n                            {report.medicationName}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                            {report.sideEffect}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                            {report.frequency}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                            {formatDate(report.reportedDates[0])}\n                          </td>\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                            {formatDate(report.reportedDates[report.reportedDates.length - 1])}\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              )}\n            </div>\n          )}\n\n          {selectedReport === 'summary' && (\n            <div className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h3 className=\"text-lg font-medium text-gray-900\">Summary Report</h3>\n                <button\n                  onClick={handleExportSummaryPDF}\n                  className=\"btn-secondary inline-flex items-center space-x-2\"\n                >\n                  <Download className=\"h-4 w-4\" />\n                  <span>Export Summary</span>\n                </button>\n              </div>\n\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                <div>\n                  <h4 className=\"text-sm font-medium text-gray-900 mb-4\">Report Period</h4>\n                  <div className=\"bg-gray-50 rounded-lg p-4\">\n                    <div className=\"flex items-center space-x-2 text-sm text-gray-600\">\n                      <Calendar className=\"h-4 w-4\" />\n                      <span>{formatDate(dateRange.start)} - {formatDate(dateRange.end)}</span>\n                    </div>\n                  </div>\n                </div>\n\n                <div>\n                  <h4 className=\"text-sm font-medium text-gray-900 mb-4\">Key Insights</h4>\n                  <div className=\"space-y-2\">\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-600\">Best Adherence:</span>\n                      <span className=\"font-medium\">\n                        {adherenceReports.length > 0 \n                          ? adherenceReports.reduce((best, current) => \n                              current.adherencePercentage > best.adherencePercentage ? current : best\n                            ).medicationName\n                          : 'N/A'\n                        }\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between text-sm\">\n                      <span className=\"text-gray-600\">Most Common Side Effect:</span>\n                      <span className=\"font-medium\">\n                        {sideEffectsReports.length > 0 \n                          ? sideEffectsReports.reduce((common, current) =>\n                              current.frequency > common.frequency ? current : common\n                            ).sideEffect\n                          : 'None reported'\n                        }\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { \n  User, \n  Heart, \n  Shield, \n  Phone, \n  Mail, \n  AlertTriangle,\n  Plus,\n  X,\n  Save,\n  Edit2\n} from 'lucide-react';\nimport { useMedicationStore } from '@/store';\nimport { UserProfile } from '@/types';\nimport { formatDate, isValidEmail, isValidPhone } from '@/utils/helpers';\nimport toast from 'react-hot-toast';\n\nexport function HealthProfile() {\n  const { userProfile, updateProfile, createProfile, medications } = useMedicationStore();\n  \n  const [isEditing, setIsEditing] = React.useState(!userProfile);\n  const [newAllergy, setNewAllergy] = React.useState('');\n  const [newCondition, setNewCondition] = React.useState('');\n\n  const { \n    register, \n    handleSubmit, \n    formState: { errors },\n    setValue,\n    watch,\n    reset\n  } = useForm<UserProfile>({\n    defaultValues: userProfile || {\n      name: '',\n      dateOfBirth: undefined,\n      allergies: [],\n      conditions: [],\n      emergencyContact: {\n        name: '',\n        relationship: '',\n        phone: '',\n        email: ''\n      },\n      preferences: {\n        theme: 'system',\n        notifications: {\n          push: true,\n          sound: true,\n          vibration: true,\n          reminderAdvance: 15,\n        },\n        privacy: {\n          shareData: false,\n          analytics: true,\n        },\n        display: {\n          timeFormat: '12h',\n          dateFormat: 'MM/DD/YYYY',\n          defaultView: 'dashboard',\n        },\n      }\n    }\n  });\n\n  const allergies = watch('allergies') || [];\n  const conditions = watch('conditions') || [];\n  // const emergencyContact = watch('emergencyContact');\n\n  // Get medication-related insights\n  const highRiskMedications = medications.filter(med => \n    med.isActive && (med.riskLevel === 'high' || med.riskLevel === 'moderate')\n  );\n\n  const medicationCategories = medications.reduce((acc, med) => {\n    acc[med.category] = (acc[med.category] || 0) + 1;\n    return acc;\n  }, {} as Record<string, number>);\n\n  React.useEffect(() => {\n    if (userProfile) {\n      reset(userProfile);\n    }\n  }, [userProfile, reset]);\n\n  const onSubmit = (data: UserProfile) => {\n    if (userProfile) {\n      updateProfile(data);\n      toast.success('Profile updated successfully');\n    } else {\n      createProfile(data);\n      toast.success('Profile created successfully');\n    }\n    setIsEditing(false);\n  };\n\n  const handleAddAllergy = () => {\n    if (newAllergy.trim()) {\n      const currentAllergies = allergies || [];\n      setValue('allergies', [...currentAllergies, newAllergy.trim()]);\n      setNewAllergy('');\n    }\n  };\n\n  const handleRemoveAllergy = (index: number) => {\n    const currentAllergies = allergies || [];\n    setValue('allergies', currentAllergies.filter((_, i) => i !== index));\n  };\n\n  const handleAddCondition = () => {\n    if (newCondition.trim()) {\n      const currentConditions = conditions || [];\n      setValue('conditions', [...currentConditions, newCondition.trim()]);\n      setNewCondition('');\n    }\n  };\n\n  const handleRemoveCondition = (index: number) => {\n    const currentConditions = conditions || [];\n    setValue('conditions', currentConditions.filter((_, i) => i !== index));\n  };\n\n  const handleCancel = () => {\n    if (userProfile) {\n      reset(userProfile);\n      setIsEditing(false);\n    }\n  };\n\n  if (!isEditing && userProfile) {\n    return (\n      <div className=\"space-y-6\">\n        {/* Page Header */}\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-900\">Health Profile</h1>\n            <p className=\"mt-1 text-sm text-gray-500\">\n              Your personal health information and emergency contacts\n            </p>\n          </div>\n          <div className=\"mt-4 sm:mt-0\">\n            <button\n              onClick={() => setIsEditing(true)}\n              className=\"btn-primary inline-flex items-center space-x-2\"\n            >\n              <Edit2 className=\"h-4 w-4\" />\n              <span>Edit Profile</span>\n            </button>\n          </div>\n        </div>\n\n        {/* Profile Overview */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n          {/* Personal Information */}\n          <div className=\"lg:col-span-2\">\n            <div className=\"card\">\n              <div className=\"card-header\">\n                <div className=\"flex items-center space-x-3\">\n                  <User className=\"h-5 w-5 text-gray-400\" />\n                  <h3 className=\"text-lg font-medium text-gray-900\">Personal Information</h3>\n                </div>\n              </div>\n              <div className=\"card-content p-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">Full Name</label>\n                    <p className=\"mt-1 text-sm text-gray-900\">{userProfile.name || 'Not provided'}</p>\n                  </div>\n                  \n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700\">Date of Birth</label>\n                    <p className=\"mt-1 text-sm text-gray-900\">\n                      {formatDate(userProfile.dateOfBirth) !== 'N/A' \n                        ? formatDate(userProfile.dateOfBirth)\n                        : 'Not provided'\n                      }\n                    </p>\n                  </div>\n                </div>\n\n                {/* Allergies */}\n                <div className=\"mt-6\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Allergies</label>\n                  {userProfile.allergies && userProfile.allergies.length > 0 ? (\n                    <div className=\"flex flex-wrap gap-2\">\n                      {userProfile.allergies.map((allergy, index) => (\n                        <span\n                          key={index}\n                          className=\"inline-flex items-center px-3 py-1 rounded-full text-sm bg-red-100 text-red-800\"\n                        >\n                          <AlertTriangle className=\"h-3 w-3 mr-1\" />\n                          {allergy}\n                        </span>\n                      ))}\n                    </div>\n                  ) : (\n                    <p className=\"text-sm text-gray-500\">No allergies reported</p>\n                  )}\n                </div>\n\n                {/* Medical Conditions */}\n                <div className=\"mt-6\">\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">Medical Conditions</label>\n                  {userProfile.conditions && userProfile.conditions.length > 0 ? (\n                    <div className=\"flex flex-wrap gap-2\">\n                      {userProfile.conditions.map((condition, index) => (\n                        <span\n                          key={index}\n                          className=\"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800\"\n                        >\n                          <Heart className=\"h-3 w-3 mr-1\" />\n                          {condition}\n                        </span>\n                      ))}\n                    </div>\n                  ) : (\n                    <p className=\"text-sm text-gray-500\">No medical conditions reported</p>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Emergency Contact */}\n            <div className=\"card mt-6\">\n              <div className=\"card-header\">\n                <div className=\"flex items-center space-x-3\">\n                  <Shield className=\"h-5 w-5 text-gray-400\" />\n                  <h3 className=\"text-lg font-medium text-gray-900\">Emergency Contact</h3>\n                </div>\n              </div>\n              <div className=\"card-content p-6\">\n                {userProfile.emergencyContact && userProfile.emergencyContact.name ? (\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700\">Name</label>\n                      <p className=\"mt-1 text-sm text-gray-900\">{userProfile.emergencyContact.name}</p>\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700\">Relationship</label>\n                      <p className=\"mt-1 text-sm text-gray-900\">{userProfile.emergencyContact.relationship}</p>\n                    </div>\n                    \n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700\">Phone</label>\n                      <div className=\"mt-1 flex items-center space-x-2\">\n                        <Phone className=\"h-4 w-4 text-gray-400\" />\n                        <p className=\"text-sm text-gray-900\">{userProfile.emergencyContact.phone}</p>\n                      </div>\n                    </div>\n                    \n                    {userProfile.emergencyContact.email && (\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700\">Email</label>\n                        <div className=\"mt-1 flex items-center space-x-2\">\n                          <Mail className=\"h-4 w-4 text-gray-400\" />\n                          <p className=\"text-sm text-gray-900\">{userProfile.emergencyContact.email}</p>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                ) : (\n                  <p className=\"text-sm text-gray-500\">No emergency contact information provided</p>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Health Summary Sidebar */}\n          <div className=\"space-y-6\">\n            {/* Medication Summary */}\n            <div className=\"card\">\n              <div className=\"card-header\">\n                <h3 className=\"text-lg font-medium text-gray-900\">Medication Summary</h3>\n              </div>\n              <div className=\"card-content p-6\">\n                <div className=\"space-y-4\">\n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-sm text-gray-600\">Total Active</span>\n                    <span className=\"text-sm font-medium\">{medications.filter(med => med.isActive).length}</span>\n                  </div>\n                  \n                  <div className=\"flex justify-between items-center\">\n                    <span className=\"text-sm text-gray-600\">High Risk</span>\n                    <span className=\"text-sm font-medium text-red-600\">{highRiskMedications.length}</span>\n                  </div>\n\n                  {Object.entries(medicationCategories).length > 0 && (\n                    <div className=\"pt-4 border-t\">\n                      <h4 className=\"text-sm font-medium text-gray-700 mb-2\">By Category</h4>\n                      <div className=\"space-y-2\">\n                        {Object.entries(medicationCategories).map(([category, count]) => (\n                          <div key={category} className=\"flex justify-between items-center\">\n                            <span className=\"text-xs text-gray-600 capitalize\">{category.replace('-', ' ')}</span>\n                            <span className=\"text-xs font-medium\">{count}</span>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Health Alerts */}\n            {(userProfile.allergies?.length || highRiskMedications.length) && (\n              <div className=\"card\">\n                <div className=\"card-header\">\n                  <h3 className=\"text-lg font-medium text-gray-900\">Health Alerts</h3>\n                </div>\n                <div className=\"card-content p-6\">\n                  <div className=\"space-y-3\">\n                    {userProfile.allergies && userProfile.allergies.length > 0 && (\n                      <div className=\"flex items-start space-x-3 p-3 bg-red-50 rounded-lg\">\n                        <AlertTriangle className=\"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5\" />\n                        <div>\n                          <p className=\"text-sm font-medium text-red-800\">Known Allergies</p>\n                          <p className=\"text-xs text-red-600\">{userProfile.allergies.length} allergy(ies) on file</p>\n                        </div>\n                      </div>\n                    )}\n                    \n                    {highRiskMedications.length > 0 && (\n                      <div className=\"flex items-start space-x-3 p-3 bg-orange-50 rounded-lg\">\n                        <Shield className=\"h-5 w-5 text-orange-500 flex-shrink-0 mt-0.5\" />\n                        <div>\n                          <p className=\"text-sm font-medium text-orange-800\">High-Risk Medications</p>\n                          <p className=\"text-xs text-orange-600\">{highRiskMedications.length} medication(s) require monitoring</p>\n                        </div>\n                      </div>\n                    )}\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Page Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-bold text-gray-900\">\n            {userProfile ? 'Edit' : 'Create'} Health Profile\n          </h1>\n          <p className=\"mt-1 text-sm text-gray-500\">\n            {userProfile \n              ? 'Update your personal health information' \n              : 'Set up your personal health information and emergency contacts'\n            }\n          </p>\n        </div>\n      </div>\n\n      {/* Profile Form */}\n      <form onSubmit={handleSubmit(onSubmit)} className=\"space-y-6\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Personal Information */}\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <div className=\"flex items-center space-x-3\">\n                <User className=\"h-5 w-5 text-gray-400\" />\n                <h3 className=\"text-lg font-medium text-gray-900\">Personal Information</h3>\n              </div>\n            </div>\n            <div className=\"card-content p-6 space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700\">\n                  Full Name *\n                </label>\n                <input\n                  type=\"text\"\n                  {...register('name', { required: 'Name is required' })}\n                  className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n                  placeholder=\"Your full name\"\n                />\n                {errors.name && (\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.name.message}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700\">\n                  Date of Birth\n                </label>\n                <input\n                  type=\"date\"\n                  {...register('dateOfBirth')}\n                  className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n                />\n              </div>\n\n              {/* Allergies */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Allergies\n                </label>\n                <div className=\"flex space-x-2 mb-2\">\n                  <input\n                    type=\"text\"\n                    value={newAllergy}\n                    onChange={(e) => setNewAllergy(e.target.value)}\n                    placeholder=\"Add an allergy\"\n                    className=\"flex-1 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n                    onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), handleAddAllergy())}\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={handleAddAllergy}\n                    className=\"btn-secondary inline-flex items-center\"\n                  >\n                    <Plus className=\"h-4 w-4\" />\n                  </button>\n                </div>\n                {allergies && allergies.length > 0 && (\n                  <div className=\"flex flex-wrap gap-2\">\n                    {allergies.map((allergy, index) => (\n                      <span\n                        key={index}\n                        className=\"inline-flex items-center px-3 py-1 rounded-full text-sm bg-red-100 text-red-800\"\n                      >\n                        <AlertTriangle className=\"h-3 w-3 mr-1\" />\n                        {allergy}\n                        <button\n                          type=\"button\"\n                          onClick={() => handleRemoveAllergy(index)}\n                          className=\"ml-1 text-red-600 hover:text-red-800\"\n                        >\n                          <X className=\"h-3 w-3\" />\n                        </button>\n                      </span>\n                    ))}\n                  </div>\n                )}\n              </div>\n\n              {/* Medical Conditions */}\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  Medical Conditions\n                </label>\n                <div className=\"flex space-x-2 mb-2\">\n                  <input\n                    type=\"text\"\n                    value={newCondition}\n                    onChange={(e) => setNewCondition(e.target.value)}\n                    placeholder=\"Add a medical condition\"\n                    className=\"flex-1 rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n                    onKeyPress={(e) => e.key === 'Enter' && (e.preventDefault(), handleAddCondition())}\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={handleAddCondition}\n                    className=\"btn-secondary inline-flex items-center\"\n                  >\n                    <Plus className=\"h-4 w-4\" />\n                  </button>\n                </div>\n                {conditions && conditions.length > 0 && (\n                  <div className=\"flex flex-wrap gap-2\">\n                    {conditions.map((condition, index) => (\n                      <span\n                        key={index}\n                        className=\"inline-flex items-center px-3 py-1 rounded-full text-sm bg-blue-100 text-blue-800\"\n                      >\n                        <Heart className=\"h-3 w-3 mr-1\" />\n                        {condition}\n                        <button\n                          type=\"button\"\n                          onClick={() => handleRemoveCondition(index)}\n                          className=\"ml-1 text-blue-600 hover:text-blue-800\"\n                        >\n                          <X className=\"h-3 w-3\" />\n                        </button>\n                      </span>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n\n          {/* Emergency Contact */}\n          <div className=\"card\">\n            <div className=\"card-header\">\n              <div className=\"flex items-center space-x-3\">\n                <Shield className=\"h-5 w-5 text-gray-400\" />\n                <h3 className=\"text-lg font-medium text-gray-900\">Emergency Contact</h3>\n              </div>\n            </div>\n            <div className=\"card-content p-6 space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700\">\n                  Contact Name\n                </label>\n                <input\n                  type=\"text\"\n                  {...register('emergencyContact.name')}\n                  className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n                  placeholder=\"Emergency contact's name\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700\">\n                  Relationship\n                </label>\n                <input\n                  type=\"text\"\n                  {...register('emergencyContact.relationship')}\n                  className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n                  placeholder=\"e.g., Spouse, Parent, Sibling\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700\">\n                  Phone Number\n                </label>\n                <input\n                  type=\"tel\"\n                  {...register('emergencyContact.phone', {\n                    validate: (value) => !value || isValidPhone(value) || 'Please enter a valid phone number'\n                  })}\n                  className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n                  placeholder=\"Phone number\"\n                />\n                {errors.emergencyContact?.phone && (\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.emergencyContact.phone.message}</p>\n                )}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700\">\n                  Email (Optional)\n                </label>\n                <input\n                  type=\"email\"\n                  {...register('emergencyContact.email', {\n                    validate: (value) => !value || isValidEmail(value) || 'Please enter a valid email address'\n                  })}\n                  className=\"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500\"\n                  placeholder=\"email@example.com\"\n                />\n                {errors.emergencyContact?.email && (\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.emergencyContact.email.message}</p>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Form Actions */}\n        <div className=\"flex justify-end space-x-3\">\n          {userProfile && (\n            <button\n              type=\"button\"\n              onClick={handleCancel}\n              className=\"btn-secondary\"\n            >\n              Cancel\n            </button>\n          )}\n          <button\n            type=\"submit\"\n            className=\"btn-primary inline-flex items-center space-x-2\"\n          >\n            <Save className=\"h-4 w-4\" />\n            <span>{userProfile ? 'Update' : 'Create'} Profile</span>\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n","import React from 'react';\nimport { Routes, Route, Navigate } from 'react-router-dom';\nimport { Layout } from '@/components/layout/Layout';\nimport { Dashboard } from '@/pages/Dashboard';\nimport { Medications } from '@/pages/Medications';\nimport { Inventory } from '@/pages/Inventory';\nimport { Calendar } from '@/pages/Calendar';\nimport { Analytics } from '@/pages/Analytics';\nimport { Settings } from '@/pages/Settings';\nimport { Reminders } from '@/pages/Reminders';\nimport { Reports } from '@/pages/Reports';\nimport { HealthProfile } from '@/pages/HealthProfile';\n// import { AdminIntegration } from '@/components/admin/AdminIntegration'; // DISABLED\nimport { useMedicationStore } from '@/store';\n\nfunction App() {\n  const { userProfile } = useMedicationStore();\n\n  // Initialize user profile if it doesn't exist\n  React.useEffect(() => {\n    if (!userProfile) {\n      // We'll show a welcome screen or automatically create a basic profile\n      // For now, let's create a default profile\n    }\n  }, [userProfile]);\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Layout>\n        <Routes>\n          <Route path=\"/\" element={<Navigate to=\"/dashboard\" replace />} />\n          <Route path=\"/dashboard\" element={<Dashboard />} />\n          <Route path=\"/medications\" element={<Medications />} />\n          <Route path=\"/inventory\" element={<Inventory />} />\n          <Route path=\"/calendar\" element={<Calendar />} />\n          <Route path=\"/analytics\" element={<Analytics />} />\n          <Route path=\"/settings\" element={<Settings />} />\n          <Route path=\"/reminders\" element={<Reminders />} />\n          <Route path=\"/reports\" element={<Reports />} />\n          <Route path=\"/profile\" element={<HealthProfile />} />\n          <Route path=\"*\" element={<Navigate to=\"/dashboard\" replace />} />\n        </Routes>\n      </Layout>\n      \n      {/* Hidden Admin Integration - tracks UI sequences for admin access */}\n      {/* <AdminIntegration /> */}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react'\nimport ReactDOM from 'react-dom/client'\nimport { HashRouter } from 'react-router-dom'\nimport { Toaster } from 'react-hot-toast'\nimport App from './App.tsx'\nimport './index.css'\n\n// Development console welcome message\nif (import.meta.env.DEV) {\n  console.log('%c MedTrack - Enterprise Medical Analytics Platform', 'color: #3b82f6; font-size: 16px; font-weight: bold;');\n  console.log('%c ADVANCED ADMIN PANEL - FULLY FUNCTIONAL & SECURE!', 'color: #10b981; font-size: 14px; font-weight: bold;');\n  console.log('%c Enterprise Security Features:', 'color: #6b7280; font-size: 12px; font-weight: bold;');\n  console.log('%c   AES-256 Encryption  JWT Tokens  Rate Limiting  Audit Logging', 'color: #374151; font-size: 10px;');\n  console.log('%c Advanced Analytics Engine:', 'color: #6b7280; font-size: 12px; font-weight: bold;');\n  console.log('%c   ML Predictions  Real-time Monitoring  Statistical Analysis  Data Visualization', 'color: #374151; font-size: 10px;');\n  console.log('%c Quick Access Methods:', 'color: #f59e0b; font-size: 12px; font-weight: bold;');\n  console.log('%c   adminHelpers.enterAdmin() - Instant access', 'color: #374151; font-size: 11px;');\n  console.log('%c   Ctrl+Alt+A - Quick shortcut', 'color: #374151; font-size: 11px;');\n  console.log('%c   Ctrl+Shift+Alt+A - Emergency access', 'color: #374151; font-size: 11px;');\n  console.log('%c UI Sequence (Advanced):', 'color: #6b7280; font-size: 12px;');\n  console.log('%c  Click: Logo  Settings  Medications  Calendar  Dashboard  Logo', 'color: #374151; font-size: 10px;');\n  console.log('%c Features: 6 Admin Tabs  Security Center  ML Insights  Real-time Monitoring', 'color: #8b5cf6; font-size: 11px; font-weight: bold;');\n  console.log('%c ENTERPRISE READY - Type \"adminHelpers.enterAdmin()\" now!', 'color: #f59e0b; font-size: 13px; font-weight: bold;');\n  console.log('');\n}\n\nReactDOM.createRoot(document.getElementById('root')!).render(\n  <React.StrictMode>\n    <HashRouter>\n      <App />\n      <Toaster \n        position=\"top-right\"\n        toastOptions={{\n          duration: 4000,\n          style: {\n            background: '#363636',\n            color: '#fff',\n          },\n          success: {\n            duration: 3000,\n            iconTheme: {\n              primary: '#22c55e',\n              secondary: '#fff',\n            },\n          },\n          error: {\n            duration: 5000,\n            iconTheme: {\n              primary: '#ef4444',\n              secondary: '#fff',\n            },\n          },\n        }}\n      />\n    </HashRouter>\n  </React.StrictMode>,\n)\n"],"names":["f","require$$0","k","l","m","n","p","q","c","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","client","_extends","target","i","source","key","Action","PopStateEventType","createHashHistory","options","createHashLocation","window","globalHistory","pathname","search","hash","parsePath","createLocation","createHashHref","to","base","href","url","hashIndex","createPath","validateHashLocation","location","warning","getUrlBasedHistory","invariant","value","message","cond","createKey","getHistoryState","index","current","state","_ref","path","parsedPath","searchIndex","getLocation","createHref","validateLocation","v5Compat","action","listener","getIndex","handlePop","nextIndex","delta","history","push","historyState","error","replace","createURL","fn","ResultType","matchRoutes","routes","locationArg","basename","matchRoutesImpl","allowPartial","stripBasename","branches","flattenRoutes","rankRouteBranches","matches","decoded","decodePath","matchRouteBranch","parentsMeta","parentPath","flattenRoute","route","relativePath","meta","joinPaths","routesMeta","computeScore","_route$path","exploded","explodeOptionalSegments","segments","first","rest","isOptional","required","restExploded","result","subpath","compareIndexes","paramRe","dynamicSegmentValue","indexRouteValue","emptySegmentValue","staticSegmentValue","splatPenalty","isSplat","initialScore","s","score","segment","a","branch","matchedParams","matchedPathname","end","remainingPathname","match","matchPath","normalizePathname","pattern","matcher","compiledParams","compilePath","pathnameBase","captureGroups","memo","paramName","splatValue","caseSensitive","params","regexpSource","_","v","startIndex","nextChar","resolvePath","fromPathname","toPathname","resolvePathname","normalizeSearch","normalizeHash","getInvalidPathError","char","field","dest","getPathContributingMatches","getResolveToMatches","v7_relativeSplatPath","pathMatches","idx","resolveTo","toArg","routePathnames","locationPathname","isPathRelative","isEmptyPath","from","routePathnameIndex","toSegments","hasExplicitTrailingSlash","hasCurrentTrailingSlash","paths","isRouteErrorResponse","validMutationMethodsArr","validRequestMethodsArr","DataRouterContext","React.createContext","DataRouterStateContext","NavigationContext","LocationContext","RouteContext","RouteErrorContext","useHref","_temp","relative","useInRouterContext","UNSAFE_invariant","navigator","React.useContext","useResolvedPath","joinedPathname","useLocation","useIsomorphicLayoutEffect","cb","React.useLayoutEffect","useNavigate","isDataRoute","useNavigateStable","useNavigateUnstable","dataRouterContext","future","routePathnamesJson","UNSAFE_getResolveToMatches","activeRef","React.useRef","React.useCallback","_temp2","React.useMemo","useRoutes","useRoutesImpl","dataRouterState","parentMatches","routeMatch","parentParams","parentPathnameBase","locationFromContext","_parsedLocationArg$pa","parsedLocationArg","parentSegments","renderedMatches","_renderMatches","React.createElement","DefaultErrorComponent","useRouteError","stack","preStyles","devInfo","React.Fragment","defaultErrorElement","RenderErrorBoundary","React.Component","props","errorInfo","RenderedRoute","routeContext","children","_dataRouterState","_future","errors","errorIndex","renderFallback","fallbackIndex","loaderData","needsToRunLoader","outlet","shouldRenderHydrateFallback","errorElement","hydrateFallbackElement","warningOnce","getChildren","DataRouterHook","DataRouterStateHook","useDataRouterContext","hookName","ctx","useDataRouterState","useRouteContext","useCurrentRouteId","thisRoute","_state$errors","routeId","router","id","alreadyWarned$1","logV6DeprecationWarnings","renderFuture","routerFuture","Navigate","_ref4","isStatic","navigate","jsonPath","React.useEffect","Route","_props","Router","_ref5","basenameProp","locationProp","navigationType","staticProp","navigationContext","locationContext","trailingPathname","Routes","_ref6","createRoutesFromChildren","React.Children","element","React.isValidElement","treePath","_objectWithoutPropertiesLoose","excluded","sourceKeys","isModifiedEvent","event","shouldProcessLinkClick","_excluded","_excluded2","REACT_ROUTER_VERSION","ViewTransitionContext","START_TRANSITION","startTransitionImpl","React","HashRouter","historyRef","setStateImpl","React.useState","v7_startTransition","setState","newState","UNSAFE_logV6DeprecationWarnings","isBrowser","ABSOLUTE_URL_REGEX","Link","React.forwardRef","_ref7","ref","onClick","reloadDocument","preventScrollReset","viewTransition","UNSAFE_NavigationContext","absoluteHref","isExternal","currentUrl","targetUrl","internalOnClick","useLinkClickHandler","handleClick","NavLink","_ref8","ariaCurrentProp","classNameProp","styleProp","routerState","UNSAFE_DataRouterStateContext","isTransitioning","useViewTransitionState","nextLocationPathname","endSlashPosition","isActive","isPending","renderProps","ariaCurrent","className","style","UNSAFE_DataRouterContext","replaceProp","opts","vtContext","currentPath","nextPath","t","o","r","u","j","Z","W","E","re","H","Y","Q","S","se","V","te","oe","ee","T","ie","P","ce","w","ne","A","X","R","z","O","K","B","I","de","M","me","le","C","pe","Te","fe","F","ue","ge","he","L","ye","be","U","Se","Ae","xe","Pe","$","b.createElement","Re","Ee","ve","De","Oe","J","Ie","ke","G","N","y.memo","y.createElement","y.Fragment","Ve","x.createElement","we","x.useCallback","Me","Ce","_e","D","Fe","zt","defaultAttributes","toKebabCase","string","createLucideIcon","iconName","iconNode","Component","forwardRef","color","size","strokeWidth","absoluteStrokeWidth","createElement","tag","attrs","Activity","AlertCircle","AlertTriangle","BarChart3","Bell","Brain","Calendar","CheckCircle2","CheckCircle","Check","ChevronLeft","ChevronRight","Clock","Coffee","Database","Download","FileText","Filter","Heart","Home","Lightbulb","Loader","Mail","MapPin","Menu","MessageSquare","Minus","MoreVertical","Package","Pen","Phone","Pill","Play","Plus","RefreshCw","Save","Search","Settings","ShieldAlert","Shield","ShoppingCart","Star","Target","ToggleLeft","ToggleRight","Trash2","TrendingDown","TrendingUp","Upload","User","XCircle","Zap","cn","inputs","twMerge","clsx","generateId","isToday","date","isDateToday","isSameDay","date1","date2","isDateSame","formatDate","formatString","dateObj","format","formatTime","use24Hour","isValidEmail","email","isValidPhone","phone","generateRandomColor","colors","calculateAdherence","taken","total","percentage","getAdherenceColor","formatDosage","dosage","unit","formatPillDisplay","medication","defaultDoseConfig","_a","config","_b","pillDescriptions","component","pillConfig","quantity","strength","totalDose","totalUnit","formatPillDisplayShort","totalPills","sum","getPillComponents","comp","formatFrequency","frequency","filterMedicationsBySearch","medications","searchTerm","term","med","downloadFile","data","filename","type","blob","link","generateCSV","headers","keys","csvHeaders","csvRows","row","getRiskLevel","category","getDependencyRiskCategory","medicationName","name","calculateCyclicDose","baseDose","cyclicPattern","currentDate","startDate","daysDiff","totalCycleDuration","cycle","cyclePosition","currentDay","calculateTaperingDose","taperingSchedule","pausedDate","endDate","totalDays","applicableStep","step","progress","exponentialProgress","taperedDose","adjustDoseForMultiplePills","targetDose","availablePills","bestCombination","minDifference","pill","wholePills","halfPills","achievableDose","difference","calculatePillCountsForDose","pillCounts","remainingDose","formatPillCountsForTapering","descriptions","pillConfigId","count","countStr","generatePsychologicalMessage","personalizedData","approaches","baseMessage","calculateRemainingDosesForDay","todaysLogs","totalDoses","log","takenDoses","remaining","completed","getProgressDisplayText","calculateDependencyRisk","medicationLogs","timeWindow","medicationStartDate","gracePeriodDays","recentLogs","logDate","riskScore","riskFactors","recommendations","baseCategoryRisk","daysSinceStart","reductionFactor","dosages","prescribedDose","dose","expectedDaily","dailyGroups","acc","uniqueDays","excessiveDays","detectBehaviorPatterns","_medication","_timeWindow","patterns","dayOfWeek","timeDifferences","time","avgTime","navigation","secondaryNavigation","Sidebar","isOpen","onClose","NavItem","item","testId","jsxs","jsx","Fragment","createStoreImpl","createState","listeners","partial","nextState","previousState","getState","api","initialState","createStore","is","x","y","objectIs","useState","useEffect","useLayoutEffect","useDebugValue","useSyncExternalStore$2","subscribe","getSnapshot","_useState","inst","forceUpdate","checkIfSnapshotChanged","latestGetSnapshot","nextValue","useSyncExternalStore$1","shim","useSyncExternalStoreShim_production","shimModule","require$$1","useSyncExternalStore","useRef","useMemo","withSelector_production","getServerSnapshot","selector","isEqual","instRef","memoizedSelector","nextSnapshot","hasMemo","memoizedSnapshot","currentSelection","memoizedSelection","nextSelection","maybeGetServerSnapshot","withSelectorModule","ReactExports","useSyncExternalStoreWithSelector","useSyncExternalStoreExports","identity","arg","useStore","equalityFn","slice","createImpl","useBoundStore","create","createJSONStorage","getStorage","storage","parse","str2","str","newValue","toThenable","input","onFulfilled","_onRejected","_onFulfilled","onRejected","oldImpl","baseOptions","set","get","persistedState","currentState","hasHydrated","hydrationListeners","finishHydrationListeners","args","thenableSerialize","setItem","errorInSync","thenable","serializedValue","savedSetState","configResult","stateFromStorage","hydrate","postRehydrationCallback","storageValue","deserializedStorageValue","migratedState","_a2","newOptions","newImpl","migrationResult","migrated","persistImpl","persist","DependencePreventionService","riskCategory","timeline","usagePatterns","prevention","currentDuration","taperingAssessment","newAlerts","now","start","recentPatterns","avgCraving","avgAnxiety","doses","firstHalf","secondHalf","avgFirst","escalationRate","effectivenessRatings","rating","avgSecond","declineRate","doseEscalation","alerts","currentDose","schedules","steps","week","__publicField","MEDICATION_DATABASE","searchMedicationDatabase","query","brand","_c","getMedicationByName","searchName","generateTaperingPlan","currentUnit","tapering","dailyReduction","newDose","currentStepDose","stepsPerWeek","totalSteps","daysFromStart","baseWarnings","riskSpecificWarnings","generateIntelligentTaperingRecommendation","userMedication","monthsOnMedication","baseTapering","adjustedDurationWeeks","adjustedReductionPercent","suggestedMethod","averageDose","generateEnhancedTaperingPlan","customOptions","intelligentRec","finalPlan","schedule","suggestPauseDuration","withdrawalSeverity","pauseDays","getMedicationSuggestions","maxResults","initialUserProfile","useMedicationStore","medicationData","dependencyRiskCategory","riskLevel","updates","reminder","medicationId","notes","sideEffects","defaultConfig","inventoryUpdates","pillLog","reminderData","minutes","snoozeUntil","profileData","profile","days","logs","takenLogs","reminders","today","todayName","loading","filteredData","validation","existingNames","newMedications","warnings","dataType","dateRange","allData","backup","backupKeys","backupData","messageData","messageId","msg","adherenceData","messageContent","patternData","cyclicDosingPatterns","scheduleData","suggestedDays","pauseDuration","newEndDate","adjustments","updatedTapering","extensionDays","riskAssessment","factor","assessment","trigger","intervention","insights","highRiskMeds","adherenceScores","avgAdherence","configId","doseConfig","updatedDoseConfigs","pillLogs","totalExpected","totalTaken","adherencePercentage","partialDose","adherenceDetails","doseConfigId","latestLog","targetDoseConfig","totalAmount","commonUnit","updatedInventory","update","existingIndex","report","reportId","updatedPrevention","alertId","actionTaken","alert","reviewDate","pillConfigs","doseConfigs","pillInventory","Header","onMenuClick","getTodaysReminders","userProfile","currentTime","setCurrentTime","timer","upcomingReminders","reminderTime","hours","Layout","sidebarOpen","setSidebarOpen","MultiplePillQuickLog","onAction","logMultiplePillDose","pillsTaken","setPillsTaken","isLogging","setIsLogging","pillComponents","components","configurationKey","handlePillCountChange","change","prev","handleLogDose","toast","resetState","handleQuickTakeAll","allPillsState","getTotalTaken","getTotalExpected","expected","QuickMedicationLog","markMedicationTaken","markMedicationMissed","getCurrentDose","generateContextualMessage","addSmartMessage","logMedication","showDosageInput","setShowDosageInput","customDosage","setCustomDosage","showSkipReason","setShowSkipReason","skipReason","setSkipReason","isLoading","setIsLoading","showDoseWarning","setShowDoseWarning","warningMessage","setWarningMessage","displayDose","validateCustomDose","proposedDose","expectedDose","deviation","severity","hasConfiguredMultiplePills","handleTaken","actualDosage","handleSkipped","handleCustomDosage","confirmCustomDosage","getPsychologicalIcon","getMotivationalMessage","TodaysMedications","getTodaysLogs","smartMessages","todaysReminders","activeMedications","medicationsWithoutReminders","getTotalMedicationsForToday","loggedMedicationIds","urgentMessages","getTimeBasedGreeting","hour","getCompletedCount","getDailyCompletionStatus","getCompletionPercentage","motivationalMsg","completionStatus","progressText","fixKratomData","store","kratom","firstPillConfig","fixedDoseConfig","WithdrawalSymptomTracker","updateMedication","symptoms","setSymptoms","newSymptom","setNewSymptom","mood","setMood","setNotes","isSubmitting","setIsSubmitting","commonSymptoms","symptomList","activeWithdrawal","todaysSymptoms","symptom","updateSymptomSeverity","addCustomSymptom","removeSymptom","updated","getSymptomTrend","symptomHistory","recent","previous","getTrendIcon","trend","getSeverityColor","getMoodColor","handleSubmit","newSymptoms","updatedWithdrawal","updatedHistory","avgSeverity","Dashboard","getMissedDoses","getUpcomingRefills","getMedicationAdherence","getSmartInsights","getHighRiskMedications","markMessageAsRead","recentMissedDoses","upcomingRefills","smartInsights","priorityMessages","taperingMedications","withdrawalTrackingMedications","prnMedications","doseDeviationWarnings","processedLogIds","actualDose","absDeviation","recentLog","selectedWithdrawalMedication","setSelectedWithdrawalMedication","stats","stat","originalDose","daysElapsed","adherence","insight","isCheckBoxInput","isDateObject","isNullOrUndefined","isObjectType","isObject","getEventValue","getNodeParentName","isNameInFieldArray","names","isPlainObject","tempObject","prototypeCopy","isWeb","cloneObject","copy","isArray","isFileListInstance","isKey","isUndefined","val","compact","stringToPath","object","defaultValue","isBoolean","tempPath","length","lastIndex","objValue","EVENTS","VALIDATION_MODE","INPUT_VALIDATION_RULES","HookFormContext","getProxyFormState","formState","control","localProxyFormState","isRoot","_key","isString","generateWatchOutput","_names","formValues","isGlobal","fieldName","isPrimitive","deepEqual","object1","object2","_internal_visited","keys1","keys2","val1","val2","appendErrors","validateAllFieldCriteria","convertToArrayPayload","createSubject","_observers","observer","isEmptyObject","isFileInput","isFunction","isHTMLElement","owner","isMultipleSelect","isRadioInput","isRadioOrCheckbox","live","baseGet","updatePath","isEmptyArray","obj","unset","childObject","objectHasFunction","markFieldsDirty","fields","isParentNodeArray","getDirtyFieldsFromDefaultValues","dirtyFieldsFromValues","getDirtyFields","defaultValues","defaultResult","validResult","getCheckboxValue","values","option","getFieldValueAs","valueAsNumber","valueAsDate","setValueAs","defaultReturn","getRadioValue","getFieldValue","_f","getResolverOptions","fieldsNames","_fields","criteriaMode","shouldUseNativeValidation","isRegex","getRuleValue","rule","getValidationModes","mode","ASYNC_FUNCTION","hasPromiseValidation","fieldReference","validateFunction","hasValidation","isWatched","isBlurEvent","watchName","iterateFieldsByAction","abortEarly","currentField","schemaErrorLookup","foundError","shouldRenderFormState","formStateData","_proxyFormState","updateFormState","shouldSubscribeByName","signalName","exact","currentName","skipValidation","isTouched","isSubmitted","reValidateMode","unsetEmptyArray","updateFieldArrayRootError","fieldArrayErrors","isMessage","getValidateError","getValueAndMessage","validationData","validateField","disabledFieldNames","isFieldArray","refs","maxLength","minLength","min","max","validate","mount","inputValue","inputRef","setCustomValidity","isRadio","isCheckBox","isEmpty","appendErrorsCurry","getMinMaxMessage","exceedMax","maxLengthMessage","minLengthMessage","maxType","minType","exceedMin","maxOutput","minOutput","valueNumber","valueDate","convertTimeToDate","isTime","isWeek","maxLengthOutput","minLengthOutput","patternValue","validateError","validationResult","defaultOptions","createFormControl","_options","_formState","_defaultValues","_formValues","_state","delayErrorCallback","_proxySubscribeFormState","_subjects","shouldDisplayAllAssociatedErrors","debounce","callback","wait","_setValid","shouldUpdateValid","isValid","_runSchema","executeBuiltInValidation","_updateIsValidating","isValidating","_setFieldArray","method","shouldSetValues","shouldUpdateFieldsAndState","fieldValues","touchedFields","_getDirty","updateErrors","_setErrors","updateValidAndValue","shouldSkipSetValueAs","setFieldValue","updateTouchAndDirty","fieldValue","shouldDirty","shouldRender","shouldUpdateField","isPreviousDirty","output","isCurrentFieldPristine","isPreviousFieldTouched","shouldRenderByError","fieldState","previousFieldError","updatedFormState","executeSchemaAndUpdateState","shouldOnlyCheckValid","context","isFieldArrayRoot","isPromiseFunction","fieldError","_removeUnmounted","unregister","getValues","_getWatch","_getFieldArray","optionRef","checkboxRef","radioRef","setValues","fieldKey","setValue","cloneValue","onChange","isFieldValueUpdated","_updateIsFieldValueUpdated","validationModeBeforeSubmit","validationModeAfterSubmit","shouldSkipValidation","watched","previousErrorLookupResult","errorLookupResult","_focusInput","fieldNames","getFieldState","clearErrors","inputName","setError","currentError","currentRef","restOfErrorTree","watch","payload","_subscribe","_setFormState","_setDisabledField","disabled","register","disabledIsDefined","fieldRef","radioOrCheckbox","_focusError","_disableForm","onValid","onInvalid","onValidError","resetField","_reset","keepStateOptions","updatedValues","cloneUpdatedValues","isEmptyResetValues","fieldsToCheck","form","reset","setFocus","methods","useForm","_formControl","_values","formControl","sub","isDirty","MedicationModal","addMedication","isEditing","medicationSuggestions","setMedicationSuggestions","showSuggestions","setShowSuggestions","selectedMedicationData","setSelectedMedicationData","taperingPlan","setTaperingPlan","selectedColor","handleMedicationSearch","suggestions","handleMedicationSelect","suggestionName","plan","onSubmit","suggestion","TaperingPlanModal","intelligentRecommendation","setIntelligentRecommendation","selectedPlan","setSelectedPlan","customDuration","setCustomDuration","customReduction","setCustomReduction","customMethod","setCustomMethod","includeStabilization","setIncludeStabilization","setStartDate","doctorApproval","setDoctorApproval","understanding","setUnderstanding","intelligent","generateCustomPlan","getDisplayPlan","handleStartTapering","getRiskColor","reason","ConfirmDialog","onConfirm","title","confirmText","cancelText","variant","handleConfirm","MultiplePillSelector","addPillConfiguration","addDoseConfiguration","enableMultiplePills","calculateTotalDoseFromPills","setPillConfigs","doseComponents","setDoseComponents","addPillConfig","removePillConfig","updatePillConfig","updateDoseComponent","addDoseComponent","calculateTotalDose","handleSave","newPillConfigs","_d","SideEffectReportModal","formData","setFormData","currentStep","setCurrentStep","commonSideEffects","sideEffectReport","updatedReports","resetForm","nextStep","prevStep","effect","label","desc","WithdrawalTrackingModal","eventData","setEventData","currentSymptom","setCurrentSymptom","newIntervention","setNewIntervention","newPreventionStrategy","setNewPreventionStrategy","managementStrategies","addSymptom","updateSymptom","addIntervention","addPreventionStrategy","withdrawalEvent","existingEventIndex","getSymptomSeverityColor","strategy","strategies","DependencyPreventionModal","activeTab","setActiveTab","currentAssessment","taperingRecommendation","unacknowledgedAlerts","acknowledgedAlerts","handleAcknowledgeAlert","updatedAlerts","handleUpdatePreventionData","getPriorityColor","priority","getCurrentDuration","Icon","badge","resource","Medications","deleteMedication","toggleMedicationActive","pauseTaperingSchedule","resumeTaperingSchedule","adjustTaperingSchedule","updateRiskAssessment","isModalOpen","setIsModalOpen","editingMedication","setEditingMedication","setSearchTerm","selectedCategory","setSelectedCategory","confirmDelete","setConfirmDelete","taperingModalOpen","setTaperingModalOpen","taperingMedication","setTaperingMedication","pauseModalOpen","setPauseModalOpen","pauseMedication","setPauseMedication","multiplePillsModalOpen","setMultiplePillsModalOpen","multiplePillsMedication","setMultiplePillsMedication","sideEffectModalOpen","setSideEffectModalOpen","sideEffectMedication","setSideEffectMedication","withdrawalModalOpen","setWithdrawalModalOpen","withdrawalMedication","setWithdrawalMedication","dependencyModalOpen","setDependencyModalOpen","dependencyMedication","setDependencyMedication","filteredMedications","filtered","inactiveMedications","handleAddMedication","handleEditMedication","handleDeleteMedication","handleToggleActive","handleOpenTaperingPlan","handlePauseTapering","handleConfirmPause","handleOpenMultiplePills","handleCloseMultiplePills","handleOpenSideEffect","handleCloseSideEffect","handleOpenWithdrawal","handleCloseWithdrawal","handleOpenDependency","handleCloseDependency","handleResumeTapering","MedicationCard","showActions","setShowActions","getRiskIcon","Edit2","isTapering","isPaused","PersonalMedicationTracker","timeframeDays","cutoffDate","scheduledFrequency","dailyUsages","averageDailyUse","variance","coefficientOfVariation","usageConsistency","firstAvg","secondAvg","recentTrend","trendThreshold","totalExpectedDoses","adherenceRate","currentPillCount","usagePattern","tracking","adjustedUsage","daysUntilEmpty","estimatedEmptyDate","bufferDays","suggestedRefillDate","confidence","reasoning","optimisticUsage","pessimisticUsage","optimisticEmpty","pessimisticEmpty","optimisticRefill","pessimisticRefill","prediction","activeRefills","hasActiveRefill","refill","urgentThreshold","lowThreshold","refillThreshold","overdueRefills","oldestOverdue","delayDays","dailyUse","daysSupply","recommendedMinimumPills","currentLevel","reasonForRecommendation","dailyMap","timesPerDay","defaultDose","PersonalRefillService","trackingSettings","refillPredictions","ts","medicationAlerts","medRecommendations","predictions","urgentRefills","coordinationOpportunities","daysUntilRefill","pharmacyGroups","pharmacy","meds","medsNeedingRefill","pred","latestRefillDate","currentStock","userPreferences","averageDailyConsumption","consumptionVariability","daysUntilRunOut","baseRunOutDate","optimalOrderDate","alternatives","refillsThisWeek","daysUntil","pharmacyPreferences","groups","totalConsumption","daysCovered","dailyConsumptions","average","InventoryConfigModal","onSave","existingPharmacies","existingTracking","pharmacies","setPharmacies","setTrackingSettings","medicationsWithoutTracking","newTrackingSettings","createDefaultTracking","addPharmacy","newPharmacy","updatePharmacy","removePharmacy","updateTracking","PersonalMedicationDashboard","setInsights","isConfigModalOpen","setIsConfigModalOpen","savedPharmacies","savedTracking","analyzeInventoryStatus","trackableMedications","hasInventory","analysis","newInsights","rec","validPredictions","refillSchedule","opportunity","totalMedications","medicationsWithLowStock","getInsightIcon","getInsightBorderColor","handleInsightAction","medicationSection","handleConfigSave","newPharmacies","Inventory","selectedDate","setSelectedDate","viewMode","setViewMode","selectedMedication","setSelectedMedication","calendarEvents","events","addDays","dayName","filteredEvents","selectedDateEvents","monthDays","startOfWeek","endOfWeek","eachDayOfInterval","weekDays","handleDateSelect","handleMedicationAction","navigateCalendar","direction","EventIcon","status","CalendarDay","isCurrentMonth","dayEvents","isSelected","isCurrentDay","day","isSameMonth","CalendarIcon","ErrorBoundary","ChartErrorBoundary","Analytics","setDateRange","subDays","dayLogs","takenCount","missedCount","totalCount","adherencePercent","safeAdherence","safeTaken","safeMissed","medicationAdherence","missedDoses","safeTotalDoses","safeTakenDoses","safeMissedDoses","safeAdherencePercentage","overallStats","overallAdherence","avgDailyMeds","previousPeriodLogs","startPrevious","endPrevious","previousTaken","previousTotal","previousAdherence","safeOverallAdherence","safeTotalCount","safeTakenCount","safeMissedCount","safeAvgDailyMeds","safeTrend","medicationChartData","adherenceDistribution","withdrawalProgressData","withdrawalHistory","activeWithdrawals","completedWithdrawals","currentProgress","currentEvent","resolvedSymptoms","totalSymptoms","progressPercent","sideEffectTrendsData","allSideEffects","reportDate","severityGroups","bodySystemGroups","dailySideEffects","dayReports","topSideEffects","system","dependencyRiskData","riskDistribution","medicationsWithPrevention","alertCounts","unacknowledged","taperingRecommendations","risk","handleExportData","ResponsiveContainer","LineChart","CartesianGrid","XAxis","YAxis","Tooltip","Line","PieChart","Pie","percent","entry","Cell","BarChart","Bar","ExportModal","exportDataWithOptions","exportToCSV","exportToPDF","exportOptions","setExportOptions","isExporting","setIsExporting","handleExport","mimeType","dateStr","SettingsIcon","ImportModal","importDataWithValidation","validateImportData","file","setFile","importData","setImportData","setValidation","isImporting","setIsImporting","setIsValidating","importResult","setImportResult","fileInputRef","handleFileSelect","selectedFile","reader","jsonData","handleImport","handleClose","getDataSummary","summary","updateProfile","createProfile","clearAllData","showClearDataDialog","setShowClearDataDialog","showExportModal","setShowExportModal","showImportModal","setShowImportModal","_g","_h","_j","_i","_l","_k","_n","_m","_p","_o","_r","_q","_t","_s","_v","_u","handleClearData","tabs","tab","DAYS_OF_WEEK","ReminderModal","addReminder","updateReminder","selectedDays","selectedMedicationId","handleDayToggle","currentDays","newDays","setQuickSchedule","getFrequencyText","psychMessage","SmartAdherenceService","daysToAnalyze","missedLogs","consecutiveMissedDoses","missedDosePattern","frequentMissTimeSlots","predictedMissRisk","sortedLogs","consecutiveMissed","timeSlots","timeSlot","threshold","slot","totalMissed","medicationRiskLevel","riskPercentage","lastLog","hoursSinceLastDose","notifications","medicationsAtRisk","riskCounts","overallRisk","allRecommendations","topRecommendations","urgentActions","Reminders","deleteReminder","toggleReminderActive","snoozeReminder","editingReminder","setEditingReminder","showInsights","setShowInsights","activeReminders","inactiveReminders","adherencePatterns","adherenceInsights","smartNotifications","getReminderMedication","handleAddReminder","handleEditReminder","handleDeleteReminder","handleSnooze","formatDays","dayMap","ReminderCard","notification","recommendation","Reports","selectedReport","setSelectedReport","generateAdherenceReport","generateSideEffectsReport","sideEffectsMap","adherenceReports","sideEffectsReports","missedDosesCount","totalSideEffects","handleExportAdherenceCSV","csvData","handleExportSideEffectsCSV","handleExportSummaryPDF","ReportTab","best","common","HealthProfile","setIsEditing","newAllergy","setNewAllergy","newCondition","setNewCondition","allergies","conditions","highRiskMedications","medicationCategories","handleAddAllergy","handleRemoveAllergy","handleAddCondition","handleRemoveCondition","handleCancel","allergy","condition","App","ReactDOM","Toaster"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,65,66,67,68,69,70,71,83]}